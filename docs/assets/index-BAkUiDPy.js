var Gk=Object.defineProperty;var qk=(t,e,r)=>e in t?Gk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ue=(t,e,r)=>qk(t,typeof e!="symbol"?e+"":e,r);function Kk(t,e){for(var r=0;r<e.length;r++){const s=e[r];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in t)){const i=Object.getOwnPropertyDescriptor(s,n);i&&Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var Zt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Jk(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var n=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(r,s,n.get?n:{enumerable:!0,get:function(){return t[s]}})}),r}var Py={exports:{}},su={},Dy={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ha=Symbol.for("react.element"),Qk=Symbol.for("react.portal"),Zk=Symbol.for("react.fragment"),e2=Symbol.for("react.strict_mode"),t2=Symbol.for("react.profiler"),r2=Symbol.for("react.provider"),s2=Symbol.for("react.context"),n2=Symbol.for("react.forward_ref"),i2=Symbol.for("react.suspense"),o2=Symbol.for("react.memo"),a2=Symbol.for("react.lazy"),wp=Symbol.iterator;function l2(t){return t===null||typeof t!="object"?null:(t=wp&&t[wp]||t["@@iterator"],typeof t=="function"?t:null)}var Oy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ly=Object.assign,Ry={};function no(t,e,r){this.props=t,this.context=e,this.refs=Ry,this.updater=r||Oy}no.prototype.isReactComponent={};no.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};no.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ay(){}Ay.prototype=no.prototype;function xf(t,e,r){this.props=t,this.context=e,this.refs=Ry,this.updater=r||Oy}var vf=xf.prototype=new Ay;vf.constructor=xf;Ly(vf,no.prototype);vf.isPureReactComponent=!0;var _p=Array.isArray,Iy=Object.prototype.hasOwnProperty,bf={current:null},$y={key:!0,ref:!0,__self:!0,__source:!0};function Fy(t,e,r){var s,n={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Iy.call(e,s)&&!$y.hasOwnProperty(s)&&(n[s]=e[s]);var a=arguments.length-2;if(a===1)n.children=r;else if(1<a){for(var l=Array(a),d=0;d<a;d++)l[d]=arguments[d+2];n.children=l}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)n[s]===void 0&&(n[s]=a[s]);return{$$typeof:Ha,type:t,key:i,ref:o,props:n,_owner:bf.current}}function c2(t,e){return{$$typeof:Ha,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function wf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ha}function u2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var kp=/\/+/g;function nd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?u2(""+t.key):e.toString(36)}function sc(t,e,r,s,n){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ha:case Qk:o=!0}}if(o)return o=t,n=n(o),t=s===""?"."+nd(o,0):s,_p(n)?(r="",t!=null&&(r=t.replace(kp,"$&/")+"/"),sc(n,e,r,"",function(d){return d})):n!=null&&(wf(n)&&(n=c2(n,r+(!n.key||o&&o.key===n.key?"":(""+n.key).replace(kp,"$&/")+"/")+t)),e.push(n)),1;if(o=0,s=s===""?".":s+":",_p(t))for(var a=0;a<t.length;a++){i=t[a];var l=s+nd(i,a);o+=sc(i,e,r,l,n)}else if(l=l2(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=s+nd(i,a++),o+=sc(i,e,r,l,n);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function vl(t,e,r){if(t==null)return t;var s=[],n=0;return sc(t,s,"","",function(i){return e.call(r,i,n++)}),s}function d2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var zt={current:null},nc={transition:null},h2={ReactCurrentDispatcher:zt,ReactCurrentBatchConfig:nc,ReactCurrentOwner:bf};function zy(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:vl,forEach:function(t,e,r){vl(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return vl(t,function(){e++}),e},toArray:function(t){return vl(t,function(e){return e})||[]},only:function(t){if(!wf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ce.Component=no;Ce.Fragment=Zk;Ce.Profiler=t2;Ce.PureComponent=xf;Ce.StrictMode=e2;Ce.Suspense=i2;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h2;Ce.act=zy;Ce.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=Ly({},t.props),n=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=bf.current),e.key!==void 0&&(n=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Iy.call(e,l)&&!$y.hasOwnProperty(l)&&(s[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){a=Array(l);for(var d=0;d<l;d++)a[d]=arguments[d+2];s.children=a}return{$$typeof:Ha,type:t.type,key:n,ref:i,props:s,_owner:o}};Ce.createContext=function(t){return t={$$typeof:s2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:r2,_context:t},t.Consumer=t};Ce.createElement=Fy;Ce.createFactory=function(t){var e=Fy.bind(null,t);return e.type=t,e};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(t){return{$$typeof:n2,render:t}};Ce.isValidElement=wf;Ce.lazy=function(t){return{$$typeof:a2,_payload:{_status:-1,_result:t},_init:d2}};Ce.memo=function(t,e){return{$$typeof:o2,type:t,compare:e===void 0?null:e}};Ce.startTransition=function(t){var e=nc.transition;nc.transition={};try{t()}finally{nc.transition=e}};Ce.unstable_act=zy;Ce.useCallback=function(t,e){return zt.current.useCallback(t,e)};Ce.useContext=function(t){return zt.current.useContext(t)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(t){return zt.current.useDeferredValue(t)};Ce.useEffect=function(t,e){return zt.current.useEffect(t,e)};Ce.useId=function(){return zt.current.useId()};Ce.useImperativeHandle=function(t,e,r){return zt.current.useImperativeHandle(t,e,r)};Ce.useInsertionEffect=function(t,e){return zt.current.useInsertionEffect(t,e)};Ce.useLayoutEffect=function(t,e){return zt.current.useLayoutEffect(t,e)};Ce.useMemo=function(t,e){return zt.current.useMemo(t,e)};Ce.useReducer=function(t,e,r){return zt.current.useReducer(t,e,r)};Ce.useRef=function(t){return zt.current.useRef(t)};Ce.useState=function(t){return zt.current.useState(t)};Ce.useSyncExternalStore=function(t,e,r){return zt.current.useSyncExternalStore(t,e,r)};Ce.useTransition=function(){return zt.current.useTransition()};Ce.version="18.3.1";Dy.exports=Ce;var N=Dy.exports;const nu=Xk(N),f2=Kk({__proto__:null,default:nu},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m2=N,p2=Symbol.for("react.element"),g2=Symbol.for("react.fragment"),y2=Object.prototype.hasOwnProperty,x2=m2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,v2={key:!0,ref:!0,__self:!0,__source:!0};function Wy(t,e,r){var s,n={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)y2.call(e,s)&&!v2.hasOwnProperty(s)&&(n[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)n[s]===void 0&&(n[s]=e[s]);return{$$typeof:p2,type:t,key:i,ref:o,props:n,_owner:x2.current}}su.Fragment=g2;su.jsx=Wy;su.jsxs=Wy;Py.exports=su;var c=Py.exports,By={exports:{}},lr={},Uy={exports:{}},Hy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(X,re){var oe=X.length;X.push(re);e:for(;0<oe;){var xe=oe-1>>>1,ve=X[xe];if(0<n(ve,re))X[xe]=re,X[oe]=ve,oe=xe;else break e}}function r(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var re=X[0],oe=X.pop();if(oe!==re){X[0]=oe;e:for(var xe=0,ve=X.length,J=ve>>>1;xe<J;){var Q=2*(xe+1)-1,U=X[Q],be=Q+1,A=X[be];if(0>n(U,oe))be<ve&&0>n(A,U)?(X[xe]=A,X[be]=oe,xe=be):(X[xe]=U,X[Q]=oe,xe=Q);else if(be<ve&&0>n(A,oe))X[xe]=A,X[be]=oe,xe=be;else break e}}return re}function n(X,re){var oe=X.sortIndex-re.sortIndex;return oe!==0?oe:X.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],d=[],h=1,m=null,p=3,x=!1,b=!1,k=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(X){for(var re=r(d);re!==null;){if(re.callback===null)s(d);else if(re.startTime<=X)s(d),re.sortIndex=re.expirationTime,e(l,re);else break;re=r(d)}}function C(X){if(k=!1,S(X),!b)if(r(l)!==null)b=!0,pe(E);else{var re=r(d);re!==null&&_e(C,re.startTime-X)}}function E(X,re){b=!1,k&&(k=!1,v(O),O=-1),x=!0;var oe=p;try{for(S(re),m=r(l);m!==null&&(!(m.expirationTime>re)||X&&!I());){var xe=m.callback;if(typeof xe=="function"){m.callback=null,p=m.priorityLevel;var ve=xe(m.expirationTime<=re);re=t.unstable_now(),typeof ve=="function"?m.callback=ve:m===r(l)&&s(l),S(re)}else s(l);m=r(l)}if(m!==null)var J=!0;else{var Q=r(d);Q!==null&&_e(C,Q.startTime-re),J=!1}return J}finally{m=null,p=oe,x=!1}}var D=!1,P=null,O=-1,B=5,M=-1;function I(){return!(t.unstable_now()-M<B)}function H(){if(P!==null){var X=t.unstable_now();M=X;var re=!0;try{re=P(!0,X)}finally{re?ce():(D=!1,P=null)}}else D=!1}var ce;if(typeof _=="function")ce=function(){_(H)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,de=we.port2;we.port1.onmessage=H,ce=function(){de.postMessage(null)}}else ce=function(){w(H,0)};function pe(X){P=X,D||(D=!0,ce())}function _e(X,re){O=w(function(){X(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){b||x||(b=!0,pe(E))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(X){switch(p){case 1:case 2:case 3:var re=3;break;default:re=p}var oe=p;p=re;try{return X()}finally{p=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,re){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var oe=p;p=X;try{return re()}finally{p=oe}},t.unstable_scheduleCallback=function(X,re,oe){var xe=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?xe+oe:xe):oe=xe,X){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=oe+ve,X={id:h++,callback:re,priorityLevel:X,startTime:oe,expirationTime:ve,sortIndex:-1},oe>xe?(X.sortIndex=oe,e(d,X),r(l)===null&&X===r(d)&&(k?(v(O),O=-1):k=!0,_e(C,oe-xe))):(X.sortIndex=ve,e(l,X),b||x||(b=!0,pe(E))),X},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(X){var re=p;return function(){var oe=p;p=re;try{return X.apply(this,arguments)}finally{p=oe}}}})(Hy);Uy.exports=Hy;var b2=Uy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w2=N,ar=b2;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Vy=new Set,fa={};function si(t,e){Yi(t,e),Yi(t+"Capture",e)}function Yi(t,e){for(fa[t]=e,t=0;t<e.length;t++)Vy.add(e[t])}var ks=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qd=Object.prototype.hasOwnProperty,_2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sp={},jp={};function k2(t){return Qd.call(jp,t)?!0:Qd.call(Sp,t)?!1:_2.test(t)?jp[t]=!0:(Sp[t]=!0,!1)}function S2(t,e,r,s){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function j2(t,e,r,s){if(e===null||typeof e>"u"||S2(t,e,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Wt(t,e,r,s,n,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var jt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){jt[t]=new Wt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];jt[e]=new Wt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){jt[t]=new Wt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){jt[t]=new Wt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){jt[t]=new Wt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){jt[t]=new Wt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){jt[t]=new Wt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){jt[t]=new Wt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){jt[t]=new Wt(t,5,!1,t.toLowerCase(),null,!1,!1)});var _f=/[\-:]([a-z])/g;function kf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(_f,kf);jt[e]=new Wt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(_f,kf);jt[e]=new Wt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(_f,kf);jt[e]=new Wt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){jt[t]=new Wt(t,1,!1,t.toLowerCase(),null,!1,!1)});jt.xlinkHref=new Wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){jt[t]=new Wt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Sf(t,e,r,s){var n=jt.hasOwnProperty(e)?jt[e]:null;(n!==null?n.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(j2(e,r,n,s)&&(r=null),s||n===null?k2(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):n.mustUseProperty?t[n.propertyName]=r===null?n.type===3?!1:"":r:(e=n.attributeName,s=n.attributeNamespace,r===null?t.removeAttribute(e):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,s?t.setAttributeNS(s,e,r):t.setAttribute(e,r))))}var Es=w2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bl=Symbol.for("react.element"),Si=Symbol.for("react.portal"),ji=Symbol.for("react.fragment"),jf=Symbol.for("react.strict_mode"),Zd=Symbol.for("react.profiler"),Yy=Symbol.for("react.provider"),Gy=Symbol.for("react.context"),Nf=Symbol.for("react.forward_ref"),eh=Symbol.for("react.suspense"),th=Symbol.for("react.suspense_list"),Cf=Symbol.for("react.memo"),Vs=Symbol.for("react.lazy"),qy=Symbol.for("react.offscreen"),Np=Symbol.iterator;function No(t){return t===null||typeof t!="object"?null:(t=Np&&t[Np]||t["@@iterator"],typeof t=="function"?t:null)}var rt=Object.assign,id;function zo(t){if(id===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);id=e&&e[1]||""}return`
`+id+t}var od=!1;function ad(t,e){if(!t||od)return"";od=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var s=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){s=d}t.call(e.prototype)}else{try{throw Error()}catch(d){s=d}t()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),i=s.stack.split(`
`),o=n.length-1,a=i.length-1;1<=o&&0<=a&&n[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(n[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||n[o]!==i[a]){var l=`
`+n[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{od=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?zo(t):""}function N2(t){switch(t.tag){case 5:return zo(t.type);case 16:return zo("Lazy");case 13:return zo("Suspense");case 19:return zo("SuspenseList");case 0:case 2:case 15:return t=ad(t.type,!1),t;case 11:return t=ad(t.type.render,!1),t;case 1:return t=ad(t.type,!0),t;default:return""}}function rh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ji:return"Fragment";case Si:return"Portal";case Zd:return"Profiler";case jf:return"StrictMode";case eh:return"Suspense";case th:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Gy:return(t.displayName||"Context")+".Consumer";case Yy:return(t._context.displayName||"Context")+".Provider";case Nf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Cf:return e=t.displayName||null,e!==null?e:rh(t.type)||"Memo";case Vs:e=t._payload,t=t._init;try{return rh(t(e))}catch{}}return null}function C2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rh(e);case 8:return e===jf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function mn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ky(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function E2(t){var e=Ky(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return n.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function wl(t){t._valueTracker||(t._valueTracker=E2(t))}function Xy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),s="";return t&&(s=Ky(t)?t.checked?"true":"false":t.value),t=s,t!==r?(e.setValue(t),!0):!1}function bc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function sh(t,e){var r=e.checked;return rt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Cp(t,e){var r=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;r=mn(e.value!=null?e.value:r),t._wrapperState={initialChecked:s,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Jy(t,e){e=e.checked,e!=null&&Sf(t,"checked",e,!1)}function nh(t,e){Jy(t,e);var r=mn(e.value),s=e.type;if(r!=null)s==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ih(t,e.type,r):e.hasOwnProperty("defaultValue")&&ih(t,e.type,mn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ep(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function ih(t,e,r){(e!=="number"||bc(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Wo=Array.isArray;function Ii(t,e,r,s){if(t=t.options,e){e={};for(var n=0;n<r.length;n++)e["$"+r[n]]=!0;for(r=0;r<t.length;r++)n=e.hasOwnProperty("$"+t[r].value),t[r].selected!==n&&(t[r].selected=n),n&&s&&(t[r].defaultSelected=!0)}else{for(r=""+mn(r),e=null,n=0;n<t.length;n++){if(t[n].value===r){t[n].selected=!0,s&&(t[n].defaultSelected=!0);return}e!==null||t[n].disabled||(e=t[n])}e!==null&&(e.selected=!0)}}function oh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return rt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Mp(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(G(92));if(Wo(r)){if(1<r.length)throw Error(G(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:mn(r)}}function Qy(t,e){var r=mn(e.value),s=mn(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),s!=null&&(t.defaultValue=""+s)}function Tp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Zy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ah(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Zy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var _l,ex=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,s,n){MSApp.execUnsafeLocalFunction(function(){return t(e,r,s,n)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(_l=_l||document.createElement("div"),_l.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=_l.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ma(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var qo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},M2=["Webkit","ms","Moz","O"];Object.keys(qo).forEach(function(t){M2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),qo[e]=qo[t]})});function tx(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||qo.hasOwnProperty(t)&&qo[t]?(""+e).trim():e+"px"}function rx(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var s=r.indexOf("--")===0,n=tx(r,e[r],s);r==="float"&&(r="cssFloat"),s?t.setProperty(r,n):t[r]=n}}var T2=rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lh(t,e){if(e){if(T2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function ch(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uh=null;function Ef(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var dh=null,$i=null,Fi=null;function Pp(t){if(t=Ga(t)){if(typeof dh!="function")throw Error(G(280));var e=t.stateNode;e&&(e=cu(e),dh(t.stateNode,t.type,e))}}function sx(t){$i?Fi?Fi.push(t):Fi=[t]:$i=t}function nx(){if($i){var t=$i,e=Fi;if(Fi=$i=null,Pp(t),e)for(t=0;t<e.length;t++)Pp(e[t])}}function ix(t,e){return t(e)}function ox(){}var ld=!1;function ax(t,e,r){if(ld)return t(e,r);ld=!0;try{return ix(t,e,r)}finally{ld=!1,($i!==null||Fi!==null)&&(ox(),nx())}}function pa(t,e){var r=t.stateNode;if(r===null)return null;var s=cu(r);if(s===null)return null;r=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(G(231,e,typeof r));return r}var hh=!1;if(ks)try{var Co={};Object.defineProperty(Co,"passive",{get:function(){hh=!0}}),window.addEventListener("test",Co,Co),window.removeEventListener("test",Co,Co)}catch{hh=!1}function P2(t,e,r,s,n,i,o,a,l){var d=Array.prototype.slice.call(arguments,3);try{e.apply(r,d)}catch(h){this.onError(h)}}var Ko=!1,wc=null,_c=!1,fh=null,D2={onError:function(t){Ko=!0,wc=t}};function O2(t,e,r,s,n,i,o,a,l){Ko=!1,wc=null,P2.apply(D2,arguments)}function L2(t,e,r,s,n,i,o,a,l){if(O2.apply(this,arguments),Ko){if(Ko){var d=wc;Ko=!1,wc=null}else throw Error(G(198));_c||(_c=!0,fh=d)}}function ni(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function lx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Dp(t){if(ni(t)!==t)throw Error(G(188))}function R2(t){var e=t.alternate;if(!e){if(e=ni(t),e===null)throw Error(G(188));return e!==t?null:t}for(var r=t,s=e;;){var n=r.return;if(n===null)break;var i=n.alternate;if(i===null){if(s=n.return,s!==null){r=s;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===r)return Dp(n),t;if(i===s)return Dp(n),e;i=i.sibling}throw Error(G(188))}if(r.return!==s.return)r=n,s=i;else{for(var o=!1,a=n.child;a;){if(a===r){o=!0,r=n,s=i;break}if(a===s){o=!0,s=n,r=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===r){o=!0,r=i,s=n;break}if(a===s){o=!0,s=i,r=n;break}a=a.sibling}if(!o)throw Error(G(189))}}if(r.alternate!==s)throw Error(G(190))}if(r.tag!==3)throw Error(G(188));return r.stateNode.current===r?t:e}function cx(t){return t=R2(t),t!==null?ux(t):null}function ux(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ux(t);if(e!==null)return e;t=t.sibling}return null}var dx=ar.unstable_scheduleCallback,Op=ar.unstable_cancelCallback,A2=ar.unstable_shouldYield,I2=ar.unstable_requestPaint,lt=ar.unstable_now,$2=ar.unstable_getCurrentPriorityLevel,Mf=ar.unstable_ImmediatePriority,hx=ar.unstable_UserBlockingPriority,kc=ar.unstable_NormalPriority,F2=ar.unstable_LowPriority,fx=ar.unstable_IdlePriority,iu=null,Gr=null;function z2(t){if(Gr&&typeof Gr.onCommitFiberRoot=="function")try{Gr.onCommitFiberRoot(iu,t,void 0,(t.current.flags&128)===128)}catch{}}var Or=Math.clz32?Math.clz32:U2,W2=Math.log,B2=Math.LN2;function U2(t){return t>>>=0,t===0?32:31-(W2(t)/B2|0)|0}var kl=64,Sl=4194304;function Bo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Sc(t,e){var r=t.pendingLanes;if(r===0)return 0;var s=0,n=t.suspendedLanes,i=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~n;a!==0?s=Bo(a):(i&=o,i!==0&&(s=Bo(i)))}else o=r&~n,o!==0?s=Bo(o):i!==0&&(s=Bo(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&n)&&(n=s&-s,i=e&-e,n>=i||n===16&&(i&4194240)!==0))return e;if(s&4&&(s|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)r=31-Or(e),n=1<<r,s|=t[r],e&=~n;return s}function H2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function V2(t,e){for(var r=t.suspendedLanes,s=t.pingedLanes,n=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Or(i),a=1<<o,l=n[o];l===-1?(!(a&r)||a&s)&&(n[o]=H2(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function mh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function mx(){var t=kl;return kl<<=1,!(kl&4194240)&&(kl=64),t}function cd(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Va(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Or(e),t[e]=r}function Y2(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<r;){var n=31-Or(r),i=1<<n;e[n]=0,s[n]=-1,t[n]=-1,r&=~i}}function Tf(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var s=31-Or(r),n=1<<s;n&e|t[s]&e&&(t[s]|=e),r&=~n}}var Be=0;function px(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var gx,Pf,yx,xx,vx,ph=!1,jl=[],sn=null,nn=null,on=null,ga=new Map,ya=new Map,qs=[],G2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lp(t,e){switch(t){case"focusin":case"focusout":sn=null;break;case"dragenter":case"dragleave":nn=null;break;case"mouseover":case"mouseout":on=null;break;case"pointerover":case"pointerout":ga.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ya.delete(e.pointerId)}}function Eo(t,e,r,s,n,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:s,nativeEvent:i,targetContainers:[n]},e!==null&&(e=Ga(e),e!==null&&Pf(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,n!==null&&e.indexOf(n)===-1&&e.push(n),t)}function q2(t,e,r,s,n){switch(e){case"focusin":return sn=Eo(sn,t,e,r,s,n),!0;case"dragenter":return nn=Eo(nn,t,e,r,s,n),!0;case"mouseover":return on=Eo(on,t,e,r,s,n),!0;case"pointerover":var i=n.pointerId;return ga.set(i,Eo(ga.get(i)||null,t,e,r,s,n)),!0;case"gotpointercapture":return i=n.pointerId,ya.set(i,Eo(ya.get(i)||null,t,e,r,s,n)),!0}return!1}function bx(t){var e=zn(t.target);if(e!==null){var r=ni(e);if(r!==null){if(e=r.tag,e===13){if(e=lx(r),e!==null){t.blockedOn=e,vx(t.priority,function(){yx(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ic(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=gh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var s=new r.constructor(r.type,r);uh=s,r.target.dispatchEvent(s),uh=null}else return e=Ga(r),e!==null&&Pf(e),t.blockedOn=r,!1;e.shift()}return!0}function Rp(t,e,r){ic(t)&&r.delete(e)}function K2(){ph=!1,sn!==null&&ic(sn)&&(sn=null),nn!==null&&ic(nn)&&(nn=null),on!==null&&ic(on)&&(on=null),ga.forEach(Rp),ya.forEach(Rp)}function Mo(t,e){t.blockedOn===e&&(t.blockedOn=null,ph||(ph=!0,ar.unstable_scheduleCallback(ar.unstable_NormalPriority,K2)))}function xa(t){function e(n){return Mo(n,t)}if(0<jl.length){Mo(jl[0],t);for(var r=1;r<jl.length;r++){var s=jl[r];s.blockedOn===t&&(s.blockedOn=null)}}for(sn!==null&&Mo(sn,t),nn!==null&&Mo(nn,t),on!==null&&Mo(on,t),ga.forEach(e),ya.forEach(e),r=0;r<qs.length;r++)s=qs[r],s.blockedOn===t&&(s.blockedOn=null);for(;0<qs.length&&(r=qs[0],r.blockedOn===null);)bx(r),r.blockedOn===null&&qs.shift()}var zi=Es.ReactCurrentBatchConfig,jc=!0;function X2(t,e,r,s){var n=Be,i=zi.transition;zi.transition=null;try{Be=1,Df(t,e,r,s)}finally{Be=n,zi.transition=i}}function J2(t,e,r,s){var n=Be,i=zi.transition;zi.transition=null;try{Be=4,Df(t,e,r,s)}finally{Be=n,zi.transition=i}}function Df(t,e,r,s){if(jc){var n=gh(t,e,r,s);if(n===null)vd(t,e,s,Nc,r),Lp(t,s);else if(q2(n,t,e,r,s))s.stopPropagation();else if(Lp(t,s),e&4&&-1<G2.indexOf(t)){for(;n!==null;){var i=Ga(n);if(i!==null&&gx(i),i=gh(t,e,r,s),i===null&&vd(t,e,s,Nc,r),i===n)break;n=i}n!==null&&s.stopPropagation()}else vd(t,e,s,null,r)}}var Nc=null;function gh(t,e,r,s){if(Nc=null,t=Ef(s),t=zn(t),t!==null)if(e=ni(t),e===null)t=null;else if(r=e.tag,r===13){if(t=lx(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Nc=t,null}function wx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($2()){case Mf:return 1;case hx:return 4;case kc:case F2:return 16;case fx:return 536870912;default:return 16}default:return 16}}var Qs=null,Of=null,oc=null;function _x(){if(oc)return oc;var t,e=Of,r=e.length,s,n="value"in Qs?Qs.value:Qs.textContent,i=n.length;for(t=0;t<r&&e[t]===n[t];t++);var o=r-t;for(s=1;s<=o&&e[r-s]===n[i-s];s++);return oc=n.slice(t,1<s?1-s:void 0)}function ac(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Nl(){return!0}function Ap(){return!1}function cr(t){function e(r,s,n,i,o){this._reactName=r,this._targetInst=n,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Nl:Ap,this.isPropagationStopped=Ap,this}return rt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Nl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Nl)},persist:function(){},isPersistent:Nl}),e}var io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lf=cr(io),Ya=rt({},io,{view:0,detail:0}),Q2=cr(Ya),ud,dd,To,ou=rt({},Ya,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==To&&(To&&t.type==="mousemove"?(ud=t.screenX-To.screenX,dd=t.screenY-To.screenY):dd=ud=0,To=t),ud)},movementY:function(t){return"movementY"in t?t.movementY:dd}}),Ip=cr(ou),Z2=rt({},ou,{dataTransfer:0}),eS=cr(Z2),tS=rt({},Ya,{relatedTarget:0}),hd=cr(tS),rS=rt({},io,{animationName:0,elapsedTime:0,pseudoElement:0}),sS=cr(rS),nS=rt({},io,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),iS=cr(nS),oS=rt({},io,{data:0}),$p=cr(oS),aS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=cS[t])?!!e[t]:!1}function Rf(){return uS}var dS=rt({},Ya,{key:function(t){if(t.key){var e=aS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ac(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?lS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rf,charCode:function(t){return t.type==="keypress"?ac(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ac(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),hS=cr(dS),fS=rt({},ou,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fp=cr(fS),mS=rt({},Ya,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rf}),pS=cr(mS),gS=rt({},io,{propertyName:0,elapsedTime:0,pseudoElement:0}),yS=cr(gS),xS=rt({},ou,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vS=cr(xS),bS=[9,13,27,32],Af=ks&&"CompositionEvent"in window,Xo=null;ks&&"documentMode"in document&&(Xo=document.documentMode);var wS=ks&&"TextEvent"in window&&!Xo,kx=ks&&(!Af||Xo&&8<Xo&&11>=Xo),zp=" ",Wp=!1;function Sx(t,e){switch(t){case"keyup":return bS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ni=!1;function _S(t,e){switch(t){case"compositionend":return jx(e);case"keypress":return e.which!==32?null:(Wp=!0,zp);case"textInput":return t=e.data,t===zp&&Wp?null:t;default:return null}}function kS(t,e){if(Ni)return t==="compositionend"||!Af&&Sx(t,e)?(t=_x(),oc=Of=Qs=null,Ni=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return kx&&e.locale!=="ko"?null:e.data;default:return null}}var SS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!SS[t.type]:e==="textarea"}function Nx(t,e,r,s){sx(s),e=Cc(e,"onChange"),0<e.length&&(r=new Lf("onChange","change",null,r,s),t.push({event:r,listeners:e}))}var Jo=null,va=null;function jS(t){Ix(t,0)}function au(t){var e=Mi(t);if(Xy(e))return t}function NS(t,e){if(t==="change")return e}var Cx=!1;if(ks){var fd;if(ks){var md="oninput"in document;if(!md){var Up=document.createElement("div");Up.setAttribute("oninput","return;"),md=typeof Up.oninput=="function"}fd=md}else fd=!1;Cx=fd&&(!document.documentMode||9<document.documentMode)}function Hp(){Jo&&(Jo.detachEvent("onpropertychange",Ex),va=Jo=null)}function Ex(t){if(t.propertyName==="value"&&au(va)){var e=[];Nx(e,va,t,Ef(t)),ax(jS,e)}}function CS(t,e,r){t==="focusin"?(Hp(),Jo=e,va=r,Jo.attachEvent("onpropertychange",Ex)):t==="focusout"&&Hp()}function ES(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return au(va)}function MS(t,e){if(t==="click")return au(e)}function TS(t,e){if(t==="input"||t==="change")return au(e)}function PS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Rr=typeof Object.is=="function"?Object.is:PS;function ba(t,e){if(Rr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var n=r[s];if(!Qd.call(e,n)||!Rr(t[n],e[n]))return!1}return!0}function Vp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yp(t,e){var r=Vp(t);t=0;for(var s;r;){if(r.nodeType===3){if(s=t+r.textContent.length,t<=e&&s>=e)return{node:r,offset:e-t};t=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Vp(r)}}function Mx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Mx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Tx(){for(var t=window,e=bc();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=bc(t.document)}return e}function If(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function DS(t){var e=Tx(),r=t.focusedElem,s=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Mx(r.ownerDocument.documentElement,r)){if(s!==null&&If(r)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var n=r.textContent.length,i=Math.min(s.start,n);s=s.end===void 0?i:Math.min(s.end,n),!t.extend&&i>s&&(n=s,s=i,i=n),n=Yp(r,i);var o=Yp(r,s);n&&o&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(n.node,n.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var OS=ks&&"documentMode"in document&&11>=document.documentMode,Ci=null,yh=null,Qo=null,xh=!1;function Gp(t,e,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;xh||Ci==null||Ci!==bc(s)||(s=Ci,"selectionStart"in s&&If(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Qo&&ba(Qo,s)||(Qo=s,s=Cc(yh,"onSelect"),0<s.length&&(e=new Lf("onSelect","select",null,e,r),t.push({event:e,listeners:s}),e.target=Ci)))}function Cl(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ei={animationend:Cl("Animation","AnimationEnd"),animationiteration:Cl("Animation","AnimationIteration"),animationstart:Cl("Animation","AnimationStart"),transitionend:Cl("Transition","TransitionEnd")},pd={},Px={};ks&&(Px=document.createElement("div").style,"AnimationEvent"in window||(delete Ei.animationend.animation,delete Ei.animationiteration.animation,delete Ei.animationstart.animation),"TransitionEvent"in window||delete Ei.transitionend.transition);function lu(t){if(pd[t])return pd[t];if(!Ei[t])return t;var e=Ei[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Px)return pd[t]=e[r];return t}var Dx=lu("animationend"),Ox=lu("animationiteration"),Lx=lu("animationstart"),Rx=lu("transitionend"),Ax=new Map,qp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yn(t,e){Ax.set(t,e),si(e,[t])}for(var gd=0;gd<qp.length;gd++){var yd=qp[gd],LS=yd.toLowerCase(),RS=yd[0].toUpperCase()+yd.slice(1);yn(LS,"on"+RS)}yn(Dx,"onAnimationEnd");yn(Ox,"onAnimationIteration");yn(Lx,"onAnimationStart");yn("dblclick","onDoubleClick");yn("focusin","onFocus");yn("focusout","onBlur");yn(Rx,"onTransitionEnd");Yi("onMouseEnter",["mouseout","mouseover"]);Yi("onMouseLeave",["mouseout","mouseover"]);Yi("onPointerEnter",["pointerout","pointerover"]);Yi("onPointerLeave",["pointerout","pointerover"]);si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));si("onBeforeInput",["compositionend","keypress","textInput","paste"]);si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uo));function Kp(t,e,r){var s=t.type||"unknown-event";t.currentTarget=r,L2(s,e,void 0,t),t.currentTarget=null}function Ix(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var s=t[r],n=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,d=a.currentTarget;if(a=a.listener,l!==i&&n.isPropagationStopped())break e;Kp(n,a,d),i=l}else for(o=0;o<s.length;o++){if(a=s[o],l=a.instance,d=a.currentTarget,a=a.listener,l!==i&&n.isPropagationStopped())break e;Kp(n,a,d),i=l}}}if(_c)throw t=fh,_c=!1,fh=null,t}function Ge(t,e){var r=e[kh];r===void 0&&(r=e[kh]=new Set);var s=t+"__bubble";r.has(s)||($x(e,t,2,!1),r.add(s))}function xd(t,e,r){var s=0;e&&(s|=4),$x(r,t,s,e)}var El="_reactListening"+Math.random().toString(36).slice(2);function wa(t){if(!t[El]){t[El]=!0,Vy.forEach(function(r){r!=="selectionchange"&&(AS.has(r)||xd(r,!1,t),xd(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[El]||(e[El]=!0,xd("selectionchange",!1,e))}}function $x(t,e,r,s){switch(wx(e)){case 1:var n=X2;break;case 4:n=J2;break;default:n=Df}r=n.bind(null,e,r,t),n=void 0,!hh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(n=!0),s?n!==void 0?t.addEventListener(e,r,{capture:!0,passive:n}):t.addEventListener(e,r,!0):n!==void 0?t.addEventListener(e,r,{passive:n}):t.addEventListener(e,r,!1)}function vd(t,e,r,s,n){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===n||a.nodeType===8&&a.parentNode===n)break;if(o===4)for(o=s.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===n||l.nodeType===8&&l.parentNode===n))return;o=o.return}for(;a!==null;){if(o=zn(a),o===null)return;if(l=o.tag,l===5||l===6){s=i=o;continue e}a=a.parentNode}}s=s.return}ax(function(){var d=i,h=Ef(r),m=[];e:{var p=Ax.get(t);if(p!==void 0){var x=Lf,b=t;switch(t){case"keypress":if(ac(r)===0)break e;case"keydown":case"keyup":x=hS;break;case"focusin":b="focus",x=hd;break;case"focusout":b="blur",x=hd;break;case"beforeblur":case"afterblur":x=hd;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Ip;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=eS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=pS;break;case Dx:case Ox:case Lx:x=sS;break;case Rx:x=yS;break;case"scroll":x=Q2;break;case"wheel":x=vS;break;case"copy":case"cut":case"paste":x=iS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Fp}var k=(e&4)!==0,w=!k&&t==="scroll",v=k?p!==null?p+"Capture":null:p;k=[];for(var _=d,S;_!==null;){S=_;var C=S.stateNode;if(S.tag===5&&C!==null&&(S=C,v!==null&&(C=pa(_,v),C!=null&&k.push(_a(_,C,S)))),w)break;_=_.return}0<k.length&&(p=new x(p,b,null,r,h),m.push({event:p,listeners:k}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",p&&r!==uh&&(b=r.relatedTarget||r.fromElement)&&(zn(b)||b[Ss]))break e;if((x||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,x?(b=r.relatedTarget||r.toElement,x=d,b=b?zn(b):null,b!==null&&(w=ni(b),b!==w||b.tag!==5&&b.tag!==6)&&(b=null)):(x=null,b=d),x!==b)){if(k=Ip,C="onMouseLeave",v="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(k=Fp,C="onPointerLeave",v="onPointerEnter",_="pointer"),w=x==null?p:Mi(x),S=b==null?p:Mi(b),p=new k(C,_+"leave",x,r,h),p.target=w,p.relatedTarget=S,C=null,zn(h)===d&&(k=new k(v,_+"enter",b,r,h),k.target=S,k.relatedTarget=w,C=k),w=C,x&&b)t:{for(k=x,v=b,_=0,S=k;S;S=yi(S))_++;for(S=0,C=v;C;C=yi(C))S++;for(;0<_-S;)k=yi(k),_--;for(;0<S-_;)v=yi(v),S--;for(;_--;){if(k===v||v!==null&&k===v.alternate)break t;k=yi(k),v=yi(v)}k=null}else k=null;x!==null&&Xp(m,p,x,k,!1),b!==null&&w!==null&&Xp(m,w,b,k,!0)}}e:{if(p=d?Mi(d):window,x=p.nodeName&&p.nodeName.toLowerCase(),x==="select"||x==="input"&&p.type==="file")var E=NS;else if(Bp(p))if(Cx)E=TS;else{E=ES;var D=CS}else(x=p.nodeName)&&x.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(E=MS);if(E&&(E=E(t,d))){Nx(m,E,r,h);break e}D&&D(t,p,d),t==="focusout"&&(D=p._wrapperState)&&D.controlled&&p.type==="number"&&ih(p,"number",p.value)}switch(D=d?Mi(d):window,t){case"focusin":(Bp(D)||D.contentEditable==="true")&&(Ci=D,yh=d,Qo=null);break;case"focusout":Qo=yh=Ci=null;break;case"mousedown":xh=!0;break;case"contextmenu":case"mouseup":case"dragend":xh=!1,Gp(m,r,h);break;case"selectionchange":if(OS)break;case"keydown":case"keyup":Gp(m,r,h)}var P;if(Af)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Ni?Sx(t,r)&&(O="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(O="onCompositionStart");O&&(kx&&r.locale!=="ko"&&(Ni||O!=="onCompositionStart"?O==="onCompositionEnd"&&Ni&&(P=_x()):(Qs=h,Of="value"in Qs?Qs.value:Qs.textContent,Ni=!0)),D=Cc(d,O),0<D.length&&(O=new $p(O,t,null,r,h),m.push({event:O,listeners:D}),P?O.data=P:(P=jx(r),P!==null&&(O.data=P)))),(P=wS?_S(t,r):kS(t,r))&&(d=Cc(d,"onBeforeInput"),0<d.length&&(h=new $p("onBeforeInput","beforeinput",null,r,h),m.push({event:h,listeners:d}),h.data=P))}Ix(m,e)})}function _a(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Cc(t,e){for(var r=e+"Capture",s=[];t!==null;){var n=t,i=n.stateNode;n.tag===5&&i!==null&&(n=i,i=pa(t,r),i!=null&&s.unshift(_a(t,i,n)),i=pa(t,e),i!=null&&s.push(_a(t,i,n))),t=t.return}return s}function yi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Xp(t,e,r,s,n){for(var i=e._reactName,o=[];r!==null&&r!==s;){var a=r,l=a.alternate,d=a.stateNode;if(l!==null&&l===s)break;a.tag===5&&d!==null&&(a=d,n?(l=pa(r,i),l!=null&&o.unshift(_a(r,l,a))):n||(l=pa(r,i),l!=null&&o.push(_a(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var IS=/\r\n?/g,$S=/\u0000|\uFFFD/g;function Jp(t){return(typeof t=="string"?t:""+t).replace(IS,`
`).replace($S,"")}function Ml(t,e,r){if(e=Jp(e),Jp(t)!==e&&r)throw Error(G(425))}function Ec(){}var vh=null,bh=null;function wh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _h=typeof setTimeout=="function"?setTimeout:void 0,FS=typeof clearTimeout=="function"?clearTimeout:void 0,Qp=typeof Promise=="function"?Promise:void 0,zS=typeof queueMicrotask=="function"?queueMicrotask:typeof Qp<"u"?function(t){return Qp.resolve(null).then(t).catch(WS)}:_h;function WS(t){setTimeout(function(){throw t})}function bd(t,e){var r=e,s=0;do{var n=r.nextSibling;if(t.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(s===0){t.removeChild(n),xa(e);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=n}while(r);xa(e)}function an(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Zp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var oo=Math.random().toString(36).slice(2),Yr="__reactFiber$"+oo,ka="__reactProps$"+oo,Ss="__reactContainer$"+oo,kh="__reactEvents$"+oo,BS="__reactListeners$"+oo,US="__reactHandles$"+oo;function zn(t){var e=t[Yr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Ss]||r[Yr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Zp(t);t!==null;){if(r=t[Yr])return r;t=Zp(t)}return e}t=r,r=t.parentNode}return null}function Ga(t){return t=t[Yr]||t[Ss],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Mi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function cu(t){return t[ka]||null}var Sh=[],Ti=-1;function xn(t){return{current:t}}function Ke(t){0>Ti||(t.current=Sh[Ti],Sh[Ti]=null,Ti--)}function Ve(t,e){Ti++,Sh[Ti]=t.current,t.current=e}var pn={},Ot=xn(pn),Xt=xn(!1),Xn=pn;function Gi(t,e){var r=t.type.contextTypes;if(!r)return pn;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var n={},i;for(i in r)n[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=n),n}function Jt(t){return t=t.childContextTypes,t!=null}function Mc(){Ke(Xt),Ke(Ot)}function eg(t,e,r){if(Ot.current!==pn)throw Error(G(168));Ve(Ot,e),Ve(Xt,r)}function Fx(t,e,r){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var n in s)if(!(n in e))throw Error(G(108,C2(t)||"Unknown",n));return rt({},r,s)}function Tc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||pn,Xn=Ot.current,Ve(Ot,t),Ve(Xt,Xt.current),!0}function tg(t,e,r){var s=t.stateNode;if(!s)throw Error(G(169));r?(t=Fx(t,e,Xn),s.__reactInternalMemoizedMergedChildContext=t,Ke(Xt),Ke(Ot),Ve(Ot,t)):Ke(Xt),Ve(Xt,r)}var ps=null,uu=!1,wd=!1;function zx(t){ps===null?ps=[t]:ps.push(t)}function HS(t){uu=!0,zx(t)}function vn(){if(!wd&&ps!==null){wd=!0;var t=0,e=Be;try{var r=ps;for(Be=1;t<r.length;t++){var s=r[t];do s=s(!0);while(s!==null)}ps=null,uu=!1}catch(n){throw ps!==null&&(ps=ps.slice(t+1)),dx(Mf,vn),n}finally{Be=e,wd=!1}}return null}var Pi=[],Di=0,Pc=null,Dc=0,pr=[],gr=0,Jn=null,ys=1,xs="";function Ln(t,e){Pi[Di++]=Dc,Pi[Di++]=Pc,Pc=t,Dc=e}function Wx(t,e,r){pr[gr++]=ys,pr[gr++]=xs,pr[gr++]=Jn,Jn=t;var s=ys;t=xs;var n=32-Or(s)-1;s&=~(1<<n),r+=1;var i=32-Or(e)+n;if(30<i){var o=n-n%5;i=(s&(1<<o)-1).toString(32),s>>=o,n-=o,ys=1<<32-Or(e)+n|r<<n|s,xs=i+t}else ys=1<<i|r<<n|s,xs=t}function $f(t){t.return!==null&&(Ln(t,1),Wx(t,1,0))}function Ff(t){for(;t===Pc;)Pc=Pi[--Di],Pi[Di]=null,Dc=Pi[--Di],Pi[Di]=null;for(;t===Jn;)Jn=pr[--gr],pr[gr]=null,xs=pr[--gr],pr[gr]=null,ys=pr[--gr],pr[gr]=null}var or=null,ir=null,Je=!1,Dr=null;function Bx(t,e){var r=yr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function rg(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,or=t,ir=an(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,or=t,ir=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Jn!==null?{id:ys,overflow:xs}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=yr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,or=t,ir=null,!0):!1;default:return!1}}function jh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Nh(t){if(Je){var e=ir;if(e){var r=e;if(!rg(t,e)){if(jh(t))throw Error(G(418));e=an(r.nextSibling);var s=or;e&&rg(t,e)?Bx(s,r):(t.flags=t.flags&-4097|2,Je=!1,or=t)}}else{if(jh(t))throw Error(G(418));t.flags=t.flags&-4097|2,Je=!1,or=t}}}function sg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;or=t}function Tl(t){if(t!==or)return!1;if(!Je)return sg(t),Je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!wh(t.type,t.memoizedProps)),e&&(e=ir)){if(jh(t))throw Ux(),Error(G(418));for(;e;)Bx(t,e),e=an(e.nextSibling)}if(sg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){ir=an(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}ir=null}}else ir=or?an(t.stateNode.nextSibling):null;return!0}function Ux(){for(var t=ir;t;)t=an(t.nextSibling)}function qi(){ir=or=null,Je=!1}function zf(t){Dr===null?Dr=[t]:Dr.push(t)}var VS=Es.ReactCurrentBatchConfig;function Po(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(G(309));var s=r.stateNode}if(!s)throw Error(G(147,t));var n=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=n.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(G(284));if(!r._owner)throw Error(G(290,t))}return t}function Pl(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ng(t){var e=t._init;return e(t._payload)}function Hx(t){function e(v,_){if(t){var S=v.deletions;S===null?(v.deletions=[_],v.flags|=16):S.push(_)}}function r(v,_){if(!t)return null;for(;_!==null;)e(v,_),_=_.sibling;return null}function s(v,_){for(v=new Map;_!==null;)_.key!==null?v.set(_.key,_):v.set(_.index,_),_=_.sibling;return v}function n(v,_){return v=dn(v,_),v.index=0,v.sibling=null,v}function i(v,_,S){return v.index=S,t?(S=v.alternate,S!==null?(S=S.index,S<_?(v.flags|=2,_):S):(v.flags|=2,_)):(v.flags|=1048576,_)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,_,S,C){return _===null||_.tag!==6?(_=Ed(S,v.mode,C),_.return=v,_):(_=n(_,S),_.return=v,_)}function l(v,_,S,C){var E=S.type;return E===ji?h(v,_,S.props.children,C,S.key):_!==null&&(_.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Vs&&ng(E)===_.type)?(C=n(_,S.props),C.ref=Po(v,_,S),C.return=v,C):(C=mc(S.type,S.key,S.props,null,v.mode,C),C.ref=Po(v,_,S),C.return=v,C)}function d(v,_,S,C){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=Md(S,v.mode,C),_.return=v,_):(_=n(_,S.children||[]),_.return=v,_)}function h(v,_,S,C,E){return _===null||_.tag!==7?(_=Gn(S,v.mode,C,E),_.return=v,_):(_=n(_,S),_.return=v,_)}function m(v,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Ed(""+_,v.mode,S),_.return=v,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case bl:return S=mc(_.type,_.key,_.props,null,v.mode,S),S.ref=Po(v,null,_),S.return=v,S;case Si:return _=Md(_,v.mode,S),_.return=v,_;case Vs:var C=_._init;return m(v,C(_._payload),S)}if(Wo(_)||No(_))return _=Gn(_,v.mode,S,null),_.return=v,_;Pl(v,_)}return null}function p(v,_,S,C){var E=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return E!==null?null:a(v,_,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case bl:return S.key===E?l(v,_,S,C):null;case Si:return S.key===E?d(v,_,S,C):null;case Vs:return E=S._init,p(v,_,E(S._payload),C)}if(Wo(S)||No(S))return E!==null?null:h(v,_,S,C,null);Pl(v,S)}return null}function x(v,_,S,C,E){if(typeof C=="string"&&C!==""||typeof C=="number")return v=v.get(S)||null,a(_,v,""+C,E);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case bl:return v=v.get(C.key===null?S:C.key)||null,l(_,v,C,E);case Si:return v=v.get(C.key===null?S:C.key)||null,d(_,v,C,E);case Vs:var D=C._init;return x(v,_,S,D(C._payload),E)}if(Wo(C)||No(C))return v=v.get(S)||null,h(_,v,C,E,null);Pl(_,C)}return null}function b(v,_,S,C){for(var E=null,D=null,P=_,O=_=0,B=null;P!==null&&O<S.length;O++){P.index>O?(B=P,P=null):B=P.sibling;var M=p(v,P,S[O],C);if(M===null){P===null&&(P=B);break}t&&P&&M.alternate===null&&e(v,P),_=i(M,_,O),D===null?E=M:D.sibling=M,D=M,P=B}if(O===S.length)return r(v,P),Je&&Ln(v,O),E;if(P===null){for(;O<S.length;O++)P=m(v,S[O],C),P!==null&&(_=i(P,_,O),D===null?E=P:D.sibling=P,D=P);return Je&&Ln(v,O),E}for(P=s(v,P);O<S.length;O++)B=x(P,v,O,S[O],C),B!==null&&(t&&B.alternate!==null&&P.delete(B.key===null?O:B.key),_=i(B,_,O),D===null?E=B:D.sibling=B,D=B);return t&&P.forEach(function(I){return e(v,I)}),Je&&Ln(v,O),E}function k(v,_,S,C){var E=No(S);if(typeof E!="function")throw Error(G(150));if(S=E.call(S),S==null)throw Error(G(151));for(var D=E=null,P=_,O=_=0,B=null,M=S.next();P!==null&&!M.done;O++,M=S.next()){P.index>O?(B=P,P=null):B=P.sibling;var I=p(v,P,M.value,C);if(I===null){P===null&&(P=B);break}t&&P&&I.alternate===null&&e(v,P),_=i(I,_,O),D===null?E=I:D.sibling=I,D=I,P=B}if(M.done)return r(v,P),Je&&Ln(v,O),E;if(P===null){for(;!M.done;O++,M=S.next())M=m(v,M.value,C),M!==null&&(_=i(M,_,O),D===null?E=M:D.sibling=M,D=M);return Je&&Ln(v,O),E}for(P=s(v,P);!M.done;O++,M=S.next())M=x(P,v,O,M.value,C),M!==null&&(t&&M.alternate!==null&&P.delete(M.key===null?O:M.key),_=i(M,_,O),D===null?E=M:D.sibling=M,D=M);return t&&P.forEach(function(H){return e(v,H)}),Je&&Ln(v,O),E}function w(v,_,S,C){if(typeof S=="object"&&S!==null&&S.type===ji&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case bl:e:{for(var E=S.key,D=_;D!==null;){if(D.key===E){if(E=S.type,E===ji){if(D.tag===7){r(v,D.sibling),_=n(D,S.props.children),_.return=v,v=_;break e}}else if(D.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Vs&&ng(E)===D.type){r(v,D.sibling),_=n(D,S.props),_.ref=Po(v,D,S),_.return=v,v=_;break e}r(v,D);break}else e(v,D);D=D.sibling}S.type===ji?(_=Gn(S.props.children,v.mode,C,S.key),_.return=v,v=_):(C=mc(S.type,S.key,S.props,null,v.mode,C),C.ref=Po(v,_,S),C.return=v,v=C)}return o(v);case Si:e:{for(D=S.key;_!==null;){if(_.key===D)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){r(v,_.sibling),_=n(_,S.children||[]),_.return=v,v=_;break e}else{r(v,_);break}else e(v,_);_=_.sibling}_=Md(S,v.mode,C),_.return=v,v=_}return o(v);case Vs:return D=S._init,w(v,_,D(S._payload),C)}if(Wo(S))return b(v,_,S,C);if(No(S))return k(v,_,S,C);Pl(v,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,_!==null&&_.tag===6?(r(v,_.sibling),_=n(_,S),_.return=v,v=_):(r(v,_),_=Ed(S,v.mode,C),_.return=v,v=_),o(v)):r(v,_)}return w}var Ki=Hx(!0),Vx=Hx(!1),Oc=xn(null),Lc=null,Oi=null,Wf=null;function Bf(){Wf=Oi=Lc=null}function Uf(t){var e=Oc.current;Ke(Oc),t._currentValue=e}function Ch(t,e,r){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===r)break;t=t.return}}function Wi(t,e){Lc=t,Wf=Oi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Kt=!0),t.firstContext=null)}function br(t){var e=t._currentValue;if(Wf!==t)if(t={context:t,memoizedValue:e,next:null},Oi===null){if(Lc===null)throw Error(G(308));Oi=t,Lc.dependencies={lanes:0,firstContext:t}}else Oi=Oi.next=t;return e}var Wn=null;function Hf(t){Wn===null?Wn=[t]:Wn.push(t)}function Yx(t,e,r,s){var n=e.interleaved;return n===null?(r.next=r,Hf(e)):(r.next=n.next,n.next=r),e.interleaved=r,js(t,s)}function js(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Ys=!1;function Vf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _s(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ln(t,e,r){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,Oe&2){var n=s.pending;return n===null?e.next=e:(e.next=n.next,n.next=e),s.pending=e,js(t,r)}return n=s.interleaved,n===null?(e.next=e,Hf(s)):(e.next=n.next,n.next=e),s.interleaved=e,js(t,r)}function lc(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,Tf(t,r)}}function ig(t,e){var r=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var n=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?n=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?n=i=e:i=i.next=e}else n=i=e;r={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Rc(t,e,r,s){var n=t.updateQueue;Ys=!1;var i=n.firstBaseUpdate,o=n.lastBaseUpdate,a=n.shared.pending;if(a!==null){n.shared.pending=null;var l=a,d=l.next;l.next=null,o===null?i=d:o.next=d,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=d:a.next=d,h.lastBaseUpdate=l))}if(i!==null){var m=n.baseState;o=0,h=d=l=null,a=i;do{var p=a.lane,x=a.eventTime;if((s&p)===p){h!==null&&(h=h.next={eventTime:x,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var b=t,k=a;switch(p=e,x=r,k.tag){case 1:if(b=k.payload,typeof b=="function"){m=b.call(x,m,p);break e}m=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=k.payload,p=typeof b=="function"?b.call(x,m,p):b,p==null)break e;m=rt({},m,p);break e;case 2:Ys=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=n.effects,p===null?n.effects=[a]:p.push(a))}else x={eventTime:x,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(d=h=x,l=m):h=h.next=x,o|=p;if(a=a.next,a===null){if(a=n.shared.pending,a===null)break;p=a,a=p.next,p.next=null,n.lastBaseUpdate=p,n.shared.pending=null}}while(!0);if(h===null&&(l=m),n.baseState=l,n.firstBaseUpdate=d,n.lastBaseUpdate=h,e=n.shared.interleaved,e!==null){n=e;do o|=n.lane,n=n.next;while(n!==e)}else i===null&&(n.shared.lanes=0);Zn|=o,t.lanes=o,t.memoizedState=m}}function og(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],n=s.callback;if(n!==null){if(s.callback=null,s=r,typeof n!="function")throw Error(G(191,n));n.call(s)}}}var qa={},qr=xn(qa),Sa=xn(qa),ja=xn(qa);function Bn(t){if(t===qa)throw Error(G(174));return t}function Yf(t,e){switch(Ve(ja,e),Ve(Sa,t),Ve(qr,qa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ah(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ah(e,t)}Ke(qr),Ve(qr,e)}function Xi(){Ke(qr),Ke(Sa),Ke(ja)}function qx(t){Bn(ja.current);var e=Bn(qr.current),r=ah(e,t.type);e!==r&&(Ve(Sa,t),Ve(qr,r))}function Gf(t){Sa.current===t&&(Ke(qr),Ke(Sa))}var Qe=xn(0);function Ac(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var _d=[];function qf(){for(var t=0;t<_d.length;t++)_d[t]._workInProgressVersionPrimary=null;_d.length=0}var cc=Es.ReactCurrentDispatcher,kd=Es.ReactCurrentBatchConfig,Qn=0,et=null,pt=null,wt=null,Ic=!1,Zo=!1,Na=0,YS=0;function Ct(){throw Error(G(321))}function Kf(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Rr(t[r],e[r]))return!1;return!0}function Xf(t,e,r,s,n,i){if(Qn=i,et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,cc.current=t===null||t.memoizedState===null?XS:JS,t=r(s,n),Zo){i=0;do{if(Zo=!1,Na=0,25<=i)throw Error(G(301));i+=1,wt=pt=null,e.updateQueue=null,cc.current=QS,t=r(s,n)}while(Zo)}if(cc.current=$c,e=pt!==null&&pt.next!==null,Qn=0,wt=pt=et=null,Ic=!1,e)throw Error(G(300));return t}function Jf(){var t=Na!==0;return Na=0,t}function Ur(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?et.memoizedState=wt=t:wt=wt.next=t,wt}function wr(){if(pt===null){var t=et.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var e=wt===null?et.memoizedState:wt.next;if(e!==null)wt=e,pt=t;else{if(t===null)throw Error(G(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},wt===null?et.memoizedState=wt=t:wt=wt.next=t}return wt}function Ca(t,e){return typeof e=="function"?e(t):e}function Sd(t){var e=wr(),r=e.queue;if(r===null)throw Error(G(311));r.lastRenderedReducer=t;var s=pt,n=s.baseQueue,i=r.pending;if(i!==null){if(n!==null){var o=n.next;n.next=i.next,i.next=o}s.baseQueue=n=i,r.pending=null}if(n!==null){i=n.next,s=s.baseState;var a=o=null,l=null,d=i;do{var h=d.lane;if((Qn&h)===h)l!==null&&(l=l.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:t(s,d.action);else{var m={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};l===null?(a=l=m,o=s):l=l.next=m,et.lanes|=h,Zn|=h}d=d.next}while(d!==null&&d!==i);l===null?o=s:l.next=a,Rr(s,e.memoizedState)||(Kt=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=l,r.lastRenderedState=s}if(t=r.interleaved,t!==null){n=t;do i=n.lane,et.lanes|=i,Zn|=i,n=n.next;while(n!==t)}else n===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function jd(t){var e=wr(),r=e.queue;if(r===null)throw Error(G(311));r.lastRenderedReducer=t;var s=r.dispatch,n=r.pending,i=e.memoizedState;if(n!==null){r.pending=null;var o=n=n.next;do i=t(i,o.action),o=o.next;while(o!==n);Rr(i,e.memoizedState)||(Kt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,s]}function Kx(){}function Xx(t,e){var r=et,s=wr(),n=e(),i=!Rr(s.memoizedState,n);if(i&&(s.memoizedState=n,Kt=!0),s=s.queue,Qf(Zx.bind(null,r,s,t),[t]),s.getSnapshot!==e||i||wt!==null&&wt.memoizedState.tag&1){if(r.flags|=2048,Ea(9,Qx.bind(null,r,s,n,e),void 0,null),_t===null)throw Error(G(349));Qn&30||Jx(r,e,n)}return n}function Jx(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Qx(t,e,r,s){e.value=r,e.getSnapshot=s,ev(e)&&tv(t)}function Zx(t,e,r){return r(function(){ev(e)&&tv(t)})}function ev(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Rr(t,r)}catch{return!0}}function tv(t){var e=js(t,1);e!==null&&Lr(e,t,1,-1)}function ag(t){var e=Ur();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:t},e.queue=t,t=t.dispatch=KS.bind(null,et,t),[e.memoizedState,t]}function Ea(t,e,r,s){return t={tag:t,create:e,destroy:r,deps:s,next:null},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(s=r.next,r.next=t,t.next=s,e.lastEffect=t)),t}function rv(){return wr().memoizedState}function uc(t,e,r,s){var n=Ur();et.flags|=t,n.memoizedState=Ea(1|e,r,void 0,s===void 0?null:s)}function du(t,e,r,s){var n=wr();s=s===void 0?null:s;var i=void 0;if(pt!==null){var o=pt.memoizedState;if(i=o.destroy,s!==null&&Kf(s,o.deps)){n.memoizedState=Ea(e,r,i,s);return}}et.flags|=t,n.memoizedState=Ea(1|e,r,i,s)}function lg(t,e){return uc(8390656,8,t,e)}function Qf(t,e){return du(2048,8,t,e)}function sv(t,e){return du(4,2,t,e)}function nv(t,e){return du(4,4,t,e)}function iv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ov(t,e,r){return r=r!=null?r.concat([t]):null,du(4,4,iv.bind(null,e,t),r)}function Zf(){}function av(t,e){var r=wr();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&Kf(e,s[1])?s[0]:(r.memoizedState=[t,e],t)}function lv(t,e){var r=wr();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&Kf(e,s[1])?s[0]:(t=t(),r.memoizedState=[t,e],t)}function cv(t,e,r){return Qn&21?(Rr(r,e)||(r=mx(),et.lanes|=r,Zn|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Kt=!0),t.memoizedState=r)}function GS(t,e){var r=Be;Be=r!==0&&4>r?r:4,t(!0);var s=kd.transition;kd.transition={};try{t(!1),e()}finally{Be=r,kd.transition=s}}function uv(){return wr().memoizedState}function qS(t,e,r){var s=un(t);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},dv(t))hv(e,r);else if(r=Yx(t,e,r,s),r!==null){var n=Ft();Lr(r,t,s,n),fv(r,e,s)}}function KS(t,e,r){var s=un(t),n={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(dv(t))hv(e,n);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,r);if(n.hasEagerState=!0,n.eagerState=a,Rr(a,o)){var l=e.interleaved;l===null?(n.next=n,Hf(e)):(n.next=l.next,l.next=n),e.interleaved=n;return}}catch{}finally{}r=Yx(t,e,n,s),r!==null&&(n=Ft(),Lr(r,t,s,n),fv(r,e,s))}}function dv(t){var e=t.alternate;return t===et||e!==null&&e===et}function hv(t,e){Zo=Ic=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function fv(t,e,r){if(r&4194240){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,Tf(t,r)}}var $c={readContext:br,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useInsertionEffect:Ct,useLayoutEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useMutableSource:Ct,useSyncExternalStore:Ct,useId:Ct,unstable_isNewReconciler:!1},XS={readContext:br,useCallback:function(t,e){return Ur().memoizedState=[t,e===void 0?null:e],t},useContext:br,useEffect:lg,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,uc(4194308,4,iv.bind(null,e,t),r)},useLayoutEffect:function(t,e){return uc(4194308,4,t,e)},useInsertionEffect:function(t,e){return uc(4,2,t,e)},useMemo:function(t,e){var r=Ur();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var s=Ur();return e=r!==void 0?r(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=qS.bind(null,et,t),[s.memoizedState,t]},useRef:function(t){var e=Ur();return t={current:t},e.memoizedState=t},useState:ag,useDebugValue:Zf,useDeferredValue:function(t){return Ur().memoizedState=t},useTransition:function(){var t=ag(!1),e=t[0];return t=GS.bind(null,t[1]),Ur().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var s=et,n=Ur();if(Je){if(r===void 0)throw Error(G(407));r=r()}else{if(r=e(),_t===null)throw Error(G(349));Qn&30||Jx(s,e,r)}n.memoizedState=r;var i={value:r,getSnapshot:e};return n.queue=i,lg(Zx.bind(null,s,i,t),[t]),s.flags|=2048,Ea(9,Qx.bind(null,s,i,r,e),void 0,null),r},useId:function(){var t=Ur(),e=_t.identifierPrefix;if(Je){var r=xs,s=ys;r=(s&~(1<<32-Or(s)-1)).toString(32)+r,e=":"+e+"R"+r,r=Na++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=YS++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},JS={readContext:br,useCallback:av,useContext:br,useEffect:Qf,useImperativeHandle:ov,useInsertionEffect:sv,useLayoutEffect:nv,useMemo:lv,useReducer:Sd,useRef:rv,useState:function(){return Sd(Ca)},useDebugValue:Zf,useDeferredValue:function(t){var e=wr();return cv(e,pt.memoizedState,t)},useTransition:function(){var t=Sd(Ca)[0],e=wr().memoizedState;return[t,e]},useMutableSource:Kx,useSyncExternalStore:Xx,useId:uv,unstable_isNewReconciler:!1},QS={readContext:br,useCallback:av,useContext:br,useEffect:Qf,useImperativeHandle:ov,useInsertionEffect:sv,useLayoutEffect:nv,useMemo:lv,useReducer:jd,useRef:rv,useState:function(){return jd(Ca)},useDebugValue:Zf,useDeferredValue:function(t){var e=wr();return pt===null?e.memoizedState=t:cv(e,pt.memoizedState,t)},useTransition:function(){var t=jd(Ca)[0],e=wr().memoizedState;return[t,e]},useMutableSource:Kx,useSyncExternalStore:Xx,useId:uv,unstable_isNewReconciler:!1};function Mr(t,e){if(t&&t.defaultProps){e=rt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Eh(t,e,r,s){e=t.memoizedState,r=r(s,e),r=r==null?e:rt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var hu={isMounted:function(t){return(t=t._reactInternals)?ni(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var s=Ft(),n=un(t),i=_s(s,n);i.payload=e,r!=null&&(i.callback=r),e=ln(t,i,n),e!==null&&(Lr(e,t,n,s),lc(e,t,n))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var s=Ft(),n=un(t),i=_s(s,n);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=ln(t,i,n),e!==null&&(Lr(e,t,n,s),lc(e,t,n))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Ft(),s=un(t),n=_s(r,s);n.tag=2,e!=null&&(n.callback=e),e=ln(t,n,s),e!==null&&(Lr(e,t,s,r),lc(e,t,s))}};function cg(t,e,r,s,n,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!ba(r,s)||!ba(n,i):!0}function mv(t,e,r){var s=!1,n=pn,i=e.contextType;return typeof i=="object"&&i!==null?i=br(i):(n=Jt(e)?Xn:Ot.current,s=e.contextTypes,i=(s=s!=null)?Gi(t,n):pn),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=hu,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=i),e}function ug(t,e,r,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,s),e.state!==t&&hu.enqueueReplaceState(e,e.state,null)}function Mh(t,e,r,s){var n=t.stateNode;n.props=r,n.state=t.memoizedState,n.refs={},Vf(t);var i=e.contextType;typeof i=="object"&&i!==null?n.context=br(i):(i=Jt(e)?Xn:Ot.current,n.context=Gi(t,i)),n.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Eh(t,e,i,r),n.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(e=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),e!==n.state&&hu.enqueueReplaceState(n,n.state,null),Rc(t,r,n,s),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function Ji(t,e){try{var r="",s=e;do r+=N2(s),s=s.return;while(s);var n=r}catch(i){n=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:n,digest:null}}function Nd(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Th(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var ZS=typeof WeakMap=="function"?WeakMap:Map;function pv(t,e,r){r=_s(-1,r),r.tag=3,r.payload={element:null};var s=e.value;return r.callback=function(){zc||(zc=!0,zh=s),Th(t,e)},r}function gv(t,e,r){r=_s(-1,r),r.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var n=e.value;r.payload=function(){return s(n)},r.callback=function(){Th(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Th(t,e),typeof s!="function"&&(cn===null?cn=new Set([this]):cn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function dg(t,e,r){var s=t.pingCache;if(s===null){s=t.pingCache=new ZS;var n=new Set;s.set(e,n)}else n=s.get(e),n===void 0&&(n=new Set,s.set(e,n));n.has(r)||(n.add(r),t=fj.bind(null,t,e,r),e.then(t,t))}function hg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function fg(t,e,r,s,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=_s(-1,1),e.tag=2,ln(r,e,1))),r.lanes|=1),t)}var ej=Es.ReactCurrentOwner,Kt=!1;function $t(t,e,r,s){e.child=t===null?Vx(e,null,r,s):Ki(e,t.child,r,s)}function mg(t,e,r,s,n){r=r.render;var i=e.ref;return Wi(e,n),s=Xf(t,e,r,s,i,n),r=Jf(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,Ns(t,e,n)):(Je&&r&&$f(e),e.flags|=1,$t(t,e,s,n),e.child)}function pg(t,e,r,s,n){if(t===null){var i=r.type;return typeof i=="function"&&!am(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,yv(t,e,i,s,n)):(t=mc(r.type,null,s,e,e.mode,n),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&n)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:ba,r(o,s)&&t.ref===e.ref)return Ns(t,e,n)}return e.flags|=1,t=dn(i,s),t.ref=e.ref,t.return=e,e.child=t}function yv(t,e,r,s,n){if(t!==null){var i=t.memoizedProps;if(ba(i,s)&&t.ref===e.ref)if(Kt=!1,e.pendingProps=s=i,(t.lanes&n)!==0)t.flags&131072&&(Kt=!0);else return e.lanes=t.lanes,Ns(t,e,n)}return Ph(t,e,r,s,n)}function xv(t,e,r){var s=e.pendingProps,n=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(Ri,nr),nr|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ve(Ri,nr),nr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:r,Ve(Ri,nr),nr|=s}else i!==null?(s=i.baseLanes|r,e.memoizedState=null):s=r,Ve(Ri,nr),nr|=s;return $t(t,e,n,r),e.child}function vv(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Ph(t,e,r,s,n){var i=Jt(r)?Xn:Ot.current;return i=Gi(e,i),Wi(e,n),r=Xf(t,e,r,s,i,n),s=Jf(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,Ns(t,e,n)):(Je&&s&&$f(e),e.flags|=1,$t(t,e,r,n),e.child)}function gg(t,e,r,s,n){if(Jt(r)){var i=!0;Tc(e)}else i=!1;if(Wi(e,n),e.stateNode===null)dc(t,e),mv(e,r,s),Mh(e,r,s,n),s=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=br(d):(d=Jt(r)?Xn:Ot.current,d=Gi(e,d));var h=r.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||l!==d)&&ug(e,o,s,d),Ys=!1;var p=e.memoizedState;o.state=p,Rc(e,s,o,n),l=e.memoizedState,a!==s||p!==l||Xt.current||Ys?(typeof h=="function"&&(Eh(e,r,h,s),l=e.memoizedState),(a=Ys||cg(e,r,a,s,p,l,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=l),o.props=s,o.state=l,o.context=d,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,Gx(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:Mr(e.type,a),o.props=d,m=e.pendingProps,p=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=br(l):(l=Jt(r)?Xn:Ot.current,l=Gi(e,l));var x=r.getDerivedStateFromProps;(h=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==m||p!==l)&&ug(e,o,s,l),Ys=!1,p=e.memoizedState,o.state=p,Rc(e,s,o,n);var b=e.memoizedState;a!==m||p!==b||Xt.current||Ys?(typeof x=="function"&&(Eh(e,r,x,s),b=e.memoizedState),(d=Ys||cg(e,r,d,s,p,b,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,b,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,b,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=b),o.props=s,o.state=b,o.context=l,s=d):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),s=!1)}return Dh(t,e,r,s,i,n)}function Dh(t,e,r,s,n,i){vv(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return n&&tg(e,r,!1),Ns(t,e,i);s=e.stateNode,ej.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=Ki(e,t.child,null,i),e.child=Ki(e,null,a,i)):$t(t,e,a,i),e.memoizedState=s.state,n&&tg(e,r,!0),e.child}function bv(t){var e=t.stateNode;e.pendingContext?eg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&eg(t,e.context,!1),Yf(t,e.containerInfo)}function yg(t,e,r,s,n){return qi(),zf(n),e.flags|=256,$t(t,e,r,s),e.child}var Oh={dehydrated:null,treeContext:null,retryLane:0};function Lh(t){return{baseLanes:t,cachePool:null,transitions:null}}function wv(t,e,r){var s=e.pendingProps,n=Qe.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(n&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),Ve(Qe,n&1),t===null)return Nh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=pu(o,s,0,null),t=Gn(t,s,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Lh(r),e.memoizedState=Oh,t):em(e,o));if(n=t.memoizedState,n!==null&&(a=n.dehydrated,a!==null))return tj(t,e,o,s,a,n,r);if(i){i=s.fallback,o=e.mode,n=t.child,a=n.sibling;var l={mode:"hidden",children:s.children};return!(o&1)&&e.child!==n?(s=e.child,s.childLanes=0,s.pendingProps=l,e.deletions=null):(s=dn(n,l),s.subtreeFlags=n.subtreeFlags&14680064),a!==null?i=dn(a,i):(i=Gn(i,o,r,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=t.child.memoizedState,o=o===null?Lh(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~r,e.memoizedState=Oh,s}return i=t.child,t=i.sibling,s=dn(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=r),s.return=e,s.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=s,e.memoizedState=null,s}function em(t,e){return e=pu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Dl(t,e,r,s){return s!==null&&zf(s),Ki(e,t.child,null,r),t=em(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function tj(t,e,r,s,n,i,o){if(r)return e.flags&256?(e.flags&=-257,s=Nd(Error(G(422))),Dl(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,n=e.mode,s=pu({mode:"visible",children:s.children},n,0,null),i=Gn(i,n,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&Ki(e,t.child,null,o),e.child.memoizedState=Lh(o),e.memoizedState=Oh,i);if(!(e.mode&1))return Dl(t,e,o,null);if(n.data==="$!"){if(s=n.nextSibling&&n.nextSibling.dataset,s)var a=s.dgst;return s=a,i=Error(G(419)),s=Nd(i,s,void 0),Dl(t,e,o,s)}if(a=(o&t.childLanes)!==0,Kt||a){if(s=_t,s!==null){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(s.suspendedLanes|o)?0:n,n!==0&&n!==i.retryLane&&(i.retryLane=n,js(t,n),Lr(s,t,n,-1))}return om(),s=Nd(Error(G(421))),Dl(t,e,o,s)}return n.data==="$?"?(e.flags|=128,e.child=t.child,e=mj.bind(null,t),n._reactRetry=e,null):(t=i.treeContext,ir=an(n.nextSibling),or=e,Je=!0,Dr=null,t!==null&&(pr[gr++]=ys,pr[gr++]=xs,pr[gr++]=Jn,ys=t.id,xs=t.overflow,Jn=e),e=em(e,s.children),e.flags|=4096,e)}function xg(t,e,r){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Ch(t.return,e,r)}function Cd(t,e,r,s,n){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:n}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=r,i.tailMode=n)}function _v(t,e,r){var s=e.pendingProps,n=s.revealOrder,i=s.tail;if($t(t,e,s.children,r),s=Qe.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&xg(t,r,e);else if(t.tag===19)xg(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(Ve(Qe,s),!(e.mode&1))e.memoizedState=null;else switch(n){case"forwards":for(r=e.child,n=null;r!==null;)t=r.alternate,t!==null&&Ac(t)===null&&(n=r),r=r.sibling;r=n,r===null?(n=e.child,e.child=null):(n=r.sibling,r.sibling=null),Cd(e,!1,n,r,i);break;case"backwards":for(r=null,n=e.child,e.child=null;n!==null;){if(t=n.alternate,t!==null&&Ac(t)===null){e.child=n;break}t=n.sibling,n.sibling=r,r=n,n=t}Cd(e,!0,r,null,i);break;case"together":Cd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function dc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ns(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Zn|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,r=dn(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=dn(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function rj(t,e,r){switch(e.tag){case 3:bv(e),qi();break;case 5:qx(e);break;case 1:Jt(e.type)&&Tc(e);break;case 4:Yf(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,n=e.memoizedProps.value;Ve(Oc,s._currentValue),s._currentValue=n;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Ve(Qe,Qe.current&1),e.flags|=128,null):r&e.child.childLanes?wv(t,e,r):(Ve(Qe,Qe.current&1),t=Ns(t,e,r),t!==null?t.sibling:null);Ve(Qe,Qe.current&1);break;case 19:if(s=(r&e.childLanes)!==0,t.flags&128){if(s)return _v(t,e,r);e.flags|=128}if(n=e.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Ve(Qe,Qe.current),s)break;return null;case 22:case 23:return e.lanes=0,xv(t,e,r)}return Ns(t,e,r)}var kv,Rh,Sv,jv;kv=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Rh=function(){};Sv=function(t,e,r,s){var n=t.memoizedProps;if(n!==s){t=e.stateNode,Bn(qr.current);var i=null;switch(r){case"input":n=sh(t,n),s=sh(t,s),i=[];break;case"select":n=rt({},n,{value:void 0}),s=rt({},s,{value:void 0}),i=[];break;case"textarea":n=oh(t,n),s=oh(t,s),i=[];break;default:typeof n.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Ec)}lh(r,s);var o;r=null;for(d in n)if(!s.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var a=n[d];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(fa.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var l=s[d];if(a=n!=null?n[d]:void 0,s.hasOwnProperty(d)&&l!==a&&(l!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(i||(i=[]),i.push(d,r)),r=l;else d==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(d,l)):d==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(d,""+l):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(fa.hasOwnProperty(d)?(l!=null&&d==="onScroll"&&Ge("scroll",t),i||a===l||(i=[])):(i=i||[]).push(d,l))}r&&(i=i||[]).push("style",r);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};jv=function(t,e,r,s){r!==s&&(e.flags|=4)};function Do(t,e){if(!Je)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Et(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,s=0;if(e)for(var n=t.child;n!==null;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags&14680064,s|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=s,t.childLanes=r,e}function sj(t,e,r){var s=e.pendingProps;switch(Ff(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(e),null;case 1:return Jt(e.type)&&Mc(),Et(e),null;case 3:return s=e.stateNode,Xi(),Ke(Xt),Ke(Ot),qf(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Tl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Dr!==null&&(Uh(Dr),Dr=null))),Rh(t,e),Et(e),null;case 5:Gf(e);var n=Bn(ja.current);if(r=e.type,t!==null&&e.stateNode!=null)Sv(t,e,r,s,n),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(G(166));return Et(e),null}if(t=Bn(qr.current),Tl(e)){s=e.stateNode,r=e.type;var i=e.memoizedProps;switch(s[Yr]=e,s[ka]=i,t=(e.mode&1)!==0,r){case"dialog":Ge("cancel",s),Ge("close",s);break;case"iframe":case"object":case"embed":Ge("load",s);break;case"video":case"audio":for(n=0;n<Uo.length;n++)Ge(Uo[n],s);break;case"source":Ge("error",s);break;case"img":case"image":case"link":Ge("error",s),Ge("load",s);break;case"details":Ge("toggle",s);break;case"input":Cp(s,i),Ge("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Ge("invalid",s);break;case"textarea":Mp(s,i),Ge("invalid",s)}lh(r,i),n=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?s.textContent!==a&&(i.suppressHydrationWarning!==!0&&Ml(s.textContent,a,t),n=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Ml(s.textContent,a,t),n=["children",""+a]):fa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ge("scroll",s)}switch(r){case"input":wl(s),Ep(s,i,!0);break;case"textarea":wl(s),Tp(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Ec)}s=n,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Zy(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(r,{is:s.is}):(t=o.createElement(r),r==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,r),t[Yr]=e,t[ka]=s,kv(t,e,!1,!1),e.stateNode=t;e:{switch(o=ch(r,s),r){case"dialog":Ge("cancel",t),Ge("close",t),n=s;break;case"iframe":case"object":case"embed":Ge("load",t),n=s;break;case"video":case"audio":for(n=0;n<Uo.length;n++)Ge(Uo[n],t);n=s;break;case"source":Ge("error",t),n=s;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),n=s;break;case"details":Ge("toggle",t),n=s;break;case"input":Cp(t,s),n=sh(t,s),Ge("invalid",t);break;case"option":n=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},n=rt({},s,{value:void 0}),Ge("invalid",t);break;case"textarea":Mp(t,s),n=oh(t,s),Ge("invalid",t);break;default:n=s}lh(r,n),a=n;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?rx(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ex(t,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&ma(t,l):typeof l=="number"&&ma(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(fa.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ge("scroll",t):l!=null&&Sf(t,i,l,o))}switch(r){case"input":wl(t),Ep(t,s,!1);break;case"textarea":wl(t),Tp(t);break;case"option":s.value!=null&&t.setAttribute("value",""+mn(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?Ii(t,!!s.multiple,i,!1):s.defaultValue!=null&&Ii(t,!!s.multiple,s.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=Ec)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Et(e),null;case 6:if(t&&e.stateNode!=null)jv(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(G(166));if(r=Bn(ja.current),Bn(qr.current),Tl(e)){if(s=e.stateNode,r=e.memoizedProps,s[Yr]=e,(i=s.nodeValue!==r)&&(t=or,t!==null))switch(t.tag){case 3:Ml(s.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ml(s.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Yr]=e,e.stateNode=s}return Et(e),null;case 13:if(Ke(Qe),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Je&&ir!==null&&e.mode&1&&!(e.flags&128))Ux(),qi(),e.flags|=98560,i=!1;else if(i=Tl(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(G(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(G(317));i[Yr]=e}else qi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Et(e),i=!1}else Dr!==null&&(Uh(Dr),Dr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||Qe.current&1?gt===0&&(gt=3):om())),e.updateQueue!==null&&(e.flags|=4),Et(e),null);case 4:return Xi(),Rh(t,e),t===null&&wa(e.stateNode.containerInfo),Et(e),null;case 10:return Uf(e.type._context),Et(e),null;case 17:return Jt(e.type)&&Mc(),Et(e),null;case 19:if(Ke(Qe),i=e.memoizedState,i===null)return Et(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)Do(i,!1);else{if(gt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ac(t),o!==null){for(e.flags|=128,Do(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=r,r=e.child;r!==null;)i=r,t=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ve(Qe,Qe.current&1|2),e.child}t=t.sibling}i.tail!==null&&lt()>Qi&&(e.flags|=128,s=!0,Do(i,!1),e.lanes=4194304)}else{if(!s)if(t=Ac(o),t!==null){if(e.flags|=128,s=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Do(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Je)return Et(e),null}else 2*lt()-i.renderingStartTime>Qi&&r!==1073741824&&(e.flags|=128,s=!0,Do(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(r=i.last,r!==null?r.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=lt(),e.sibling=null,r=Qe.current,Ve(Qe,s?r&1|2:r&1),e):(Et(e),null);case 22:case 23:return im(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?nr&1073741824&&(Et(e),e.subtreeFlags&6&&(e.flags|=8192)):Et(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function nj(t,e){switch(Ff(e),e.tag){case 1:return Jt(e.type)&&Mc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xi(),Ke(Xt),Ke(Ot),qf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Gf(e),null;case 13:if(Ke(Qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));qi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ke(Qe),null;case 4:return Xi(),null;case 10:return Uf(e.type._context),null;case 22:case 23:return im(),null;case 24:return null;default:return null}}var Ol=!1,Tt=!1,ij=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Li(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){it(t,e,s)}else r.current=null}function Ah(t,e,r){try{r()}catch(s){it(t,e,s)}}var vg=!1;function oj(t,e){if(vh=jc,t=Tx(),If(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var n=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,d=0,h=0,m=t,p=null;t:for(;;){for(var x;m!==r||n!==0&&m.nodeType!==3||(a=o+n),m!==i||s!==0&&m.nodeType!==3||(l=o+s),m.nodeType===3&&(o+=m.nodeValue.length),(x=m.firstChild)!==null;)p=m,m=x;for(;;){if(m===t)break t;if(p===r&&++d===n&&(a=o),p===i&&++h===s&&(l=o),(x=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=x}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(bh={focusedElem:t,selectionRange:r},jc=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var k=b.memoizedProps,w=b.memoizedState,v=e.stateNode,_=v.getSnapshotBeforeUpdate(e.elementType===e.type?k:Mr(e.type,k),w);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(C){it(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return b=vg,vg=!1,b}function ea(t,e,r){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var n=s=s.next;do{if((n.tag&t)===t){var i=n.destroy;n.destroy=void 0,i!==void 0&&Ah(e,r,i)}n=n.next}while(n!==s)}}function fu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var s=r.create;r.destroy=s()}r=r.next}while(r!==e)}}function Ih(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Nv(t){var e=t.alternate;e!==null&&(t.alternate=null,Nv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yr],delete e[ka],delete e[kh],delete e[BS],delete e[US])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Cv(t){return t.tag===5||t.tag===3||t.tag===4}function bg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Cv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $h(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Ec));else if(s!==4&&(t=t.child,t!==null))for($h(t,e,r),t=t.sibling;t!==null;)$h(t,e,r),t=t.sibling}function Fh(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(Fh(t,e,r),t=t.sibling;t!==null;)Fh(t,e,r),t=t.sibling}var kt=null,Tr=!1;function Ws(t,e,r){for(r=r.child;r!==null;)Ev(t,e,r),r=r.sibling}function Ev(t,e,r){if(Gr&&typeof Gr.onCommitFiberUnmount=="function")try{Gr.onCommitFiberUnmount(iu,r)}catch{}switch(r.tag){case 5:Tt||Li(r,e);case 6:var s=kt,n=Tr;kt=null,Ws(t,e,r),kt=s,Tr=n,kt!==null&&(Tr?(t=kt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):kt.removeChild(r.stateNode));break;case 18:kt!==null&&(Tr?(t=kt,r=r.stateNode,t.nodeType===8?bd(t.parentNode,r):t.nodeType===1&&bd(t,r),xa(t)):bd(kt,r.stateNode));break;case 4:s=kt,n=Tr,kt=r.stateNode.containerInfo,Tr=!0,Ws(t,e,r),kt=s,Tr=n;break;case 0:case 11:case 14:case 15:if(!Tt&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){n=s=s.next;do{var i=n,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ah(r,e,o),n=n.next}while(n!==s)}Ws(t,e,r);break;case 1:if(!Tt&&(Li(r,e),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(a){it(r,e,a)}Ws(t,e,r);break;case 21:Ws(t,e,r);break;case 22:r.mode&1?(Tt=(s=Tt)||r.memoizedState!==null,Ws(t,e,r),Tt=s):Ws(t,e,r);break;default:Ws(t,e,r)}}function wg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new ij),e.forEach(function(s){var n=pj.bind(null,t,s);r.has(s)||(r.add(s),s.then(n,n))})}}function Er(t,e){var r=e.deletions;if(r!==null)for(var s=0;s<r.length;s++){var n=r[s];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:kt=a.stateNode,Tr=!1;break e;case 3:kt=a.stateNode.containerInfo,Tr=!0;break e;case 4:kt=a.stateNode.containerInfo,Tr=!0;break e}a=a.return}if(kt===null)throw Error(G(160));Ev(i,o,n),kt=null,Tr=!1;var l=n.alternate;l!==null&&(l.return=null),n.return=null}catch(d){it(n,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Mv(e,t),e=e.sibling}function Mv(t,e){var r=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Er(e,t),Fr(t),s&4){try{ea(3,t,t.return),fu(3,t)}catch(k){it(t,t.return,k)}try{ea(5,t,t.return)}catch(k){it(t,t.return,k)}}break;case 1:Er(e,t),Fr(t),s&512&&r!==null&&Li(r,r.return);break;case 5:if(Er(e,t),Fr(t),s&512&&r!==null&&Li(r,r.return),t.flags&32){var n=t.stateNode;try{ma(n,"")}catch(k){it(t,t.return,k)}}if(s&4&&(n=t.stateNode,n!=null)){var i=t.memoizedProps,o=r!==null?r.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Jy(n,i),ch(a,o);var d=ch(a,i);for(o=0;o<l.length;o+=2){var h=l[o],m=l[o+1];h==="style"?rx(n,m):h==="dangerouslySetInnerHTML"?ex(n,m):h==="children"?ma(n,m):Sf(n,h,m,d)}switch(a){case"input":nh(n,i);break;case"textarea":Qy(n,i);break;case"select":var p=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?Ii(n,!!i.multiple,x,!1):p!==!!i.multiple&&(i.defaultValue!=null?Ii(n,!!i.multiple,i.defaultValue,!0):Ii(n,!!i.multiple,i.multiple?[]:"",!1))}n[ka]=i}catch(k){it(t,t.return,k)}}break;case 6:if(Er(e,t),Fr(t),s&4){if(t.stateNode===null)throw Error(G(162));n=t.stateNode,i=t.memoizedProps;try{n.nodeValue=i}catch(k){it(t,t.return,k)}}break;case 3:if(Er(e,t),Fr(t),s&4&&r!==null&&r.memoizedState.isDehydrated)try{xa(e.containerInfo)}catch(k){it(t,t.return,k)}break;case 4:Er(e,t),Fr(t);break;case 13:Er(e,t),Fr(t),n=t.child,n.flags&8192&&(i=n.memoizedState!==null,n.stateNode.isHidden=i,!i||n.alternate!==null&&n.alternate.memoizedState!==null||(sm=lt())),s&4&&wg(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(Tt=(d=Tt)||h,Er(e,t),Tt=d):Er(e,t),Fr(t),s&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(ae=t,h=t.child;h!==null;){for(m=ae=h;ae!==null;){switch(p=ae,x=p.child,p.tag){case 0:case 11:case 14:case 15:ea(4,p,p.return);break;case 1:Li(p,p.return);var b=p.stateNode;if(typeof b.componentWillUnmount=="function"){s=p,r=p.return;try{e=s,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(k){it(s,r,k)}}break;case 5:Li(p,p.return);break;case 22:if(p.memoizedState!==null){kg(m);continue}}x!==null?(x.return=p,ae=x):kg(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{n=m.stateNode,d?(i=n.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=m.stateNode,l=m.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=tx("display",o))}catch(k){it(t,t.return,k)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(k){it(t,t.return,k)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Er(e,t),Fr(t),s&4&&wg(t);break;case 21:break;default:Er(e,t),Fr(t)}}function Fr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Cv(r)){var s=r;break e}r=r.return}throw Error(G(160))}switch(s.tag){case 5:var n=s.stateNode;s.flags&32&&(ma(n,""),s.flags&=-33);var i=bg(t);Fh(t,i,n);break;case 3:case 4:var o=s.stateNode.containerInfo,a=bg(t);$h(t,a,o);break;default:throw Error(G(161))}}catch(l){it(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function aj(t,e,r){ae=t,Tv(t)}function Tv(t,e,r){for(var s=(t.mode&1)!==0;ae!==null;){var n=ae,i=n.child;if(n.tag===22&&s){var o=n.memoizedState!==null||Ol;if(!o){var a=n.alternate,l=a!==null&&a.memoizedState!==null||Tt;a=Ol;var d=Tt;if(Ol=o,(Tt=l)&&!d)for(ae=n;ae!==null;)o=ae,l=o.child,o.tag===22&&o.memoizedState!==null?Sg(n):l!==null?(l.return=o,ae=l):Sg(n);for(;i!==null;)ae=i,Tv(i),i=i.sibling;ae=n,Ol=a,Tt=d}_g(t)}else n.subtreeFlags&8772&&i!==null?(i.return=n,ae=i):_g(t)}}function _g(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Tt||fu(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Tt)if(r===null)s.componentDidMount();else{var n=e.elementType===e.type?r.memoizedProps:Mr(e.type,r.memoizedProps);s.componentDidUpdate(n,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&og(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}og(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&xa(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}Tt||e.flags&512&&Ih(e)}catch(p){it(e,e.return,p)}}if(e===t){ae=null;break}if(r=e.sibling,r!==null){r.return=e.return,ae=r;break}ae=e.return}}function kg(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ae=r;break}ae=e.return}}function Sg(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{fu(4,e)}catch(l){it(e,r,l)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var n=e.return;try{s.componentDidMount()}catch(l){it(e,n,l)}}var i=e.return;try{Ih(e)}catch(l){it(e,i,l)}break;case 5:var o=e.return;try{Ih(e)}catch(l){it(e,o,l)}}}catch(l){it(e,e.return,l)}if(e===t){ae=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ae=a;break}ae=e.return}}var lj=Math.ceil,Fc=Es.ReactCurrentDispatcher,tm=Es.ReactCurrentOwner,vr=Es.ReactCurrentBatchConfig,Oe=0,_t=null,ut=null,St=0,nr=0,Ri=xn(0),gt=0,Ma=null,Zn=0,mu=0,rm=0,ta=null,Yt=null,sm=0,Qi=1/0,fs=null,zc=!1,zh=null,cn=null,Ll=!1,Zs=null,Wc=0,ra=0,Wh=null,hc=-1,fc=0;function Ft(){return Oe&6?lt():hc!==-1?hc:hc=lt()}function un(t){return t.mode&1?Oe&2&&St!==0?St&-St:VS.transition!==null?(fc===0&&(fc=mx()),fc):(t=Be,t!==0||(t=window.event,t=t===void 0?16:wx(t.type)),t):1}function Lr(t,e,r,s){if(50<ra)throw ra=0,Wh=null,Error(G(185));Va(t,r,s),(!(Oe&2)||t!==_t)&&(t===_t&&(!(Oe&2)&&(mu|=r),gt===4&&Ks(t,St)),Qt(t,s),r===1&&Oe===0&&!(e.mode&1)&&(Qi=lt()+500,uu&&vn()))}function Qt(t,e){var r=t.callbackNode;V2(t,e);var s=Sc(t,t===_t?St:0);if(s===0)r!==null&&Op(r),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(r!=null&&Op(r),e===1)t.tag===0?HS(jg.bind(null,t)):zx(jg.bind(null,t)),zS(function(){!(Oe&6)&&vn()}),r=null;else{switch(px(s)){case 1:r=Mf;break;case 4:r=hx;break;case 16:r=kc;break;case 536870912:r=fx;break;default:r=kc}r=$v(r,Pv.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Pv(t,e){if(hc=-1,fc=0,Oe&6)throw Error(G(327));var r=t.callbackNode;if(Bi()&&t.callbackNode!==r)return null;var s=Sc(t,t===_t?St:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=Bc(t,s);else{e=s;var n=Oe;Oe|=2;var i=Ov();(_t!==t||St!==e)&&(fs=null,Qi=lt()+500,Yn(t,e));do try{dj();break}catch(a){Dv(t,a)}while(!0);Bf(),Fc.current=i,Oe=n,ut!==null?e=0:(_t=null,St=0,e=gt)}if(e!==0){if(e===2&&(n=mh(t),n!==0&&(s=n,e=Bh(t,n))),e===1)throw r=Ma,Yn(t,0),Ks(t,s),Qt(t,lt()),r;if(e===6)Ks(t,s);else{if(n=t.current.alternate,!(s&30)&&!cj(n)&&(e=Bc(t,s),e===2&&(i=mh(t),i!==0&&(s=i,e=Bh(t,i))),e===1))throw r=Ma,Yn(t,0),Ks(t,s),Qt(t,lt()),r;switch(t.finishedWork=n,t.finishedLanes=s,e){case 0:case 1:throw Error(G(345));case 2:Rn(t,Yt,fs);break;case 3:if(Ks(t,s),(s&130023424)===s&&(e=sm+500-lt(),10<e)){if(Sc(t,0)!==0)break;if(n=t.suspendedLanes,(n&s)!==s){Ft(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=_h(Rn.bind(null,t,Yt,fs),e);break}Rn(t,Yt,fs);break;case 4:if(Ks(t,s),(s&4194240)===s)break;for(e=t.eventTimes,n=-1;0<s;){var o=31-Or(s);i=1<<o,o=e[o],o>n&&(n=o),s&=~i}if(s=n,s=lt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*lj(s/1960))-s,10<s){t.timeoutHandle=_h(Rn.bind(null,t,Yt,fs),s);break}Rn(t,Yt,fs);break;case 5:Rn(t,Yt,fs);break;default:throw Error(G(329))}}}return Qt(t,lt()),t.callbackNode===r?Pv.bind(null,t):null}function Bh(t,e){var r=ta;return t.current.memoizedState.isDehydrated&&(Yn(t,e).flags|=256),t=Bc(t,e),t!==2&&(e=Yt,Yt=r,e!==null&&Uh(e)),t}function Uh(t){Yt===null?Yt=t:Yt.push.apply(Yt,t)}function cj(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var n=r[s],i=n.getSnapshot;n=n.value;try{if(!Rr(i(),n))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ks(t,e){for(e&=~rm,e&=~mu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Or(e),s=1<<r;t[r]=-1,e&=~s}}function jg(t){if(Oe&6)throw Error(G(327));Bi();var e=Sc(t,0);if(!(e&1))return Qt(t,lt()),null;var r=Bc(t,e);if(t.tag!==0&&r===2){var s=mh(t);s!==0&&(e=s,r=Bh(t,s))}if(r===1)throw r=Ma,Yn(t,0),Ks(t,e),Qt(t,lt()),r;if(r===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Rn(t,Yt,fs),Qt(t,lt()),null}function nm(t,e){var r=Oe;Oe|=1;try{return t(e)}finally{Oe=r,Oe===0&&(Qi=lt()+500,uu&&vn())}}function ei(t){Zs!==null&&Zs.tag===0&&!(Oe&6)&&Bi();var e=Oe;Oe|=1;var r=vr.transition,s=Be;try{if(vr.transition=null,Be=1,t)return t()}finally{Be=s,vr.transition=r,Oe=e,!(Oe&6)&&vn()}}function im(){nr=Ri.current,Ke(Ri)}function Yn(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,FS(r)),ut!==null)for(r=ut.return;r!==null;){var s=r;switch(Ff(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Mc();break;case 3:Xi(),Ke(Xt),Ke(Ot),qf();break;case 5:Gf(s);break;case 4:Xi();break;case 13:Ke(Qe);break;case 19:Ke(Qe);break;case 10:Uf(s.type._context);break;case 22:case 23:im()}r=r.return}if(_t=t,ut=t=dn(t.current,null),St=nr=e,gt=0,Ma=null,rm=mu=Zn=0,Yt=ta=null,Wn!==null){for(e=0;e<Wn.length;e++)if(r=Wn[e],s=r.interleaved,s!==null){r.interleaved=null;var n=s.next,i=r.pending;if(i!==null){var o=i.next;i.next=n,s.next=o}r.pending=s}Wn=null}return t}function Dv(t,e){do{var r=ut;try{if(Bf(),cc.current=$c,Ic){for(var s=et.memoizedState;s!==null;){var n=s.queue;n!==null&&(n.pending=null),s=s.next}Ic=!1}if(Qn=0,wt=pt=et=null,Zo=!1,Na=0,tm.current=null,r===null||r.return===null){gt=1,Ma=e,ut=null;break}e:{var i=t,o=r.return,a=r,l=e;if(e=St,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var d=l,h=a,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var x=hg(o);if(x!==null){x.flags&=-257,fg(x,o,a,i,e),x.mode&1&&dg(i,d,e),e=x,l=d;var b=e.updateQueue;if(b===null){var k=new Set;k.add(l),e.updateQueue=k}else b.add(l);break e}else{if(!(e&1)){dg(i,d,e),om();break e}l=Error(G(426))}}else if(Je&&a.mode&1){var w=hg(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),fg(w,o,a,i,e),zf(Ji(l,a));break e}}i=l=Ji(l,a),gt!==4&&(gt=2),ta===null?ta=[i]:ta.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=pv(i,l,e);ig(i,v);break e;case 1:a=l;var _=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(cn===null||!cn.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=gv(i,a,e);ig(i,C);break e}}i=i.return}while(i!==null)}Rv(r)}catch(E){e=E,ut===r&&r!==null&&(ut=r=r.return);continue}break}while(!0)}function Ov(){var t=Fc.current;return Fc.current=$c,t===null?$c:t}function om(){(gt===0||gt===3||gt===2)&&(gt=4),_t===null||!(Zn&268435455)&&!(mu&268435455)||Ks(_t,St)}function Bc(t,e){var r=Oe;Oe|=2;var s=Ov();(_t!==t||St!==e)&&(fs=null,Yn(t,e));do try{uj();break}catch(n){Dv(t,n)}while(!0);if(Bf(),Oe=r,Fc.current=s,ut!==null)throw Error(G(261));return _t=null,St=0,gt}function uj(){for(;ut!==null;)Lv(ut)}function dj(){for(;ut!==null&&!A2();)Lv(ut)}function Lv(t){var e=Iv(t.alternate,t,nr);t.memoizedProps=t.pendingProps,e===null?Rv(t):ut=e,tm.current=null}function Rv(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=nj(r,e),r!==null){r.flags&=32767,ut=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{gt=6,ut=null;return}}else if(r=sj(r,e,nr),r!==null){ut=r;return}if(e=e.sibling,e!==null){ut=e;return}ut=e=t}while(e!==null);gt===0&&(gt=5)}function Rn(t,e,r){var s=Be,n=vr.transition;try{vr.transition=null,Be=1,hj(t,e,r,s)}finally{vr.transition=n,Be=s}return null}function hj(t,e,r,s){do Bi();while(Zs!==null);if(Oe&6)throw Error(G(327));r=t.finishedWork;var n=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(Y2(t,i),t===_t&&(ut=_t=null,St=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ll||(Ll=!0,$v(kc,function(){return Bi(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=vr.transition,vr.transition=null;var o=Be;Be=1;var a=Oe;Oe|=4,tm.current=null,oj(t,r),Mv(r,t),DS(bh),jc=!!vh,bh=vh=null,t.current=r,aj(r),I2(),Oe=a,Be=o,vr.transition=i}else t.current=r;if(Ll&&(Ll=!1,Zs=t,Wc=n),i=t.pendingLanes,i===0&&(cn=null),z2(r.stateNode),Qt(t,lt()),e!==null)for(s=t.onRecoverableError,r=0;r<e.length;r++)n=e[r],s(n.value,{componentStack:n.stack,digest:n.digest});if(zc)throw zc=!1,t=zh,zh=null,t;return Wc&1&&t.tag!==0&&Bi(),i=t.pendingLanes,i&1?t===Wh?ra++:(ra=0,Wh=t):ra=0,vn(),null}function Bi(){if(Zs!==null){var t=px(Wc),e=vr.transition,r=Be;try{if(vr.transition=null,Be=16>t?16:t,Zs===null)var s=!1;else{if(t=Zs,Zs=null,Wc=0,Oe&6)throw Error(G(331));var n=Oe;for(Oe|=4,ae=t.current;ae!==null;){var i=ae,o=i.child;if(ae.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var d=a[l];for(ae=d;ae!==null;){var h=ae;switch(h.tag){case 0:case 11:case 15:ea(8,h,i)}var m=h.child;if(m!==null)m.return=h,ae=m;else for(;ae!==null;){h=ae;var p=h.sibling,x=h.return;if(Nv(h),h===d){ae=null;break}if(p!==null){p.return=x,ae=p;break}ae=x}}}var b=i.alternate;if(b!==null){var k=b.child;if(k!==null){b.child=null;do{var w=k.sibling;k.sibling=null,k=w}while(k!==null)}}ae=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ae=o;else e:for(;ae!==null;){if(i=ae,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ea(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,ae=v;break e}ae=i.return}}var _=t.current;for(ae=_;ae!==null;){o=ae;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,ae=S;else e:for(o=_;ae!==null;){if(a=ae,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:fu(9,a)}}catch(E){it(a,a.return,E)}if(a===o){ae=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,ae=C;break e}ae=a.return}}if(Oe=n,vn(),Gr&&typeof Gr.onPostCommitFiberRoot=="function")try{Gr.onPostCommitFiberRoot(iu,t)}catch{}s=!0}return s}finally{Be=r,vr.transition=e}}return!1}function Ng(t,e,r){e=Ji(r,e),e=pv(t,e,1),t=ln(t,e,1),e=Ft(),t!==null&&(Va(t,1,e),Qt(t,e))}function it(t,e,r){if(t.tag===3)Ng(t,t,r);else for(;e!==null;){if(e.tag===3){Ng(e,t,r);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(cn===null||!cn.has(s))){t=Ji(r,t),t=gv(e,t,1),e=ln(e,t,1),t=Ft(),e!==null&&(Va(e,1,t),Qt(e,t));break}}e=e.return}}function fj(t,e,r){var s=t.pingCache;s!==null&&s.delete(e),e=Ft(),t.pingedLanes|=t.suspendedLanes&r,_t===t&&(St&r)===r&&(gt===4||gt===3&&(St&130023424)===St&&500>lt()-sm?Yn(t,0):rm|=r),Qt(t,e)}function Av(t,e){e===0&&(t.mode&1?(e=Sl,Sl<<=1,!(Sl&130023424)&&(Sl=4194304)):e=1);var r=Ft();t=js(t,e),t!==null&&(Va(t,e,r),Qt(t,r))}function mj(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Av(t,r)}function pj(t,e){var r=0;switch(t.tag){case 13:var s=t.stateNode,n=t.memoizedState;n!==null&&(r=n.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(G(314))}s!==null&&s.delete(e),Av(t,r)}var Iv;Iv=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xt.current)Kt=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Kt=!1,rj(t,e,r);Kt=!!(t.flags&131072)}else Kt=!1,Je&&e.flags&1048576&&Wx(e,Dc,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;dc(t,e),t=e.pendingProps;var n=Gi(e,Ot.current);Wi(e,r),n=Xf(null,e,s,t,n,r);var i=Jf();return e.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jt(s)?(i=!0,Tc(e)):i=!1,e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Vf(e),n.updater=hu,e.stateNode=n,n._reactInternals=e,Mh(e,s,t,r),e=Dh(null,e,s,!0,i,r)):(e.tag=0,Je&&i&&$f(e),$t(null,e,n,r),e=e.child),e;case 16:s=e.elementType;e:{switch(dc(t,e),t=e.pendingProps,n=s._init,s=n(s._payload),e.type=s,n=e.tag=yj(s),t=Mr(s,t),n){case 0:e=Ph(null,e,s,t,r);break e;case 1:e=gg(null,e,s,t,r);break e;case 11:e=mg(null,e,s,t,r);break e;case 14:e=pg(null,e,s,Mr(s.type,t),r);break e}throw Error(G(306,s,""))}return e;case 0:return s=e.type,n=e.pendingProps,n=e.elementType===s?n:Mr(s,n),Ph(t,e,s,n,r);case 1:return s=e.type,n=e.pendingProps,n=e.elementType===s?n:Mr(s,n),gg(t,e,s,n,r);case 3:e:{if(bv(e),t===null)throw Error(G(387));s=e.pendingProps,i=e.memoizedState,n=i.element,Gx(t,e),Rc(e,s,null,r);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){n=Ji(Error(G(423)),e),e=yg(t,e,s,r,n);break e}else if(s!==n){n=Ji(Error(G(424)),e),e=yg(t,e,s,r,n);break e}else for(ir=an(e.stateNode.containerInfo.firstChild),or=e,Je=!0,Dr=null,r=Vx(e,null,s,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(qi(),s===n){e=Ns(t,e,r);break e}$t(t,e,s,r)}e=e.child}return e;case 5:return qx(e),t===null&&Nh(e),s=e.type,n=e.pendingProps,i=t!==null?t.memoizedProps:null,o=n.children,wh(s,n)?o=null:i!==null&&wh(s,i)&&(e.flags|=32),vv(t,e),$t(t,e,o,r),e.child;case 6:return t===null&&Nh(e),null;case 13:return wv(t,e,r);case 4:return Yf(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Ki(e,null,s,r):$t(t,e,s,r),e.child;case 11:return s=e.type,n=e.pendingProps,n=e.elementType===s?n:Mr(s,n),mg(t,e,s,n,r);case 7:return $t(t,e,e.pendingProps,r),e.child;case 8:return $t(t,e,e.pendingProps.children,r),e.child;case 12:return $t(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(s=e.type._context,n=e.pendingProps,i=e.memoizedProps,o=n.value,Ve(Oc,s._currentValue),s._currentValue=o,i!==null)if(Rr(i.value,o)){if(i.children===n.children&&!Xt.current){e=Ns(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===s){if(i.tag===1){l=_s(-1,r&-r),l.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?l.next=l:(l.next=h.next,h.next=l),d.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),Ch(i.return,r,e),a.lanes|=r;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(G(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),Ch(o,r,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}$t(t,e,n.children,r),e=e.child}return e;case 9:return n=e.type,s=e.pendingProps.children,Wi(e,r),n=br(n),s=s(n),e.flags|=1,$t(t,e,s,r),e.child;case 14:return s=e.type,n=Mr(s,e.pendingProps),n=Mr(s.type,n),pg(t,e,s,n,r);case 15:return yv(t,e,e.type,e.pendingProps,r);case 17:return s=e.type,n=e.pendingProps,n=e.elementType===s?n:Mr(s,n),dc(t,e),e.tag=1,Jt(s)?(t=!0,Tc(e)):t=!1,Wi(e,r),mv(e,s,n),Mh(e,s,n,r),Dh(null,e,s,!0,t,r);case 19:return _v(t,e,r);case 22:return xv(t,e,r)}throw Error(G(156,e.tag))};function $v(t,e){return dx(t,e)}function gj(t,e,r,s){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yr(t,e,r,s){return new gj(t,e,r,s)}function am(t){return t=t.prototype,!(!t||!t.isReactComponent)}function yj(t){if(typeof t=="function")return am(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Nf)return 11;if(t===Cf)return 14}return 2}function dn(t,e){var r=t.alternate;return r===null?(r=yr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function mc(t,e,r,s,n,i){var o=2;if(s=t,typeof t=="function")am(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ji:return Gn(r.children,n,i,e);case jf:o=8,n|=8;break;case Zd:return t=yr(12,r,e,n|2),t.elementType=Zd,t.lanes=i,t;case eh:return t=yr(13,r,e,n),t.elementType=eh,t.lanes=i,t;case th:return t=yr(19,r,e,n),t.elementType=th,t.lanes=i,t;case qy:return pu(r,n,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Yy:o=10;break e;case Gy:o=9;break e;case Nf:o=11;break e;case Cf:o=14;break e;case Vs:o=16,s=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=yr(o,r,e,n),e.elementType=t,e.type=s,e.lanes=i,e}function Gn(t,e,r,s){return t=yr(7,t,s,e),t.lanes=r,t}function pu(t,e,r,s){return t=yr(22,t,s,e),t.elementType=qy,t.lanes=r,t.stateNode={isHidden:!1},t}function Ed(t,e,r){return t=yr(6,t,null,e),t.lanes=r,t}function Md(t,e,r){return e=yr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xj(t,e,r,s,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cd(0),this.expirationTimes=cd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cd(0),this.identifierPrefix=s,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function lm(t,e,r,s,n,i,o,a,l){return t=new xj(t,e,r,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=yr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vf(i),t}function vj(t,e,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Si,key:s==null?null:""+s,children:t,containerInfo:e,implementation:r}}function Fv(t){if(!t)return pn;t=t._reactInternals;e:{if(ni(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var r=t.type;if(Jt(r))return Fx(t,r,e)}return e}function zv(t,e,r,s,n,i,o,a,l){return t=lm(r,s,!0,t,n,i,o,a,l),t.context=Fv(null),r=t.current,s=Ft(),n=un(r),i=_s(s,n),i.callback=e??null,ln(r,i,n),t.current.lanes=n,Va(t,n,s),Qt(t,s),t}function gu(t,e,r,s){var n=e.current,i=Ft(),o=un(n);return r=Fv(r),e.context===null?e.context=r:e.pendingContext=r,e=_s(i,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=ln(n,e,o),t!==null&&(Lr(t,n,o,i),lc(t,n,o)),o}function Uc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Cg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function cm(t,e){Cg(t,e),(t=t.alternate)&&Cg(t,e)}function bj(){return null}var Wv=typeof reportError=="function"?reportError:function(t){console.error(t)};function um(t){this._internalRoot=t}yu.prototype.render=um.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));gu(t,e,null,null)};yu.prototype.unmount=um.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ei(function(){gu(null,t,null,null)}),e[Ss]=null}};function yu(t){this._internalRoot=t}yu.prototype.unstable_scheduleHydration=function(t){if(t){var e=xx();t={blockedOn:null,target:t,priority:e};for(var r=0;r<qs.length&&e!==0&&e<qs[r].priority;r++);qs.splice(r,0,t),r===0&&bx(t)}};function dm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Eg(){}function wj(t,e,r,s,n){if(n){if(typeof s=="function"){var i=s;s=function(){var d=Uc(o);i.call(d)}}var o=zv(e,s,t,0,null,!1,!1,"",Eg);return t._reactRootContainer=o,t[Ss]=o.current,wa(t.nodeType===8?t.parentNode:t),ei(),o}for(;n=t.lastChild;)t.removeChild(n);if(typeof s=="function"){var a=s;s=function(){var d=Uc(l);a.call(d)}}var l=lm(t,0,!1,null,null,!1,!1,"",Eg);return t._reactRootContainer=l,t[Ss]=l.current,wa(t.nodeType===8?t.parentNode:t),ei(function(){gu(e,l,r,s)}),l}function vu(t,e,r,s,n){var i=r._reactRootContainer;if(i){var o=i;if(typeof n=="function"){var a=n;n=function(){var l=Uc(o);a.call(l)}}gu(e,o,t,n)}else o=wj(r,e,t,n,s);return Uc(o)}gx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Bo(e.pendingLanes);r!==0&&(Tf(e,r|1),Qt(e,lt()),!(Oe&6)&&(Qi=lt()+500,vn()))}break;case 13:ei(function(){var s=js(t,1);if(s!==null){var n=Ft();Lr(s,t,1,n)}}),cm(t,1)}};Pf=function(t){if(t.tag===13){var e=js(t,134217728);if(e!==null){var r=Ft();Lr(e,t,134217728,r)}cm(t,134217728)}};yx=function(t){if(t.tag===13){var e=un(t),r=js(t,e);if(r!==null){var s=Ft();Lr(r,t,e,s)}cm(t,e)}};xx=function(){return Be};vx=function(t,e){var r=Be;try{return Be=t,e()}finally{Be=r}};dh=function(t,e,r){switch(e){case"input":if(nh(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var s=r[e];if(s!==t&&s.form===t.form){var n=cu(s);if(!n)throw Error(G(90));Xy(s),nh(s,n)}}}break;case"textarea":Qy(t,r);break;case"select":e=r.value,e!=null&&Ii(t,!!r.multiple,e,!1)}};ix=nm;ox=ei;var _j={usingClientEntryPoint:!1,Events:[Ga,Mi,cu,sx,nx,nm]},Oo={findFiberByHostInstance:zn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kj={bundleType:Oo.bundleType,version:Oo.version,rendererPackageName:Oo.rendererPackageName,rendererConfig:Oo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Es.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=cx(t),t===null?null:t.stateNode},findFiberByHostInstance:Oo.findFiberByHostInstance||bj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rl.isDisabled&&Rl.supportsFiber)try{iu=Rl.inject(kj),Gr=Rl}catch{}}lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_j;lr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dm(e))throw Error(G(200));return vj(t,e,null,r)};lr.createRoot=function(t,e){if(!dm(t))throw Error(G(299));var r=!1,s="",n=Wv;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(n=e.onRecoverableError)),e=lm(t,1,!1,null,null,r,!1,s,n),t[Ss]=e.current,wa(t.nodeType===8?t.parentNode:t),new um(e)};lr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=cx(e),t=t===null?null:t.stateNode,t};lr.flushSync=function(t){return ei(t)};lr.hydrate=function(t,e,r){if(!xu(e))throw Error(G(200));return vu(null,t,e,!0,r)};lr.hydrateRoot=function(t,e,r){if(!dm(t))throw Error(G(405));var s=r!=null&&r.hydratedSources||null,n=!1,i="",o=Wv;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=zv(e,null,t,1,r??null,n,!1,i,o),t[Ss]=e.current,wa(t),s)for(t=0;t<s.length;t++)r=s[t],n=r._getVersion,n=n(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,n]:e.mutableSourceEagerHydrationData.push(r,n);return new yu(e)};lr.render=function(t,e,r){if(!xu(e))throw Error(G(200));return vu(null,t,e,!1,r)};lr.unmountComponentAtNode=function(t){if(!xu(t))throw Error(G(40));return t._reactRootContainer?(ei(function(){vu(null,null,t,!1,function(){t._reactRootContainer=null,t[Ss]=null})}),!0):!1};lr.unstable_batchedUpdates=nm;lr.unstable_renderSubtreeIntoContainer=function(t,e,r,s){if(!xu(r))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return vu(t,e,r,!1,s)};lr.version="18.3.1-next-f1338f8080-20240426";function Bv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Bv)}catch(t){console.error(t)}}Bv(),By.exports=lr;var Sj=By.exports,Uv,Mg=Sj;Uv=Mg.createRoot,Mg.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ta(){return Ta=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Ta.apply(this,arguments)}var en;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(en||(en={}));const Tg="popstate";function jj(t){t===void 0&&(t={});function e(n,i){let{pathname:o="/",search:a="",hash:l=""}=ii(n.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Hh("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){let o=n.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=n.location.href,d=l.indexOf("#");a=d===-1?l:l.slice(0,d)}return a+"#"+(typeof i=="string"?i:Hc(i))}function s(n,i){hm(n.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return Cj(e,r,s,t)}function tt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function hm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Nj(){return Math.random().toString(36).substr(2,8)}function Pg(t,e){return{usr:t.state,key:t.key,idx:e}}function Hh(t,e,r,s){return r===void 0&&(r=null),Ta({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ii(e):e,{state:r,key:e&&e.key||s||Nj()})}function Hc(t){let{pathname:e="/",search:r="",hash:s=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function ii(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function Cj(t,e,r,s){s===void 0&&(s={});let{window:n=document.defaultView,v5Compat:i=!1}=s,o=n.history,a=en.Pop,l=null,d=h();d==null&&(d=0,o.replaceState(Ta({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function m(){a=en.Pop;let w=h(),v=w==null?null:w-d;d=w,l&&l({action:a,location:k.location,delta:v})}function p(w,v){a=en.Push;let _=Hh(k.location,w,v);r&&r(_,w),d=h()+1;let S=Pg(_,d),C=k.createHref(_);try{o.pushState(S,"",C)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;n.location.assign(C)}i&&l&&l({action:a,location:k.location,delta:1})}function x(w,v){a=en.Replace;let _=Hh(k.location,w,v);r&&r(_,w),d=h();let S=Pg(_,d),C=k.createHref(_);o.replaceState(S,"",C),i&&l&&l({action:a,location:k.location,delta:0})}function b(w){let v=n.location.origin!=="null"?n.location.origin:n.location.href,_=typeof w=="string"?w:Hc(w);return _=_.replace(/ $/,"%20"),tt(v,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,v)}let k={get action(){return a},get location(){return t(n,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return n.addEventListener(Tg,m),l=w,()=>{n.removeEventListener(Tg,m),l=null}},createHref(w){return e(n,w)},createURL:b,encodeLocation(w){let v=b(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:x,go(w){return o.go(w)}};return k}var Dg;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Dg||(Dg={}));function Ej(t,e,r){return r===void 0&&(r="/"),Mj(t,e,r)}function Mj(t,e,r,s){let n=typeof e=="string"?ii(e):e,i=Zi(n.pathname||"/",r);if(i==null)return null;let o=Hv(t);Tj(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let d=Wj(i);a=Fj(o[l],d)}return a}function Hv(t,e,r,s){e===void 0&&(e=[]),r===void 0&&(r=[]),s===void 0&&(s="");let n=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(tt(l.relativePath.startsWith(s),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(s.length));let d=hn([s,l.relativePath]),h=r.concat(l);i.children&&i.children.length>0&&(tt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Hv(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:Ij(d,i.index),routesMeta:h})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))n(i,o);else for(let l of Vv(i.path))n(i,o,l)}),e}function Vv(t){let e=t.split("/");if(e.length===0)return[];let[r,...s]=e,n=r.endsWith("?"),i=r.replace(/\?$/,"");if(s.length===0)return n?[i,""]:[i];let o=Vv(s.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),n&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Tj(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:$j(e.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const Pj=/^:[\w-]+$/,Dj=3,Oj=2,Lj=1,Rj=10,Aj=-2,Og=t=>t==="*";function Ij(t,e){let r=t.split("/"),s=r.length;return r.some(Og)&&(s+=Aj),e&&(s+=Oj),r.filter(n=>!Og(n)).reduce((n,i)=>n+(Pj.test(i)?Dj:i===""?Lj:Rj),s)}function $j(t,e){return t.length===e.length&&t.slice(0,-1).every((s,n)=>s===e[n])?t[t.length-1]-e[e.length-1]:0}function Fj(t,e,r){let{routesMeta:s}=t,n={},i="/",o=[];for(let a=0;a<s.length;++a){let l=s[a],d=a===s.length-1,h=i==="/"?e:e.slice(i.length)||"/",m=Vh({path:l.relativePath,caseSensitive:l.caseSensitive,end:d},h),p=l.route;if(!m)return null;Object.assign(n,m.params),o.push({params:n,pathname:hn([i,m.pathname]),pathnameBase:Vj(hn([i,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(i=hn([i,m.pathnameBase]))}return o}function Vh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,s]=zj(t.path,t.caseSensitive,t.end),n=e.match(r);if(!n)return null;let i=n[0],o=i.replace(/(.)\/+$/,"$1"),a=n.slice(1);return{params:s.reduce((d,h,m)=>{let{paramName:p,isOptional:x}=h;if(p==="*"){let k=a[m]||"";o=i.slice(0,i.length-k.length).replace(/(.)\/+$/,"$1")}const b=a[m];return x&&!b?d[p]=void 0:d[p]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function zj(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),hm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(s.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),s]}function Wj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return hm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Zi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,s=t.charAt(r);return s&&s!=="/"?null:t.slice(r)||"/"}function Bj(t,e){e===void 0&&(e="/");let{pathname:r,search:s="",hash:n=""}=typeof t=="string"?ii(t):t;return{pathname:r?r.startsWith("/")?r:Uj(r,e):e,search:Yj(s),hash:Gj(n)}}function Uj(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function Td(t,e,r,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Hj(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function fm(t,e){let r=Hj(t);return e?r.map((s,n)=>n===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function mm(t,e,r,s){s===void 0&&(s=!1);let n;typeof t=="string"?n=ii(t):(n=Ta({},t),tt(!n.pathname||!n.pathname.includes("?"),Td("?","pathname","search",n)),tt(!n.pathname||!n.pathname.includes("#"),Td("#","pathname","hash",n)),tt(!n.search||!n.search.includes("#"),Td("#","search","hash",n)));let i=t===""||n.pathname==="",o=i?"/":n.pathname,a;if(o==null)a=r;else{let m=e.length-1;if(!s&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),m-=1;n.pathname=p.join("/")}a=m>=0?e[m]:"/"}let l=Bj(n,a),d=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(d||h)&&(l.pathname+="/"),l}const hn=t=>t.join("/").replace(/\/\/+/g,"/"),Vj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Yj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Gj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function qj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Yv=["post","put","patch","delete"];new Set(Yv);const Kj=["get",...Yv];new Set(Kj);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pa(){return Pa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Pa.apply(this,arguments)}const bu=N.createContext(null),Gv=N.createContext(null),Ms=N.createContext(null),wu=N.createContext(null),Jr=N.createContext({outlet:null,matches:[],isDataRoute:!1}),qv=N.createContext(null);function Xj(t,e){let{relative:r}=e===void 0?{}:e;ao()||tt(!1);let{basename:s,navigator:n}=N.useContext(Ms),{hash:i,pathname:o,search:a}=ku(t,{relative:r}),l=o;return s!=="/"&&(l=o==="/"?s:hn([s,o])),n.createHref({pathname:l,search:a,hash:i})}function ao(){return N.useContext(wu)!=null}function oi(){return ao()||tt(!1),N.useContext(wu).location}function Kv(t){N.useContext(Ms).static||N.useLayoutEffect(t)}function _u(){let{isDataRoute:t}=N.useContext(Jr);return t?hN():Jj()}function Jj(){ao()||tt(!1);let t=N.useContext(bu),{basename:e,future:r,navigator:s}=N.useContext(Ms),{matches:n}=N.useContext(Jr),{pathname:i}=oi(),o=JSON.stringify(fm(n,r.v7_relativeSplatPath)),a=N.useRef(!1);return Kv(()=>{a.current=!0}),N.useCallback(function(d,h){if(h===void 0&&(h={}),!a.current)return;if(typeof d=="number"){s.go(d);return}let m=mm(d,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:hn([e,m.pathname])),(h.replace?s.replace:s.push)(m,h.state,h)},[e,s,o,i,t])}const Qj=N.createContext(null);function Zj(t){let e=N.useContext(Jr).outlet;return e&&N.createElement(Qj.Provider,{value:t},e)}function eN(){let{matches:t}=N.useContext(Jr),e=t[t.length-1];return e?e.params:{}}function ku(t,e){let{relative:r}=e===void 0?{}:e,{future:s}=N.useContext(Ms),{matches:n}=N.useContext(Jr),{pathname:i}=oi(),o=JSON.stringify(fm(n,s.v7_relativeSplatPath));return N.useMemo(()=>mm(t,JSON.parse(o),i,r==="path"),[t,o,i,r])}function tN(t,e){return rN(t,e)}function rN(t,e,r,s){ao()||tt(!1);let{navigator:n}=N.useContext(Ms),{matches:i}=N.useContext(Jr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let d=oi(),h;if(e){var m;let w=typeof e=="string"?ii(e):e;l==="/"||(m=w.pathname)!=null&&m.startsWith(l)||tt(!1),h=w}else h=d;let p=h.pathname||"/",x=p;if(l!=="/"){let w=l.replace(/^\//,"").split("/");x="/"+p.replace(/^\//,"").split("/").slice(w.length).join("/")}let b=Ej(t,{pathname:x}),k=aN(b&&b.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:hn([l,n.encodeLocation?n.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:hn([l,n.encodeLocation?n.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,r,s);return e&&k?N.createElement(wu.Provider,{value:{location:Pa({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:en.Pop}},k):k}function sN(){let t=dN(),e=qj(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),r?N.createElement("pre",{style:n},r):null,null)}const nN=N.createElement(sN,null);class iN extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?N.createElement(Jr.Provider,{value:this.props.routeContext},N.createElement(qv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oN(t){let{routeContext:e,match:r,children:s}=t,n=N.useContext(bu);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),N.createElement(Jr.Provider,{value:e},s)}function aN(t,e,r,s){var n;if(e===void 0&&(e=[]),r===void 0&&(r=null),s===void 0&&(s=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=s)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,a=(n=r)==null?void 0:n.errors;if(a!=null){let h=o.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);h>=0||tt(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,d=-1;if(r&&s&&s.v7_partialHydration)for(let h=0;h<o.length;h++){let m=o[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=h),m.route.id){let{loaderData:p,errors:x}=r,b=m.route.loader&&p[m.route.id]===void 0&&(!x||x[m.route.id]===void 0);if(m.route.lazy||b){l=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,m,p)=>{let x,b=!1,k=null,w=null;r&&(x=a&&m.route.id?a[m.route.id]:void 0,k=m.route.errorElement||nN,l&&(d<0&&p===0?(fN("route-fallback"),b=!0,w=null):d===p&&(b=!0,w=m.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,p+1)),_=()=>{let S;return x?S=k:b?S=w:m.route.Component?S=N.createElement(m.route.Component,null):m.route.element?S=m.route.element:S=h,N.createElement(oN,{match:m,routeContext:{outlet:h,matches:v,isDataRoute:r!=null},children:S})};return r&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?N.createElement(iN,{location:r.location,revalidation:r.revalidation,component:k,error:x,children:_(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):_()},null)}var Xv=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Xv||{}),Jv=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Jv||{});function lN(t){let e=N.useContext(bu);return e||tt(!1),e}function cN(t){let e=N.useContext(Gv);return e||tt(!1),e}function uN(t){let e=N.useContext(Jr);return e||tt(!1),e}function Qv(t){let e=uN(),r=e.matches[e.matches.length-1];return r.route.id||tt(!1),r.route.id}function dN(){var t;let e=N.useContext(qv),r=cN(),s=Qv();return e!==void 0?e:(t=r.errors)==null?void 0:t[s]}function hN(){let{router:t}=lN(Xv.UseNavigateStable),e=Qv(Jv.UseNavigateStable),r=N.useRef(!1);return Kv(()=>{r.current=!0}),N.useCallback(function(n,i){i===void 0&&(i={}),r.current&&(typeof n=="number"?t.navigate(n):t.navigate(n,Pa({fromRouteId:e},i)))},[t,e])}const Lg={};function fN(t,e,r){Lg[t]||(Lg[t]=!0)}function mN(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Al(t){let{to:e,replace:r,state:s,relative:n}=t;ao()||tt(!1);let{future:i,static:o}=N.useContext(Ms),{matches:a}=N.useContext(Jr),{pathname:l}=oi(),d=_u(),h=mm(e,fm(a,i.v7_relativeSplatPath),l,n==="path"),m=JSON.stringify(h);return N.useEffect(()=>d(JSON.parse(m),{replace:r,state:s,relative:n}),[d,m,n,r,s]),null}function pN(t){return Zj(t.context)}function mr(t){tt(!1)}function gN(t){let{basename:e="/",children:r=null,location:s,navigationType:n=en.Pop,navigator:i,static:o=!1,future:a}=t;ao()&&tt(!1);let l=e.replace(/^\/*/,"/"),d=N.useMemo(()=>({basename:l,navigator:i,static:o,future:Pa({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof s=="string"&&(s=ii(s));let{pathname:h="/",search:m="",hash:p="",state:x=null,key:b="default"}=s,k=N.useMemo(()=>{let w=Zi(h,l);return w==null?null:{location:{pathname:w,search:m,hash:p,state:x,key:b},navigationType:n}},[l,h,m,p,x,b,n]);return k==null?null:N.createElement(Ms.Provider,{value:d},N.createElement(wu.Provider,{children:r,value:k}))}function yN(t){let{children:e,location:r}=t;return tN(Yh(e),r)}new Promise(()=>{});function Yh(t,e){e===void 0&&(e=[]);let r=[];return N.Children.forEach(t,(s,n)=>{if(!N.isValidElement(s))return;let i=[...e,n];if(s.type===N.Fragment){r.push.apply(r,Yh(s.props.children,i));return}s.type!==mr&&tt(!1),!s.props.index||!s.props.children||tt(!1);let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Yh(s.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vc(){return Vc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Vc.apply(this,arguments)}function Zv(t,e){if(t==null)return{};var r={},s=Object.keys(t),n,i;for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&(r[n]=t[n]);return r}function xN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function vN(t,e){return t.button===0&&(!e||e==="_self")&&!xN(t)}const bN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],wN=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],_N="6";try{window.__reactRouterVersion=_N}catch{}const kN=N.createContext({isTransitioning:!1}),SN="startTransition",Rg=f2[SN];function jN(t){let{basename:e,children:r,future:s,window:n}=t,i=N.useRef();i.current==null&&(i.current=jj({window:n,v5Compat:!0}));let o=i.current,[a,l]=N.useState({action:o.action,location:o.location}),{v7_startTransition:d}=s||{},h=N.useCallback(m=>{d&&Rg?Rg(()=>l(m)):l(m)},[l,d]);return N.useLayoutEffect(()=>o.listen(h),[o,h]),N.useEffect(()=>mN(s),[s]),N.createElement(gN,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:o,future:s})}const NN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",CN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yc=N.forwardRef(function(e,r){let{onClick:s,relative:n,reloadDocument:i,replace:o,state:a,target:l,to:d,preventScrollReset:h,viewTransition:m}=e,p=Zv(e,bN),{basename:x}=N.useContext(Ms),b,k=!1;if(typeof d=="string"&&CN.test(d)&&(b=d,NN))try{let S=new URL(window.location.href),C=d.startsWith("//")?new URL(S.protocol+d):new URL(d),E=Zi(C.pathname,x);C.origin===S.origin&&E!=null?d=E+C.search+C.hash:k=!0}catch{}let w=Xj(d,{relative:n}),v=MN(d,{replace:o,state:a,target:l,preventScrollReset:h,relative:n,viewTransition:m});function _(S){s&&s(S),S.defaultPrevented||v(S)}return N.createElement("a",Vc({},p,{href:b||w,onClick:k||i?s:_,ref:r,target:l}))}),rr=N.forwardRef(function(e,r){let{"aria-current":s="page",caseSensitive:n=!1,className:i="",end:o=!1,style:a,to:l,viewTransition:d,children:h}=e,m=Zv(e,wN),p=ku(l,{relative:m.relative}),x=oi(),b=N.useContext(Gv),{navigator:k,basename:w}=N.useContext(Ms),v=b!=null&&TN(p)&&d===!0,_=k.encodeLocation?k.encodeLocation(p).pathname:p.pathname,S=x.pathname,C=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(S=S.toLowerCase(),C=C?C.toLowerCase():null,_=_.toLowerCase()),C&&w&&(C=Zi(C,w)||C);const E=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let D=S===_||!o&&S.startsWith(_)&&S.charAt(E)==="/",P=C!=null&&(C===_||!o&&C.startsWith(_)&&C.charAt(_.length)==="/"),O={isActive:D,isPending:P,isTransitioning:v},B=D?s:void 0,M;typeof i=="function"?M=i(O):M=[i,D?"active":null,P?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let I=typeof a=="function"?a(O):a;return N.createElement(Yc,Vc({},m,{"aria-current":B,className:M,ref:r,style:I,to:l,viewTransition:d}),typeof h=="function"?h(O):h)});var Gh;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Gh||(Gh={}));var Ag;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ag||(Ag={}));function EN(t){let e=N.useContext(bu);return e||tt(!1),e}function MN(t,e){let{target:r,replace:s,state:n,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=_u(),d=oi(),h=ku(t,{relative:o});return N.useCallback(m=>{if(vN(m,r)){m.preventDefault();let p=s!==void 0?s:Hc(d)===Hc(h);l(t,{replace:p,state:n,preventScrollReset:i,relative:o,viewTransition:a})}},[d,l,h,s,n,r,t,i,o,a])}function TN(t,e){e===void 0&&(e={});let r=N.useContext(kN);r==null&&tt(!1);let{basename:s}=EN(Gh.useViewTransitionState),n=ku(t,{relative:e.relative});if(!r.isTransitioning)return!1;let i=Zi(r.currentLocation.pathname,s)||r.currentLocation.pathname,o=Zi(r.nextLocation.pathname,s)||r.nextLocation.pathname;return Vh(n.pathname,o)!=null||Vh(n.pathname,i)!=null}const PN="modulepreload",DN=function(t){return"/ArkhamDentalPro/"+t},Ig={},eo=function(e,r,s){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=Promise.allSettled(r.map(l=>{if(l=DN(l),l in Ig)return;Ig[l]=!0;const d=l.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":PN,d||(m.as="script"),m.crossOrigin="",m.href=l,a&&m.setAttribute("nonce",a),document.head.appendChild(m),d)return new Promise((p,x)=>{m.addEventListener("load",p),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return n.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},ON=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>eo(async()=>{const{default:s}=await Promise.resolve().then(()=>lo);return{default:s}},void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)};class pm extends Error{constructor(e,r="FunctionsError",s){super(e),this.name=r,this.context=s}}class LN extends pm{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class RN extends pm{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class AN extends pm{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var qh;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(qh||(qh={}));var IN=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(h){try{d(s.next(h))}catch(m){o(m)}}function l(h){try{d(s.throw(h))}catch(m){o(m)}}function d(h){h.done?i(h.value):n(h.value).then(a,l)}d((s=s.apply(t,e||[])).next())})};class $N{constructor(e,{headers:r={},customFetch:s,region:n=qh.Any}={}){this.url=e,this.headers=r,this.region=n,this.fetch=ON(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var s;return IN(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:o}=r;let a={},{region:l}=r;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let d;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(a["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(a["Content-Type"]="application/json",d=JSON.stringify(o)));const h=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),n),body:d}).catch(b=>{throw new LN(b)}),m=h.headers.get("x-relay-error");if(m&&m==="true")throw new RN(h);if(!h.ok)throw new AN(h);let p=((s=h.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),x;return p==="application/json"?x=yield h.json():p==="application/octet-stream"?x=yield h.blob():p==="text/event-stream"?x=h:p==="multipart/form-data"?x=yield h.formData():x=yield h.text(),{data:x,error:null}}catch(n){return{data:null,error:n}}})}}var Gt={},gm={},Su={},Ka={},ju={},Nu={},FN=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},to=FN();const zN=to.fetch,eb=to.fetch.bind(to),tb=to.Headers,WN=to.Request,BN=to.Response,lo=Object.freeze(Object.defineProperty({__proto__:null,Headers:tb,Request:WN,Response:BN,default:eb,fetch:zN},Symbol.toStringTag,{value:"Module"})),UN=Jk(lo);var Cu={};Object.defineProperty(Cu,"__esModule",{value:!0});let HN=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Cu.default=HN;var rb=Zt&&Zt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nu,"__esModule",{value:!0});const VN=rb(UN),YN=rb(Cu);let GN=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=VN.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=Object.assign({},this.headers),this.headers[e]=r,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l;let d=null,h=null,m=null,p=i.status,x=i.statusText;if(i.ok){if(this.method!=="HEAD"){const v=await i.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?h=v:h=JSON.parse(v))}const k=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),w=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");k&&w&&w.length>1&&(m=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,m=null,p=406,x="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const k=await i.text();try{d=JSON.parse(k),Array.isArray(d)&&i.status===404&&(h=[],d=null,p=200,x="OK")}catch{i.status===404&&k===""?(p=204,x="No Content"):d={message:k}}if(d&&this.isMaybeSingle&&(!((l=d==null?void 0:d.details)===null||l===void 0)&&l.includes("0 rows"))&&(d=null,p=200,x="OK"),d&&this.shouldThrowOnError)throw new YN.default(d)}return{error:d,data:h,count:m,status:p,statusText:x}});return this.shouldThrowOnError||(n=n.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,r)}returns(){return this}overrideTypes(){return this}};Nu.default=GN;var qN=Zt&&Zt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ju,"__esModule",{value:!0});const KN=qN(Nu);let XN=class extends KN.default{select(e){let r=!1;const s=(e??"*").split("").map(n=>/\s/.test(n)&&!r?"":(n==='"'&&(r=!r),n)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:s,foreignTable:n,referencedTable:i=n}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:s=r}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,r,{foreignTable:s,referencedTable:n=s}={}){const i=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:s=!1,buffers:n=!1,wal:i=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,r?"verbose":null,s?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${d}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ju.default=XN;var JN=Zt&&Zt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ka,"__esModule",{value:!0});const QN=JN(ju);let ZN=class extends QN.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const s=Array.from(new Set(r)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:s,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(e,r,s){return this.url.searchParams.append(e,`not.${r}.${s}`),this}or(e,{foreignTable:r,referencedTable:s=r}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,r,s){return this.url.searchParams.append(e,`${r}.${s}`),this}};Ka.default=ZN;var eC=Zt&&Zt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Su,"__esModule",{value:!0});const Lo=eC(Ka);let tC=class{constructor(e,{headers:r={},schema:s,fetch:n}){this.url=e,this.headers=r,this.schema=s,this.fetch=n}select(e,{head:r=!1,count:s}={}){const n=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),s&&(this.headers.Prefer=`count=${s}`),new Lo.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:s=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Lo.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:s=!1,count:n,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${s?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(l.length>0){const d=[...new Set(l)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new Lo.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const s="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),r&&n.push(`count=${r}`),this.headers.Prefer=n.join(","),new Lo.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new Lo.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Su.default=tC;var Eu={},Mu={};Object.defineProperty(Mu,"__esModule",{value:!0});Mu.version=void 0;Mu.version="0.0.0-automated";Object.defineProperty(Eu,"__esModule",{value:!0});Eu.DEFAULT_HEADERS=void 0;const rC=Mu;Eu.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${rC.version}`};var sb=Zt&&Zt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gm,"__esModule",{value:!0});const sC=sb(Su),nC=sb(Ka),iC=Eu;let oC=class nb{constructor(e,{headers:r={},schema:s,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},iC.DEFAULT_HEADERS),r),this.schemaName=s,this.fetch=n}from(e){const r=new URL(`${this.url}/${e}`);return new sC.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new nb(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:s=!1,get:n=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;s||n?(o=s?"HEAD":"GET",Object.entries(r).filter(([h,m])=>m!==void 0).map(([h,m])=>[h,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([h,m])=>{a.searchParams.append(h,m)})):(o="POST",l=r);const d=Object.assign({},this.headers);return i&&(d.Prefer=`count=${i}`),new nC.default({method:o,url:a,headers:d,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};gm.default=oC;var co=Zt&&Zt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.PostgrestError=Gt.PostgrestBuilder=Gt.PostgrestTransformBuilder=Gt.PostgrestFilterBuilder=Gt.PostgrestQueryBuilder=Gt.PostgrestClient=void 0;const ib=co(gm);Gt.PostgrestClient=ib.default;const ob=co(Su);Gt.PostgrestQueryBuilder=ob.default;const ab=co(Ka);Gt.PostgrestFilterBuilder=ab.default;const lb=co(ju);Gt.PostgrestTransformBuilder=lb.default;const cb=co(Nu);Gt.PostgrestBuilder=cb.default;const ub=co(Cu);Gt.PostgrestError=ub.default;var aC=Gt.default={PostgrestClient:ib.default,PostgrestQueryBuilder:ob.default,PostgrestFilterBuilder:ab.default,PostgrestTransformBuilder:lb.default,PostgrestBuilder:cb.default,PostgrestError:ub.default};const{PostgrestClient:lC,PostgrestQueryBuilder:S5,PostgrestFilterBuilder:j5,PostgrestTransformBuilder:N5,PostgrestBuilder:C5,PostgrestError:E5}=aC,cC="2.11.2",uC={"X-Client-Info":`realtime-js/${cC}`},dC="1.0.0",db=1e4,hC=1e3;var Ui;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ui||(Ui={}));var sr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(sr||(sr={}));var Pr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Pr||(Pr={}));var Kh;(function(t){t.websocket="websocket"})(Kh||(Kh={}));var Fn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Fn||(Fn={}));class fC{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,r,s)}_decodeBroadcast(e,r,s){const n=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const a=s.decode(e.slice(o,o+n));o=o+n;const l=s.decode(e.slice(o,o+i));o=o+i;const d=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:d}}}class hb{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var He;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(He||(He={}));const $g=(t,e,r={})=>{var s;const n=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,o)=>(i[o]=mC(o,t,e,n),i),{})},mC=(t,e,r,s)=>{const n=e.find(a=>a.name===t),i=n==null?void 0:n.type,o=r[t];return i&&!s.includes(i)?fb(i,o):Xh(o)},fb=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return xC(e,r)}switch(t){case He.bool:return pC(e);case He.float4:case He.float8:case He.int2:case He.int4:case He.int8:case He.numeric:case He.oid:return gC(e);case He.json:case He.jsonb:return yC(e);case He.timestamp:return vC(e);case He.abstime:case He.date:case He.daterange:case He.int4range:case He.int8range:case He.money:case He.reltime:case He.text:case He.time:case He.timestamptz:case He.timetz:case He.tsrange:case He.tstzrange:return Xh(e);default:return Xh(e)}},Xh=t=>t,pC=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},gC=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},yC=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},xC=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,s=t[r];if(t[0]==="{"&&s==="}"){let i;const o=t.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>fb(e,a))}return t},vC=t=>typeof t=="string"?t.replace(" ","T"):t,mb=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Pd{constructor(e,r,s={},n=db){this.channel=e,this.event=r,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var s;return this._hasReceived(e)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Fg;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Fg||(Fg={}));class sa{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=sa.syncState(this.state,n,i,o),this.pendingDiffs.forEach(l=>{this.state=sa.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(s.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=sa.syncDiff(this.state,n,i,o),a())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,s,n){const i=this.cloneDeep(e),o=this.transformState(r),a={},l={};return this.map(i,(d,h)=>{o[d]||(l[d]=h)}),this.map(o,(d,h)=>{const m=i[d];if(m){const p=h.map(w=>w.presence_ref),x=m.map(w=>w.presence_ref),b=h.filter(w=>x.indexOf(w.presence_ref)<0),k=m.filter(w=>p.indexOf(w.presence_ref)<0);b.length>0&&(a[d]=b),k.length>0&&(l[d]=k)}else a[d]=h}),this.syncDiff(i,{joins:a,leaves:l},s,n)}static syncDiff(e,r,s,n){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(i,(a,l)=>{var d;const h=(d=e[a])!==null&&d!==void 0?d:[];if(e[a]=this.cloneDeep(l),h.length>0){const m=e[a].map(x=>x.presence_ref),p=h.filter(x=>m.indexOf(x.presence_ref)<0);e[a].unshift(...p)}s(a,h,l)}),this.map(o,(a,l)=>{let d=e[a];if(!d)return;const h=l.map(m=>m.presence_ref);d=d.filter(m=>h.indexOf(m.presence_ref)<0),e[a]=d,n(a,d,l),d.length===0&&delete e[a]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(s=>r(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,s)=>{const n=e[s];return"metas"in n?r[s]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[s]=n,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var zg;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(zg||(zg={}));var Wg;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Wg||(Wg={}));var ms;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ms||(ms={}));class ym{constructor(e,r={config:{}},s){this.topic=e,this.params=r,this.socket=s,this.bindings={},this.state=sr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Pd(this,Pr.join,this.params,this.timeout),this.rejoinTimer=new hb(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=sr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=sr.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=sr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=sr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Pr.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new sa(this),this.broadcastEndpointURL=mb(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(h=>e==null?void 0:e(ms.CHANNEL_ERROR,h)),this._onClose(()=>e==null?void 0:e(ms.CLOSED));const l={},d={broadcast:i,presence:o,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(h=>h.filter))!==null&&n!==void 0?n:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},l)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:h})=>{var m;if(this.socket.setAuth(),h===void 0){e==null||e(ms.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,x=(m=p==null?void 0:p.length)!==null&&m!==void 0?m:0,b=[];for(let k=0;k<x;k++){const w=p[k],{filter:{event:v,schema:_,table:S,filter:C}}=w,E=h&&h[k];if(E&&E.event===v&&E.schema===_&&E.table===S&&E.filter===C)b.push(Object.assign(Object.assign({},w),{id:E.id}));else{this.unsubscribe(),e==null||e(ms.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(ms.SUBSCRIBED);return}}).receive("error",h=>{e==null||e(ms.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ms.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,s){return this._on(e,r,s)}async send(e,r={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const d=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=sr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Pr.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(s=>{const n=new Pd(this,Pr.leave,{},e);n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}async _fetchWithTimeout(e,r,s){const n=new AbortController,i=setTimeout(()=>n.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:n.signal}));return clearTimeout(i),o}_push(e,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Pd(this,e,r,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,r,s){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,s){var n,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:d,join:h}=Pr;if(s&&[a,l,d,h].indexOf(o)>=0&&s!==this._joinRef())return;let p=this._onMessage(o,r,s);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(x=>{var b,k,w;return((b=x.filter)===null||b===void 0?void 0:b.event)==="*"||((w=(k=x.filter)===null||k===void 0?void 0:k.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(x=>x.callback(p,s)):(i=this.bindings[o])===null||i===void 0||i.filter(x=>{var b,k,w,v,_,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in x){const C=x.id,E=(b=x.filter)===null||b===void 0?void 0:b.event;return C&&((k=r.ids)===null||k===void 0?void 0:k.includes(C))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const C=(_=(v=x==null?void 0:x.filter)===null||v===void 0?void 0:v.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return C==="*"||C===((S=r==null?void 0:r.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===o}).map(x=>{if(typeof p=="object"&&"ids"in p){const b=p.data,{schema:k,table:w,commit_timestamp:v,type:_,errors:S}=b;p=Object.assign(Object.assign({},{schema:k,table:w,commit_timestamp:v,eventType:_,new:{},old:{},errors:S}),this._getPayloadRecords(b))}x.callback(p,s)})}_isClosed(){return this.state===sr.closed}_isJoined(){return this.state===sr.joined}_isJoining(){return this.state===sr.joining}_isLeaving(){return this.state===sr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,s){const n=e.toLocaleLowerCase(),i={type:n,filter:r,callback:s};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,r){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&ym.isEqual(n.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const s in e)if(e[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Pr.close,{},e)}_onError(e){this._on(Pr.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=sr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=$g(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=$g(e.columns,e.old_record)),r}}const bC=()=>{},wC=typeof WebSocket<"u",_C=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class kC{constructor(e,r){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=uC,this.params={},this.timeout=db,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=bC,this.conn=null,this.sendBuffer=[],this.serializer=new fC,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>eo(async()=>{const{default:l}=await Promise.resolve().then(()=>lo);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${Kh.websocket}`,this.httpEndpoint=mb(e),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const n=(s=r==null?void 0:r.params)===null||s===void 0?void 0:s.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new hb(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(wC){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new SC(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),eo(async()=>{const{default:e}=await import("./browser-RUJ6i4tR.js").then(r=>r.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:dC}))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),e}log(e,r,s){this.logger(e,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Ui.connecting:return Fn.Connecting;case Ui.open:return Fn.Open;case Ui.closing:return Fn.Closing;default:return Fn.Closed}}isConnected(){return this.connectionState()===Fn.Open}channel(e,r={config:{}}){const s=new ym(`realtime:${e}`,r,this);return this.channels.push(s),s}push(e){const{topic:r,event:s,payload:n,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${s} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let r=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(r){let s=null;try{s=JSON.parse(atob(r.split(".")[1]))}catch{}if(s&&s.exp&&!(Math.floor(Date.now()/1e3)-s.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${s.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${s.exp}`);this.accessTokenValue=r,this.channels.forEach(n=>{r&&n.updateJoinPayload({access_token:r}),n.joinedOnce&&n._isJoined()&&n._push(Pr.access_token,{access_token:r})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(hC,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:s,event:n,payload:i,ref:o}=r;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${n} ${o&&"("+o+")"||""}`,i),this.channels.filter(a=>a._isMember(s)).forEach(a=>a._trigger(n,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(r))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Pr.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(r);return`${e}${s}${n}`}_workerObjectUrl(e){let r;if(e)r=e;else{const s=new Blob([_C],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}}class SC{constructor(e,r,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ui.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class xm extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function bt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class jC extends xm{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Jh extends xm{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var NC=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(h){try{d(s.next(h))}catch(m){o(m)}}function l(h){try{d(s.throw(h))}catch(m){o(m)}}function d(h){h.done?i(h.value):n(h.value).then(a,l)}d((s=s.apply(t,e||[])).next())})};const pb=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>eo(async()=>{const{default:s}=await Promise.resolve().then(()=>lo);return{default:s}},void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},CC=()=>NC(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield eo(()=>Promise.resolve().then(()=>lo),void 0)).Response:Response}),Qh=t=>{if(Array.isArray(t))return t.map(r=>Qh(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,s])=>{const n=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=Qh(s)}),e};var ai=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(h){try{d(s.next(h))}catch(m){o(m)}}function l(h){try{d(s.throw(h))}catch(m){o(m)}}function d(h){h.done?i(h.value):n(h.value).then(a,l)}d((s=s.apply(t,e||[])).next())})};const Dd=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),EC=(t,e,r)=>ai(void 0,void 0,void 0,function*(){const s=yield CC();t instanceof s&&!(r!=null&&r.noResolveJson)?t.json().then(n=>{e(new jC(Dd(n),t.status||500))}).catch(n=>{e(new Jh(Dd(n),n))}):e(new Jh(Dd(t),t))}),MC=(t,e,r,s)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s&&(n.body=JSON.stringify(s)),Object.assign(Object.assign({},n),r))};function Xa(t,e,r,s,n,i){return ai(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(r,MC(e,s,n,i)).then(l=>{if(!l.ok)throw l;return s!=null&&s.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>EC(l,a,s))})})}function Gc(t,e,r,s){return ai(this,void 0,void 0,function*(){return Xa(t,"GET",e,r,s)})}function Gs(t,e,r,s,n){return ai(this,void 0,void 0,function*(){return Xa(t,"POST",e,s,n,r)})}function TC(t,e,r,s,n){return ai(this,void 0,void 0,function*(){return Xa(t,"PUT",e,s,n,r)})}function PC(t,e,r,s){return ai(this,void 0,void 0,function*(){return Xa(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function gb(t,e,r,s,n){return ai(this,void 0,void 0,function*(){return Xa(t,"DELETE",e,s,n,r)})}var Ht=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(h){try{d(s.next(h))}catch(m){o(m)}}function l(h){try{d(s.throw(h))}catch(m){o(m)}}function d(h){h.done?i(h.value):n(h.value).then(a,l)}d((s=s.apply(t,e||[])).next())})};const DC={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Bg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class OC{constructor(e,r={},s,n){this.url=e,this.headers=r,this.bucketId=s,this.fetch=pb(n)}uploadOrUpdate(e,r,s,n){return Ht(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Bg),n);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=s,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),n!=null&&n.headers&&(a=Object.assign(Object.assign({},a),n.headers));const d=this._removeEmptyFolders(r),h=this._getFinalPath(d),m=yield this.fetch(`${this.url}/object/${h}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),p=yield m.json();return m.ok?{data:{path:d,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(i){if(bt(i))return{data:null,error:i};throw i}})}upload(e,r,s){return Ht(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,s)})}uploadToSignedUrl(e,r,s,n){return Ht(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",r);try{let l;const d=Object.assign({upsert:Bg.upsert},n),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",d.cacheControl),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.append("cacheControl",d.cacheControl)):(l=s,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const m=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:h}),p=yield m.json();return m.ok?{data:{path:i,fullPath:p.Key},error:null}:{data:null,error:p}}catch(l){if(bt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,r){return Ht(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);r!=null&&r.upsert&&(n["x-upsert"]="true");const i=yield Gs(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new xm("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(s){if(bt(s))return{data:null,error:s};throw s}})}update(e,r,s){return Ht(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,s)})}move(e,r,s){return Ht(this,void 0,void 0,function*(){try{return{data:yield Gs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}copy(e,r,s){return Ht(this,void 0,void 0,function*(){try{return{data:{path:(yield Gs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}createSignedUrl(e,r,s){return Ht(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield Gs(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}createSignedUrls(e,r,s){return Ht(this,void 0,void 0,function*(){try{const n=yield Gs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}download(e,r){return Ht(this,void 0,void 0,function*(){const n=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Gc(this.fetch,`${this.url}/${n}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(bt(a))return{data:null,error:a};throw a}})}info(e){return Ht(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const s=yield Gc(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Qh(s),error:null}}catch(s){if(bt(s))return{data:null,error:s};throw s}})}exists(e){return Ht(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield PC(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(bt(s)&&s instanceof Jh){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,r){const s=this._getFinalPath(e),n=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&n.push(i);const a=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&n.push(l);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${s}${d}`)}}}remove(e){return Ht(this,void 0,void 0,function*(){try{return{data:yield gb(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}})}list(e,r,s){return Ht(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},DC),r),{prefix:e||""});return{data:yield Gs(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const LC="2.7.1",RC={"X-Client-Info":`storage-js/${LC}`};var xi=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(h){try{d(s.next(h))}catch(m){o(m)}}function l(h){try{d(s.throw(h))}catch(m){o(m)}}function d(h){h.done?i(h.value):n(h.value).then(a,l)}d((s=s.apply(t,e||[])).next())})};class AC{constructor(e,r={},s){this.url=e,this.headers=Object.assign(Object.assign({},RC),r),this.fetch=pb(s)}listBuckets(){return xi(this,void 0,void 0,function*(){try{return{data:yield Gc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(bt(e))return{data:null,error:e};throw e}})}getBucket(e){return xi(this,void 0,void 0,function*(){try{return{data:yield Gc(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return xi(this,void 0,void 0,function*(){try{return{data:yield Gs(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(bt(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return xi(this,void 0,void 0,function*(){try{return{data:yield TC(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(bt(s))return{data:null,error:s};throw s}})}emptyBucket(e){return xi(this,void 0,void 0,function*(){try{return{data:yield Gs(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return xi(this,void 0,void 0,function*(){try{return{data:yield gb(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}})}}class IC extends AC{constructor(e,r={},s){super(e,r,s)}from(e){return new OC(this.url,this.headers,e,this.fetch)}}const $C="2.49.8";let Ho="";typeof Deno<"u"?Ho="deno":typeof document<"u"?Ho="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ho="react-native":Ho="node";const FC={"X-Client-Info":`supabase-js-${Ho}/${$C}`},zC={headers:FC},WC={schema:"public"},BC={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},UC={};var HC=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(h){try{d(s.next(h))}catch(m){o(m)}}function l(h){try{d(s.throw(h))}catch(m){o(m)}}function d(h){h.done?i(h.value):n(h.value).then(a,l)}d((s=s.apply(t,e||[])).next())})};const VC=t=>{let e;return t?e=t:typeof fetch>"u"?e=eb:e=fetch,(...r)=>e(...r)},YC=()=>typeof Headers>"u"?tb:Headers,GC=(t,e,r)=>{const s=VC(r),n=YC();return(i,o)=>HC(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let d=new n(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${l}`),s(i,Object.assign(Object.assign({},o),{headers:d}))})};var qC=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(h){try{d(s.next(h))}catch(m){o(m)}}function l(h){try{d(s.throw(h))}catch(m){o(m)}}function d(h){h.done?i(h.value):n(h.value).then(a,l)}d((s=s.apply(t,e||[])).next())})};function KC(t){return t.endsWith("/")?t:t+"/"}function XC(t,e){var r,s;const{db:n,auth:i,realtime:o,global:a}=t,{db:l,auth:d,realtime:h,global:m}=e,p={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},h),o),global:Object.assign(Object.assign(Object.assign({},m),a),{headers:Object.assign(Object.assign({},(r=m==null?void 0:m.headers)!==null&&r!==void 0?r:{}),(s=a==null?void 0:a.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>qC(this,void 0,void 0,function*(){return""})};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}const yb="2.69.1",ki=30*1e3,Zh=3,Od=Zh*ki,JC="http://localhost:9999",QC="supabase.auth.token",ZC={"X-Client-Info":`gotrue-js/${yb}`},ef="X-Supabase-Api-Version",xb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},eE=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,tE=6e5;class vm extends Error{constructor(e,r,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function ke(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class rE extends vm{constructor(e,r,s){super(e,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function sE(t){return ke(t)&&t.name==="AuthApiError"}class vb extends vm{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class bn extends vm{constructor(e,r,s,n){super(e,s,n),this.name=r,this.status=s}}class Us extends bn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function nE(t){return ke(t)&&t.name==="AuthSessionMissingError"}class Ld extends bn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Il extends bn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class $l extends bn{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function iE(t){return ke(t)&&t.name==="AuthImplicitGrantRedirectError"}class Ug extends bn{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class tf extends bn{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Rd(t){return ke(t)&&t.name==="AuthRetryableFetchError"}class Hg extends bn{constructor(e,r,s){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class na extends bn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Vg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Yg=` 	
\r=`.split(""),oE=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Yg.length;e+=1)t[Yg[e].charCodeAt(0)]=-2;for(let e=0;e<Vg.length;e+=1)t[Vg[e].charCodeAt(0)]=e;return t})();function bb(t,e,r){const s=oE[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Gg(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=o=>{cE(o,s,r)};for(let o=0;o<t.length;o+=1)bb(t.charCodeAt(o),n,i);return e.join("")}function aE(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function lE(t,e){for(let r=0;r<t.length;r+=1){let s=t.charCodeAt(r);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(t.charCodeAt(r+1)-56320&65535|n)+65536,r+=1}aE(s,e)}}function cE(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let s=1;s<6;s+=1)if(!(t>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function uE(t){const e=[],r={queue:0,queuedBits:0},s=n=>{e.push(n)};for(let n=0;n<t.length;n+=1)bb(t.charCodeAt(n),r,s);return new Uint8Array(e)}function dE(t){const e=[];return lE(t,r=>e.push(r)),new Uint8Array(e)}function hE(t){return Math.round(Date.now()/1e3)+t}function fE(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Wr=()=>typeof window<"u"&&typeof document<"u",Tn={tested:!1,writable:!1},ia=()=>{if(!Wr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Tn.tested)return Tn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Tn.tested=!0,Tn.writable=!0}catch{Tn.tested=!0,Tn.writable=!1}return Tn.writable};function mE(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return r.searchParams.forEach((s,n)=>{e[n]=s}),e}const wb=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>eo(async()=>{const{default:s}=await Promise.resolve().then(()=>lo);return{default:s}},void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},pE=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",_b=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Fl=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},zl=async(t,e)=>{await t.removeItem(e)};class Tu{constructor(){this.promise=new Tu.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Tu.promiseConstructor=Promise;function Ad(t){const e=t.split(".");if(e.length!==3)throw new na("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!eE.test(e[s]))throw new na("JWT not in base64url format");return{header:JSON.parse(Gg(e[0])),payload:JSON.parse(Gg(e[1])),signature:uE(e[2]),raw:{header:e[0],payload:e[1]}}}async function gE(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function yE(t,e){return new Promise((s,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){n(o);return}}})()})}function xE(t){return("0"+t.toString(16)).substr(-2)}function vE(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let n="";for(let i=0;i<56;i++)n+=r.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,xE).join("")}async function bE(t){const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r),n=new Uint8Array(s);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function wE(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await bE(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vi(t,e,r=!1){const s=vE();let n=s;r&&(n+="/PASSWORD_RECOVERY"),await _b(t,`${e}-code-verifier`,n);const i=await wE(s);return[i,s===i?"plain":"s256"]}const _E=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function kE(t){const e=t.headers.get(ef);if(!e||!e.match(_E))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function SE(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function jE(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var NE=function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r};const An=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),CE=[502,503,504];async function qg(t){var e;if(!pE(t))throw new tf(An(t),0);if(CE.includes(t.status))throw new tf(An(t),t.status);let r;try{r=await t.json()}catch(i){throw new vb(An(i),i)}let s;const n=kE(t);if(n&&n.getTime()>=xb["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new Hg(An(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Us}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Hg(An(r),t.status,r.weak_password.reasons);throw new rE(An(r),t.status||500,s)}const EE=(t,e,r,s)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),r))};async function Me(t,e,r,s){var n;const i=Object.assign({},s==null?void 0:s.headers);i[ef]||(i[ef]=xb["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await ME(t,e,r+a,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(l):{data:Object.assign({},l),error:null}}async function ME(t,e,r,s,n,i){const o=EE(e,s,n,i);let a;try{a=await t(r,Object.assign({},o))}catch(l){throw console.error(l),new tf(An(l),0)}if(a.ok||await qg(a),s!=null&&s.noResolveJson)return a;try{return await a.json()}catch(l){await qg(l)}}function Hs(t){var e;let r=null;OE(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=hE(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:s},error:null}}function Kg(t){const e=Hs(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Xs(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function TE(t){return{data:t,error:null}}function PE(t){const{action_link:e,email_otp:r,hashed_token:s,redirect_to:n,verification_type:i}=t,o=NE(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:r,hashed_token:s,redirect_to:n,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function DE(t){return t}function OE(t){return t.access_token&&t.refresh_token&&t.expires_in}var LE=function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r};class RE{constructor({url:e="",headers:r={},fetch:s}){this.url=e,this.headers=r,this.fetch=wb(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r="global"){try{return await Me(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(ke(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,r={}){try{return await Me(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Xs})}catch(s){if(ke(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:r}=e,s=LE(e,["options"]),n=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await Me(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:PE,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ke(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await Me(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Xs})}catch(r){if(ke(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,s,n,i,o,a,l;try{const d={nextPage:null,lastPage:0,total:0},h=await Me(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:DE});if(h.error)throw h.error;const m=await h.json(),p=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,x=(l=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return x.length>0&&(x.forEach(b=>{const k=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(b.split(";")[1].split("=")[1]);d[`${w}Page`]=k}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(ke(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){try{return await Me(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Xs})}catch(r){if(ke(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){try{return await Me(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Xs})}catch(s){if(ke(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,r=!1){try{return await Me(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Xs})}catch(s){if(ke(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){try{const{data:r,error:s}=await Me(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:r,error:s}}catch(r){if(ke(r))return{data:null,error:r};throw r}}async _deleteFactor(e){try{return{data:await Me(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(ke(r))return{data:null,error:r};throw r}}}const AE={getItem:t=>ia()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{ia()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{ia()&&globalThis.localStorage.removeItem(t)}};function Xg(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function IE(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const bi={debug:!!(globalThis&&ia()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class kb extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class $E extends kb{}async function FE(t,e,r){bi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),bi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){bi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await r()}finally{bi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw bi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new $E(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(bi.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}IE();const zE={url:JC,storageKey:QC,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ZC,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Jg(t,e,r){return await r()}class Da{constructor(e){var r,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Da.nextInstanceID,Da.nextInstanceID+=1,this.instanceID>0&&Wr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},zE),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new RE({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=wb(n.fetch),this.lock=n.lock||Jg,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:Wr()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=FE:this.lock=Jg,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:ia()?this.storage=AE:(this.memoryStorage={},this.storage=Xg(this.memoryStorage)):(this.memoryStorage={},this.storage=Xg(this.memoryStorage)),Wr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${yb}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=mE(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),Wr()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:i}=await this._getSessionFromURL(r,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),iE(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ke(r)?{error:r}:{error:new vb("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,s,n;try{const i=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:Hs}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(i){if(ke(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var r,s,n;try{let i;if("email"in e){const{email:h,password:m,options:p}=e;let x=null,b=null;this.flowType==="pkce"&&([x,b]=await vi(this.storage,this.storageKey)),i=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:h,password:m,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:x,code_challenge_method:b},xform:Hs})}else if("phone"in e){const{phone:h,password:m,options:p}=e;i=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:m,data:(s=p==null?void 0:p.data)!==null&&s!==void 0?s:{},channel:(n=p==null?void 0:p.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Hs})}else throw new Il("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(i){if(ke(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:o,options:a}=e;r=await Me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Kg})}else if("phone"in e){const{phone:i,password:o,options:a}=e;r=await Me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Kg})}else throw new Il("You must provide either an email or phone number and a password");const{data:s,error:n}=r;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Ld}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(r){if(ke(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,s,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const r=await Fl(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(r??"").split("/");try{const{data:i,error:o}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Hs});if(await zl(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ld}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}catch(i){if(ke(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:r,provider:s,token:n,access_token:i,nonce:o}=e,a=await Me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Hs}),{data:l,error:d}=a;return d?{data:{user:null,session:null},error:d}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Ld}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:d})}catch(r){if(ke(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,s,n,i,o;try{if("email"in e){const{email:a,options:l}=e;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await vi(this.storage,this.storageKey));const{error:m}=await Me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in e){const{phone:a,options:l}=e,{data:d,error:h}=await Me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h}}throw new Il("You must provide either an email or phone number.")}catch(a){if(ke(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var r,s;try{let n,i;"options"in e&&(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:a}=await Me(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:Hs});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,d=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(n){if(ke(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var r,s,n;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await vi(this.storage,this.storageKey)),await Me(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:TE})}catch(i){if(ke(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;if(s)throw s;if(!r)throw new Us;const{error:n}=await Me(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(ke(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:i}=e,{error:o}=await Me(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:n,options:i}=e,{data:o,error:a}=await Me(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Il("You must provide either an email or phone number and a type")}catch(r){if(ke(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Fl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Od:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,d,h)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,d,h))})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Xs}):await this._useSession(async r=>{var s,n,i;const{data:o,error:a}=r;if(a)throw a;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Us}:await Me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Xs})})}catch(r){if(ke(r))return nE(r)&&(await this._removeSession(),await zl(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async s=>{const{data:n,error:i}=s;if(i)throw i;if(!n.session)throw new Us;const o=n.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await vi(this.storage,this.storageKey));const{data:d,error:h}=await Me(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Xs});if(h)throw h;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(ke(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Us;const r=Date.now()/1e3;let s=r,n=!0,i=null;const{payload:o}=Ad(e.access_token);if(o.exp&&(s=o.exp,n=s<=r),n){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(ke(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var s;if(!e){const{data:o,error:a}=r;if(a)throw a;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Us;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ke(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!Wr())throw new $l("No browser detected.");if(e.error||e.error_description||e.error_code)throw new $l(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Ug("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new $l("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ug("No code detected.");const{data:_,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:d}=e;if(!i||!a||!o||!d)throw new $l("No session defined in URL");const h=Math.round(Date.now()/1e3),m=parseInt(a);let p=h+m;l&&(p=parseInt(l));const x=p-h;x*1e3<=ki&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${m}s`);const b=p-m;h-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,p,h):h-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,p,h);const{data:k,error:w}=await this._getUser(i);if(w)throw w;const v={provider_token:s,provider_refresh_token:n,access_token:i,expires_in:m,expires_at:p,refresh_token:o,token_type:d,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(s){if(ke(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Fl(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:n,error:i}=r;if(i)return{error:i};const o=(s=n.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(sE(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await zl(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=fE(),s={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async r=>{var s,n;try{const{data:{session:i},error:o}=r;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await vi(this.storage,this.storageKey,!0));try{return await Me(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(ke(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(ke(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:s,error:n}=await this._useSession(async i=>{var o,a,l,d,h;const{data:m,error:p}=i;if(p)throw p;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Me(this.fetch,"GET",x,{headers:this.headers,jwt:(h=(d=m.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(n)throw n;return Wr()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(ke(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var s,n;const{data:i,error:o}=r;if(o)throw o;return await Me(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(r){if(ke(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await yE(async n=>(n>0&&await gE(200*Math.pow(2,n-1)),this._debug(r,"refreshing attempt",n),await Me(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Hs})),(n,i)=>{const o=200*Math.pow(2,n);return i&&Rd(i)&&Date.now()+o-s<ki})}catch(s){if(this._debug(r,"error",s),ke(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",s),Wr()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Fl(this.storage,this.storageKey);if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const n=((e=s.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Od;if(this._debug(r,`session has${n?"":" not"} expired with margin of ${Od}s`),n){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),Rd(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,s;if(!e)throw new Us;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Tu;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Us;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(n,"error",i),ke(i)){const o={session:null,error:i};return Rd(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,r,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,r)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await _b(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await zl(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Wr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ki);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/ki);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${ki}ms, refresh threshold is ${Zh} ticks`),n<=Zh&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof kb)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Wr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,s){const n=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await vi(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(a.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);n.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;return i?{data:null,error:i}:await Me(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(ke(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var s,n;const{data:i,error:o}=r;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:d}=await Me(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(ke(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:a}=await Me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(r){if(ke(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;return i?{data:null,error:i}:await Me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(ke(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=(e==null?void 0:e.factors)||[],n=s.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=s.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:s,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,s;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Ad(n.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((s=(r=n.user.factors)===null||r===void 0?void 0:r.filter(m=>m.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(l="aal2");const h=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(e,r={keys:[]}){let s=r.keys.find(o=>o.kid===e);if(s||(s=this.jwks.keys.find(o=>o.kid===e),s&&this.jwks_cached_at+tE>Date.now()))return s;const{data:n,error:i}=await Me(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!n.keys||n.keys.length===0)throw new na("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),s=n.keys.find(o=>o.kid===e),!s)throw new na("No matching signing key found in JWKS");return s}async getClaims(e,r={keys:[]}){try{let s=e;if(!s){const{data:x,error:b}=await this.getSession();if(b||!x.session)return{data:null,error:b};s=x.session.access_token}const{header:n,payload:i,signature:o,raw:{header:a,payload:l}}=Ad(s);if(SE(i.exp),!n.kid||n.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:x}=await this.getUser(s);if(x)throw x;return{data:{claims:i,header:n,signature:o},error:null}}const d=jE(n.alg),h=await this.fetchJwk(n.kid,r),m=await crypto.subtle.importKey("jwk",h,d,!0,["verify"]);if(!await crypto.subtle.verify(d,m,o,dE(`${a}.${l}`)))throw new na("Invalid JWT signature");return{data:{claims:i,header:n,signature:o},error:null}}catch(s){if(ke(s))return{data:null,error:s};throw s}}}Da.nextInstanceID=0;const WE=Da;class BE extends WE{constructor(e){super(e)}}var UE=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(h){try{d(s.next(h))}catch(m){o(m)}}function l(h){try{d(s.throw(h))}catch(m){o(m)}}function d(h){h.done?i(h.value):n(h.value).then(a,l)}d((s=s.apply(t,e||[])).next())})};class HE{constructor(e,r,s){var n,i,o;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const a=KC(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const d=`sb-${l.hostname.split(".")[0]}-auth-token`,h={db:WC,realtime:UC,auth:Object.assign(Object.assign({},BC),{storageKey:d}),global:zC},m=XC(s??{},h);this.storageKey=(n=m.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=m.global.headers)!==null&&i!==void 0?i:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(p,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=m.auth)!==null&&o!==void 0?o:{},this.headers,m.global.fetch),this.fetch=GC(r,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new lC(new URL("rest/v1",l).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),m.accessToken||this._listenForAuthEvents()}get functions(){return new $N(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new IC(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},s={}){return this.rest.rpc(e,r,s)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return UE(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:n,storageKey:i,flowType:o,lock:a,debug:l},d,h){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new BE({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),d),storageKey:i,autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:n,flowType:o,lock:a,debug:l,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new kC(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,r,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const VE=(t,e,r)=>new HE(t,e,r),YE="https://qugyumskcgxrivmlcmza.supabase.co",GE="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF1Z3l1bXNrY2d4cml2bWxjbXphIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcxNjQ0MjUsImV4cCI6MjA2Mjc0MDQyNX0.pD-cX_h5OLRE98EpEBy9r0OhqYObnpqWorRpmcXGO9E",ge=VE(YE,GE);let qE={data:""},KE=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||qE,XE=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,JE=/\/\*[^]*?\*\/|  +/g,Qg=/\n+/g,Js=(t,e)=>{let r="",s="",n="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?r=i+" "+o+";":s+=i[1]=="f"?Js(o,i):i+"{"+Js(o,i[1]=="k"?"":e)+"}":typeof o=="object"?s+=Js(o,e?e.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=Js.p?Js.p(i,o):i+":"+o+";")}return r+(e&&n?e+"{"+n+"}":n)+s},cs={},Sb=t=>{if(typeof t=="object"){let e="";for(let r in t)e+=r+Sb(t[r]);return e}return t},QE=(t,e,r,s,n)=>{let i=Sb(t),o=cs[i]||(cs[i]=(l=>{let d=0,h=11;for(;d<l.length;)h=101*h+l.charCodeAt(d++)>>>0;return"go"+h})(i));if(!cs[o]){let l=i!==t?t:(d=>{let h,m,p=[{}];for(;h=XE.exec(d.replace(JE,""));)h[4]?p.shift():h[3]?(m=h[3].replace(Qg," ").trim(),p.unshift(p[0][m]=p[0][m]||{})):p[0][h[1]]=h[2].replace(Qg," ").trim();return p[0]})(t);cs[o]=Js(n?{["@keyframes "+o]:l}:l,r?"":"."+o)}let a=r&&cs.g?cs.g:null;return r&&(cs.g=cs[o]),((l,d,h,m)=>{m?d.data=d.data.replace(m,l):d.data.indexOf(l)===-1&&(d.data=h?l+d.data:d.data+l)})(cs[o],e,s,a),o},ZE=(t,e,r)=>t.reduce((s,n,i)=>{let o=e[i];if(o&&o.call){let a=o(r),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":Js(a,""):a===!1?"":a}return s+n+(o??"")},"");function Pu(t){let e=this||{},r=t.call?t(e.p):t;return QE(r.unshift?r.raw?ZE(r,[].slice.call(arguments,1),e.p):r.reduce((s,n)=>Object.assign(s,n&&n.call?n(e.p):n),{}):r,KE(e.target),e.g,e.o,e.k)}let jb,rf,sf;Pu.bind({g:1});let Cs=Pu.bind({k:1});function eM(t,e,r,s){Js.p=e,jb=t,rf=r,sf=s}function wn(t,e){let r=this||{};return function(){let s=arguments;function n(i,o){let a=Object.assign({},i),l=a.className||n.className;r.p=Object.assign({theme:rf&&rf()},a),r.o=/ *go\d+/.test(l),a.className=Pu.apply(r,s)+(l?" "+l:"");let d=t;return t[0]&&(d=a.as||t,delete a.as),sf&&d[0]&&sf(a),jb(d,a)}return n}}var tM=t=>typeof t=="function",qc=(t,e)=>tM(t)?t(e):t,rM=(()=>{let t=0;return()=>(++t).toString()})(),Nb=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),sM=20,Cb=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,sM)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:r}=e;return Cb(t,{type:t.toasts.find(i=>i.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=e;return{...t,toasts:t.toasts.map(i=>i.id===s||s===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let n=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+n}))}}},pc=[],Un={toasts:[],pausedAt:void 0},li=t=>{Un=Cb(Un,t),pc.forEach(e=>{e(Un)})},nM={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},iM=(t={})=>{let[e,r]=N.useState(Un),s=N.useRef(Un);N.useEffect(()=>(s.current!==Un&&r(Un),pc.push(r),()=>{let i=pc.indexOf(r);i>-1&&pc.splice(i,1)}),[]);let n=e.toasts.map(i=>{var o,a,l;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((o=t[i.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:i.duration||((a=t[i.type])==null?void 0:a.duration)||(t==null?void 0:t.duration)||nM[i.type],style:{...t.style,...(l=t[i.type])==null?void 0:l.style,...i.style}}});return{...e,toasts:n}},oM=(t,e="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:(r==null?void 0:r.id)||rM()}),Ja=t=>(e,r)=>{let s=oM(e,t,r);return li({type:2,toast:s}),s.id},ee=(t,e)=>Ja("blank")(t,e);ee.error=Ja("error");ee.success=Ja("success");ee.loading=Ja("loading");ee.custom=Ja("custom");ee.dismiss=t=>{li({type:3,toastId:t})};ee.remove=t=>li({type:4,toastId:t});ee.promise=(t,e,r)=>{let s=ee.loading(e.loading,{...r,...r==null?void 0:r.loading});return typeof t=="function"&&(t=t()),t.then(n=>{let i=e.success?qc(e.success,n):void 0;return i?ee.success(i,{id:s,...r,...r==null?void 0:r.success}):ee.dismiss(s),n}).catch(n=>{let i=e.error?qc(e.error,n):void 0;i?ee.error(i,{id:s,...r,...r==null?void 0:r.error}):ee.dismiss(s)}),t};var aM=(t,e)=>{li({type:1,toast:{id:t,height:e}})},lM=()=>{li({type:5,time:Date.now()})},oa=new Map,cM=1e3,uM=(t,e=cM)=>{if(oa.has(t))return;let r=setTimeout(()=>{oa.delete(t),li({type:4,toastId:t})},e);oa.set(t,r)},dM=t=>{let{toasts:e,pausedAt:r}=iM(t);N.useEffect(()=>{if(r)return;let i=Date.now(),o=e.map(a=>{if(a.duration===1/0)return;let l=(a.duration||0)+a.pauseDuration-(i-a.createdAt);if(l<0){a.visible&&ee.dismiss(a.id);return}return setTimeout(()=>ee.dismiss(a.id),l)});return()=>{o.forEach(a=>a&&clearTimeout(a))}},[e,r]);let s=N.useCallback(()=>{r&&li({type:6,time:Date.now()})},[r]),n=N.useCallback((i,o)=>{let{reverseOrder:a=!1,gutter:l=8,defaultPosition:d}=o||{},h=e.filter(x=>(x.position||d)===(i.position||d)&&x.height),m=h.findIndex(x=>x.id===i.id),p=h.filter((x,b)=>b<m&&x.visible).length;return h.filter(x=>x.visible).slice(...a?[p+1]:[0,p]).reduce((x,b)=>x+(b.height||0)+l,0)},[e]);return N.useEffect(()=>{e.forEach(i=>{if(i.dismissed)uM(i.id,i.removeDelay);else{let o=oa.get(i.id);o&&(clearTimeout(o),oa.delete(i.id))}})},[e]),{toasts:e,handlers:{updateHeight:aM,startPause:lM,endPause:s,calculateOffset:n}}},hM=Cs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,fM=Cs`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,mM=Cs`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,pM=wn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${hM} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${fM} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${mM} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,gM=Cs`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,yM=wn("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${gM} 1s linear infinite;
`,xM=Cs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,vM=Cs`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,bM=wn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${xM} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${vM} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,wM=wn("div")`
  position: absolute;
`,_M=wn("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,kM=Cs`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,SM=wn("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${kM} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,jM=({toast:t})=>{let{icon:e,type:r,iconTheme:s}=t;return e!==void 0?typeof e=="string"?N.createElement(SM,null,e):e:r==="blank"?null:N.createElement(_M,null,N.createElement(yM,{...s}),r!=="loading"&&N.createElement(wM,null,r==="error"?N.createElement(pM,{...s}):N.createElement(bM,{...s})))},NM=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,CM=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,EM="0%{opacity:0;} 100%{opacity:1;}",MM="0%{opacity:1;} 100%{opacity:0;}",TM=wn("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,PM=wn("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,DM=(t,e)=>{let r=t.includes("top")?1:-1,[s,n]=Nb()?[EM,MM]:[NM(r),CM(r)];return{animation:e?`${Cs(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Cs(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},OM=N.memo(({toast:t,position:e,style:r,children:s})=>{let n=t.height?DM(t.position||e||"top-center",t.visible):{opacity:0},i=N.createElement(jM,{toast:t}),o=N.createElement(PM,{...t.ariaProps},qc(t.message,t));return N.createElement(TM,{className:t.className,style:{...n,...r,...t.style}},typeof s=="function"?s({icon:i,message:o}):N.createElement(N.Fragment,null,i,o))});eM(N.createElement);var LM=({id:t,className:e,style:r,onHeightUpdate:s,children:n})=>{let i=N.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;s(t,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,s]);return N.createElement("div",{ref:i,className:e,style:r},n)},RM=(t,e)=>{let r=t.includes("top"),s=r?{top:0}:{bottom:0},n=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Nb()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(r?1:-1)}px)`,...s,...n}},AM=Pu`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Wl=16,IM=({reverseOrder:t,position:e="top-center",toastOptions:r,gutter:s,children:n,containerStyle:i,containerClassName:o})=>{let{toasts:a,handlers:l}=dM(r);return N.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Wl,left:Wl,right:Wl,bottom:Wl,pointerEvents:"none",...i},className:o,onMouseEnter:l.startPause,onMouseLeave:l.endPause},a.map(d=>{let h=d.position||e,m=l.calculateOffset(d,{reverseOrder:t,gutter:s,defaultPosition:e}),p=RM(h,m);return N.createElement(LM,{id:d.id,key:d.id,onHeightUpdate:l.updateHeight,className:d.visible?AM:"",style:p},d.type==="custom"?qc(d.message,d):n?n(d):N.createElement(OM,{toast:d,position:h}))}))},$M=ee;function Eb(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Id={exports:{}},Zg;function FM(){return Zg||(Zg=1,function(t,e){(function(r,s){t.exports=s()})(Zt,function(){var r;function s(){return r.apply(null,arguments)}function n(u){r=u}function i(u){return u instanceof Array||Object.prototype.toString.call(u)==="[object Array]"}function o(u){return u!=null&&Object.prototype.toString.call(u)==="[object Object]"}function a(u,f){return Object.prototype.hasOwnProperty.call(u,f)}function l(u){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(u).length===0;var f;for(f in u)if(a(u,f))return!1;return!0}function d(u){return u===void 0}function h(u){return typeof u=="number"||Object.prototype.toString.call(u)==="[object Number]"}function m(u){return u instanceof Date||Object.prototype.toString.call(u)==="[object Date]"}function p(u,f){var g=[],y,j=u.length;for(y=0;y<j;++y)g.push(f(u[y],y));return g}function x(u,f){for(var g in f)a(f,g)&&(u[g]=f[g]);return a(f,"toString")&&(u.toString=f.toString),a(f,"valueOf")&&(u.valueOf=f.valueOf),u}function b(u,f,g,y){return Qm(u,f,g,y,!0).utc()}function k(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function w(u){return u._pf==null&&(u._pf=k()),u._pf}var v;Array.prototype.some?v=Array.prototype.some:v=function(u){var f=Object(this),g=f.length>>>0,y;for(y=0;y<g;y++)if(y in f&&u.call(this,f[y],y,f))return!0;return!1};function _(u){var f=null,g=!1,y=u._d&&!isNaN(u._d.getTime());if(y&&(f=w(u),g=v.call(f.parsedDateParts,function(j){return j!=null}),y=f.overflow<0&&!f.empty&&!f.invalidEra&&!f.invalidMonth&&!f.invalidWeekday&&!f.weekdayMismatch&&!f.nullInput&&!f.invalidFormat&&!f.userInvalidated&&(!f.meridiem||f.meridiem&&g),u._strict&&(y=y&&f.charsLeftOver===0&&f.unusedTokens.length===0&&f.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(u))u._isValid=y;else return y;return u._isValid}function S(u){var f=b(NaN);return u!=null?x(w(f),u):w(f).userInvalidated=!0,f}var C=s.momentProperties=[],E=!1;function D(u,f){var g,y,j,T=C.length;if(d(f._isAMomentObject)||(u._isAMomentObject=f._isAMomentObject),d(f._i)||(u._i=f._i),d(f._f)||(u._f=f._f),d(f._l)||(u._l=f._l),d(f._strict)||(u._strict=f._strict),d(f._tzm)||(u._tzm=f._tzm),d(f._isUTC)||(u._isUTC=f._isUTC),d(f._offset)||(u._offset=f._offset),d(f._pf)||(u._pf=w(f)),d(f._locale)||(u._locale=f._locale),T>0)for(g=0;g<T;g++)y=C[g],j=f[y],d(j)||(u[y]=j);return u}function P(u){D(this,u),this._d=new Date(u._d!=null?u._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),E===!1&&(E=!0,s.updateOffset(this),E=!1)}function O(u){return u instanceof P||u!=null&&u._isAMomentObject!=null}function B(u){s.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+u)}function M(u,f){var g=!0;return x(function(){if(s.deprecationHandler!=null&&s.deprecationHandler(null,u),g){var y=[],j,T,$,ie=arguments.length;for(T=0;T<ie;T++){if(j="",typeof arguments[T]=="object"){j+=`
[`+T+"] ";for($ in arguments[0])a(arguments[0],$)&&(j+=$+": "+arguments[0][$]+", ");j=j.slice(0,-2)}else j=arguments[T];y.push(j)}B(u+`
Arguments: `+Array.prototype.slice.call(y).join("")+`
`+new Error().stack),g=!1}return f.apply(this,arguments)},f)}var I={};function H(u,f){s.deprecationHandler!=null&&s.deprecationHandler(u,f),I[u]||(B(f),I[u]=!0)}s.suppressDeprecationWarnings=!1,s.deprecationHandler=null;function ce(u){return typeof Function<"u"&&u instanceof Function||Object.prototype.toString.call(u)==="[object Function]"}function we(u){var f,g;for(g in u)a(u,g)&&(f=u[g],ce(f)?this[g]=f:this["_"+g]=f);this._config=u,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function de(u,f){var g=x({},u),y;for(y in f)a(f,y)&&(o(u[y])&&o(f[y])?(g[y]={},x(g[y],u[y]),x(g[y],f[y])):f[y]!=null?g[y]=f[y]:delete g[y]);for(y in u)a(u,y)&&!a(f,y)&&o(u[y])&&(g[y]=x({},g[y]));return g}function pe(u){u!=null&&this.set(u)}var _e;Object.keys?_e=Object.keys:_e=function(u){var f,g=[];for(f in u)a(u,f)&&g.push(f);return g};var X={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function re(u,f,g){var y=this._calendar[u]||this._calendar.sameElse;return ce(y)?y.call(f,g):y}function oe(u,f,g){var y=""+Math.abs(u),j=f-y.length,T=u>=0;return(T?g?"+":"":"-")+Math.pow(10,Math.max(0,j)).toString().substr(1)+y}var xe=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ve=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,J={},Q={};function U(u,f,g,y){var j=y;typeof y=="string"&&(j=function(){return this[y]()}),u&&(Q[u]=j),f&&(Q[f[0]]=function(){return oe(j.apply(this,arguments),f[1],f[2])}),g&&(Q[g]=function(){return this.localeData().ordinal(j.apply(this,arguments),u)})}function be(u){return u.match(/\[[\s\S]/)?u.replace(/^\[|\]$/g,""):u.replace(/\\/g,"")}function A(u){var f=u.match(xe),g,y;for(g=0,y=f.length;g<y;g++)Q[f[g]]?f[g]=Q[f[g]]:f[g]=be(f[g]);return function(j){var T="",$;for($=0;$<y;$++)T+=ce(f[$])?f[$].call(j,u):f[$];return T}}function L(u,f){return u.isValid()?(f=F(f,u.localeData()),J[f]=J[f]||A(f),J[f](u)):u.localeData().invalidDate()}function F(u,f){var g=5;function y(j){return f.longDateFormat(j)||j}for(ve.lastIndex=0;g>=0&&ve.test(u);)u=u.replace(ve,y),ve.lastIndex=0,g-=1;return u}var te={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function me(u){var f=this._longDateFormat[u],g=this._longDateFormat[u.toUpperCase()];return f||!g?f:(this._longDateFormat[u]=g.match(xe).map(function(y){return y==="MMMM"||y==="MM"||y==="DD"||y==="dddd"?y.slice(1):y}).join(""),this._longDateFormat[u])}var Ae="Invalid date";function Ie(){return this._invalidDate}var ur="%d",Nt=/\d{1,2}/;function xt(u){return this._ordinal.replace("%d",u)}var kr={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function er(u,f,g,y){var j=this._relativeTime[g];return ce(j)?j(u,f,g,y):j.replace(/%d/i,u)}function Qr(u,f){var g=this._relativeTime[u>0?"future":"past"];return ce(g)?g(f):g.replace(/%s/i,f)}var Ts={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Rt(u){return typeof u=="string"?Ts[u]||Ts[u.toLowerCase()]:void 0}function Zr(u){var f={},g,y;for(y in u)a(u,y)&&(g=Rt(y),g&&(f[g]=u[y]));return f}var el={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function _n(u){var f=[],g;for(g in u)a(u,g)&&f.push({unit:g,priority:el[g]});return f.sort(function(y,j){return y.priority-j.priority}),f}var fo=/\d/,ht=/\d\d/,mo=/\d{3}/,es=/\d{4}/,kn=/[+-]?\d{6}/,$e=/\d\d?/,po=/\d\d\d\d?/,ui=/\d\d\d\d\d\d?/,Ps=/\d{1,3}/,go=/\d{1,4}/,ts=/[+-]?\d{1,6}/,Ue=/\d+/,Ds=/[+-]?\d+/,tl=/Z|[+-]\d\d:?\d\d/gi,At=/Z|[+-]\d\d(?::?\d\d)?/gi,rl=/[+-]?\d+(\.\d{1,3})?/,Sn=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Sr=/^[1-9]\d?/,yo=/^([1-9]\d|\d)/,Os;Os={};function se(u,f,g){Os[u]=ce(f)?f:function(y,j){return y&&g?g:f}}function di(u,f){return a(Os,u)?Os[u](f._strict,f._locale):new RegExp(zu(u))}function zu(u){return jr(u.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(f,g,y,j,T){return g||y||j||T}))}function jr(u){return u.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Bt(u){return u<0?Math.ceil(u)||0:Math.floor(u)}function je(u){var f=+u,g=0;return f!==0&&isFinite(f)&&(g=Bt(f)),g}var xo={};function Fe(u,f){var g,y=f,j;for(typeof u=="string"&&(u=[u]),h(f)&&(y=function(T,$){$[f]=je(T)}),j=u.length,g=0;g<j;g++)xo[u[g]]=y}function jn(u,f){Fe(u,function(g,y,j,T){j._w=j._w||{},f(g,j._w,j,T)})}function sl(u,f,g){f!=null&&a(xo,u)&&xo[u](f,g._a,g,u)}function Nn(u){return u%4===0&&u%100!==0||u%400===0}var ft=0,dr=1,tr=2,st=3,Ut=4,hr=5,$r=6,nl=7,il=8;U("Y",0,0,function(){var u=this.year();return u<=9999?oe(u,4):"+"+u}),U(0,["YY",2],0,function(){return this.year()%100}),U(0,["YYYY",4],0,"year"),U(0,["YYYYY",5],0,"year"),U(0,["YYYYYY",6,!0],0,"year"),se("Y",Ds),se("YY",$e,ht),se("YYYY",go,es),se("YYYYY",ts,kn),se("YYYYYY",ts,kn),Fe(["YYYYY","YYYYYY"],ft),Fe("YYYY",function(u,f){f[ft]=u.length===2?s.parseTwoDigitYear(u):je(u)}),Fe("YY",function(u,f){f[ft]=s.parseTwoDigitYear(u)}),Fe("Y",function(u,f){f[ft]=parseInt(u,10)});function Ls(u){return Nn(u)?366:365}s.parseTwoDigitYear=function(u){return je(u)+(je(u)>68?1900:2e3)};var vo=rs("FullYear",!0);function ol(){return Nn(this.year())}function rs(u,f){return function(g){return g!=null?(R(this,u,g),s.updateOffset(this,f),this):Rs(this,u)}}function Rs(u,f){if(!u.isValid())return NaN;var g=u._d,y=u._isUTC;switch(f){case"Milliseconds":return y?g.getUTCMilliseconds():g.getMilliseconds();case"Seconds":return y?g.getUTCSeconds():g.getSeconds();case"Minutes":return y?g.getUTCMinutes():g.getMinutes();case"Hours":return y?g.getUTCHours():g.getHours();case"Date":return y?g.getUTCDate():g.getDate();case"Day":return y?g.getUTCDay():g.getDay();case"Month":return y?g.getUTCMonth():g.getMonth();case"FullYear":return y?g.getUTCFullYear():g.getFullYear();default:return NaN}}function R(u,f,g){var y,j,T,$,ie;if(!(!u.isValid()||isNaN(g))){switch(y=u._d,j=u._isUTC,f){case"Milliseconds":return void(j?y.setUTCMilliseconds(g):y.setMilliseconds(g));case"Seconds":return void(j?y.setUTCSeconds(g):y.setSeconds(g));case"Minutes":return void(j?y.setUTCMinutes(g):y.setMinutes(g));case"Hours":return void(j?y.setUTCHours(g):y.setHours(g));case"Date":return void(j?y.setUTCDate(g):y.setDate(g));case"FullYear":break;default:return}T=g,$=u.month(),ie=u.date(),ie=ie===29&&$===1&&!Nn(T)?28:ie,j?y.setUTCFullYear(T,$,ie):y.setFullYear(T,$,ie)}}function W(u){return u=Rt(u),ce(this[u])?this[u]():this}function V(u,f){if(typeof u=="object"){u=Zr(u);var g=_n(u),y,j=g.length;for(y=0;y<j;y++)this[g[y].unit](u[g[y].unit])}else if(u=Rt(u),ce(this[u]))return this[u](f);return this}function Z(u,f){return(u%f+f)%f}var Y;Array.prototype.indexOf?Y=Array.prototype.indexOf:Y=function(u){var f;for(f=0;f<this.length;++f)if(this[f]===u)return f;return-1};function K(u,f){if(isNaN(u)||isNaN(f))return NaN;var g=Z(f,12);return u+=(f-g)/12,g===1?Nn(u)?29:28:31-g%7%2}U("M",["MM",2],"Mo",function(){return this.month()+1}),U("MMM",0,0,function(u){return this.localeData().monthsShort(this,u)}),U("MMMM",0,0,function(u){return this.localeData().months(this,u)}),se("M",$e,Sr),se("MM",$e,ht),se("MMM",function(u,f){return f.monthsShortRegex(u)}),se("MMMM",function(u,f){return f.monthsRegex(u)}),Fe(["M","MM"],function(u,f){f[dr]=je(u)-1}),Fe(["MMM","MMMM"],function(u,f,g,y){var j=g._locale.monthsParse(u,y,g._strict);j!=null?f[dr]=j:w(g).invalidMonth=u});var z="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),le="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ne=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,fe=Sn,he=Sn;function at(u,f){return u?i(this._months)?this._months[u.month()]:this._months[(this._months.isFormat||ne).test(f)?"format":"standalone"][u.month()]:i(this._months)?this._months:this._months.standalone}function mt(u,f){return u?i(this._monthsShort)?this._monthsShort[u.month()]:this._monthsShort[ne.test(f)?"format":"standalone"][u.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function As(u,f,g){var y,j,T,$=u.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],y=0;y<12;++y)T=b([2e3,y]),this._shortMonthsParse[y]=this.monthsShort(T,"").toLocaleLowerCase(),this._longMonthsParse[y]=this.months(T,"").toLocaleLowerCase();return g?f==="MMM"?(j=Y.call(this._shortMonthsParse,$),j!==-1?j:null):(j=Y.call(this._longMonthsParse,$),j!==-1?j:null):f==="MMM"?(j=Y.call(this._shortMonthsParse,$),j!==-1?j:(j=Y.call(this._longMonthsParse,$),j!==-1?j:null)):(j=Y.call(this._longMonthsParse,$),j!==-1?j:(j=Y.call(this._shortMonthsParse,$),j!==-1?j:null))}function Is(u,f,g){var y,j,T;if(this._monthsParseExact)return As.call(this,u,f,g);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),y=0;y<12;y++){if(j=b([2e3,y]),g&&!this._longMonthsParse[y]&&(this._longMonthsParse[y]=new RegExp("^"+this.months(j,"").replace(".","")+"$","i"),this._shortMonthsParse[y]=new RegExp("^"+this.monthsShort(j,"").replace(".","")+"$","i")),!g&&!this._monthsParse[y]&&(T="^"+this.months(j,"")+"|^"+this.monthsShort(j,""),this._monthsParse[y]=new RegExp(T.replace(".",""),"i")),g&&f==="MMMM"&&this._longMonthsParse[y].test(u))return y;if(g&&f==="MMM"&&this._shortMonthsParse[y].test(u))return y;if(!g&&this._monthsParse[y].test(u))return y}}function Cn(u,f){if(!u.isValid())return u;if(typeof f=="string"){if(/^\d+$/.test(f))f=je(f);else if(f=u.localeData().monthsParse(f),!h(f))return u}var g=f,y=u.date();return y=y<29?y:Math.min(y,K(u.year(),g)),u._isUTC?u._d.setUTCMonth(g,y):u._d.setMonth(g,y),u}function Le(u){return u!=null?(Cn(this,u),s.updateOffset(this,!0),this):Rs(this,"Month")}function vt(){return K(this.year(),this.month())}function Nr(u){return this._monthsParseExact?(a(this,"_monthsRegex")||bo.call(this),u?this._monthsShortStrictRegex:this._monthsShortRegex):(a(this,"_monthsShortRegex")||(this._monthsShortRegex=fe),this._monthsShortStrictRegex&&u?this._monthsShortStrictRegex:this._monthsShortRegex)}function al(u){return this._monthsParseExact?(a(this,"_monthsRegex")||bo.call(this),u?this._monthsStrictRegex:this._monthsRegex):(a(this,"_monthsRegex")||(this._monthsRegex=he),this._monthsStrictRegex&&u?this._monthsStrictRegex:this._monthsRegex)}function bo(){function u(ye,Pe){return Pe.length-ye.length}var f=[],g=[],y=[],j,T,$,ie;for(j=0;j<12;j++)T=b([2e3,j]),$=jr(this.monthsShort(T,"")),ie=jr(this.months(T,"")),f.push($),g.push(ie),y.push(ie),y.push($);f.sort(u),g.sort(u),y.sort(u),this._monthsRegex=new RegExp("^("+y.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+g.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+f.join("|")+")","i")}function Ow(u,f,g,y,j,T,$){var ie;return u<100&&u>=0?(ie=new Date(u+400,f,g,y,j,T,$),isFinite(ie.getFullYear())&&ie.setFullYear(u)):ie=new Date(u,f,g,y,j,T,$),ie}function wo(u){var f,g;return u<100&&u>=0?(g=Array.prototype.slice.call(arguments),g[0]=u+400,f=new Date(Date.UTC.apply(null,g)),isFinite(f.getUTCFullYear())&&f.setUTCFullYear(u)):f=new Date(Date.UTC.apply(null,arguments)),f}function ll(u,f,g){var y=7+f-g,j=(7+wo(u,0,y).getUTCDay()-f)%7;return-j+y-1}function Um(u,f,g,y,j){var T=(7+g-y)%7,$=ll(u,y,j),ie=1+7*(f-1)+T+$,ye,Pe;return ie<=0?(ye=u-1,Pe=Ls(ye)+ie):ie>Ls(u)?(ye=u+1,Pe=ie-Ls(u)):(ye=u,Pe=ie),{year:ye,dayOfYear:Pe}}function _o(u,f,g){var y=ll(u.year(),f,g),j=Math.floor((u.dayOfYear()-y-1)/7)+1,T,$;return j<1?($=u.year()-1,T=j+ss($,f,g)):j>ss(u.year(),f,g)?(T=j-ss(u.year(),f,g),$=u.year()+1):($=u.year(),T=j),{week:T,year:$}}function ss(u,f,g){var y=ll(u,f,g),j=ll(u+1,f,g);return(Ls(u)-y+j)/7}U("w",["ww",2],"wo","week"),U("W",["WW",2],"Wo","isoWeek"),se("w",$e,Sr),se("ww",$e,ht),se("W",$e,Sr),se("WW",$e,ht),jn(["w","ww","W","WW"],function(u,f,g,y){f[y.substr(0,1)]=je(u)});function Lw(u){return _o(u,this._week.dow,this._week.doy).week}var Rw={dow:0,doy:6};function Aw(){return this._week.dow}function Iw(){return this._week.doy}function $w(u){var f=this.localeData().week(this);return u==null?f:this.add((u-f)*7,"d")}function Fw(u){var f=_o(this,1,4).week;return u==null?f:this.add((u-f)*7,"d")}U("d",0,"do","day"),U("dd",0,0,function(u){return this.localeData().weekdaysMin(this,u)}),U("ddd",0,0,function(u){return this.localeData().weekdaysShort(this,u)}),U("dddd",0,0,function(u){return this.localeData().weekdays(this,u)}),U("e",0,0,"weekday"),U("E",0,0,"isoWeekday"),se("d",$e),se("e",$e),se("E",$e),se("dd",function(u,f){return f.weekdaysMinRegex(u)}),se("ddd",function(u,f){return f.weekdaysShortRegex(u)}),se("dddd",function(u,f){return f.weekdaysRegex(u)}),jn(["dd","ddd","dddd"],function(u,f,g,y){var j=g._locale.weekdaysParse(u,y,g._strict);j!=null?f.d=j:w(g).invalidWeekday=u}),jn(["d","e","E"],function(u,f,g,y){f[y]=je(u)});function zw(u,f){return typeof u!="string"?u:isNaN(u)?(u=f.weekdaysParse(u),typeof u=="number"?u:null):parseInt(u,10)}function Ww(u,f){return typeof u=="string"?f.weekdaysParse(u)%7||7:isNaN(u)?null:u}function Wu(u,f){return u.slice(f,7).concat(u.slice(0,f))}var Bw="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Hm="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Uw="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Hw=Sn,Vw=Sn,Yw=Sn;function Gw(u,f){var g=i(this._weekdays)?this._weekdays:this._weekdays[u&&u!==!0&&this._weekdays.isFormat.test(f)?"format":"standalone"];return u===!0?Wu(g,this._week.dow):u?g[u.day()]:g}function qw(u){return u===!0?Wu(this._weekdaysShort,this._week.dow):u?this._weekdaysShort[u.day()]:this._weekdaysShort}function Kw(u){return u===!0?Wu(this._weekdaysMin,this._week.dow):u?this._weekdaysMin[u.day()]:this._weekdaysMin}function Xw(u,f,g){var y,j,T,$=u.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],y=0;y<7;++y)T=b([2e3,1]).day(y),this._minWeekdaysParse[y]=this.weekdaysMin(T,"").toLocaleLowerCase(),this._shortWeekdaysParse[y]=this.weekdaysShort(T,"").toLocaleLowerCase(),this._weekdaysParse[y]=this.weekdays(T,"").toLocaleLowerCase();return g?f==="dddd"?(j=Y.call(this._weekdaysParse,$),j!==-1?j:null):f==="ddd"?(j=Y.call(this._shortWeekdaysParse,$),j!==-1?j:null):(j=Y.call(this._minWeekdaysParse,$),j!==-1?j:null):f==="dddd"?(j=Y.call(this._weekdaysParse,$),j!==-1||(j=Y.call(this._shortWeekdaysParse,$),j!==-1)?j:(j=Y.call(this._minWeekdaysParse,$),j!==-1?j:null)):f==="ddd"?(j=Y.call(this._shortWeekdaysParse,$),j!==-1||(j=Y.call(this._weekdaysParse,$),j!==-1)?j:(j=Y.call(this._minWeekdaysParse,$),j!==-1?j:null)):(j=Y.call(this._minWeekdaysParse,$),j!==-1||(j=Y.call(this._weekdaysParse,$),j!==-1)?j:(j=Y.call(this._shortWeekdaysParse,$),j!==-1?j:null))}function Jw(u,f,g){var y,j,T;if(this._weekdaysParseExact)return Xw.call(this,u,f,g);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),y=0;y<7;y++){if(j=b([2e3,1]).day(y),g&&!this._fullWeekdaysParse[y]&&(this._fullWeekdaysParse[y]=new RegExp("^"+this.weekdays(j,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[y]=new RegExp("^"+this.weekdaysShort(j,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[y]=new RegExp("^"+this.weekdaysMin(j,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[y]||(T="^"+this.weekdays(j,"")+"|^"+this.weekdaysShort(j,"")+"|^"+this.weekdaysMin(j,""),this._weekdaysParse[y]=new RegExp(T.replace(".",""),"i")),g&&f==="dddd"&&this._fullWeekdaysParse[y].test(u))return y;if(g&&f==="ddd"&&this._shortWeekdaysParse[y].test(u))return y;if(g&&f==="dd"&&this._minWeekdaysParse[y].test(u))return y;if(!g&&this._weekdaysParse[y].test(u))return y}}function Qw(u){if(!this.isValid())return u!=null?this:NaN;var f=Rs(this,"Day");return u!=null?(u=zw(u,this.localeData()),this.add(u-f,"d")):f}function Zw(u){if(!this.isValid())return u!=null?this:NaN;var f=(this.day()+7-this.localeData()._week.dow)%7;return u==null?f:this.add(u-f,"d")}function e_(u){if(!this.isValid())return u!=null?this:NaN;if(u!=null){var f=Ww(u,this.localeData());return this.day(this.day()%7?f:f-7)}else return this.day()||7}function t_(u){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Bu.call(this),u?this._weekdaysStrictRegex:this._weekdaysRegex):(a(this,"_weekdaysRegex")||(this._weekdaysRegex=Hw),this._weekdaysStrictRegex&&u?this._weekdaysStrictRegex:this._weekdaysRegex)}function r_(u){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Bu.call(this),u?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(a(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Vw),this._weekdaysShortStrictRegex&&u?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function s_(u){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Bu.call(this),u?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(a(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Yw),this._weekdaysMinStrictRegex&&u?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Bu(){function u(It,ls){return ls.length-It.length}var f=[],g=[],y=[],j=[],T,$,ie,ye,Pe;for(T=0;T<7;T++)$=b([2e3,1]).day(T),ie=jr(this.weekdaysMin($,"")),ye=jr(this.weekdaysShort($,"")),Pe=jr(this.weekdays($,"")),f.push(ie),g.push(ye),y.push(Pe),j.push(ie),j.push(ye),j.push(Pe);f.sort(u),g.sort(u),y.sort(u),j.sort(u),this._weekdaysRegex=new RegExp("^("+j.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+y.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+g.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+f.join("|")+")","i")}function Uu(){return this.hours()%12||12}function n_(){return this.hours()||24}U("H",["HH",2],0,"hour"),U("h",["hh",2],0,Uu),U("k",["kk",2],0,n_),U("hmm",0,0,function(){return""+Uu.apply(this)+oe(this.minutes(),2)}),U("hmmss",0,0,function(){return""+Uu.apply(this)+oe(this.minutes(),2)+oe(this.seconds(),2)}),U("Hmm",0,0,function(){return""+this.hours()+oe(this.minutes(),2)}),U("Hmmss",0,0,function(){return""+this.hours()+oe(this.minutes(),2)+oe(this.seconds(),2)});function Vm(u,f){U(u,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),f)})}Vm("a",!0),Vm("A",!1);function Ym(u,f){return f._meridiemParse}se("a",Ym),se("A",Ym),se("H",$e,yo),se("h",$e,Sr),se("k",$e,Sr),se("HH",$e,ht),se("hh",$e,ht),se("kk",$e,ht),se("hmm",po),se("hmmss",ui),se("Hmm",po),se("Hmmss",ui),Fe(["H","HH"],st),Fe(["k","kk"],function(u,f,g){var y=je(u);f[st]=y===24?0:y}),Fe(["a","A"],function(u,f,g){g._isPm=g._locale.isPM(u),g._meridiem=u}),Fe(["h","hh"],function(u,f,g){f[st]=je(u),w(g).bigHour=!0}),Fe("hmm",function(u,f,g){var y=u.length-2;f[st]=je(u.substr(0,y)),f[Ut]=je(u.substr(y)),w(g).bigHour=!0}),Fe("hmmss",function(u,f,g){var y=u.length-4,j=u.length-2;f[st]=je(u.substr(0,y)),f[Ut]=je(u.substr(y,2)),f[hr]=je(u.substr(j)),w(g).bigHour=!0}),Fe("Hmm",function(u,f,g){var y=u.length-2;f[st]=je(u.substr(0,y)),f[Ut]=je(u.substr(y))}),Fe("Hmmss",function(u,f,g){var y=u.length-4,j=u.length-2;f[st]=je(u.substr(0,y)),f[Ut]=je(u.substr(y,2)),f[hr]=je(u.substr(j))});function i_(u){return(u+"").toLowerCase().charAt(0)==="p"}var o_=/[ap]\.?m?\.?/i,a_=rs("Hours",!0);function l_(u,f,g){return u>11?g?"pm":"PM":g?"am":"AM"}var Gm={calendar:X,longDateFormat:te,invalidDate:Ae,ordinal:ur,dayOfMonthOrdinalParse:Nt,relativeTime:kr,months:z,monthsShort:le,week:Rw,weekdays:Bw,weekdaysMin:Uw,weekdaysShort:Hm,meridiemParse:o_},Xe={},ko={},So;function c_(u,f){var g,y=Math.min(u.length,f.length);for(g=0;g<y;g+=1)if(u[g]!==f[g])return g;return y}function qm(u){return u&&u.toLowerCase().replace("_","-")}function u_(u){for(var f=0,g,y,j,T;f<u.length;){for(T=qm(u[f]).split("-"),g=T.length,y=qm(u[f+1]),y=y?y.split("-"):null;g>0;){if(j=cl(T.slice(0,g).join("-")),j)return j;if(y&&y.length>=g&&c_(T,y)>=g-1)break;g--}f++}return So}function d_(u){return!!(u&&u.match("^[^/\\\\]*$"))}function cl(u){var f=null,g;if(Xe[u]===void 0&&t&&t.exports&&d_(u))try{f=So._abbr,g=Eb,g("./locale/"+u),$s(f)}catch{Xe[u]=null}return Xe[u]}function $s(u,f){var g;return u&&(d(f)?g=ns(u):g=Hu(u,f),g?So=g:typeof console<"u"&&console.warn&&console.warn("Locale "+u+" not found. Did you forget to load it?")),So._abbr}function Hu(u,f){if(f!==null){var g,y=Gm;if(f.abbr=u,Xe[u]!=null)H("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),y=Xe[u]._config;else if(f.parentLocale!=null)if(Xe[f.parentLocale]!=null)y=Xe[f.parentLocale]._config;else if(g=cl(f.parentLocale),g!=null)y=g._config;else return ko[f.parentLocale]||(ko[f.parentLocale]=[]),ko[f.parentLocale].push({name:u,config:f}),null;return Xe[u]=new pe(de(y,f)),ko[u]&&ko[u].forEach(function(j){Hu(j.name,j.config)}),$s(u),Xe[u]}else return delete Xe[u],null}function h_(u,f){if(f!=null){var g,y,j=Gm;Xe[u]!=null&&Xe[u].parentLocale!=null?Xe[u].set(de(Xe[u]._config,f)):(y=cl(u),y!=null&&(j=y._config),f=de(j,f),y==null&&(f.abbr=u),g=new pe(f),g.parentLocale=Xe[u],Xe[u]=g),$s(u)}else Xe[u]!=null&&(Xe[u].parentLocale!=null?(Xe[u]=Xe[u].parentLocale,u===$s()&&$s(u)):Xe[u]!=null&&delete Xe[u]);return Xe[u]}function ns(u){var f;if(u&&u._locale&&u._locale._abbr&&(u=u._locale._abbr),!u)return So;if(!i(u)){if(f=cl(u),f)return f;u=[u]}return u_(u)}function f_(){return _e(Xe)}function Vu(u){var f,g=u._a;return g&&w(u).overflow===-2&&(f=g[dr]<0||g[dr]>11?dr:g[tr]<1||g[tr]>K(g[ft],g[dr])?tr:g[st]<0||g[st]>24||g[st]===24&&(g[Ut]!==0||g[hr]!==0||g[$r]!==0)?st:g[Ut]<0||g[Ut]>59?Ut:g[hr]<0||g[hr]>59?hr:g[$r]<0||g[$r]>999?$r:-1,w(u)._overflowDayOfYear&&(f<ft||f>tr)&&(f=tr),w(u)._overflowWeeks&&f===-1&&(f=nl),w(u)._overflowWeekday&&f===-1&&(f=il),w(u).overflow=f),u}var m_=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,p_=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,g_=/Z|[+-]\d\d(?::?\d\d)?/,ul=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Yu=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],y_=/^\/?Date\((-?\d+)/i,x_=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,v_={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Km(u){var f,g,y=u._i,j=m_.exec(y)||p_.exec(y),T,$,ie,ye,Pe=ul.length,It=Yu.length;if(j){for(w(u).iso=!0,f=0,g=Pe;f<g;f++)if(ul[f][1].exec(j[1])){$=ul[f][0],T=ul[f][2]!==!1;break}if($==null){u._isValid=!1;return}if(j[3]){for(f=0,g=It;f<g;f++)if(Yu[f][1].exec(j[3])){ie=(j[2]||" ")+Yu[f][0];break}if(ie==null){u._isValid=!1;return}}if(!T&&ie!=null){u._isValid=!1;return}if(j[4])if(g_.exec(j[4]))ye="Z";else{u._isValid=!1;return}u._f=$+(ie||"")+(ye||""),qu(u)}else u._isValid=!1}function b_(u,f,g,y,j,T){var $=[w_(u),le.indexOf(f),parseInt(g,10),parseInt(y,10),parseInt(j,10)];return T&&$.push(parseInt(T,10)),$}function w_(u){var f=parseInt(u,10);return f<=49?2e3+f:f<=999?1900+f:f}function __(u){return u.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function k_(u,f,g){if(u){var y=Hm.indexOf(u),j=new Date(f[0],f[1],f[2]).getDay();if(y!==j)return w(g).weekdayMismatch=!0,g._isValid=!1,!1}return!0}function S_(u,f,g){if(u)return v_[u];if(f)return 0;var y=parseInt(g,10),j=y%100,T=(y-j)/100;return T*60+j}function Xm(u){var f=x_.exec(__(u._i)),g;if(f){if(g=b_(f[4],f[3],f[2],f[5],f[6],f[7]),!k_(f[1],g,u))return;u._a=g,u._tzm=S_(f[8],f[9],f[10]),u._d=wo.apply(null,u._a),u._d.setUTCMinutes(u._d.getUTCMinutes()-u._tzm),w(u).rfc2822=!0}else u._isValid=!1}function j_(u){var f=y_.exec(u._i);if(f!==null){u._d=new Date(+f[1]);return}if(Km(u),u._isValid===!1)delete u._isValid;else return;if(Xm(u),u._isValid===!1)delete u._isValid;else return;u._strict?u._isValid=!1:s.createFromInputFallback(u)}s.createFromInputFallback=M("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(u){u._d=new Date(u._i+(u._useUTC?" UTC":""))});function hi(u,f,g){return u??f??g}function N_(u){var f=new Date(s.now());return u._useUTC?[f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()]:[f.getFullYear(),f.getMonth(),f.getDate()]}function Gu(u){var f,g,y=[],j,T,$;if(!u._d){for(j=N_(u),u._w&&u._a[tr]==null&&u._a[dr]==null&&C_(u),u._dayOfYear!=null&&($=hi(u._a[ft],j[ft]),(u._dayOfYear>Ls($)||u._dayOfYear===0)&&(w(u)._overflowDayOfYear=!0),g=wo($,0,u._dayOfYear),u._a[dr]=g.getUTCMonth(),u._a[tr]=g.getUTCDate()),f=0;f<3&&u._a[f]==null;++f)u._a[f]=y[f]=j[f];for(;f<7;f++)u._a[f]=y[f]=u._a[f]==null?f===2?1:0:u._a[f];u._a[st]===24&&u._a[Ut]===0&&u._a[hr]===0&&u._a[$r]===0&&(u._nextDay=!0,u._a[st]=0),u._d=(u._useUTC?wo:Ow).apply(null,y),T=u._useUTC?u._d.getUTCDay():u._d.getDay(),u._tzm!=null&&u._d.setUTCMinutes(u._d.getUTCMinutes()-u._tzm),u._nextDay&&(u._a[st]=24),u._w&&typeof u._w.d<"u"&&u._w.d!==T&&(w(u).weekdayMismatch=!0)}}function C_(u){var f,g,y,j,T,$,ie,ye,Pe;f=u._w,f.GG!=null||f.W!=null||f.E!=null?(T=1,$=4,g=hi(f.GG,u._a[ft],_o(Ye(),1,4).year),y=hi(f.W,1),j=hi(f.E,1),(j<1||j>7)&&(ye=!0)):(T=u._locale._week.dow,$=u._locale._week.doy,Pe=_o(Ye(),T,$),g=hi(f.gg,u._a[ft],Pe.year),y=hi(f.w,Pe.week),f.d!=null?(j=f.d,(j<0||j>6)&&(ye=!0)):f.e!=null?(j=f.e+T,(f.e<0||f.e>6)&&(ye=!0)):j=T),y<1||y>ss(g,T,$)?w(u)._overflowWeeks=!0:ye!=null?w(u)._overflowWeekday=!0:(ie=Um(g,y,j,T,$),u._a[ft]=ie.year,u._dayOfYear=ie.dayOfYear)}s.ISO_8601=function(){},s.RFC_2822=function(){};function qu(u){if(u._f===s.ISO_8601){Km(u);return}if(u._f===s.RFC_2822){Xm(u);return}u._a=[],w(u).empty=!0;var f=""+u._i,g,y,j,T,$,ie=f.length,ye=0,Pe,It;for(j=F(u._f,u._locale).match(xe)||[],It=j.length,g=0;g<It;g++)T=j[g],y=(f.match(di(T,u))||[])[0],y&&($=f.substr(0,f.indexOf(y)),$.length>0&&w(u).unusedInput.push($),f=f.slice(f.indexOf(y)+y.length),ye+=y.length),Q[T]?(y?w(u).empty=!1:w(u).unusedTokens.push(T),sl(T,y,u)):u._strict&&!y&&w(u).unusedTokens.push(T);w(u).charsLeftOver=ie-ye,f.length>0&&w(u).unusedInput.push(f),u._a[st]<=12&&w(u).bigHour===!0&&u._a[st]>0&&(w(u).bigHour=void 0),w(u).parsedDateParts=u._a.slice(0),w(u).meridiem=u._meridiem,u._a[st]=E_(u._locale,u._a[st],u._meridiem),Pe=w(u).era,Pe!==null&&(u._a[ft]=u._locale.erasConvertYear(Pe,u._a[ft])),Gu(u),Vu(u)}function E_(u,f,g){var y;return g==null?f:u.meridiemHour!=null?u.meridiemHour(f,g):(u.isPM!=null&&(y=u.isPM(g),y&&f<12&&(f+=12),!y&&f===12&&(f=0)),f)}function M_(u){var f,g,y,j,T,$,ie=!1,ye=u._f.length;if(ye===0){w(u).invalidFormat=!0,u._d=new Date(NaN);return}for(j=0;j<ye;j++)T=0,$=!1,f=D({},u),u._useUTC!=null&&(f._useUTC=u._useUTC),f._f=u._f[j],qu(f),_(f)&&($=!0),T+=w(f).charsLeftOver,T+=w(f).unusedTokens.length*10,w(f).score=T,ie?T<y&&(y=T,g=f):(y==null||T<y||$)&&(y=T,g=f,$&&(ie=!0));x(u,g||f)}function T_(u){if(!u._d){var f=Zr(u._i),g=f.day===void 0?f.date:f.day;u._a=p([f.year,f.month,g,f.hour,f.minute,f.second,f.millisecond],function(y){return y&&parseInt(y,10)}),Gu(u)}}function P_(u){var f=new P(Vu(Jm(u)));return f._nextDay&&(f.add(1,"d"),f._nextDay=void 0),f}function Jm(u){var f=u._i,g=u._f;return u._locale=u._locale||ns(u._l),f===null||g===void 0&&f===""?S({nullInput:!0}):(typeof f=="string"&&(u._i=f=u._locale.preparse(f)),O(f)?new P(Vu(f)):(m(f)?u._d=f:i(g)?M_(u):g?qu(u):D_(u),_(u)||(u._d=null),u))}function D_(u){var f=u._i;d(f)?u._d=new Date(s.now()):m(f)?u._d=new Date(f.valueOf()):typeof f=="string"?j_(u):i(f)?(u._a=p(f.slice(0),function(g){return parseInt(g,10)}),Gu(u)):o(f)?T_(u):h(f)?u._d=new Date(f):s.createFromInputFallback(u)}function Qm(u,f,g,y,j){var T={};return(f===!0||f===!1)&&(y=f,f=void 0),(g===!0||g===!1)&&(y=g,g=void 0),(o(u)&&l(u)||i(u)&&u.length===0)&&(u=void 0),T._isAMomentObject=!0,T._useUTC=T._isUTC=j,T._l=g,T._i=u,T._f=f,T._strict=y,P_(T)}function Ye(u,f,g,y){return Qm(u,f,g,y,!1)}var O_=M("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var u=Ye.apply(null,arguments);return this.isValid()&&u.isValid()?u<this?this:u:S()}),L_=M("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var u=Ye.apply(null,arguments);return this.isValid()&&u.isValid()?u>this?this:u:S()});function Zm(u,f){var g,y;if(f.length===1&&i(f[0])&&(f=f[0]),!f.length)return Ye();for(g=f[0],y=1;y<f.length;++y)(!f[y].isValid()||f[y][u](g))&&(g=f[y]);return g}function R_(){var u=[].slice.call(arguments,0);return Zm("isBefore",u)}function A_(){var u=[].slice.call(arguments,0);return Zm("isAfter",u)}var I_=function(){return Date.now?Date.now():+new Date},jo=["year","quarter","month","week","day","hour","minute","second","millisecond"];function $_(u){var f,g=!1,y,j=jo.length;for(f in u)if(a(u,f)&&!(Y.call(jo,f)!==-1&&(u[f]==null||!isNaN(u[f]))))return!1;for(y=0;y<j;++y)if(u[jo[y]]){if(g)return!1;parseFloat(u[jo[y]])!==je(u[jo[y]])&&(g=!0)}return!0}function F_(){return this._isValid}function z_(){return Cr(NaN)}function dl(u){var f=Zr(u),g=f.year||0,y=f.quarter||0,j=f.month||0,T=f.week||f.isoWeek||0,$=f.day||0,ie=f.hour||0,ye=f.minute||0,Pe=f.second||0,It=f.millisecond||0;this._isValid=$_(f),this._milliseconds=+It+Pe*1e3+ye*6e4+ie*1e3*60*60,this._days=+$+T*7,this._months=+j+y*3+g*12,this._data={},this._locale=ns(),this._bubble()}function hl(u){return u instanceof dl}function Ku(u){return u<0?Math.round(-1*u)*-1:Math.round(u)}function W_(u,f,g){var y=Math.min(u.length,f.length),j=Math.abs(u.length-f.length),T=0,$;for($=0;$<y;$++)je(u[$])!==je(f[$])&&T++;return T+j}function ep(u,f){U(u,0,0,function(){var g=this.utcOffset(),y="+";return g<0&&(g=-g,y="-"),y+oe(~~(g/60),2)+f+oe(~~g%60,2)})}ep("Z",":"),ep("ZZ",""),se("Z",At),se("ZZ",At),Fe(["Z","ZZ"],function(u,f,g){g._useUTC=!0,g._tzm=Xu(At,u)});var B_=/([\+\-]|\d\d)/gi;function Xu(u,f){var g=(f||"").match(u),y,j,T;return g===null?null:(y=g[g.length-1]||[],j=(y+"").match(B_)||["-",0,0],T=+(j[1]*60)+je(j[2]),T===0?0:j[0]==="+"?T:-T)}function Ju(u,f){var g,y;return f._isUTC?(g=f.clone(),y=(O(u)||m(u)?u.valueOf():Ye(u).valueOf())-g.valueOf(),g._d.setTime(g._d.valueOf()+y),s.updateOffset(g,!1),g):Ye(u).local()}function Qu(u){return-Math.round(u._d.getTimezoneOffset())}s.updateOffset=function(){};function U_(u,f,g){var y=this._offset||0,j;if(!this.isValid())return u!=null?this:NaN;if(u!=null){if(typeof u=="string"){if(u=Xu(At,u),u===null)return this}else Math.abs(u)<16&&!g&&(u=u*60);return!this._isUTC&&f&&(j=Qu(this)),this._offset=u,this._isUTC=!0,j!=null&&this.add(j,"m"),y!==u&&(!f||this._changeInProgress?np(this,Cr(u-y,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,s.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?y:Qu(this)}function H_(u,f){return u!=null?(typeof u!="string"&&(u=-u),this.utcOffset(u,f),this):-this.utcOffset()}function V_(u){return this.utcOffset(0,u)}function Y_(u){return this._isUTC&&(this.utcOffset(0,u),this._isUTC=!1,u&&this.subtract(Qu(this),"m")),this}function G_(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var u=Xu(tl,this._i);u!=null?this.utcOffset(u):this.utcOffset(0,!0)}return this}function q_(u){return this.isValid()?(u=u?Ye(u).utcOffset():0,(this.utcOffset()-u)%60===0):!1}function K_(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function X_(){if(!d(this._isDSTShifted))return this._isDSTShifted;var u={},f;return D(u,this),u=Jm(u),u._a?(f=u._isUTC?b(u._a):Ye(u._a),this._isDSTShifted=this.isValid()&&W_(u._a,f.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function J_(){return this.isValid()?!this._isUTC:!1}function Q_(){return this.isValid()?this._isUTC:!1}function tp(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Z_=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,e1=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Cr(u,f){var g=u,y=null,j,T,$;return hl(u)?g={ms:u._milliseconds,d:u._days,M:u._months}:h(u)||!isNaN(+u)?(g={},f?g[f]=+u:g.milliseconds=+u):(y=Z_.exec(u))?(j=y[1]==="-"?-1:1,g={y:0,d:je(y[tr])*j,h:je(y[st])*j,m:je(y[Ut])*j,s:je(y[hr])*j,ms:je(Ku(y[$r]*1e3))*j}):(y=e1.exec(u))?(j=y[1]==="-"?-1:1,g={y:En(y[2],j),M:En(y[3],j),w:En(y[4],j),d:En(y[5],j),h:En(y[6],j),m:En(y[7],j),s:En(y[8],j)}):g==null?g={}:typeof g=="object"&&("from"in g||"to"in g)&&($=t1(Ye(g.from),Ye(g.to)),g={},g.ms=$.milliseconds,g.M=$.months),T=new dl(g),hl(u)&&a(u,"_locale")&&(T._locale=u._locale),hl(u)&&a(u,"_isValid")&&(T._isValid=u._isValid),T}Cr.fn=dl.prototype,Cr.invalid=z_;function En(u,f){var g=u&&parseFloat(u.replace(",","."));return(isNaN(g)?0:g)*f}function rp(u,f){var g={};return g.months=f.month()-u.month()+(f.year()-u.year())*12,u.clone().add(g.months,"M").isAfter(f)&&--g.months,g.milliseconds=+f-+u.clone().add(g.months,"M"),g}function t1(u,f){var g;return u.isValid()&&f.isValid()?(f=Ju(f,u),u.isBefore(f)?g=rp(u,f):(g=rp(f,u),g.milliseconds=-g.milliseconds,g.months=-g.months),g):{milliseconds:0,months:0}}function sp(u,f){return function(g,y){var j,T;return y!==null&&!isNaN(+y)&&(H(f,"moment()."+f+"(period, number) is deprecated. Please use moment()."+f+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),T=g,g=y,y=T),j=Cr(g,y),np(this,j,u),this}}function np(u,f,g,y){var j=f._milliseconds,T=Ku(f._days),$=Ku(f._months);u.isValid()&&(y=y??!0,$&&Cn(u,Rs(u,"Month")+$*g),T&&R(u,"Date",Rs(u,"Date")+T*g),j&&u._d.setTime(u._d.valueOf()+j*g),y&&s.updateOffset(u,T||$))}var r1=sp(1,"add"),s1=sp(-1,"subtract");function ip(u){return typeof u=="string"||u instanceof String}function n1(u){return O(u)||m(u)||ip(u)||h(u)||o1(u)||i1(u)||u===null||u===void 0}function i1(u){var f=o(u)&&!l(u),g=!1,y=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],j,T,$=y.length;for(j=0;j<$;j+=1)T=y[j],g=g||a(u,T);return f&&g}function o1(u){var f=i(u),g=!1;return f&&(g=u.filter(function(y){return!h(y)&&ip(u)}).length===0),f&&g}function a1(u){var f=o(u)&&!l(u),g=!1,y=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],j,T;for(j=0;j<y.length;j+=1)T=y[j],g=g||a(u,T);return f&&g}function l1(u,f){var g=u.diff(f,"days",!0);return g<-6?"sameElse":g<-1?"lastWeek":g<0?"lastDay":g<1?"sameDay":g<2?"nextDay":g<7?"nextWeek":"sameElse"}function c1(u,f){arguments.length===1&&(arguments[0]?n1(arguments[0])?(u=arguments[0],f=void 0):a1(arguments[0])&&(f=arguments[0],u=void 0):(u=void 0,f=void 0));var g=u||Ye(),y=Ju(g,this).startOf("day"),j=s.calendarFormat(this,y)||"sameElse",T=f&&(ce(f[j])?f[j].call(this,g):f[j]);return this.format(T||this.localeData().calendar(j,this,Ye(g)))}function u1(){return new P(this)}function d1(u,f){var g=O(u)?u:Ye(u);return this.isValid()&&g.isValid()?(f=Rt(f)||"millisecond",f==="millisecond"?this.valueOf()>g.valueOf():g.valueOf()<this.clone().startOf(f).valueOf()):!1}function h1(u,f){var g=O(u)?u:Ye(u);return this.isValid()&&g.isValid()?(f=Rt(f)||"millisecond",f==="millisecond"?this.valueOf()<g.valueOf():this.clone().endOf(f).valueOf()<g.valueOf()):!1}function f1(u,f,g,y){var j=O(u)?u:Ye(u),T=O(f)?f:Ye(f);return this.isValid()&&j.isValid()&&T.isValid()?(y=y||"()",(y[0]==="("?this.isAfter(j,g):!this.isBefore(j,g))&&(y[1]===")"?this.isBefore(T,g):!this.isAfter(T,g))):!1}function m1(u,f){var g=O(u)?u:Ye(u),y;return this.isValid()&&g.isValid()?(f=Rt(f)||"millisecond",f==="millisecond"?this.valueOf()===g.valueOf():(y=g.valueOf(),this.clone().startOf(f).valueOf()<=y&&y<=this.clone().endOf(f).valueOf())):!1}function p1(u,f){return this.isSame(u,f)||this.isAfter(u,f)}function g1(u,f){return this.isSame(u,f)||this.isBefore(u,f)}function y1(u,f,g){var y,j,T;if(!this.isValid())return NaN;if(y=Ju(u,this),!y.isValid())return NaN;switch(j=(y.utcOffset()-this.utcOffset())*6e4,f=Rt(f),f){case"year":T=fl(this,y)/12;break;case"month":T=fl(this,y);break;case"quarter":T=fl(this,y)/3;break;case"second":T=(this-y)/1e3;break;case"minute":T=(this-y)/6e4;break;case"hour":T=(this-y)/36e5;break;case"day":T=(this-y-j)/864e5;break;case"week":T=(this-y-j)/6048e5;break;default:T=this-y}return g?T:Bt(T)}function fl(u,f){if(u.date()<f.date())return-fl(f,u);var g=(f.year()-u.year())*12+(f.month()-u.month()),y=u.clone().add(g,"months"),j,T;return f-y<0?(j=u.clone().add(g-1,"months"),T=(f-y)/(y-j)):(j=u.clone().add(g+1,"months"),T=(f-y)/(j-y)),-(g+T)||0}s.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",s.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function x1(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function v1(u){if(!this.isValid())return null;var f=u!==!0,g=f?this.clone().utc():this;return g.year()<0||g.year()>9999?L(g,f?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):ce(Date.prototype.toISOString)?f?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",L(g,"Z")):L(g,f?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function b1(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var u="moment",f="",g,y,j,T;return this.isLocal()||(u=this.utcOffset()===0?"moment.utc":"moment.parseZone",f="Z"),g="["+u+'("]',y=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",j="-MM-DD[T]HH:mm:ss.SSS",T=f+'[")]',this.format(g+y+j+T)}function w1(u){u||(u=this.isUtc()?s.defaultFormatUtc:s.defaultFormat);var f=L(this,u);return this.localeData().postformat(f)}function _1(u,f){return this.isValid()&&(O(u)&&u.isValid()||Ye(u).isValid())?Cr({to:this,from:u}).locale(this.locale()).humanize(!f):this.localeData().invalidDate()}function k1(u){return this.from(Ye(),u)}function S1(u,f){return this.isValid()&&(O(u)&&u.isValid()||Ye(u).isValid())?Cr({from:this,to:u}).locale(this.locale()).humanize(!f):this.localeData().invalidDate()}function j1(u){return this.to(Ye(),u)}function op(u){var f;return u===void 0?this._locale._abbr:(f=ns(u),f!=null&&(this._locale=f),this)}var ap=M("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(u){return u===void 0?this.localeData():this.locale(u)});function lp(){return this._locale}var ml=1e3,fi=60*ml,pl=60*fi,cp=(365*400+97)*24*pl;function mi(u,f){return(u%f+f)%f}function up(u,f,g){return u<100&&u>=0?new Date(u+400,f,g)-cp:new Date(u,f,g).valueOf()}function dp(u,f,g){return u<100&&u>=0?Date.UTC(u+400,f,g)-cp:Date.UTC(u,f,g)}function N1(u){var f,g;if(u=Rt(u),u===void 0||u==="millisecond"||!this.isValid())return this;switch(g=this._isUTC?dp:up,u){case"year":f=g(this.year(),0,1);break;case"quarter":f=g(this.year(),this.month()-this.month()%3,1);break;case"month":f=g(this.year(),this.month(),1);break;case"week":f=g(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":f=g(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":f=g(this.year(),this.month(),this.date());break;case"hour":f=this._d.valueOf(),f-=mi(f+(this._isUTC?0:this.utcOffset()*fi),pl);break;case"minute":f=this._d.valueOf(),f-=mi(f,fi);break;case"second":f=this._d.valueOf(),f-=mi(f,ml);break}return this._d.setTime(f),s.updateOffset(this,!0),this}function C1(u){var f,g;if(u=Rt(u),u===void 0||u==="millisecond"||!this.isValid())return this;switch(g=this._isUTC?dp:up,u){case"year":f=g(this.year()+1,0,1)-1;break;case"quarter":f=g(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":f=g(this.year(),this.month()+1,1)-1;break;case"week":f=g(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":f=g(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":f=g(this.year(),this.month(),this.date()+1)-1;break;case"hour":f=this._d.valueOf(),f+=pl-mi(f+(this._isUTC?0:this.utcOffset()*fi),pl)-1;break;case"minute":f=this._d.valueOf(),f+=fi-mi(f,fi)-1;break;case"second":f=this._d.valueOf(),f+=ml-mi(f,ml)-1;break}return this._d.setTime(f),s.updateOffset(this,!0),this}function E1(){return this._d.valueOf()-(this._offset||0)*6e4}function M1(){return Math.floor(this.valueOf()/1e3)}function T1(){return new Date(this.valueOf())}function P1(){var u=this;return[u.year(),u.month(),u.date(),u.hour(),u.minute(),u.second(),u.millisecond()]}function D1(){var u=this;return{years:u.year(),months:u.month(),date:u.date(),hours:u.hours(),minutes:u.minutes(),seconds:u.seconds(),milliseconds:u.milliseconds()}}function O1(){return this.isValid()?this.toISOString():null}function L1(){return _(this)}function R1(){return x({},w(this))}function A1(){return w(this).overflow}function I1(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}U("N",0,0,"eraAbbr"),U("NN",0,0,"eraAbbr"),U("NNN",0,0,"eraAbbr"),U("NNNN",0,0,"eraName"),U("NNNNN",0,0,"eraNarrow"),U("y",["y",1],"yo","eraYear"),U("y",["yy",2],0,"eraYear"),U("y",["yyy",3],0,"eraYear"),U("y",["yyyy",4],0,"eraYear"),se("N",Zu),se("NN",Zu),se("NNN",Zu),se("NNNN",q1),se("NNNNN",K1),Fe(["N","NN","NNN","NNNN","NNNNN"],function(u,f,g,y){var j=g._locale.erasParse(u,y,g._strict);j?w(g).era=j:w(g).invalidEra=u}),se("y",Ue),se("yy",Ue),se("yyy",Ue),se("yyyy",Ue),se("yo",X1),Fe(["y","yy","yyy","yyyy"],ft),Fe(["yo"],function(u,f,g,y){var j;g._locale._eraYearOrdinalRegex&&(j=u.match(g._locale._eraYearOrdinalRegex)),g._locale.eraYearOrdinalParse?f[ft]=g._locale.eraYearOrdinalParse(u,j):f[ft]=parseInt(u,10)});function $1(u,f){var g,y,j,T=this._eras||ns("en")._eras;for(g=0,y=T.length;g<y;++g){switch(typeof T[g].since){case"string":j=s(T[g].since).startOf("day"),T[g].since=j.valueOf();break}switch(typeof T[g].until){case"undefined":T[g].until=1/0;break;case"string":j=s(T[g].until).startOf("day").valueOf(),T[g].until=j.valueOf();break}}return T}function F1(u,f,g){var y,j,T=this.eras(),$,ie,ye;for(u=u.toUpperCase(),y=0,j=T.length;y<j;++y)if($=T[y].name.toUpperCase(),ie=T[y].abbr.toUpperCase(),ye=T[y].narrow.toUpperCase(),g)switch(f){case"N":case"NN":case"NNN":if(ie===u)return T[y];break;case"NNNN":if($===u)return T[y];break;case"NNNNN":if(ye===u)return T[y];break}else if([$,ie,ye].indexOf(u)>=0)return T[y]}function z1(u,f){var g=u.since<=u.until?1:-1;return f===void 0?s(u.since).year():s(u.since).year()+(f-u.offset)*g}function W1(){var u,f,g,y=this.localeData().eras();for(u=0,f=y.length;u<f;++u)if(g=this.clone().startOf("day").valueOf(),y[u].since<=g&&g<=y[u].until||y[u].until<=g&&g<=y[u].since)return y[u].name;return""}function B1(){var u,f,g,y=this.localeData().eras();for(u=0,f=y.length;u<f;++u)if(g=this.clone().startOf("day").valueOf(),y[u].since<=g&&g<=y[u].until||y[u].until<=g&&g<=y[u].since)return y[u].narrow;return""}function U1(){var u,f,g,y=this.localeData().eras();for(u=0,f=y.length;u<f;++u)if(g=this.clone().startOf("day").valueOf(),y[u].since<=g&&g<=y[u].until||y[u].until<=g&&g<=y[u].since)return y[u].abbr;return""}function H1(){var u,f,g,y,j=this.localeData().eras();for(u=0,f=j.length;u<f;++u)if(g=j[u].since<=j[u].until?1:-1,y=this.clone().startOf("day").valueOf(),j[u].since<=y&&y<=j[u].until||j[u].until<=y&&y<=j[u].since)return(this.year()-s(j[u].since).year())*g+j[u].offset;return this.year()}function V1(u){return a(this,"_erasNameRegex")||ed.call(this),u?this._erasNameRegex:this._erasRegex}function Y1(u){return a(this,"_erasAbbrRegex")||ed.call(this),u?this._erasAbbrRegex:this._erasRegex}function G1(u){return a(this,"_erasNarrowRegex")||ed.call(this),u?this._erasNarrowRegex:this._erasRegex}function Zu(u,f){return f.erasAbbrRegex(u)}function q1(u,f){return f.erasNameRegex(u)}function K1(u,f){return f.erasNarrowRegex(u)}function X1(u,f){return f._eraYearOrdinalRegex||Ue}function ed(){var u=[],f=[],g=[],y=[],j,T,$,ie,ye,Pe=this.eras();for(j=0,T=Pe.length;j<T;++j)$=jr(Pe[j].name),ie=jr(Pe[j].abbr),ye=jr(Pe[j].narrow),f.push($),u.push(ie),g.push(ye),y.push($),y.push(ie),y.push(ye);this._erasRegex=new RegExp("^("+y.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+f.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+u.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+g.join("|")+")","i")}U(0,["gg",2],0,function(){return this.weekYear()%100}),U(0,["GG",2],0,function(){return this.isoWeekYear()%100});function gl(u,f){U(0,[u,u.length],0,f)}gl("gggg","weekYear"),gl("ggggg","weekYear"),gl("GGGG","isoWeekYear"),gl("GGGGG","isoWeekYear"),se("G",Ds),se("g",Ds),se("GG",$e,ht),se("gg",$e,ht),se("GGGG",go,es),se("gggg",go,es),se("GGGGG",ts,kn),se("ggggg",ts,kn),jn(["gggg","ggggg","GGGG","GGGGG"],function(u,f,g,y){f[y.substr(0,2)]=je(u)}),jn(["gg","GG"],function(u,f,g,y){f[y]=s.parseTwoDigitYear(u)});function J1(u){return hp.call(this,u,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Q1(u){return hp.call(this,u,this.isoWeek(),this.isoWeekday(),1,4)}function Z1(){return ss(this.year(),1,4)}function ek(){return ss(this.isoWeekYear(),1,4)}function tk(){var u=this.localeData()._week;return ss(this.year(),u.dow,u.doy)}function rk(){var u=this.localeData()._week;return ss(this.weekYear(),u.dow,u.doy)}function hp(u,f,g,y,j){var T;return u==null?_o(this,y,j).year:(T=ss(u,y,j),f>T&&(f=T),sk.call(this,u,f,g,y,j))}function sk(u,f,g,y,j){var T=Um(u,f,g,y,j),$=wo(T.year,0,T.dayOfYear);return this.year($.getUTCFullYear()),this.month($.getUTCMonth()),this.date($.getUTCDate()),this}U("Q",0,"Qo","quarter"),se("Q",fo),Fe("Q",function(u,f){f[dr]=(je(u)-1)*3});function nk(u){return u==null?Math.ceil((this.month()+1)/3):this.month((u-1)*3+this.month()%3)}U("D",["DD",2],"Do","date"),se("D",$e,Sr),se("DD",$e,ht),se("Do",function(u,f){return u?f._dayOfMonthOrdinalParse||f._ordinalParse:f._dayOfMonthOrdinalParseLenient}),Fe(["D","DD"],tr),Fe("Do",function(u,f){f[tr]=je(u.match($e)[0])});var fp=rs("Date",!0);U("DDD",["DDDD",3],"DDDo","dayOfYear"),se("DDD",Ps),se("DDDD",mo),Fe(["DDD","DDDD"],function(u,f,g){g._dayOfYear=je(u)});function ik(u){var f=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return u==null?f:this.add(u-f,"d")}U("m",["mm",2],0,"minute"),se("m",$e,yo),se("mm",$e,ht),Fe(["m","mm"],Ut);var ok=rs("Minutes",!1);U("s",["ss",2],0,"second"),se("s",$e,yo),se("ss",$e,ht),Fe(["s","ss"],hr);var ak=rs("Seconds",!1);U("S",0,0,function(){return~~(this.millisecond()/100)}),U(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),U(0,["SSS",3],0,"millisecond"),U(0,["SSSS",4],0,function(){return this.millisecond()*10}),U(0,["SSSSS",5],0,function(){return this.millisecond()*100}),U(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),U(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),U(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),U(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),se("S",Ps,fo),se("SS",Ps,ht),se("SSS",Ps,mo);var Fs,mp;for(Fs="SSSS";Fs.length<=9;Fs+="S")se(Fs,Ue);function lk(u,f){f[$r]=je(("0."+u)*1e3)}for(Fs="S";Fs.length<=9;Fs+="S")Fe(Fs,lk);mp=rs("Milliseconds",!1),U("z",0,0,"zoneAbbr"),U("zz",0,0,"zoneName");function ck(){return this._isUTC?"UTC":""}function uk(){return this._isUTC?"Coordinated Universal Time":""}var q=P.prototype;q.add=r1,q.calendar=c1,q.clone=u1,q.diff=y1,q.endOf=C1,q.format=w1,q.from=_1,q.fromNow=k1,q.to=S1,q.toNow=j1,q.get=W,q.invalidAt=A1,q.isAfter=d1,q.isBefore=h1,q.isBetween=f1,q.isSame=m1,q.isSameOrAfter=p1,q.isSameOrBefore=g1,q.isValid=L1,q.lang=ap,q.locale=op,q.localeData=lp,q.max=L_,q.min=O_,q.parsingFlags=R1,q.set=V,q.startOf=N1,q.subtract=s1,q.toArray=P1,q.toObject=D1,q.toDate=T1,q.toISOString=v1,q.inspect=b1,typeof Symbol<"u"&&Symbol.for!=null&&(q[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),q.toJSON=O1,q.toString=x1,q.unix=M1,q.valueOf=E1,q.creationData=I1,q.eraName=W1,q.eraNarrow=B1,q.eraAbbr=U1,q.eraYear=H1,q.year=vo,q.isLeapYear=ol,q.weekYear=J1,q.isoWeekYear=Q1,q.quarter=q.quarters=nk,q.month=Le,q.daysInMonth=vt,q.week=q.weeks=$w,q.isoWeek=q.isoWeeks=Fw,q.weeksInYear=tk,q.weeksInWeekYear=rk,q.isoWeeksInYear=Z1,q.isoWeeksInISOWeekYear=ek,q.date=fp,q.day=q.days=Qw,q.weekday=Zw,q.isoWeekday=e_,q.dayOfYear=ik,q.hour=q.hours=a_,q.minute=q.minutes=ok,q.second=q.seconds=ak,q.millisecond=q.milliseconds=mp,q.utcOffset=U_,q.utc=V_,q.local=Y_,q.parseZone=G_,q.hasAlignedHourOffset=q_,q.isDST=K_,q.isLocal=J_,q.isUtcOffset=Q_,q.isUtc=tp,q.isUTC=tp,q.zoneAbbr=ck,q.zoneName=uk,q.dates=M("dates accessor is deprecated. Use date instead.",fp),q.months=M("months accessor is deprecated. Use month instead",Le),q.years=M("years accessor is deprecated. Use year instead",vo),q.zone=M("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",H_),q.isDSTShifted=M("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",X_);function dk(u){return Ye(u*1e3)}function hk(){return Ye.apply(null,arguments).parseZone()}function pp(u){return u}var Re=pe.prototype;Re.calendar=re,Re.longDateFormat=me,Re.invalidDate=Ie,Re.ordinal=xt,Re.preparse=pp,Re.postformat=pp,Re.relativeTime=er,Re.pastFuture=Qr,Re.set=we,Re.eras=$1,Re.erasParse=F1,Re.erasConvertYear=z1,Re.erasAbbrRegex=Y1,Re.erasNameRegex=V1,Re.erasNarrowRegex=G1,Re.months=at,Re.monthsShort=mt,Re.monthsParse=Is,Re.monthsRegex=al,Re.monthsShortRegex=Nr,Re.week=Lw,Re.firstDayOfYear=Iw,Re.firstDayOfWeek=Aw,Re.weekdays=Gw,Re.weekdaysMin=Kw,Re.weekdaysShort=qw,Re.weekdaysParse=Jw,Re.weekdaysRegex=t_,Re.weekdaysShortRegex=r_,Re.weekdaysMinRegex=s_,Re.isPM=i_,Re.meridiem=l_;function yl(u,f,g,y){var j=ns(),T=b().set(y,f);return j[g](T,u)}function gp(u,f,g){if(h(u)&&(f=u,u=void 0),u=u||"",f!=null)return yl(u,f,g,"month");var y,j=[];for(y=0;y<12;y++)j[y]=yl(u,y,g,"month");return j}function td(u,f,g,y){typeof u=="boolean"?(h(f)&&(g=f,f=void 0),f=f||""):(f=u,g=f,u=!1,h(f)&&(g=f,f=void 0),f=f||"");var j=ns(),T=u?j._week.dow:0,$,ie=[];if(g!=null)return yl(f,(g+T)%7,y,"day");for($=0;$<7;$++)ie[$]=yl(f,($+T)%7,y,"day");return ie}function fk(u,f){return gp(u,f,"months")}function mk(u,f){return gp(u,f,"monthsShort")}function pk(u,f,g){return td(u,f,g,"weekdays")}function gk(u,f,g){return td(u,f,g,"weekdaysShort")}function yk(u,f,g){return td(u,f,g,"weekdaysMin")}$s("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(u){var f=u%10,g=je(u%100/10)===1?"th":f===1?"st":f===2?"nd":f===3?"rd":"th";return u+g}}),s.lang=M("moment.lang is deprecated. Use moment.locale instead.",$s),s.langData=M("moment.langData is deprecated. Use moment.localeData instead.",ns);var is=Math.abs;function xk(){var u=this._data;return this._milliseconds=is(this._milliseconds),this._days=is(this._days),this._months=is(this._months),u.milliseconds=is(u.milliseconds),u.seconds=is(u.seconds),u.minutes=is(u.minutes),u.hours=is(u.hours),u.months=is(u.months),u.years=is(u.years),this}function yp(u,f,g,y){var j=Cr(f,g);return u._milliseconds+=y*j._milliseconds,u._days+=y*j._days,u._months+=y*j._months,u._bubble()}function vk(u,f){return yp(this,u,f,1)}function bk(u,f){return yp(this,u,f,-1)}function xp(u){return u<0?Math.floor(u):Math.ceil(u)}function wk(){var u=this._milliseconds,f=this._days,g=this._months,y=this._data,j,T,$,ie,ye;return u>=0&&f>=0&&g>=0||u<=0&&f<=0&&g<=0||(u+=xp(rd(g)+f)*864e5,f=0,g=0),y.milliseconds=u%1e3,j=Bt(u/1e3),y.seconds=j%60,T=Bt(j/60),y.minutes=T%60,$=Bt(T/60),y.hours=$%24,f+=Bt($/24),ye=Bt(vp(f)),g+=ye,f-=xp(rd(ye)),ie=Bt(g/12),g%=12,y.days=f,y.months=g,y.years=ie,this}function vp(u){return u*4800/146097}function rd(u){return u*146097/4800}function _k(u){if(!this.isValid())return NaN;var f,g,y=this._milliseconds;if(u=Rt(u),u==="month"||u==="quarter"||u==="year")switch(f=this._days+y/864e5,g=this._months+vp(f),u){case"month":return g;case"quarter":return g/3;case"year":return g/12}else switch(f=this._days+Math.round(rd(this._months)),u){case"week":return f/7+y/6048e5;case"day":return f+y/864e5;case"hour":return f*24+y/36e5;case"minute":return f*1440+y/6e4;case"second":return f*86400+y/1e3;case"millisecond":return Math.floor(f*864e5)+y;default:throw new Error("Unknown unit "+u)}}function os(u){return function(){return this.as(u)}}var bp=os("ms"),kk=os("s"),Sk=os("m"),jk=os("h"),Nk=os("d"),Ck=os("w"),Ek=os("M"),Mk=os("Q"),Tk=os("y"),Pk=bp;function Dk(){return Cr(this)}function Ok(u){return u=Rt(u),this.isValid()?this[u+"s"]():NaN}function Mn(u){return function(){return this.isValid()?this._data[u]:NaN}}var Lk=Mn("milliseconds"),Rk=Mn("seconds"),Ak=Mn("minutes"),Ik=Mn("hours"),$k=Mn("days"),Fk=Mn("months"),zk=Mn("years");function Wk(){return Bt(this.days()/7)}var as=Math.round,pi={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Bk(u,f,g,y,j){return j.relativeTime(f||1,!!g,u,y)}function Uk(u,f,g,y){var j=Cr(u).abs(),T=as(j.as("s")),$=as(j.as("m")),ie=as(j.as("h")),ye=as(j.as("d")),Pe=as(j.as("M")),It=as(j.as("w")),ls=as(j.as("y")),zs=T<=g.ss&&["s",T]||T<g.s&&["ss",T]||$<=1&&["m"]||$<g.m&&["mm",$]||ie<=1&&["h"]||ie<g.h&&["hh",ie]||ye<=1&&["d"]||ye<g.d&&["dd",ye];return g.w!=null&&(zs=zs||It<=1&&["w"]||It<g.w&&["ww",It]),zs=zs||Pe<=1&&["M"]||Pe<g.M&&["MM",Pe]||ls<=1&&["y"]||["yy",ls],zs[2]=f,zs[3]=+u>0,zs[4]=y,Bk.apply(null,zs)}function Hk(u){return u===void 0?as:typeof u=="function"?(as=u,!0):!1}function Vk(u,f){return pi[u]===void 0?!1:f===void 0?pi[u]:(pi[u]=f,u==="s"&&(pi.ss=f-1),!0)}function Yk(u,f){if(!this.isValid())return this.localeData().invalidDate();var g=!1,y=pi,j,T;return typeof u=="object"&&(f=u,u=!1),typeof u=="boolean"&&(g=u),typeof f=="object"&&(y=Object.assign({},pi,f),f.s!=null&&f.ss==null&&(y.ss=f.s-1)),j=this.localeData(),T=Uk(this,!g,y,j),g&&(T=j.pastFuture(+this,T)),j.postformat(T)}var sd=Math.abs;function gi(u){return(u>0)-(u<0)||+u}function xl(){if(!this.isValid())return this.localeData().invalidDate();var u=sd(this._milliseconds)/1e3,f=sd(this._days),g=sd(this._months),y,j,T,$,ie=this.asSeconds(),ye,Pe,It,ls;return ie?(y=Bt(u/60),j=Bt(y/60),u%=60,y%=60,T=Bt(g/12),g%=12,$=u?u.toFixed(3).replace(/\.?0+$/,""):"",ye=ie<0?"-":"",Pe=gi(this._months)!==gi(ie)?"-":"",It=gi(this._days)!==gi(ie)?"-":"",ls=gi(this._milliseconds)!==gi(ie)?"-":"",ye+"P"+(T?Pe+T+"Y":"")+(g?Pe+g+"M":"")+(f?It+f+"D":"")+(j||y||u?"T":"")+(j?ls+j+"H":"")+(y?ls+y+"M":"")+(u?ls+$+"S":"")):"P0D"}var De=dl.prototype;De.isValid=F_,De.abs=xk,De.add=vk,De.subtract=bk,De.as=_k,De.asMilliseconds=bp,De.asSeconds=kk,De.asMinutes=Sk,De.asHours=jk,De.asDays=Nk,De.asWeeks=Ck,De.asMonths=Ek,De.asQuarters=Mk,De.asYears=Tk,De.valueOf=Pk,De._bubble=wk,De.clone=Dk,De.get=Ok,De.milliseconds=Lk,De.seconds=Rk,De.minutes=Ak,De.hours=Ik,De.days=$k,De.weeks=Wk,De.months=Fk,De.years=zk,De.humanize=Yk,De.toISOString=xl,De.toString=xl,De.toJSON=xl,De.locale=op,De.localeData=lp,De.toIsoString=M("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",xl),De.lang=ap,U("X",0,0,"unix"),U("x",0,0,"valueOf"),se("x",Ds),se("X",rl),Fe("X",function(u,f,g){g._d=new Date(parseFloat(u)*1e3)}),Fe("x",function(u,f,g){g._d=new Date(je(u))});//! moment.js
return s.version="2.30.1",n(Ye),s.fn=q,s.min=R_,s.max=A_,s.now=I_,s.utc=b,s.unix=dk,s.months=fk,s.isDate=m,s.locale=$s,s.invalid=S,s.duration=Cr,s.isMoment=O,s.weekdays=pk,s.parseZone=hk,s.localeData=ns,s.isDuration=hl,s.monthsShort=mk,s.weekdaysMin=yk,s.defineLocale=Hu,s.updateLocale=h_,s.locales=f_,s.weekdaysShort=gk,s.normalizeUnits=Rt,s.relativeTimeRounding=Hk,s.relativeTimeThreshold=Vk,s.calendarFormat=l1,s.prototype=q,s.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},s})}(Id)),Id.exports}(function(t,e){(function(r,s){s(typeof Eb=="function"?FM():r.moment)})(Zt,function(r){//! moment.js locale configuration
var s="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],o=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,a=r.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(l,d){return l?/-MMM-/.test(d)?n[l.month()]:s[l.month()]:s},monthsRegex:o,monthsShortRegex:o,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(this.hours()!==1?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(this.hours()!==1?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(this.hours()!==1?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(this.hours()!==1?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(this.hours()!==1?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4},invalidDate:"Fecha inválida"});return a})})();/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Qa(t){return t+.5|0}const tn=(t,e,r)=>Math.max(Math.min(t,r),e);function Vo(t){return tn(Qa(t*2.55),0,255)}function fn(t){return tn(Qa(t*255),0,255)}function gs(t){return tn(Qa(t/2.55)/100,0,1)}function e0(t){return tn(Qa(t*100),0,100)}const fr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},nf=[..."0123456789ABCDEF"],zM=t=>nf[t&15],WM=t=>nf[(t&240)>>4]+nf[t&15],Bl=t=>(t&240)>>4===(t&15),BM=t=>Bl(t.r)&&Bl(t.g)&&Bl(t.b)&&Bl(t.a);function UM(t){var e=t.length,r;return t[0]==="#"&&(e===4||e===5?r={r:255&fr[t[1]]*17,g:255&fr[t[2]]*17,b:255&fr[t[3]]*17,a:e===5?fr[t[4]]*17:255}:(e===7||e===9)&&(r={r:fr[t[1]]<<4|fr[t[2]],g:fr[t[3]]<<4|fr[t[4]],b:fr[t[5]]<<4|fr[t[6]],a:e===9?fr[t[7]]<<4|fr[t[8]]:255})),r}const HM=(t,e)=>t<255?e(t):"";function VM(t){var e=BM(t)?zM:WM;return t?"#"+e(t.r)+e(t.g)+e(t.b)+HM(t.a,e):void 0}const YM=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Mb(t,e,r){const s=e*Math.min(r,1-r),n=(i,o=(i+t/30)%12)=>r-s*Math.max(Math.min(o-3,9-o,1),-1);return[n(0),n(8),n(4)]}function GM(t,e,r){const s=(n,i=(n+t/60)%6)=>r-r*e*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function qM(t,e,r){const s=Mb(t,1,.5);let n;for(e+r>1&&(n=1/(e+r),e*=n,r*=n),n=0;n<3;n++)s[n]*=1-e-r,s[n]+=e;return s}function KM(t,e,r,s,n){return t===n?(e-r)/s+(e<r?6:0):e===n?(r-t)/s+2:(t-e)/s+4}function bm(t){const r=t.r/255,s=t.g/255,n=t.b/255,i=Math.max(r,s,n),o=Math.min(r,s,n),a=(i+o)/2;let l,d,h;return i!==o&&(h=i-o,d=a>.5?h/(2-i-o):h/(i+o),l=KM(r,s,n,h,i),l=l*60+.5),[l|0,d||0,a]}function wm(t,e,r,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,r,s)).map(fn)}function _m(t,e,r){return wm(Mb,t,e,r)}function XM(t,e,r){return wm(qM,t,e,r)}function JM(t,e,r){return wm(GM,t,e,r)}function Tb(t){return(t%360+360)%360}function QM(t){const e=YM.exec(t);let r=255,s;if(!e)return;e[5]!==s&&(r=e[6]?Vo(+e[5]):fn(+e[5]));const n=Tb(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=XM(n,i,o):e[1]==="hsv"?s=JM(n,i,o):s=_m(n,i,o),{r:s[0],g:s[1],b:s[2],a:r}}function ZM(t,e){var r=bm(t);r[0]=Tb(r[0]+e),r=_m(r),t.r=r[0],t.g=r[1],t.b=r[2]}function eT(t){if(!t)return;const e=bm(t),r=e[0],s=e0(e[1]),n=e0(e[2]);return t.a<255?`hsla(${r}, ${s}%, ${n}%, ${gs(t.a)})`:`hsl(${r}, ${s}%, ${n}%)`}const t0={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},r0={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function tT(){const t={},e=Object.keys(r0),r=Object.keys(t0);let s,n,i,o,a;for(s=0;s<e.length;s++){for(o=a=e[s],n=0;n<r.length;n++)i=r[n],a=a.replace(i,t0[i]);i=parseInt(r0[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let Ul;function rT(t){Ul||(Ul=tT(),Ul.transparent=[0,0,0,0]);const e=Ul[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const sT=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function nT(t){const e=sT.exec(t);let r=255,s,n,i;if(e){if(e[7]!==s){const o=+e[7];r=e[8]?Vo(o):tn(o*255,0,255)}return s=+e[1],n=+e[3],i=+e[5],s=255&(e[2]?Vo(s):tn(s,0,255)),n=255&(e[4]?Vo(n):tn(n,0,255)),i=255&(e[6]?Vo(i):tn(i,0,255)),{r:s,g:n,b:i,a:r}}}function iT(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${gs(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const $d=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,wi=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function oT(t,e,r){const s=wi(gs(t.r)),n=wi(gs(t.g)),i=wi(gs(t.b));return{r:fn($d(s+r*(wi(gs(e.r))-s))),g:fn($d(n+r*(wi(gs(e.g))-n))),b:fn($d(i+r*(wi(gs(e.b))-i))),a:t.a+r*(e.a-t.a)}}function Hl(t,e,r){if(t){let s=bm(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*r,e===0?360:1)),s=_m(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function Pb(t,e){return t&&Object.assign(e||{},t)}function s0(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=fn(t[3]))):(e=Pb(t,{r:0,g:0,b:0,a:1}),e.a=fn(e.a)),e}function aT(t){return t.charAt(0)==="r"?nT(t):QM(t)}class Oa{constructor(e){if(e instanceof Oa)return e;const r=typeof e;let s;r==="object"?s=s0(e):r==="string"&&(s=UM(e)||rT(e)||aT(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=Pb(this._rgb);return e&&(e.a=gs(e.a)),e}set rgb(e){this._rgb=s0(e)}rgbString(){return this._valid?iT(this._rgb):void 0}hexString(){return this._valid?VM(this._rgb):void 0}hslString(){return this._valid?eT(this._rgb):void 0}mix(e,r){if(e){const s=this.rgb,n=e.rgb;let i;const o=r===i?.5:r,a=2*o-1,l=s.a-n.a,d=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-d,s.r=255&d*s.r+i*n.r+.5,s.g=255&d*s.g+i*n.g+.5,s.b=255&d*s.b+i*n.b+.5,s.a=o*s.a+(1-o)*n.a,this.rgb=s}return this}interpolate(e,r){return e&&(this._rgb=oT(this._rgb,e._rgb,r)),this}clone(){return new Oa(this.rgb)}alpha(e){return this._rgb.a=fn(e),this}clearer(e){const r=this._rgb;return r.a*=1-e,this}greyscale(){const e=this._rgb,r=Qa(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=r,this}opaquer(e){const r=this._rgb;return r.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Hl(this._rgb,2,e),this}darken(e){return Hl(this._rgb,2,-e),this}saturate(e){return Hl(this._rgb,1,e),this}desaturate(e){return Hl(this._rgb,1,-e),this}rotate(e){return ZM(this._rgb,e),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function us(){}const lT=(()=>{let t=0;return()=>t++})();function ze(t){return t==null}function dt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Te(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Lt(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function zr(t,e){return Lt(t)?t:e}function Ne(t,e){return typeof t>"u"?e:t}const cT=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,Db=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function qe(t,e,r){if(t&&typeof t.call=="function")return t.apply(r,e)}function We(t,e,r,s){let n,i,o;if(dt(t))for(i=t.length,n=0;n<i;n++)e.call(r,t[n],n);else if(Te(t))for(o=Object.keys(t),i=o.length,n=0;n<i;n++)e.call(r,t[o[n]],o[n])}function Kc(t,e){let r,s,n,i;if(!t||!e||t.length!==e.length)return!1;for(r=0,s=t.length;r<s;++r)if(n=t[r],i=e[r],n.datasetIndex!==i.datasetIndex||n.index!==i.index)return!1;return!0}function Xc(t){if(dt(t))return t.map(Xc);if(Te(t)){const e=Object.create(null),r=Object.keys(t),s=r.length;let n=0;for(;n<s;++n)e[r[n]]=Xc(t[r[n]]);return e}return t}function Ob(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function uT(t,e,r,s){if(!Ob(t))return;const n=e[t],i=r[t];Te(n)&&Te(i)?La(n,i,s):e[t]=Xc(i)}function La(t,e,r){const s=dt(e)?e:[e],n=s.length;if(!Te(t))return t;r=r||{};const i=r.merger||uT;let o;for(let a=0;a<n;++a){if(o=s[a],!Te(o))continue;const l=Object.keys(o);for(let d=0,h=l.length;d<h;++d)i(l[d],t,o,r)}return t}function aa(t,e){return La(t,e,{merger:dT})}function dT(t,e,r){if(!Ob(t))return;const s=e[t],n=r[t];Te(s)&&Te(n)?aa(s,n):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Xc(n))}const n0={"":t=>t,x:t=>t.x,y:t=>t.y};function hT(t){const e=t.split("."),r=[];let s="";for(const n of e)s+=n,s.endsWith("\\")?s=s.slice(0,-1)+".":(r.push(s),s="");return r}function fT(t){const e=hT(t);return r=>{for(const s of e){if(s==="")break;r=r&&r[s]}return r}}function ti(t,e){return(n0[e]||(n0[e]=fT(e)))(t)}function km(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Ra=t=>typeof t<"u",gn=t=>typeof t=="function",i0=(t,e)=>{if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0};function mT(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const ot=Math.PI,Ze=2*ot,pT=Ze+ot,Jc=Number.POSITIVE_INFINITY,gT=ot/180,yt=ot/2,Pn=ot/4,o0=ot*2/3,Lb=Math.log10,Kr=Math.sign;function la(t,e,r){return Math.abs(t-e)<r}function a0(t){const e=Math.round(t);t=la(t,e,t/1e3)?e:t;const r=Math.pow(10,Math.floor(Lb(t))),s=t/r;return(s<=1?1:s<=2?2:s<=5?5:10)*r}function yT(t){const e=[],r=Math.sqrt(t);let s;for(s=1;s<r;s++)t%s===0&&(e.push(s),e.push(t/s));return r===(r|0)&&e.push(r),e.sort((n,i)=>n-i).pop(),e}function xT(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Aa(t){return!xT(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function vT(t,e){const r=Math.round(t);return r-e<=t&&r+e>=t}function bT(t,e,r){let s,n,i;for(s=0,n=t.length;s<n;s++)i=t[s][r],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function vs(t){return t*(ot/180)}function wT(t){return t*(180/ot)}function l0(t){if(!Lt(t))return;let e=1,r=0;for(;Math.round(t*e)/e!==t;)e*=10,r++;return r}function Rb(t,e){const r=e.x-t.x,s=e.y-t.y,n=Math.sqrt(r*r+s*s);let i=Math.atan2(s,r);return i<-.5*ot&&(i+=Ze),{angle:i,distance:n}}function of(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function _T(t,e){return(t-e+pT)%Ze-ot}function Vr(t){return(t%Ze+Ze)%Ze}function Ia(t,e,r,s){const n=Vr(t),i=Vr(e),o=Vr(r),a=Vr(i-n),l=Vr(o-n),d=Vr(n-i),h=Vr(n-o);return n===i||n===o||s&&i===o||a>l&&d<h}function Pt(t,e,r){return Math.max(e,Math.min(r,t))}function kT(t){return Pt(t,-32768,32767)}function bs(t,e,r,s=1e-6){return t>=Math.min(e,r)-s&&t<=Math.max(e,r)+s}function Sm(t,e,r){r=r||(o=>t[o]<e);let s=t.length-1,n=0,i;for(;s-n>1;)i=n+s>>1,r(i)?n=i:s=i;return{lo:n,hi:s}}const Hn=(t,e,r,s)=>Sm(t,r,s?n=>{const i=t[n][e];return i<r||i===r&&t[n+1][e]===r}:n=>t[n][e]<r),ST=(t,e,r)=>Sm(t,r,s=>t[s][e]>=r);function jT(t,e,r){let s=0,n=t.length;for(;s<n&&t[s]<e;)s++;for(;n>s&&t[n-1]>r;)n--;return s>0||n<t.length?t.slice(s,n):t}const Ab=["push","pop","shift","splice","unshift"];function NT(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Ab.forEach(r=>{const s="_onData"+km(r),n=t[r];Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value(...i){const o=n.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...i)}),o}})})}function c0(t,e){const r=t._chartjs;if(!r)return;const s=r.listeners,n=s.indexOf(e);n!==-1&&s.splice(n,1),!(s.length>0)&&(Ab.forEach(i=>{delete t[i]}),delete t._chartjs)}function Ib(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const $b=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function Fb(t,e){let r=[],s=!1;return function(...n){r=n,s||(s=!0,$b.call(window,()=>{s=!1,t.apply(e,r)}))}}function CT(t,e){let r;return function(...s){return e?(clearTimeout(r),r=setTimeout(t,e,s)):t.apply(this,s),e}}const jm=t=>t==="start"?"left":t==="end"?"right":"center",Mt=(t,e,r)=>t==="start"?e:t==="end"?r:(e+r)/2,ET=(t,e,r,s)=>t===(s?"left":"right")?r:t==="center"?(e+r)/2:e;function MT(t,e,r){const s=e.length;let n=0,i=s;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=o.axis,{min:m,max:p,minDefined:x,maxDefined:b}=o.getUserBounds();if(x){if(n=Math.min(Hn(l,h,m).lo,r?s:Hn(e,h,o.getPixelForValue(m)).lo),d){const k=l.slice(0,n+1).reverse().findIndex(w=>!ze(w[a.axis]));n-=Math.max(0,k)}n=Pt(n,0,s-1)}if(b){let k=Math.max(Hn(l,o.axis,p,!0).hi+1,r?0:Hn(e,h,o.getPixelForValue(p),!0).hi+1);if(d){const w=l.slice(k-1).findIndex(v=>!ze(v[a.axis]));k+=Math.max(0,w)}i=Pt(k,n,s)-n}else i=s-n}return{start:n,count:i}}function TT(t){const{xScale:e,yScale:r,_scaleRanges:s}=t,n={xmin:e.min,xmax:e.max,ymin:r.min,ymax:r.max};if(!s)return t._scaleRanges=n,!0;const i=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==r.min||s.ymax!==r.max;return Object.assign(s,n),i}const Vl=t=>t===0||t===1,u0=(t,e,r)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Ze/r)),d0=(t,e,r)=>Math.pow(2,-10*t)*Math.sin((t-e)*Ze/r)+1,ca={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*yt)+1,easeOutSine:t=>Math.sin(t*yt),easeInOutSine:t=>-.5*(Math.cos(ot*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Vl(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Vl(t)?t:u0(t,.075,.3),easeOutElastic:t=>Vl(t)?t:d0(t,.075,.3),easeInOutElastic(t){return Vl(t)?t:t<.5?.5*u0(t*2,.1125,.45):.5+.5*d0(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-ca.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?ca.easeInBounce(t*2)*.5:ca.easeOutBounce(t*2-1)*.5+.5};function Nm(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function h0(t){return Nm(t)?t:new Oa(t)}function Fd(t){return Nm(t)?t:new Oa(t).saturate(.5).darken(.1).hexString()}const PT=["x","y","borderWidth","radius","tension"],DT=["color","borderColor","backgroundColor"];function OT(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:DT},numbers:{type:"number",properties:PT}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function LT(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const f0=new Map;function RT(t,e){e=e||{};const r=t+JSON.stringify(e);let s=f0.get(r);return s||(s=new Intl.NumberFormat(t,e),f0.set(r,s)),s}function Cm(t,e,r){return RT(e,r).format(t)}const AT={values(t){return dt(t)?t:""+t},numeric(t,e,r){if(t===0)return"0";const s=this.chart.options.locale;let n,i=t;if(r.length>1){const d=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(d<1e-4||d>1e15)&&(n="scientific"),i=IT(t,r)}const o=Lb(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:n,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Cm(t,s,l)}};function IT(t,e){let r=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(r)>=1&&t!==Math.floor(t)&&(r=t-Math.floor(t)),r}var zb={formatters:AT};function $T(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,r)=>r.lineWidth,tickColor:(e,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:zb.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ri=Object.create(null),af=Object.create(null);function ua(t,e){if(!e)return t;const r=e.split(".");for(let s=0,n=r.length;s<n;++s){const i=r[s];t=t[i]||(t[i]=Object.create(null))}return t}function zd(t,e,r){return typeof e=="string"?La(ua(t,e),r):La(ua(t,""),e)}class FT{constructor(e,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,n)=>Fd(n.backgroundColor),this.hoverBorderColor=(s,n)=>Fd(n.borderColor),this.hoverColor=(s,n)=>Fd(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(r)}set(e,r){return zd(this,e,r)}get(e){return ua(this,e)}describe(e,r){return zd(af,e,r)}override(e,r){return zd(ri,e,r)}route(e,r,s,n){const i=ua(this,e),o=ua(this,s),a="_"+r;Object.defineProperties(i,{[a]:{value:i[r],writable:!0},[r]:{enumerable:!0,get(){const l=this[a],d=o[n];return Te(l)?Object.assign({},d,l):Ne(l,d)},set(l){this[a]=l}}})}apply(e){e.forEach(r=>r(this))}}var ct=new FT({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[OT,LT,$T]);function zT(t){return!t||ze(t.size)||ze(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function m0(t,e,r,s,n){let i=e[n];return i||(i=e[n]=t.measureText(n).width,r.push(n)),i>s&&(s=i),s}function Dn(t,e,r){const s=t.currentDevicePixelRatio,n=r!==0?Math.max(r/2,.5):0;return Math.round((e-n)*s)/s+n}function p0(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function lf(t,e,r,s){Wb(t,e,r,s,null)}function Wb(t,e,r,s,n){let i,o,a,l,d,h,m,p;const x=e.pointStyle,b=e.rotation,k=e.radius;let w=(b||0)*gT;if(x&&typeof x=="object"&&(i=x.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(r,s),t.rotate(w),t.drawImage(x,-x.width/2,-x.height/2,x.width,x.height),t.restore();return}if(!(isNaN(k)||k<=0)){switch(t.beginPath(),x){default:n?t.ellipse(r,s,n/2,k,0,0,Ze):t.arc(r,s,k,0,Ze),t.closePath();break;case"triangle":h=n?n/2:k,t.moveTo(r+Math.sin(w)*h,s-Math.cos(w)*k),w+=o0,t.lineTo(r+Math.sin(w)*h,s-Math.cos(w)*k),w+=o0,t.lineTo(r+Math.sin(w)*h,s-Math.cos(w)*k),t.closePath();break;case"rectRounded":d=k*.516,l=k-d,o=Math.cos(w+Pn)*l,m=Math.cos(w+Pn)*(n?n/2-d:l),a=Math.sin(w+Pn)*l,p=Math.sin(w+Pn)*(n?n/2-d:l),t.arc(r-m,s-a,d,w-ot,w-yt),t.arc(r+p,s-o,d,w-yt,w),t.arc(r+m,s+a,d,w,w+yt),t.arc(r-p,s+o,d,w+yt,w+ot),t.closePath();break;case"rect":if(!b){l=Math.SQRT1_2*k,h=n?n/2:l,t.rect(r-h,s-l,2*h,2*l);break}w+=Pn;case"rectRot":m=Math.cos(w)*(n?n/2:k),o=Math.cos(w)*k,a=Math.sin(w)*k,p=Math.sin(w)*(n?n/2:k),t.moveTo(r-m,s-a),t.lineTo(r+p,s-o),t.lineTo(r+m,s+a),t.lineTo(r-p,s+o),t.closePath();break;case"crossRot":w+=Pn;case"cross":m=Math.cos(w)*(n?n/2:k),o=Math.cos(w)*k,a=Math.sin(w)*k,p=Math.sin(w)*(n?n/2:k),t.moveTo(r-m,s-a),t.lineTo(r+m,s+a),t.moveTo(r+p,s-o),t.lineTo(r-p,s+o);break;case"star":m=Math.cos(w)*(n?n/2:k),o=Math.cos(w)*k,a=Math.sin(w)*k,p=Math.sin(w)*(n?n/2:k),t.moveTo(r-m,s-a),t.lineTo(r+m,s+a),t.moveTo(r+p,s-o),t.lineTo(r-p,s+o),w+=Pn,m=Math.cos(w)*(n?n/2:k),o=Math.cos(w)*k,a=Math.sin(w)*k,p=Math.sin(w)*(n?n/2:k),t.moveTo(r-m,s-a),t.lineTo(r+m,s+a),t.moveTo(r+p,s-o),t.lineTo(r-p,s+o);break;case"line":o=n?n/2:Math.cos(w)*k,a=Math.sin(w)*k,t.moveTo(r-o,s-a),t.lineTo(r+o,s+a);break;case"dash":t.moveTo(r,s),t.lineTo(r+Math.cos(w)*(n?n/2:k),s+Math.sin(w)*k);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function $a(t,e,r){return r=r||.5,!e||t&&t.x>e.left-r&&t.x<e.right+r&&t.y>e.top-r&&t.y<e.bottom+r}function Du(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Ou(t){t.restore()}function WT(t,e,r,s,n){if(!e)return t.lineTo(r.x,r.y);if(n==="middle"){const i=(e.x+r.x)/2;t.lineTo(i,e.y),t.lineTo(i,r.y)}else n==="after"!=!!s?t.lineTo(e.x,r.y):t.lineTo(r.x,e.y);t.lineTo(r.x,r.y)}function BT(t,e,r,s){if(!e)return t.lineTo(r.x,r.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?r.cp2x:r.cp1x,s?r.cp2y:r.cp1y,r.x,r.y)}function UT(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ze(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function HT(t,e,r,s,n){if(n.strikethrough||n.underline){const i=t.measureText(s),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=r-i.actualBoundingBoxAscent,d=r+i.actualBoundingBoxDescent,h=n.strikethrough?(l+d)/2:d;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=n.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function VT(t,e){const r=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=r}function Fa(t,e,r,s,n,i={}){const o=dt(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,d;for(t.save(),t.font=n.string,UT(t,i),l=0;l<o.length;++l)d=o[l],i.backdrop&&VT(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),ze(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(d,r,s,i.maxWidth)),t.fillText(d,r,s,i.maxWidth),HT(t,r,s,d,i),s+=Number(n.lineHeight);t.restore()}function Qc(t,e){const{x:r,y:s,w:n,h:i,radius:o}=e;t.arc(r+o.topLeft,s+o.topLeft,o.topLeft,1.5*ot,ot,!0),t.lineTo(r,s+i-o.bottomLeft),t.arc(r+o.bottomLeft,s+i-o.bottomLeft,o.bottomLeft,ot,yt,!0),t.lineTo(r+n-o.bottomRight,s+i),t.arc(r+n-o.bottomRight,s+i-o.bottomRight,o.bottomRight,yt,0,!0),t.lineTo(r+n,s+o.topRight),t.arc(r+n-o.topRight,s+o.topRight,o.topRight,0,-yt,!0),t.lineTo(r+o.topLeft,s)}const YT=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,GT=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function qT(t,e){const r=(""+t).match(YT);if(!r||r[1]==="normal")return e*1.2;switch(t=+r[2],r[3]){case"px":return t;case"%":t/=100;break}return e*t}const KT=t=>+t||0;function Em(t,e){const r={},s=Te(e),n=s?Object.keys(e):e,i=Te(t)?s?o=>Ne(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of n)r[o]=KT(i(o));return r}function Bb(t){return Em(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Hi(t){return Em(t,["topLeft","topRight","bottomLeft","bottomRight"])}function _r(t){const e=Bb(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Dt(t,e){t=t||{},e=e||ct.font;let r=Ne(t.size,e.size);typeof r=="string"&&(r=parseInt(r,10));let s=Ne(t.style,e.style);s&&!(""+s).match(GT)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const n={family:Ne(t.family,e.family),lineHeight:qT(Ne(t.lineHeight,e.lineHeight),r),size:r,style:s,weight:Ne(t.weight,e.weight),string:""};return n.string=zT(n),n}function Yl(t,e,r,s){let n,i,o;for(n=0,i=t.length;n<i;++n)if(o=t[n],o!==void 0&&o!==void 0)return o}function XT(t,e,r){const{min:s,max:n}=t,i=Db(e,(n-s)/2),o=(a,l)=>r&&a===0?0:a+l;return{min:o(s,-Math.abs(i)),max:o(n,i)}}function ci(t,e){return Object.assign(Object.create(t),e)}function Mm(t,e=[""],r,s,n=()=>t[0]){const i=r||t;typeof s>"u"&&(s=Yb("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:s,_getTarget:n,override:a=>Mm([a,...t],e,i,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return Hb(a,l,()=>n4(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return y0(a).includes(l)},ownKeys(a){return y0(a)},set(a,l,d){const h=a._storage||(a._storage=n());return a[l]=h[l]=d,delete a._keys,!0}})}function ro(t,e,r,s){const n={_cacheable:!1,_proxy:t,_context:e,_subProxy:r,_stack:new Set,_descriptors:Ub(t,s),setContext:i=>ro(t,i,r,s),override:i=>ro(t.override(i),e,r,s)};return new Proxy(n,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return Hb(i,o,()=>QT(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function Ub(t,e={scriptable:!0,indexable:!0}){const{_scriptable:r=e.scriptable,_indexable:s=e.indexable,_allKeys:n=e.allKeys}=t;return{allKeys:n,scriptable:r,indexable:s,isScriptable:gn(r)?r:()=>r,isIndexable:gn(s)?s:()=>s}}const JT=(t,e)=>t?t+km(e):e,Tm=(t,e)=>Te(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Hb(t,e,r){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=r();return t[e]=s,s}function QT(t,e,r){const{_proxy:s,_context:n,_subProxy:i,_descriptors:o}=t;let a=s[e];return gn(a)&&o.isScriptable(e)&&(a=ZT(e,a,t,r)),dt(a)&&a.length&&(a=e4(e,a,t,o.isIndexable)),Tm(e,a)&&(a=ro(a,n,i&&i[e],o)),a}function ZT(t,e,r,s){const{_proxy:n,_context:i,_subProxy:o,_stack:a}=r;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||s);return a.delete(t),Tm(t,l)&&(l=Pm(n._scopes,n,t,l)),l}function e4(t,e,r,s){const{_proxy:n,_context:i,_subProxy:o,_descriptors:a}=r;if(typeof i.index<"u"&&s(t))return e[i.index%e.length];if(Te(e[0])){const l=e,d=n._scopes.filter(h=>h!==l);e=[];for(const h of l){const m=Pm(d,n,t,h);e.push(ro(m,i,o&&o[t],a))}}return e}function Vb(t,e,r){return gn(t)?t(e,r):t}const t4=(t,e)=>t===!0?e:typeof t=="string"?ti(e,t):void 0;function r4(t,e,r,s,n){for(const i of e){const o=t4(r,i);if(o){t.add(o);const a=Vb(o._fallback,r,n);if(typeof a<"u"&&a!==r&&a!==s)return a}else if(o===!1&&typeof s<"u"&&r!==s)return null}return!1}function Pm(t,e,r,s){const n=e._rootScopes,i=Vb(e._fallback,r,s),o=[...t,...n],a=new Set;a.add(s);let l=g0(a,o,r,i||r,s);return l===null||typeof i<"u"&&i!==r&&(l=g0(a,o,i,l,s),l===null)?!1:Mm(Array.from(a),[""],n,i,()=>s4(e,r,s))}function g0(t,e,r,s,n){for(;r;)r=r4(t,e,r,s,n);return r}function s4(t,e,r){const s=t._getTarget();e in s||(s[e]={});const n=s[e];return dt(n)&&Te(r)?r:n||{}}function n4(t,e,r,s){let n;for(const i of e)if(n=Yb(JT(i,t),r),typeof n<"u")return Tm(t,n)?Pm(r,s,t,n):n}function Yb(t,e){for(const r of e){if(!r)continue;const s=r[t];if(typeof s<"u")return s}}function y0(t){let e=t._keys;return e||(e=t._keys=i4(t._scopes)),e}function i4(t){const e=new Set;for(const r of t)for(const s of Object.keys(r).filter(n=>!n.startsWith("_")))e.add(s);return Array.from(e)}const o4=Number.EPSILON||1e-14,so=(t,e)=>e<t.length&&!t[e].skip&&t[e],Gb=t=>t==="x"?"y":"x";function a4(t,e,r,s){const n=t.skip?e:t,i=e,o=r.skip?e:r,a=of(i,n),l=of(o,i);let d=a/(a+l),h=l/(a+l);d=isNaN(d)?0:d,h=isNaN(h)?0:h;const m=s*d,p=s*h;return{previous:{x:i.x-m*(o.x-n.x),y:i.y-m*(o.y-n.y)},next:{x:i.x+p*(o.x-n.x),y:i.y+p*(o.y-n.y)}}}function l4(t,e,r){const s=t.length;let n,i,o,a,l,d=so(t,0);for(let h=0;h<s-1;++h)if(l=d,d=so(t,h+1),!(!l||!d)){if(la(e[h],0,o4)){r[h]=r[h+1]=0;continue}n=r[h]/e[h],i=r[h+1]/e[h],a=Math.pow(n,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),r[h]=n*o*e[h],r[h+1]=i*o*e[h])}}function c4(t,e,r="x"){const s=Gb(r),n=t.length;let i,o,a,l=so(t,0);for(let d=0;d<n;++d){if(o=a,a=l,l=so(t,d+1),!a)continue;const h=a[r],m=a[s];o&&(i=(h-o[r])/3,a[`cp1${r}`]=h-i,a[`cp1${s}`]=m-i*e[d]),l&&(i=(l[r]-h)/3,a[`cp2${r}`]=h+i,a[`cp2${s}`]=m+i*e[d])}}function u4(t,e="x"){const r=Gb(e),s=t.length,n=Array(s).fill(0),i=Array(s);let o,a,l,d=so(t,0);for(o=0;o<s;++o)if(a=l,l=d,d=so(t,o+1),!!l){if(d){const h=d[e]-l[e];n[o]=h!==0?(d[r]-l[r])/h:0}i[o]=a?d?Kr(n[o-1])!==Kr(n[o])?0:(n[o-1]+n[o])/2:n[o-1]:n[o]}l4(t,n,i),c4(t,i,e)}function Gl(t,e,r){return Math.max(Math.min(t,r),e)}function d4(t,e){let r,s,n,i,o,a=$a(t[0],e);for(r=0,s=t.length;r<s;++r)o=i,i=a,a=r<s-1&&$a(t[r+1],e),i&&(n=t[r],o&&(n.cp1x=Gl(n.cp1x,e.left,e.right),n.cp1y=Gl(n.cp1y,e.top,e.bottom)),a&&(n.cp2x=Gl(n.cp2x,e.left,e.right),n.cp2y=Gl(n.cp2y,e.top,e.bottom)))}function h4(t,e,r,s,n){let i,o,a,l;if(e.spanGaps&&(t=t.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")u4(t,n);else{let d=s?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=a4(d,a,t[Math.min(i+1,o-(s?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,d=a}e.capBezierPoints&&d4(t,r)}function Dm(){return typeof window<"u"&&typeof document<"u"}function Om(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Zc(t,e,r){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[r])):s=t,s}const Lu=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function f4(t,e){return Lu(t).getPropertyValue(e)}const m4=["top","right","bottom","left"];function qn(t,e,r){const s={};r=r?"-"+r:"";for(let n=0;n<4;n++){const i=m4[n];s[i]=parseFloat(t[e+"-"+i+r])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const p4=(t,e,r)=>(t>0||e>0)&&(!r||!r.shadowRoot);function g4(t,e){const r=t.touches,s=r&&r.length?r[0]:t,{offsetX:n,offsetY:i}=s;let o=!1,a,l;if(p4(n,i,t.target))a=n,l=i;else{const d=e.getBoundingClientRect();a=s.clientX-d.left,l=s.clientY-d.top,o=!0}return{x:a,y:l,box:o}}function In(t,e){if("native"in t)return t;const{canvas:r,currentDevicePixelRatio:s}=e,n=Lu(r),i=n.boxSizing==="border-box",o=qn(n,"padding"),a=qn(n,"border","width"),{x:l,y:d,box:h}=g4(t,r),m=o.left+(h&&a.left),p=o.top+(h&&a.top);let{width:x,height:b}=e;return i&&(x-=o.width+a.width,b-=o.height+a.height),{x:Math.round((l-m)/x*r.width/s),y:Math.round((d-p)/b*r.height/s)}}function y4(t,e,r){let s,n;if(e===void 0||r===void 0){const i=t&&Om(t);if(!i)e=t.clientWidth,r=t.clientHeight;else{const o=i.getBoundingClientRect(),a=Lu(i),l=qn(a,"border","width"),d=qn(a,"padding");e=o.width-d.width-l.width,r=o.height-d.height-l.height,s=Zc(a.maxWidth,i,"clientWidth"),n=Zc(a.maxHeight,i,"clientHeight")}}return{width:e,height:r,maxWidth:s||Jc,maxHeight:n||Jc}}const ql=t=>Math.round(t*10)/10;function x4(t,e,r,s){const n=Lu(t),i=qn(n,"margin"),o=Zc(n.maxWidth,t,"clientWidth")||Jc,a=Zc(n.maxHeight,t,"clientHeight")||Jc,l=y4(t,e,r);let{width:d,height:h}=l;if(n.boxSizing==="content-box"){const p=qn(n,"border","width"),x=qn(n,"padding");d-=x.width+p.width,h-=x.height+p.height}return d=Math.max(0,d-i.width),h=Math.max(0,s?d/s:h-i.height),d=ql(Math.min(d,o,l.maxWidth)),h=ql(Math.min(h,a,l.maxHeight)),d&&!h&&(h=ql(d/2)),(e!==void 0||r!==void 0)&&s&&l.height&&h>l.height&&(h=l.height,d=ql(Math.floor(h*s))),{width:d,height:h}}function x0(t,e,r){const s=e||1,n=Math.floor(t.height*s),i=Math.floor(t.width*s);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(r||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||o.height!==n||o.width!==i?(t.currentDevicePixelRatio=s,o.height=n,o.width=i,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const v4=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Dm()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function v0(t,e){const r=f4(t,e),s=r&&r.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function $n(t,e,r,s){return{x:t.x+r*(e.x-t.x),y:t.y+r*(e.y-t.y)}}function b4(t,e,r,s){return{x:t.x+r*(e.x-t.x),y:s==="middle"?r<.5?t.y:e.y:s==="after"?r<1?t.y:e.y:r>0?e.y:t.y}}function w4(t,e,r,s){const n={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=$n(t,n,r),a=$n(n,i,r),l=$n(i,e,r),d=$n(o,a,r),h=$n(a,l,r);return $n(d,h,r)}const _4=function(t,e){return{x(r){return t+t+e-r},setWidth(r){e=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,s){return r-s},leftForLtr(r,s){return r-s}}},k4=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Vi(t,e,r){return t?_4(e,r):k4()}function qb(t,e){let r,s;(e==="ltr"||e==="rtl")&&(r=t.canvas.style,s=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",e,"important"),t.prevTextDirection=s)}function Kb(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Xb(t){return t==="angle"?{between:Ia,compare:_T,normalize:Vr}:{between:bs,compare:(e,r)=>e-r,normalize:e=>e}}function b0({start:t,end:e,count:r,loop:s,style:n}){return{start:t%r,end:e%r,loop:s&&(e-t+1)%r===0,style:n}}function S4(t,e,r){const{property:s,start:n,end:i}=r,{between:o,normalize:a}=Xb(s),l=e.length;let{start:d,end:h,loop:m}=t,p,x;if(m){for(d+=l,h+=l,p=0,x=l;p<x&&o(a(e[d%l][s]),n,i);++p)d--,h--;d%=l,h%=l}return h<d&&(h+=l),{start:d,end:h,loop:m,style:t.style}}function Jb(t,e,r){if(!r)return[t];const{property:s,start:n,end:i}=r,o=e.length,{compare:a,between:l,normalize:d}=Xb(s),{start:h,end:m,loop:p,style:x}=S4(t,e,r),b=[];let k=!1,w=null,v,_,S;const C=()=>l(n,S,v)&&a(n,S)!==0,E=()=>a(i,v)===0||l(i,S,v),D=()=>k||C(),P=()=>!k||E();for(let O=h,B=h;O<=m;++O)_=e[O%o],!_.skip&&(v=d(_[s]),v!==S&&(k=l(v,n,i),w===null&&D()&&(w=a(v,n)===0?O:B),w!==null&&P()&&(b.push(b0({start:w,end:O,loop:p,count:o,style:x})),w=null),B=O,S=v));return w!==null&&b.push(b0({start:w,end:m,loop:p,count:o,style:x})),b}function Qb(t,e){const r=[],s=t.segments;for(let n=0;n<s.length;n++){const i=Jb(s[n],t.points,e);i.length&&r.push(...i)}return r}function j4(t,e,r,s){let n=0,i=e-1;if(r&&!s)for(;n<e&&!t[n].skip;)n++;for(;n<e&&t[n].skip;)n++;for(n%=e,r&&(i+=n);i>n&&t[i%e].skip;)i--;return i%=e,{start:n,end:i}}function N4(t,e,r,s){const n=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=r;++l){const d=t[l%n];d.skip||d.stop?a.skip||(s=!1,i.push({start:e%n,end:(l-1)%n,loop:s}),e=o=d.stop?l:null):(o=l,a.skip&&(e=l)),a=d}return o!==null&&i.push({start:e%n,end:o%n,loop:s}),i}function C4(t,e){const r=t.points,s=t.options.spanGaps,n=r.length;if(!n)return[];const i=!!t._loop,{start:o,end:a}=j4(r,n,i,s);if(s===!0)return w0(t,[{start:o,end:a,loop:i}],r,e);const l=a<o?a+n:a,d=!!t._fullLoop&&o===0&&a===n-1;return w0(t,N4(r,o,l,d),r,e)}function w0(t,e,r,s){return!s||!s.setContext||!r?e:E4(t,e,r,s)}function E4(t,e,r,s){const n=t._chart.getContext(),i=_0(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=r.length,d=[];let h=i,m=e[0].start,p=m;function x(b,k,w,v){const _=a?-1:1;if(b!==k){for(b+=l;r[b%l].skip;)b-=_;for(;r[k%l].skip;)k+=_;b%l!==k%l&&(d.push({start:b%l,end:k%l,loop:w,style:v}),h=v,m=k%l)}}for(const b of e){m=a?m:b.start;let k=r[m%l],w;for(p=m+1;p<=b.end;p++){const v=r[p%l];w=_0(s.setContext(ci(n,{type:"segment",p0:k,p1:v,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:o}))),M4(w,h)&&x(m,p-1,b.loop,h),k=v,h=w}m<p-1&&x(m,p-1,b.loop,h)}return d}function _0(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function M4(t,e){if(!e)return!1;const r=[],s=function(n,i){return Nm(i)?(r.includes(i)||r.push(i),r.indexOf(i)):i};return JSON.stringify(t,s)!==JSON.stringify(e,s)}function Kl(t,e,r){return t.options.clip?t[r]:e[r]}function T4(t,e){const{xScale:r,yScale:s}=t;return r&&s?{left:Kl(r,e,"left"),right:Kl(r,e,"right"),top:Kl(s,e,"top"),bottom:Kl(s,e,"bottom")}:e}function Zb(t,e){const r=e._clip;if(r.disabled)return!1;const s=T4(e,t.chartArea);return{left:r.left===!1?0:s.left-(r.left===!0?0:r.left),right:r.right===!1?t.width:s.right+(r.right===!0?0:r.right),top:r.top===!1?0:s.top-(r.top===!0?0:r.top),bottom:r.bottom===!1?t.height:s.bottom+(r.bottom===!0?0:r.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class P4{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,r,s,n){const i=r.listeners[n],o=r.duration;i.forEach(a=>a({chart:e,initial:r.initial,numSteps:o,currentStep:Math.min(s-r.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=$b.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let r=0;this._charts.forEach((s,n)=>{if(!s.running||!s.items.length)return;const i=s.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(n.draw(),this._notify(n,s,e,"progress")),i.length||(s.running=!1,this._notify(n,s,e,"complete"),s.initial=!1),r+=i.length}),this._lastDate=e,r===0&&(this._running=!1)}_getAnims(e){const r=this._charts;let s=r.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(e,s)),s}listen(e,r,s){this._getAnims(e).listeners[r].push(s)}add(e,r){!r||!r.length||this._getAnims(e).items.push(...r)}has(e){return this._getAnims(e).items.length>0}start(e){const r=this._charts.get(e);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((s,n)=>Math.max(s,n._duration),0),this._refresh())}running(e){if(!this._running)return!1;const r=this._charts.get(e);return!(!r||!r.running||!r.items.length)}stop(e){const r=this._charts.get(e);if(!r||!r.items.length)return;const s=r.items;let n=s.length-1;for(;n>=0;--n)s[n].cancel();r.items=[],this._notify(e,r,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ds=new P4;const k0="transparent",D4={boolean(t,e,r){return r>.5?e:t},color(t,e,r){const s=h0(t||k0),n=s.valid&&h0(e||k0);return n&&n.valid?n.mix(s,r).hexString():e},number(t,e,r){return t+(e-t)*r}};class O4{constructor(e,r,s,n){const i=r[s];n=Yl([e.to,n,i,e.from]);const o=Yl([e.from,i,n]);this._active=!0,this._fn=e.fn||D4[e.type||typeof o],this._easing=ca[e.easing]||ca.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=r,this._prop=s,this._from=o,this._to=n,this._promises=void 0}active(){return this._active}update(e,r,s){if(this._active){this._notify(!1);const n=this._target[this._prop],i=s-this._start,o=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Yl([e.to,r,n,e.from]),this._from=Yl([e.from,n,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const r=e-this._start,s=this._duration,n=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||r<s),!this._active){this._target[n]=a,this._notify(!0);return}if(r<0){this._target[n]=i;return}l=r/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[n]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((r,s)=>{e.push({res:r,rej:s})})}_notify(e){const r=e?"res":"rej",s=this._promises||[];for(let n=0;n<s.length;n++)s[n][r]()}}class ew{constructor(e,r){this._chart=e,this._properties=new Map,this.configure(r)}configure(e){if(!Te(e))return;const r=Object.keys(ct.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(n=>{const i=e[n];if(!Te(i))return;const o={};for(const a of r)o[a]=i[a];(dt(i.properties)&&i.properties||[n]).forEach(a=>{(a===n||!s.has(a))&&s.set(a,o)})})}_animateOptions(e,r){const s=r.options,n=R4(e,s);if(!n)return[];const i=this._createAnimations(n,s);return s.$shared&&L4(e.options.$animations,s).then(()=>{e.options=s},()=>{}),i}_createAnimations(e,r){const s=this._properties,n=[],i=e.$animations||(e.$animations={}),o=Object.keys(r),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const d=o[l];if(d.charAt(0)==="$")continue;if(d==="options"){n.push(...this._animateOptions(e,r));continue}const h=r[d];let m=i[d];const p=s.get(d);if(m)if(p&&m.active()){m.update(p,h,a);continue}else m.cancel();if(!p||!p.duration){e[d]=h;continue}i[d]=m=new O4(p,e,d,h),n.push(m)}return n}update(e,r){if(this._properties.size===0){Object.assign(e,r);return}const s=this._createAnimations(e,r);if(s.length)return ds.add(this._chart,s),!0}}function L4(t,e){const r=[],s=Object.keys(e);for(let n=0;n<s.length;n++){const i=t[s[n]];i&&i.active()&&r.push(i.wait())}return Promise.all(r)}function R4(t,e){if(!e)return;let r=t.options;if(!r){t.options=e;return}return r.$shared&&(t.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function S0(t,e){const r=t&&t.options||{},s=r.reverse,n=r.min===void 0?e:0,i=r.max===void 0?e:0;return{start:s?i:n,end:s?n:i}}function A4(t,e,r){if(r===!1)return!1;const s=S0(t,r),n=S0(e,r);return{top:n.end,right:s.end,bottom:n.start,left:s.start}}function I4(t){let e,r,s,n;return Te(t)?(e=t.top,r=t.right,s=t.bottom,n=t.left):e=r=s=n=t,{top:e,right:r,bottom:s,left:n,disabled:t===!1}}function tw(t,e){const r=[],s=t._getSortedDatasetMetas(e);let n,i;for(n=0,i=s.length;n<i;++n)r.push(s[n].index);return r}function j0(t,e,r,s={}){const n=t.keys,i=s.mode==="single";let o,a,l,d;if(e===null)return;let h=!1;for(o=0,a=n.length;o<a;++o){if(l=+n[o],l===r){if(h=!0,s.all)continue;break}d=t.values[l],Lt(d)&&(i||e===0||Kr(e)===Kr(d))&&(e+=d)}return!h&&!s.all?0:e}function $4(t,e){const{iScale:r,vScale:s}=e,n=r.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,d,h;for(l=0,d=o.length;l<d;++l)h=o[l],a[l]={[n]:h,[i]:t[h]};return a}function Wd(t,e){const r=t&&t.options.stacked;return r||r===void 0&&e.stack!==void 0}function F4(t,e,r){return`${t.id}.${e.id}.${r.stack||r.type}`}function z4(t){const{min:e,max:r,minDefined:s,maxDefined:n}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:n?r:Number.POSITIVE_INFINITY}}function W4(t,e,r){const s=t[e]||(t[e]={});return s[r]||(s[r]={})}function N0(t,e,r,s){for(const n of e.getMatchingVisibleMetas(s).reverse()){const i=t[n.index];if(r&&i>0||!r&&i<0)return n.index}return null}function C0(t,e){const{chart:r,_cachedMeta:s}=t,n=r._stacks||(r._stacks={}),{iScale:i,vScale:o,index:a}=s,l=i.axis,d=o.axis,h=F4(i,o,s),m=e.length;let p;for(let x=0;x<m;++x){const b=e[x],{[l]:k,[d]:w}=b,v=b._stacks||(b._stacks={});p=v[d]=W4(n,h,k),p[a]=w,p._top=N0(p,o,!0,s.type),p._bottom=N0(p,o,!1,s.type);const _=p._visualValues||(p._visualValues={});_[a]=w}}function Bd(t,e){const r=t.scales;return Object.keys(r).filter(s=>r[s].axis===e).shift()}function B4(t,e){return ci(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function U4(t,e,r){return ci(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:r,index:e,mode:"default",type:"data"})}function Ro(t,e){const r=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const n of e){const i=n._stacks;if(!i||i[s]===void 0||i[s][r]===void 0)return;delete i[s][r],i[s]._visualValues!==void 0&&i[s]._visualValues[r]!==void 0&&delete i[s]._visualValues[r]}}}const Ud=t=>t==="reset"||t==="none",E0=(t,e)=>e?t:Object.assign({},t),H4=(t,e,r)=>t&&!e.hidden&&e._stacked&&{keys:tw(r,!0),values:null};class Kn{constructor(e,r){this.chart=e,this._ctx=e.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Wd(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ro(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,r=this._cachedMeta,s=this.getDataset(),n=(m,p,x,b)=>m==="x"?p:m==="r"?b:x,i=r.xAxisID=Ne(s.xAxisID,Bd(e,"x")),o=r.yAxisID=Ne(s.yAxisID,Bd(e,"y")),a=r.rAxisID=Ne(s.rAxisID,Bd(e,"r")),l=r.indexAxis,d=r.iAxisID=n(l,i,o,a),h=r.vAxisID=n(l,o,i,a);r.xScale=this.getScaleForId(i),r.yScale=this.getScaleForId(o),r.rScale=this.getScaleForId(a),r.iScale=this.getScaleForId(d),r.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const r=this._cachedMeta;return e===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&c0(this._data,this),e._stacked&&Ro(e)}_dataCheck(){const e=this.getDataset(),r=e.data||(e.data=[]),s=this._data;if(Te(r)){const n=this._cachedMeta;this._data=$4(r,n)}else if(s!==r){if(s){c0(s,this);const n=this._cachedMeta;Ro(n),n._parsed=[]}r&&Object.isExtensible(r)&&NT(r,this),this._syncList=[],this._data=r}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const r=this._cachedMeta,s=this.getDataset();let n=!1;this._dataCheck();const i=r._stacked;r._stacked=Wd(r.vScale,r),r.stack!==s.stack&&(n=!0,Ro(r),r.stack=s.stack),this._resyncElements(e),(n||i!==r._stacked)&&(C0(this,r._parsed),r._stacked=Wd(r.vScale,r))}configure(){const e=this.chart.config,r=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),r,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,r){const{_cachedMeta:s,_data:n}=this,{iScale:i,_stacked:o}=s,a=i.axis;let l=e===0&&r===n.length?!0:s._sorted,d=e>0&&s._parsed[e-1],h,m,p;if(this._parsing===!1)s._parsed=n,s._sorted=!0,p=n;else{dt(n[e])?p=this.parseArrayData(s,n,e,r):Te(n[e])?p=this.parseObjectData(s,n,e,r):p=this.parsePrimitiveData(s,n,e,r);const x=()=>m[a]===null||d&&m[a]<d[a];for(h=0;h<r;++h)s._parsed[h+e]=m=p[h],l&&(x()&&(l=!1),d=m);s._sorted=l}o&&C0(this,p)}parsePrimitiveData(e,r,s,n){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,d=i.getLabels(),h=i===o,m=new Array(n);let p,x,b;for(p=0,x=n;p<x;++p)b=p+s,m[p]={[a]:h||i.parse(d[b],b),[l]:o.parse(r[b],b)};return m}parseArrayData(e,r,s,n){const{xScale:i,yScale:o}=e,a=new Array(n);let l,d,h,m;for(l=0,d=n;l<d;++l)h=l+s,m=r[h],a[l]={x:i.parse(m[0],h),y:o.parse(m[1],h)};return a}parseObjectData(e,r,s,n){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,d=new Array(n);let h,m,p,x;for(h=0,m=n;h<m;++h)p=h+s,x=r[p],d[h]={x:i.parse(ti(x,a),p),y:o.parse(ti(x,l),p)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,r,s){const n=this.chart,i=this._cachedMeta,o=r[e.axis],a={keys:tw(n,!0),values:r._stacks[e.axis]._visualValues};return j0(a,o,i.index,{mode:s})}updateRangeFromParsed(e,r,s,n){const i=s[r.axis];let o=i===null?NaN:i;const a=n&&s._stacks[r.axis];n&&a&&(n.values=a,o=j0(n,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,r){const s=this._cachedMeta,n=s._parsed,i=s._sorted&&e===s.iScale,o=n.length,a=this._getOtherScale(e),l=H4(r,s,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:m}=z4(a);let p,x;function b(){x=n[p];const k=x[a.axis];return!Lt(x[e.axis])||h>k||m<k}for(p=0;p<o&&!(!b()&&(this.updateRangeFromParsed(d,e,x,l),i));++p);if(i){for(p=o-1;p>=0;--p)if(!b()){this.updateRangeFromParsed(d,e,x,l);break}}return d}getAllParsedValues(e){const r=this._cachedMeta._parsed,s=[];let n,i,o;for(n=0,i=r.length;n<i;++n)o=r[n][e.axis],Lt(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const r=this._cachedMeta,s=r.iScale,n=r.vScale,i=this.getParsed(e);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:n?""+n.getLabelForValue(i[n.axis]):""}}_update(e){const r=this._cachedMeta;this.update(e||"default"),r._clip=I4(Ne(this.options.clip,A4(r.xScale,r.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this.chart,s=this._cachedMeta,n=s.data||[],i=r.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||n.length-a,d=this.options.drawActiveElementsOnTop;let h;for(s.dataset&&s.dataset.draw(e,i,a,l),h=a;h<a+l;++h){const m=n[h];m.hidden||(m.active&&d?o.push(m):m.draw(e,i))}for(h=0;h<o.length;++h)o[h].draw(e,i)}getStyle(e,r){const s=r?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,r,s){const n=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=U4(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=n.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=B4(this.chart.getContext(),this.index)),i.dataset=n,i.index=i.datasetIndex=this.index;return i.active=!!r,i.mode=s,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,r){return this._resolveElementOptions(this.dataElementType.id,r,e)}_resolveElementOptions(e,r="default",s){const n=r==="active",i=this._cachedDataOpts,o=e+"-"+r,a=i[o],l=this.enableOptionSharing&&Ra(s);if(a)return E0(a,l);const d=this.chart.config,h=d.datasetElementScopeKeys(this._type,e),m=n?[`${e}Hover`,"hover",e,""]:[e,""],p=d.getOptionScopes(this.getDataset(),h),x=Object.keys(ct.elements[e]),b=()=>this.getContext(s,n,r),k=d.resolveNamedOptions(p,x,b,m);return k.$shared&&(k.$shared=l,i[o]=Object.freeze(E0(k,l))),k}_resolveAnimations(e,r,s){const n=this.chart,i=this._cachedDataOpts,o=`animation-${r}`,a=i[o];if(a)return a;let l;if(n.options.animation!==!1){const h=this.chart.config,m=h.datasetAnimationScopeKeys(this._type,r),p=h.getOptionScopes(this.getDataset(),m);l=h.createResolver(p,this.getContext(e,s,r))}const d=new ew(n,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,r){return!r||Ud(e)||this.chart._animationsDisabled}_getSharedOptions(e,r){const s=this.resolveDataElementOptions(e,r),n=this._sharedOptions,i=this.getSharedOptions(s),o=this.includeOptions(r,i)||i!==n;return this.updateSharedOptions(i,r,s),{sharedOptions:i,includeOptions:o}}updateElement(e,r,s,n){Ud(n)?Object.assign(e,s):this._resolveAnimations(r,n).update(e,s)}updateSharedOptions(e,r,s){e&&!Ud(r)&&this._resolveAnimations(void 0,r).update(e,s)}_setStyle(e,r,s,n){e.active=n;const i=this.getStyle(r,n);this._resolveAnimations(r,s,n).update(e,{options:!n&&this.getSharedOptions(i)||i})}removeHoverStyle(e,r,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,r,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const r=this._data,s=this._cachedMeta.data;for(const[a,l,d]of this._syncList)this[a](l,d);this._syncList=[];const n=s.length,i=r.length,o=Math.min(i,n);o&&this.parse(0,o),i>n?this._insertElements(n,i-n,e):i<n&&this._removeElements(i,n-i)}_insertElements(e,r,s=!0){const n=this._cachedMeta,i=n.data,o=e+r;let a;const l=d=>{for(d.length+=r,a=d.length-1;a>=o;a--)d[a]=d[a-r]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(n._parsed),this.parse(e,r),s&&this.updateElements(i,e,r,"reset")}updateElements(e,r,s,n){}_removeElements(e,r){const s=this._cachedMeta;if(this._parsing){const n=s._parsed.splice(e,r);s._stacked&&Ro(s,n)}s.data.splice(e,r)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[r,s,n]=e;this[r](s,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,r){r&&this._sync(["_removeElements",e,r]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ue(Kn,"defaults",{}),ue(Kn,"datasetElementType",null),ue(Kn,"dataElementType",null);function V4(t,e){if(!t._cache.$bar){const r=t.getMatchingVisibleMetas(e);let s=[];for(let n=0,i=r.length;n<i;n++)s=s.concat(r[n].controller.getAllParsedValues(t));t._cache.$bar=Ib(s.sort((n,i)=>n-i))}return t._cache.$bar}function Y4(t){const e=t.iScale,r=V4(e,t.type);let s=e._length,n,i,o,a;const l=()=>{o===32767||o===-32768||(Ra(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(n=0,i=r.length;n<i;++n)o=e.getPixelForValue(r[n]),l();for(a=void 0,n=0,i=e.ticks.length;n<i;++n)o=e.getPixelForTick(n),l();return s}function G4(t,e,r,s){const n=r.barThickness;let i,o;return ze(n)?(i=e.min*r.categoryPercentage,o=r.barPercentage):(i=n*s,o=1),{chunk:i/s,ratio:o,start:e.pixels[t]-i/2}}function q4(t,e,r,s){const n=e.pixels,i=n[t];let o=t>0?n[t-1]:null,a=t<n.length-1?n[t+1]:null;const l=r.categoryPercentage;o===null&&(o=i-(a===null?e.end-e.start:a-i)),a===null&&(a=i+i-o);const d=i-(i-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/s,ratio:r.barPercentage,start:d}}function K4(t,e,r,s){const n=r.parse(t[0],s),i=r.parse(t[1],s),o=Math.min(n,i),a=Math.max(n,i);let l=o,d=a;Math.abs(o)>Math.abs(a)&&(l=a,d=o),e[r.axis]=d,e._custom={barStart:l,barEnd:d,start:n,end:i,min:o,max:a}}function rw(t,e,r,s){return dt(t)?K4(t,e,r,s):e[r.axis]=r.parse(t,s),e}function M0(t,e,r,s){const n=t.iScale,i=t.vScale,o=n.getLabels(),a=n===i,l=[];let d,h,m,p;for(d=r,h=r+s;d<h;++d)p=e[d],m={},m[n.axis]=a||n.parse(o[d],d),l.push(rw(p,m,i,d));return l}function Hd(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function X4(t,e,r){return t!==0?Kr(t):(e.isHorizontal()?1:-1)*(e.min>=r?1:-1)}function J4(t){let e,r,s,n,i;return t.horizontal?(e=t.base>t.x,r="left",s="right"):(e=t.base<t.y,r="bottom",s="top"),e?(n="end",i="start"):(n="start",i="end"),{start:r,end:s,reverse:e,top:n,bottom:i}}function Q4(t,e,r,s){let n=e.borderSkipped;const i={};if(!n){t.borderSkipped=i;return}if(n===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:d,bottom:h}=J4(t);n==="middle"&&r&&(t.enableBorderRadius=!0,(r._top||0)===s?n=d:(r._bottom||0)===s?n=h:(i[T0(h,o,a,l)]=!0,n=d)),i[T0(n,o,a,l)]=!0,t.borderSkipped=i}function T0(t,e,r,s){return s?(t=Z4(t,e,r),t=P0(t,r,e)):t=P0(t,e,r),t}function Z4(t,e,r){return t===e?r:t===r?e:t}function P0(t,e,r){return t==="start"?e:t==="end"?r:t}function eP(t,{inflateAmount:e},r){t.inflateAmount=e==="auto"?r===1?.33:0:e}class gc extends Kn{parsePrimitiveData(e,r,s,n){return M0(e,r,s,n)}parseArrayData(e,r,s,n){return M0(e,r,s,n)}parseObjectData(e,r,s,n){const{iScale:i,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,d=i.axis==="x"?a:l,h=o.axis==="x"?a:l,m=[];let p,x,b,k;for(p=s,x=s+n;p<x;++p)k=r[p],b={},b[i.axis]=i.parse(ti(k,d),p),m.push(rw(ti(k,h),b,o,p));return m}updateRangeFromParsed(e,r,s,n){super.updateRangeFromParsed(e,r,s,n);const i=s._custom;i&&r===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const r=this._cachedMeta,{iScale:s,vScale:n}=r,i=this.getParsed(e),o=i._custom,a=Hd(o)?"["+o.start+", "+o.end+"]":""+n.getLabelForValue(i[n.axis]);return{label:""+s.getLabelForValue(i[s.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,e)}updateElements(e,r,s,n){const i=n==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),d=a.isHorizontal(),h=this._getRuler(),{sharedOptions:m,includeOptions:p}=this._getSharedOptions(r,n);for(let x=r;x<r+s;x++){const b=this.getParsed(x),k=i||ze(b[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(x),w=this._calculateBarIndexPixels(x,h),v=(b._stacks||{})[a.axis],_={horizontal:d,base:k.base,enableBorderRadius:!v||Hd(b._custom)||o===v._top||o===v._bottom,x:d?k.head:w.center,y:d?w.center:k.head,height:d?w.size:Math.abs(k.size),width:d?Math.abs(k.size):w.size};p&&(_.options=m||this.resolveDataElementOptions(x,e[x].active?"active":n));const S=_.options||e[x].options;Q4(_,S,v,o),eP(_,S,h.ratio),this.updateElement(e[x],x,_,n)}}_getStacks(e,r){const{iScale:s}=this._cachedMeta,n=s.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),i=s.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(r),l=a&&a[s.axis],d=h=>{const m=h._parsed.find(x=>x[s.axis]===l),p=m&&m[h.vScale.axis];if(ze(p)||isNaN(p))return!0};for(const h of n)if(!(r!==void 0&&d(h))&&((i===!1||o.indexOf(h.stack)===-1||i===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,r,s){const n=this._getStacks(e,s),i=r!==void 0?n.indexOf(r):-1;return i===-1?n.length-1:i}_getRuler(){const e=this.options,r=this._cachedMeta,s=r.iScale,n=[];let i,o;for(i=0,o=r.data.length;i<o;++i)n.push(s.getPixelForValue(this.getParsed(i)[s.axis],i));const a=e.barThickness;return{min:a||Y4(r),pixels:n,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:r,_stacked:s,index:n},options:{base:i,minBarLength:o}}=this,a=i||0,l=this.getParsed(e),d=l._custom,h=Hd(d);let m=l[r.axis],p=0,x=s?this.applyStack(r,l,s):m,b,k;x!==m&&(p=x-m,x=m),h&&(m=d.barStart,x=d.barEnd-d.barStart,m!==0&&Kr(m)!==Kr(d.barEnd)&&(p=0),p+=m);const w=!ze(i)&&!h?i:p;let v=r.getPixelForValue(w);if(this.chart.getDataVisibility(e)?b=r.getPixelForValue(p+x):b=v,k=b-v,Math.abs(k)<o){k=X4(k,r,a)*o,m===a&&(v-=k/2);const _=r.getPixelForDecimal(0),S=r.getPixelForDecimal(1),C=Math.min(_,S),E=Math.max(_,S);v=Math.max(Math.min(v,E),C),b=v+k,s&&!h&&(l._stacks[r.axis]._visualValues[n]=r.getValueForPixel(b)-r.getValueForPixel(v))}if(v===r.getPixelForValue(a)){const _=Kr(k)*r.getLineWidthForValue(a)/2;v+=_,k-=_}return{size:k,base:v,head:b,center:b+k/2}}_calculateBarIndexPixels(e,r){const s=r.scale,n=this.options,i=n.skipNull,o=Ne(n.maxBarThickness,1/0);let a,l;if(r.grouped){const d=i?this._getStackCount(e):r.stackCount,h=n.barThickness==="flex"?q4(e,r,n,d):G4(e,r,n,d),m=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0);a=h.start+h.chunk*m+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=s.getPixelForValue(this.getParsed(e)[s.axis],e),l=Math.min(o,r.min*r.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,r=e.vScale,s=e.data,n=s.length;let i=0;for(;i<n;++i)this.getParsed(i)[r.axis]!==null&&!s[i].hidden&&s[i].draw(this._ctx)}}ue(gc,"id","bar"),ue(gc,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ue(gc,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function tP(t,e,r){let s=1,n=1,i=0,o=0;if(e<Ze){const a=t,l=a+e,d=Math.cos(a),h=Math.sin(a),m=Math.cos(l),p=Math.sin(l),x=(S,C,E)=>Ia(S,a,l,!0)?1:Math.max(C,C*r,E,E*r),b=(S,C,E)=>Ia(S,a,l,!0)?-1:Math.min(C,C*r,E,E*r),k=x(0,d,m),w=x(yt,h,p),v=b(ot,d,m),_=b(ot+yt,h,p);s=(k-v)/2,n=(w-_)/2,i=-(k+v)/2,o=-(w+_)/2}return{ratioX:s,ratioY:n,offsetX:i,offsetY:o}}class Ai extends Kn{constructor(e,r){super(e,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,r){const s=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=s;else{let i=l=>+s[l];if(Te(s[e])){const{key:l="value"}=this._parsing;i=d=>+ti(s[d],l)}let o,a;for(o=e,a=e+r;o<a;++o)n._parsed[o]=i(o)}}_getRotation(){return vs(this.options.rotation-90)}_getCircumference(){return vs(this.options.circumference)}_getRotationExtents(){let e=Ze,r=-Ze;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const n=this.chart.getDatasetMeta(s).controller,i=n._getRotation(),o=n._getCircumference();e=Math.min(e,i),r=Math.max(r,i+o)}return{rotation:e,circumference:r-e}}update(e){const r=this.chart,{chartArea:s}=r,n=this._cachedMeta,i=n.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),l=Math.min(cT(this.options.cutout,a),1),d=this._getRingWeight(this.index),{circumference:h,rotation:m}=this._getRotationExtents(),{ratioX:p,ratioY:x,offsetX:b,offsetY:k}=tP(m,h,l),w=(s.width-o)/p,v=(s.height-o)/x,_=Math.max(Math.min(w,v)/2,0),S=Db(this.options.radius,_),C=Math.max(S*l,0),E=(S-C)/this._getVisibleDatasetWeightTotal();this.offsetX=b*S,this.offsetY=k*S,n.total=this.calculateTotal(),this.outerRadius=S-E*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-E*d,0),this.updateElements(i,0,i.length,e)}_circumference(e,r){const s=this.options,n=this._cachedMeta,i=this._getCircumference();return r&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||n._parsed[e]===null||n.data[e].hidden?0:this.calculateCircumference(n._parsed[e]*i/Ze)}updateElements(e,r,s,n){const i=n==="reset",o=this.chart,a=o.chartArea,d=o.options.animation,h=(a.left+a.right)/2,m=(a.top+a.bottom)/2,p=i&&d.animateScale,x=p?0:this.innerRadius,b=p?0:this.outerRadius,{sharedOptions:k,includeOptions:w}=this._getSharedOptions(r,n);let v=this._getRotation(),_;for(_=0;_<r;++_)v+=this._circumference(_,i);for(_=r;_<r+s;++_){const S=this._circumference(_,i),C=e[_],E={x:h+this.offsetX,y:m+this.offsetY,startAngle:v,endAngle:v+S,circumference:S,outerRadius:b,innerRadius:x};w&&(E.options=k||this.resolveDataElementOptions(_,C.active?"active":n)),v+=S,this.updateElement(C,_,E,n)}}calculateTotal(){const e=this._cachedMeta,r=e.data;let s=0,n;for(n=0;n<r.length;n++){const i=e._parsed[n];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(n)&&!r[n].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(e){const r=this._cachedMeta.total;return r>0&&!isNaN(e)?Ze*(Math.abs(e)/r):0}getLabelAndValue(e){const r=this._cachedMeta,s=this.chart,n=s.data.labels||[],i=Cm(r._parsed[e],s.options.locale);return{label:n[e]||"",value:i}}getMaxBorderWidth(e){let r=0;const s=this.chart;let n,i,o,a,l;if(!e){for(n=0,i=s.data.datasets.length;n<i;++n)if(s.isDatasetVisible(n)){o=s.getDatasetMeta(n),e=o.data,a=o.controller;break}}if(!e)return 0;for(n=0,i=e.length;n<i;++n)l=a.resolveDataElementOptions(n),l.borderAlign!=="inner"&&(r=Math.max(r,l.borderWidth||0,l.hoverBorderWidth||0));return r}getMaxOffset(e){let r=0;for(let s=0,n=e.length;s<n;++s){const i=this.resolveDataElementOptions(s);r=Math.max(r,i.offset||0,i.hoverOffset||0)}return r}_getRingWeightOffset(e){let r=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(r+=this._getRingWeight(s));return r}_getRingWeight(e){return Math.max(Ne(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ue(Ai,"id","doughnut"),ue(Ai,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ue(Ai,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),ue(Ai,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const r=e.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:s,color:n}}=e.legend.options;return r.labels.map((i,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:i,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:n,lineWidth:l.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,r,s){s.chart.toggleDataVisibility(r.index),s.chart.update()}}}});class yc extends Kn{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const r=this._cachedMeta,{dataset:s,data:n=[],_dataset:i}=r,o=this.chart._animationsDisabled;let{start:a,count:l}=MT(r,n,o);this._drawStart=a,this._drawCount=l,TT(r)&&(a=0,l=n.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=n;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:d},e),this.updateElements(n,a,l,e)}updateElements(e,r,s,n){const i=n==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:d}=this._cachedMeta,{sharedOptions:h,includeOptions:m}=this._getSharedOptions(r,n),p=o.axis,x=a.axis,{spanGaps:b,segment:k}=this.options,w=Aa(b)?b:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||i||n==="none",_=r+s,S=e.length;let C=r>0&&this.getParsed(r-1);for(let E=0;E<S;++E){const D=e[E],P=v?D:{};if(E<r||E>=_){P.skip=!0;continue}const O=this.getParsed(E),B=ze(O[x]),M=P[p]=o.getPixelForValue(O[p],E),I=P[x]=i||B?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,O,l):O[x],E);P.skip=isNaN(M)||isNaN(I)||B,P.stop=E>0&&Math.abs(O[p]-C[p])>w,k&&(P.parsed=O,P.raw=d.data[E]),m&&(P.options=h||this.resolveDataElementOptions(E,D.active?"active":n)),v||this.updateElement(D,E,P,n),C=O}}getMaxOverflow(){const e=this._cachedMeta,r=e.dataset,s=r.options&&r.options.borderWidth||0,n=e.data||[];if(!n.length)return s;const i=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ue(yc,"id","line"),ue(yc,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ue(yc,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class cf extends Ai{}ue(cf,"id","pie"),ue(cf,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function On(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Lm{constructor(e){ue(this,"options");this.options=e||{}}static override(e){Object.assign(Lm.prototype,e)}init(){}formats(){return On()}parse(){return On()}format(){return On()}add(){return On()}diff(){return On()}startOf(){return On()}endOf(){return On()}}var rP={_date:Lm};function sP(t,e,r,s){const{controller:n,data:i,_sorted:o}=t,a=n._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const d=a._reversePixels?ST:Hn;if(s){if(n._sharedOptions){const h=i[0],m=typeof h.getRange=="function"&&h.getRange(e);if(m){const p=d(i,e,r-m),x=d(i,e,r+m);return{lo:p.lo,hi:x.hi}}}}else{const h=d(i,e,r);if(l){const{vScale:m}=n._cachedMeta,{_parsed:p}=t,x=p.slice(0,h.lo+1).reverse().findIndex(k=>!ze(k[m.axis]));h.lo-=Math.max(0,x);const b=p.slice(h.hi).findIndex(k=>!ze(k[m.axis]));h.hi+=Math.max(0,b)}return h}}return{lo:0,hi:i.length-1}}function Ru(t,e,r,s,n){const i=t.getSortedVisibleDatasetMetas(),o=r[e];for(let a=0,l=i.length;a<l;++a){const{index:d,data:h}=i[a],{lo:m,hi:p}=sP(i[a],e,o,n);for(let x=m;x<=p;++x){const b=h[x];b.skip||s(b,d,x)}}}function nP(t){const e=t.indexOf("x")!==-1,r=t.indexOf("y")!==-1;return function(s,n){const i=e?Math.abs(s.x-n.x):0,o=r?Math.abs(s.y-n.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Vd(t,e,r,s,n){const i=[];return!n&&!t.isPointInArea(e)||Ru(t,r,e,function(a,l,d){!n&&!$a(a,t.chartArea,0)||a.inRange(e.x,e.y,s)&&i.push({element:a,datasetIndex:l,index:d})},!0),i}function iP(t,e,r,s){let n=[];function i(o,a,l){const{startAngle:d,endAngle:h}=o.getProps(["startAngle","endAngle"],s),{angle:m}=Rb(o,{x:e.x,y:e.y});Ia(m,d,h)&&n.push({element:o,datasetIndex:a,index:l})}return Ru(t,r,e,i),n}function oP(t,e,r,s,n,i){let o=[];const a=nP(r);let l=Number.POSITIVE_INFINITY;function d(h,m,p){const x=h.inRange(e.x,e.y,n);if(s&&!x)return;const b=h.getCenterPoint(n);if(!(!!i||t.isPointInArea(b))&&!x)return;const w=a(e,b);w<l?(o=[{element:h,datasetIndex:m,index:p}],l=w):w===l&&o.push({element:h,datasetIndex:m,index:p})}return Ru(t,r,e,d),o}function Yd(t,e,r,s,n,i){return!i&&!t.isPointInArea(e)?[]:r==="r"&&!s?iP(t,e,r,n):oP(t,e,r,s,n,i)}function D0(t,e,r,s,n){const i=[],o=r==="x"?"inXRange":"inYRange";let a=!1;return Ru(t,r,e,(l,d,h)=>{l[o]&&l[o](e[r],n)&&(i.push({element:l,datasetIndex:d,index:h}),a=a||l.inRange(e.x,e.y,n))}),s&&!a?[]:i}var aP={modes:{index(t,e,r,s){const n=In(e,t),i=r.axis||"x",o=r.includeInvisible||!1,a=r.intersect?Vd(t,n,i,s,o):Yd(t,n,i,!1,s,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(d=>{const h=a[0].index,m=d.data[h];m&&!m.skip&&l.push({element:m,datasetIndex:d.index,index:h})}),l):[]},dataset(t,e,r,s){const n=In(e,t),i=r.axis||"xy",o=r.includeInvisible||!1;let a=r.intersect?Vd(t,n,i,s,o):Yd(t,n,i,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,d=t.getDatasetMeta(l).data;a=[];for(let h=0;h<d.length;++h)a.push({element:d[h],datasetIndex:l,index:h})}return a},point(t,e,r,s){const n=In(e,t),i=r.axis||"xy",o=r.includeInvisible||!1;return Vd(t,n,i,s,o)},nearest(t,e,r,s){const n=In(e,t),i=r.axis||"xy",o=r.includeInvisible||!1;return Yd(t,n,i,r.intersect,s,o)},x(t,e,r,s){const n=In(e,t);return D0(t,n,"x",r.intersect,s)},y(t,e,r,s){const n=In(e,t);return D0(t,n,"y",r.intersect,s)}}};const sw=["left","top","right","bottom"];function Ao(t,e){return t.filter(r=>r.pos===e)}function O0(t,e){return t.filter(r=>sw.indexOf(r.pos)===-1&&r.box.axis===e)}function Io(t,e){return t.sort((r,s)=>{const n=e?s:r,i=e?r:s;return n.weight===i.weight?n.index-i.index:n.weight-i.weight})}function lP(t){const e=[];let r,s,n,i,o,a;for(r=0,s=(t||[]).length;r<s;++r)n=t[r],{position:i,options:{stack:o,stackWeight:a=1}}=n,e.push({index:r,box:n,pos:i,horizontal:n.isHorizontal(),weight:n.weight,stack:o&&i+o,stackWeight:a});return e}function cP(t){const e={};for(const r of t){const{stack:s,pos:n,stackWeight:i}=r;if(!s||!sw.includes(n))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function uP(t,e){const r=cP(t),{vBoxMaxWidth:s,hBoxMaxHeight:n}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,d=r[a.stack],h=d&&a.stackWeight/d.weight;a.horizontal?(a.width=h?h*s:l&&e.availableWidth,a.height=n):(a.width=s,a.height=h?h*n:l&&e.availableHeight)}return r}function dP(t){const e=lP(t),r=Io(e.filter(d=>d.box.fullSize),!0),s=Io(Ao(e,"left"),!0),n=Io(Ao(e,"right")),i=Io(Ao(e,"top"),!0),o=Io(Ao(e,"bottom")),a=O0(e,"x"),l=O0(e,"y");return{fullSize:r,leftAndTop:s.concat(i),rightAndBottom:n.concat(l).concat(o).concat(a),chartArea:Ao(e,"chartArea"),vertical:s.concat(n).concat(l),horizontal:i.concat(o).concat(a)}}function L0(t,e,r,s){return Math.max(t[r],e[r])+Math.max(t[s],e[s])}function nw(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function hP(t,e,r,s){const{pos:n,box:i}=r,o=t.maxPadding;if(!Te(n)){r.size&&(t[n]-=r.size);const m=s[r.stack]||{size:0,count:1};m.size=Math.max(m.size,r.horizontal?i.height:i.width),r.size=m.size/m.count,t[n]+=r.size}i.getPadding&&nw(o,i.getPadding());const a=Math.max(0,e.outerWidth-L0(o,t,"left","right")),l=Math.max(0,e.outerHeight-L0(o,t,"top","bottom")),d=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,r.horizontal?{same:d,other:h}:{same:h,other:d}}function fP(t){const e=t.maxPadding;function r(s){const n=Math.max(e[s]-t[s],0);return t[s]+=n,n}t.y+=r("top"),t.x+=r("left"),r("right"),r("bottom")}function mP(t,e){const r=e.maxPadding;function s(n){const i={left:0,top:0,right:0,bottom:0};return n.forEach(o=>{i[o]=Math.max(e[o],r[o])}),i}return s(t?["left","right"]:["top","bottom"])}function Yo(t,e,r,s){const n=[];let i,o,a,l,d,h;for(i=0,o=t.length,d=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,mP(a.horizontal,e));const{same:m,other:p}=hP(e,r,a,s);d|=m&&n.length,h=h||p,l.fullSize||n.push(a)}return d&&Yo(n,e,r,s)||h}function Xl(t,e,r,s,n){t.top=r,t.left=e,t.right=e+s,t.bottom=r+n,t.width=s,t.height=n}function R0(t,e,r,s){const n=r.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,d=s[a.stack]||{placed:0,weight:1},h=a.stackWeight/d.weight||1;if(a.horizontal){const m=e.w*h,p=d.size||l.height;Ra(d.start)&&(o=d.start),l.fullSize?Xl(l,n.left,o,r.outerWidth-n.right-n.left,p):Xl(l,e.left+d.placed,o,m,p),d.start=o,d.placed+=m,o=l.bottom}else{const m=e.h*h,p=d.size||l.width;Ra(d.start)&&(i=d.start),l.fullSize?Xl(l,i,n.top,p,r.outerHeight-n.bottom-n.top):Xl(l,i,e.top+d.placed,p,m),d.start=i,d.placed+=m,i=l.right}}e.x=i,e.y=o}var xr={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(r){e.draw(r)}}]},t.boxes.push(e)},removeBox(t,e){const r=t.boxes?t.boxes.indexOf(e):-1;r!==-1&&t.boxes.splice(r,1)},configure(t,e,r){e.fullSize=r.fullSize,e.position=r.position,e.weight=r.weight},update(t,e,r,s){if(!t)return;const n=_r(t.options.layout.padding),i=Math.max(e-n.width,0),o=Math.max(r-n.height,0),a=dP(t.boxes),l=a.vertical,d=a.horizontal;We(t.boxes,k=>{typeof k.beforeLayout=="function"&&k.beforeLayout()});const h=l.reduce((k,w)=>w.box.options&&w.box.options.display===!1?k:k+1,0)||1,m=Object.freeze({outerWidth:e,outerHeight:r,padding:n,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/h,hBoxMaxHeight:o/2}),p=Object.assign({},n);nw(p,_r(s));const x=Object.assign({maxPadding:p,w:i,h:o,x:n.left,y:n.top},n),b=uP(l.concat(d),m);Yo(a.fullSize,x,m,b),Yo(l,x,m,b),Yo(d,x,m,b)&&Yo(l,x,m,b),fP(x),R0(a.leftAndTop,x,m,b),x.x+=x.w,x.y+=x.h,R0(a.rightAndBottom,x,m,b),t.chartArea={left:x.left,top:x.top,right:x.left+x.w,bottom:x.top+x.h,height:x.h,width:x.w},We(a.chartArea,k=>{const w=k.box;Object.assign(w,t.chartArea),w.update(x.w,x.h,{left:0,top:0,right:0,bottom:0})})}};class iw{acquireContext(e,r){}releaseContext(e){return!1}addEventListener(e,r,s){}removeEventListener(e,r,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,r,s,n){return r=Math.max(0,r||e.width),s=s||e.height,{width:r,height:Math.max(0,n?Math.floor(r/n):s)}}isAttached(e){return!0}updateConfig(e){}}class pP extends iw{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const xc="$chartjs",gP={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},A0=t=>t===null||t==="";function yP(t,e){const r=t.style,s=t.getAttribute("height"),n=t.getAttribute("width");if(t[xc]={initial:{height:s,width:n,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",A0(n)){const i=v0(t,"width");i!==void 0&&(t.width=i)}if(A0(s))if(t.style.height==="")t.height=t.width/(e||2);else{const i=v0(t,"height");i!==void 0&&(t.height=i)}return t}const ow=v4?{passive:!0}:!1;function xP(t,e,r){t&&t.addEventListener(e,r,ow)}function vP(t,e,r){t&&t.canvas&&t.canvas.removeEventListener(e,r,ow)}function bP(t,e){const r=gP[t.type]||t.type,{x:s,y:n}=In(t,e);return{type:r,chart:e,native:t,x:s!==void 0?s:null,y:n!==void 0?n:null}}function eu(t,e){for(const r of t)if(r===e||r.contains(e))return!0}function wP(t,e,r){const s=t.canvas,n=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||eu(a.addedNodes,s),o=o&&!eu(a.removedNodes,s);o&&r()});return n.observe(document,{childList:!0,subtree:!0}),n}function _P(t,e,r){const s=t.canvas,n=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||eu(a.removedNodes,s),o=o&&!eu(a.addedNodes,s);o&&r()});return n.observe(document,{childList:!0,subtree:!0}),n}const za=new Map;let I0=0;function aw(){const t=window.devicePixelRatio;t!==I0&&(I0=t,za.forEach((e,r)=>{r.currentDevicePixelRatio!==t&&e()}))}function kP(t,e){za.size||window.addEventListener("resize",aw),za.set(t,e)}function SP(t){za.delete(t),za.size||window.removeEventListener("resize",aw)}function jP(t,e,r){const s=t.canvas,n=s&&Om(s);if(!n)return;const i=Fb((a,l)=>{const d=n.clientWidth;r(a,l),d<n.clientWidth&&r()},window),o=new ResizeObserver(a=>{const l=a[0],d=l.contentRect.width,h=l.contentRect.height;d===0&&h===0||i(d,h)});return o.observe(n),kP(t,i),o}function Gd(t,e,r){r&&r.disconnect(),e==="resize"&&SP(t)}function NP(t,e,r){const s=t.canvas,n=Fb(i=>{t.ctx!==null&&r(bP(i,t))},t);return xP(s,e,n),n}class CP extends iw{acquireContext(e,r){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(yP(e,r),s):null}releaseContext(e){const r=e.canvas;if(!r[xc])return!1;const s=r[xc].initial;["height","width"].forEach(i=>{const o=s[i];ze(o)?r.removeAttribute(i):r.setAttribute(i,o)});const n=s.style||{};return Object.keys(n).forEach(i=>{r.style[i]=n[i]}),r.width=r.width,delete r[xc],!0}addEventListener(e,r,s){this.removeEventListener(e,r);const n=e.$proxies||(e.$proxies={}),o={attach:wP,detach:_P,resize:jP}[r]||NP;n[r]=o(e,r,s)}removeEventListener(e,r){const s=e.$proxies||(e.$proxies={}),n=s[r];if(!n)return;({attach:Gd,detach:Gd,resize:Gd}[r]||vP)(e,r,n),s[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,r,s,n){return x4(e,r,s,n)}isAttached(e){const r=e&&Om(e);return!!(r&&r.isConnected)}}function EP(t){return!Dm()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?pP:CP}class Ar{constructor(){ue(this,"x");ue(this,"y");ue(this,"active",!1);ue(this,"options");ue(this,"$animations")}tooltipPosition(e){const{x:r,y:s}=this.getProps(["x","y"],e);return{x:r,y:s}}hasValue(){return Aa(this.x)&&Aa(this.y)}getProps(e,r){const s=this.$animations;if(!r||!s)return this;const n={};return e.forEach(i=>{n[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),n}}ue(Ar,"defaults",{}),ue(Ar,"defaultRoutes");function MP(t,e){const r=t.options.ticks,s=TP(t),n=Math.min(r.maxTicksLimit||s,s),i=r.major.enabled?DP(e):[],o=i.length,a=i[0],l=i[o-1],d=[];if(o>n)return OP(e,d,i,o/n),d;const h=PP(i,e,n);if(o>0){let m,p;const x=o>1?Math.round((l-a)/(o-1)):null;for(Jl(e,d,h,ze(x)?0:a-x,a),m=0,p=o-1;m<p;m++)Jl(e,d,h,i[m],i[m+1]);return Jl(e,d,h,l,ze(x)?e.length:l+x),d}return Jl(e,d,h),d}function TP(t){const e=t.options.offset,r=t._tickSize(),s=t._length/r+(e?0:1),n=t._maxLength/r;return Math.floor(Math.min(s,n))}function PP(t,e,r){const s=LP(t),n=e.length/r;if(!s)return Math.max(n,1);const i=yT(s);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>n)return l}return Math.max(n,1)}function DP(t){const e=[];let r,s;for(r=0,s=t.length;r<s;r++)t[r].major&&e.push(r);return e}function OP(t,e,r,s){let n=0,i=r[0],o;for(s=Math.ceil(s),o=0;o<t.length;o++)o===i&&(e.push(t[o]),n++,i=r[n*s])}function Jl(t,e,r,s,n){const i=Ne(s,0),o=Math.min(Ne(n,t.length),t.length);let a=0,l,d,h;for(r=Math.ceil(r),n&&(l=n-s,r=l/Math.floor(l/r)),h=i;h<0;)a++,h=Math.round(i+a*r);for(d=Math.max(i,0);d<o;d++)d===h&&(e.push(t[d]),a++,h=Math.round(i+a*r))}function LP(t){const e=t.length;let r,s;if(e<2)return!1;for(s=t[0],r=1;r<e;++r)if(t[r]-t[r-1]!==s)return!1;return s}const RP=t=>t==="left"?"right":t==="right"?"left":t,$0=(t,e,r)=>e==="top"||e==="left"?t[e]+r:t[e]-r,F0=(t,e)=>Math.min(e||t,t);function z0(t,e){const r=[],s=t.length/e,n=t.length;let i=0;for(;i<n;i+=s)r.push(t[Math.floor(i)]);return r}function AP(t,e,r){const s=t.ticks.length,n=Math.min(e,s-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(n),d;if(!(r&&(s===1?d=Math.max(l-i,o-l):e===0?d=(t.getPixelForTick(1)-l)/2:d=(l-t.getPixelForTick(n-1))/2,l+=n<e?d:-d,l<i-a||l>o+a)))return l}function IP(t,e){We(t,r=>{const s=r.gc,n=s.length/2;let i;if(n>e){for(i=0;i<n;++i)delete r.data[s[i]];s.splice(0,n)}})}function $o(t){return t.drawTicks?t.tickLength:0}function W0(t,e){if(!t.display)return 0;const r=Dt(t.font,e),s=_r(t.padding);return(dt(t.text)?t.text.length:1)*r.lineHeight+s.height}function $P(t,e){return ci(t,{scale:e,type:"scale"})}function FP(t,e,r){return ci(t,{tick:r,index:e,type:"tick"})}function zP(t,e,r){let s=jm(t);return(r&&e!=="right"||!r&&e==="right")&&(s=RP(s)),s}function WP(t,e,r,s){const{top:n,left:i,bottom:o,right:a,chart:l}=t,{chartArea:d,scales:h}=l;let m=0,p,x,b;const k=o-n,w=a-i;if(t.isHorizontal()){if(x=Mt(s,i,a),Te(r)){const v=Object.keys(r)[0],_=r[v];b=h[v].getPixelForValue(_)+k-e}else r==="center"?b=(d.bottom+d.top)/2+k-e:b=$0(t,r,e);p=a-i}else{if(Te(r)){const v=Object.keys(r)[0],_=r[v];x=h[v].getPixelForValue(_)-w+e}else r==="center"?x=(d.left+d.right)/2-w+e:x=$0(t,r,e);b=Mt(s,o,n),m=r==="left"?-yt:yt}return{titleX:x,titleY:b,maxWidth:p,rotation:m}}class uo extends Ar{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,r){return e}getUserBounds(){let{_userMin:e,_userMax:r,_suggestedMin:s,_suggestedMax:n}=this;return e=zr(e,Number.POSITIVE_INFINITY),r=zr(r,Number.NEGATIVE_INFINITY),s=zr(s,Number.POSITIVE_INFINITY),n=zr(n,Number.NEGATIVE_INFINITY),{min:zr(e,s),max:zr(r,n),minDefined:Lt(e),maxDefined:Lt(r)}}getMinMax(e){let{min:r,max:s,minDefined:n,maxDefined:i}=this.getUserBounds(),o;if(n&&i)return{min:r,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,d=a.length;l<d;++l)o=a[l].controller.getMinMax(this,e),n||(r=Math.min(r,o.min)),i||(s=Math.max(s,o.max));return r=i&&r>s?s:r,s=n&&r>s?r:s,{min:zr(r,zr(s,r)),max:zr(s,zr(r,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){qe(this.options.beforeUpdate,[this])}update(e,r,s){const{beginAtZero:n,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=r,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=XT(this,i,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?z0(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=MP(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,r,s;this.isHorizontal()?(r=this.left,s=this.right):(r=this.top,s=this.bottom,e=!e),this._startPixel=r,this._endPixel=s,this._reversePixels=e,this._length=s-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){qe(this.options.afterUpdate,[this])}beforeSetDimensions(){qe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){qe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),qe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){qe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const r=this.options.ticks;let s,n,i;for(s=0,n=e.length;s<n;s++)i=e[s],i.label=qe(r.callback,[i.value,s,e],this)}afterTickToLabelConversion(){qe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){qe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,r=e.ticks,s=F0(this.ticks.length,e.ticks.maxTicksLimit),n=r.minRotation||0,i=r.maxRotation;let o=n,a,l,d;if(!this._isVisible()||!r.display||n>=i||s<=1||!this.isHorizontal()){this.labelRotation=n;return}const h=this._getLabelSizes(),m=h.widest.width,p=h.highest.height,x=Pt(this.chart.width-m,0,this.maxWidth);a=e.offset?this.maxWidth/s:x/(s-1),m+6>a&&(a=x/(s-(e.offset?.5:1)),l=this.maxHeight-$o(e.grid)-r.padding-W0(e.title,this.chart.options.font),d=Math.sqrt(m*m+p*p),o=wT(Math.min(Math.asin(Pt((h.highest.height+6)/a,-1,1)),Math.asin(Pt(l/d,-1,1))-Math.asin(Pt(p/d,-1,1)))),o=Math.max(n,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){qe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){qe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:r,options:{ticks:s,title:n,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=W0(n,r.options.font);if(a?(e.width=this.maxWidth,e.height=$o(i)+l):(e.height=this.maxHeight,e.width=$o(i)+l),s.display&&this.ticks.length){const{first:d,last:h,widest:m,highest:p}=this._getLabelSizes(),x=s.padding*2,b=vs(this.labelRotation),k=Math.cos(b),w=Math.sin(b);if(a){const v=s.mirror?0:w*m.width+k*p.height;e.height=Math.min(this.maxHeight,e.height+v+x)}else{const v=s.mirror?0:k*m.width+w*p.height;e.width=Math.min(this.maxWidth,e.width+v+x)}this._calculatePadding(d,h,w,k)}}this._handleMargins(),a?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,r,s,n){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,d=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,m=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,x=0;l?d?(p=n*e.width,x=s*r.height):(p=s*e.height,x=n*r.width):i==="start"?x=r.width:i==="end"?p=e.width:i!=="inner"&&(p=e.width/2,x=r.width/2),this.paddingLeft=Math.max((p-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((x-m+o)*this.width/(this.width-m),0)}else{let h=r.height/2,m=e.height/2;i==="start"?(h=0,m=e.height):i==="end"&&(h=r.height,m=0),this.paddingTop=h+o,this.paddingBottom=m+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){qe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:r}=this.options;return r==="top"||r==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let r,s;for(r=0,s=e.length;r<s;r++)ze(e[r].label)&&(e.splice(r,1),s--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const r=this.options.ticks.sampleSize;let s=this.ticks;r<s.length&&(s=z0(s,r)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,r,s){const{ctx:n,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(r/F0(r,s));let d=0,h=0,m,p,x,b,k,w,v,_,S,C,E;for(m=0;m<r;m+=l){if(b=e[m].label,k=this._resolveTickFontOptions(m),n.font=w=k.string,v=i[w]=i[w]||{data:{},gc:[]},_=k.lineHeight,S=C=0,!ze(b)&&!dt(b))S=m0(n,v.data,v.gc,S,b),C=_;else if(dt(b))for(p=0,x=b.length;p<x;++p)E=b[p],!ze(E)&&!dt(E)&&(S=m0(n,v.data,v.gc,S,E),C+=_);o.push(S),a.push(C),d=Math.max(S,d),h=Math.max(C,h)}IP(i,r);const D=o.indexOf(d),P=a.indexOf(h),O=B=>({width:o[B]||0,height:a[B]||0});return{first:O(0),last:O(r-1),widest:O(D),highest:O(P),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,r){return NaN}getValueForPixel(e){}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const r=this._startPixel+e*this._length;return kT(this._alignToPixels?Dn(this.chart,r,0):r)}getDecimalForPixel(e){const r=(e-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:r}=this;return e<0&&r<0?r:e>0&&r>0?e:0}getContext(e){const r=this.ticks||[];if(e>=0&&e<r.length){const s=r[e];return s.$context||(s.$context=FP(this.getContext(),e,s))}return this.$context||(this.$context=$P(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,r=vs(this.labelRotation),s=Math.abs(Math.cos(r)),n=Math.abs(Math.sin(r)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*s>a*n?a/s:l/n:l*n<a*s?l/s:a/n}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const r=this.axis,s=this.chart,n=this.options,{grid:i,position:o,border:a}=n,l=i.offset,d=this.isHorizontal(),m=this.ticks.length+(l?1:0),p=$o(i),x=[],b=a.setContext(this.getContext()),k=b.display?b.width:0,w=k/2,v=function(pe){return Dn(s,pe,k)};let _,S,C,E,D,P,O,B,M,I,H,ce;if(o==="top")_=v(this.bottom),P=this.bottom-p,B=_-w,I=v(e.top)+w,ce=e.bottom;else if(o==="bottom")_=v(this.top),I=e.top,ce=v(e.bottom)-w,P=_+w,B=this.top+p;else if(o==="left")_=v(this.right),D=this.right-p,O=_-w,M=v(e.left)+w,H=e.right;else if(o==="right")_=v(this.left),M=e.left,H=v(e.right)-w,D=_+w,O=this.left+p;else if(r==="x"){if(o==="center")_=v((e.top+e.bottom)/2+.5);else if(Te(o)){const pe=Object.keys(o)[0],_e=o[pe];_=v(this.chart.scales[pe].getPixelForValue(_e))}I=e.top,ce=e.bottom,P=_+w,B=P+p}else if(r==="y"){if(o==="center")_=v((e.left+e.right)/2);else if(Te(o)){const pe=Object.keys(o)[0],_e=o[pe];_=v(this.chart.scales[pe].getPixelForValue(_e))}D=_-w,O=D-p,M=e.left,H=e.right}const we=Ne(n.ticks.maxTicksLimit,m),de=Math.max(1,Math.ceil(m/we));for(S=0;S<m;S+=de){const pe=this.getContext(S),_e=i.setContext(pe),X=a.setContext(pe),re=_e.lineWidth,oe=_e.color,xe=X.dash||[],ve=X.dashOffset,J=_e.tickWidth,Q=_e.tickColor,U=_e.tickBorderDash||[],be=_e.tickBorderDashOffset;C=AP(this,S,l),C!==void 0&&(E=Dn(s,C,re),d?D=O=M=H=E:P=B=I=ce=E,x.push({tx1:D,ty1:P,tx2:O,ty2:B,x1:M,y1:I,x2:H,y2:ce,width:re,color:oe,borderDash:xe,borderDashOffset:ve,tickWidth:J,tickColor:Q,tickBorderDash:U,tickBorderDashOffset:be}))}return this._ticksLength=m,this._borderValue=_,x}_computeLabelItems(e){const r=this.axis,s=this.options,{position:n,ticks:i}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:d,padding:h,mirror:m}=i,p=$o(s.grid),x=p+h,b=m?-h:x,k=-vs(this.labelRotation),w=[];let v,_,S,C,E,D,P,O,B,M,I,H,ce="middle";if(n==="top")D=this.bottom-b,P=this._getXAxisLabelAlignment();else if(n==="bottom")D=this.top+b,P=this._getXAxisLabelAlignment();else if(n==="left"){const de=this._getYAxisLabelAlignment(p);P=de.textAlign,E=de.x}else if(n==="right"){const de=this._getYAxisLabelAlignment(p);P=de.textAlign,E=de.x}else if(r==="x"){if(n==="center")D=(e.top+e.bottom)/2+x;else if(Te(n)){const de=Object.keys(n)[0],pe=n[de];D=this.chart.scales[de].getPixelForValue(pe)+x}P=this._getXAxisLabelAlignment()}else if(r==="y"){if(n==="center")E=(e.left+e.right)/2-x;else if(Te(n)){const de=Object.keys(n)[0],pe=n[de];E=this.chart.scales[de].getPixelForValue(pe)}P=this._getYAxisLabelAlignment(p).textAlign}r==="y"&&(l==="start"?ce="top":l==="end"&&(ce="bottom"));const we=this._getLabelSizes();for(v=0,_=a.length;v<_;++v){S=a[v],C=S.label;const de=i.setContext(this.getContext(v));O=this.getPixelForTick(v)+i.labelOffset,B=this._resolveTickFontOptions(v),M=B.lineHeight,I=dt(C)?C.length:1;const pe=I/2,_e=de.color,X=de.textStrokeColor,re=de.textStrokeWidth;let oe=P;o?(E=O,P==="inner"&&(v===_-1?oe=this.options.reverse?"left":"right":v===0?oe=this.options.reverse?"right":"left":oe="center"),n==="top"?d==="near"||k!==0?H=-I*M+M/2:d==="center"?H=-we.highest.height/2-pe*M+M:H=-we.highest.height+M/2:d==="near"||k!==0?H=M/2:d==="center"?H=we.highest.height/2-pe*M:H=we.highest.height-I*M,m&&(H*=-1),k!==0&&!de.showLabelBackdrop&&(E+=M/2*Math.sin(k))):(D=O,H=(1-I)*M/2);let xe;if(de.showLabelBackdrop){const ve=_r(de.backdropPadding),J=we.heights[v],Q=we.widths[v];let U=H-ve.top,be=0-ve.left;switch(ce){case"middle":U-=J/2;break;case"bottom":U-=J;break}switch(P){case"center":be-=Q/2;break;case"right":be-=Q;break;case"inner":v===_-1?be-=Q:v>0&&(be-=Q/2);break}xe={left:be,top:U,width:Q+ve.width,height:J+ve.height,color:de.backdropColor}}w.push({label:C,font:B,textOffset:H,options:{rotation:k,color:_e,strokeColor:X,strokeWidth:re,textAlign:oe,textBaseline:ce,translation:[E,D],backdrop:xe}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:r}=this.options;if(-vs(this.labelRotation))return e==="top"?"left":"right";let n="center";return r.align==="start"?n="left":r.align==="end"?n="right":r.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:r,ticks:{crossAlign:s,mirror:n,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let d,h;return r==="left"?n?(h=this.right+i,s==="near"?d="left":s==="center"?(d="center",h+=l/2):(d="right",h+=l)):(h=this.right-a,s==="near"?d="right":s==="center"?(d="center",h-=l/2):(d="left",h=this.left)):r==="right"?n?(h=this.left+i,s==="near"?d="right":s==="center"?(d="center",h-=l/2):(d="left",h-=l)):(h=this.left+a,s==="near"?d="left":s==="center"?(d="center",h+=l/2):(d="right",h=this.right)):d="right",{textAlign:d,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:r},left:s,top:n,width:i,height:o}=this;r&&(e.save(),e.fillStyle=r,e.fillRect(s,n,i,o),e.restore())}getLineWidthForValue(e){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const n=this.ticks.findIndex(i=>i.value===e);return n>=0?r.setContext(this.getContext(n)).lineWidth:0}drawGrid(e){const r=this.options.grid,s=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,d,h)=>{!h.width||!h.color||(s.save(),s.lineWidth=h.width,s.strokeStyle=h.color,s.setLineDash(h.borderDash||[]),s.lineDashOffset=h.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(d.x,d.y),s.stroke(),s.restore())};if(r.display)for(i=0,o=n.length;i<o;++i){const l=n[i];r.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),r.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:r,options:{border:s,grid:n}}=this,i=s.setContext(this.getContext()),o=s.display?i.width:0;if(!o)return;const a=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let d,h,m,p;this.isHorizontal()?(d=Dn(e,this.left,o)-o/2,h=Dn(e,this.right,a)+a/2,m=p=l):(m=Dn(e,this.top,o)-o/2,p=Dn(e,this.bottom,a)+a/2,d=h=l),r.save(),r.lineWidth=i.width,r.strokeStyle=i.color,r.beginPath(),r.moveTo(d,m),r.lineTo(h,p),r.stroke(),r.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,n=this._computeLabelArea();n&&Du(s,n);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,d=o.label,h=o.textOffset;Fa(s,d,0,h,l,a)}n&&Ou(s)}drawTitle(){const{ctx:e,options:{position:r,title:s,reverse:n}}=this;if(!s.display)return;const i=Dt(s.font),o=_r(s.padding),a=s.align;let l=i.lineHeight/2;r==="bottom"||r==="center"||Te(r)?(l+=o.bottom,dt(s.text)&&(l+=i.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:d,titleY:h,maxWidth:m,rotation:p}=WP(this,l,r,a);Fa(e,s.text,0,0,i,{color:s.color,maxWidth:m,rotation:p,textAlign:zP(a,r,n),textBaseline:"middle",translation:[d,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,r=e.ticks&&e.ticks.z||0,s=Ne(e.grid&&e.grid.z,-1),n=Ne(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==uo.prototype.draw?[{z:r,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:r,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const r=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",n=[];let i,o;for(i=0,o=r.length;i<o;++i){const a=r[i];a[s]===this.id&&(!e||a.type===e)&&n.push(a)}return n}_resolveTickFontOptions(e){const r=this.options.ticks.setContext(this.getContext(e));return Dt(r.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ql{constructor(e,r,s){this.type=e,this.scope=r,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const r=Object.getPrototypeOf(e);let s;HP(r)&&(s=this.register(r));const n=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in n||(n[i]=e,BP(e,o,s),this.override&&ct.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const r=this.items,s=e.id,n=this.scope;s in r&&delete r[s],n&&s in ct[n]&&(delete ct[n][s],this.override&&delete ri[s])}}function BP(t,e,r){const s=La(Object.create(null),[r?ct.get(r):{},ct.get(e),t.defaults]);ct.set(e,s),t.defaultRoutes&&UP(e,t.defaultRoutes),t.descriptors&&ct.describe(e,t.descriptors)}function UP(t,e){Object.keys(e).forEach(r=>{const s=r.split("."),n=s.pop(),i=[t].concat(s).join("."),o=e[r].split("."),a=o.pop(),l=o.join(".");ct.route(i,n,l,a)})}function HP(t){return"id"in t&&"defaults"in t}class VP{constructor(){this.controllers=new Ql(Kn,"datasets",!0),this.elements=new Ql(Ar,"elements"),this.plugins=new Ql(Object,"plugins"),this.scales=new Ql(uo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,r,s){[...r].forEach(n=>{const i=s||this._getRegistryForType(n);s||i.isForType(n)||i===this.plugins&&n.id?this._exec(e,i,n):We(n,o=>{const a=s||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,r,s){const n=km(e);qe(s["before"+n],[],s),r[e](s),qe(s["after"+n],[],s)}_getRegistryForType(e){for(let r=0;r<this._typedRegistries.length;r++){const s=this._typedRegistries[r];if(s.isForType(e))return s}return this.plugins}_get(e,r,s){const n=r.get(e);if(n===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return n}}var Hr=new VP;class YP{constructor(){this._init=[]}notify(e,r,s,n){r==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=n?this._descriptors(e).filter(n):this._descriptors(e),o=this._notify(i,e,r,s);return r==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,r,s,n){n=n||{};for(const i of e){const o=i.plugin,a=o[s],l=[r,n,i.options];if(qe(a,l,o)===!1&&n.cancelable)return!1}return!0}invalidate(){ze(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),r}_createDescriptors(e,r){const s=e&&e.config,n=Ne(s.options&&s.options.plugins,{}),i=GP(s);return n===!1&&!r?[]:KP(e,i,n,r)}_notifyStateChanges(e){const r=this._oldCache||[],s=this._cache,n=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(n(r,s),e,"stop"),this._notify(n(s,r),e,"start")}}function GP(t){const e={},r=[],s=Object.keys(Hr.plugins.items);for(let i=0;i<s.length;i++)r.push(Hr.getPlugin(s[i]));const n=t.plugins||[];for(let i=0;i<n.length;i++){const o=n[i];r.indexOf(o)===-1&&(r.push(o),e[o.id]=!0)}return{plugins:r,localIds:e}}function qP(t,e){return!e&&t===!1?null:t===!0?{}:t}function KP(t,{plugins:e,localIds:r},s,n){const i=[],o=t.getContext();for(const a of e){const l=a.id,d=qP(s[l],n);d!==null&&i.push({plugin:a,options:XP(t.config,{plugin:a,local:r[l]},d,o)})}return i}function XP(t,{plugin:e,local:r},s,n){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(s,i);return r&&e.defaults&&o.push(e.defaults),t.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function uf(t,e){const r=ct.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||r.indexAxis||"x"}function JP(t,e){let r=t;return t==="_index_"?r=e:t==="_value_"&&(r=e==="x"?"y":"x"),r}function QP(t,e){return t===e?"_index_":"_value_"}function B0(t){if(t==="x"||t==="y"||t==="r")return t}function ZP(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function df(t,...e){if(B0(t))return t;for(const r of e){const s=r.axis||ZP(r.position)||t.length>1&&B0(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function U0(t,e,r){if(r[e+"AxisID"]===t)return{axis:e}}function eD(t,e){if(e.data&&e.data.datasets){const r=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(r.length)return U0(t,"x",r[0])||U0(t,"y",r[0])}return{}}function tD(t,e){const r=ri[t.type]||{scales:{}},s=e.scales||{},n=uf(t.type,e),i=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!Te(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=df(o,a,eD(o,t),ct.scales[a.type]),d=QP(l,n),h=r.scales||{};i[o]=aa(Object.create(null),[{axis:l},a,h[l],h[d]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||uf(a,e),h=(ri[a]||{}).scales||{};Object.keys(h).forEach(m=>{const p=JP(m,l),x=o[p+"AxisID"]||p;i[x]=i[x]||Object.create(null),aa(i[x],[{axis:p},s[x],h[m]])})}),Object.keys(i).forEach(o=>{const a=i[o];aa(a,[ct.scales[a.type],ct.scale])}),i}function lw(t){const e=t.options||(t.options={});e.plugins=Ne(e.plugins,{}),e.scales=tD(t,e)}function cw(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function rD(t){return t=t||{},t.data=cw(t.data),lw(t),t}const H0=new Map,uw=new Set;function Zl(t,e){let r=H0.get(t);return r||(r=e(),H0.set(t,r),uw.add(r)),r}const Fo=(t,e,r)=>{const s=ti(e,r);s!==void 0&&t.add(s)};class sD{constructor(e){this._config=rD(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=cw(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),lw(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Zl(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,r){return Zl(`${e}.transition.${r}`,()=>[[`datasets.${e}.transitions.${r}`,`transitions.${r}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,r){return Zl(`${e}-${r}`,()=>[[`datasets.${e}.elements.${r}`,`datasets.${e}`,`elements.${r}`,""]])}pluginScopeKeys(e){const r=e.id,s=this.type;return Zl(`${s}-plugin-${r}`,()=>[[`plugins.${r}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,r){const s=this._scopeCache;let n=s.get(e);return(!n||r)&&(n=new Map,s.set(e,n)),n}getOptionScopes(e,r,s){const{options:n,type:i}=this,o=this._cachedScopes(e,s),a=o.get(r);if(a)return a;const l=new Set;r.forEach(h=>{e&&(l.add(e),h.forEach(m=>Fo(l,e,m))),h.forEach(m=>Fo(l,n,m)),h.forEach(m=>Fo(l,ri[i]||{},m)),h.forEach(m=>Fo(l,ct,m)),h.forEach(m=>Fo(l,af,m))});const d=Array.from(l);return d.length===0&&d.push(Object.create(null)),uw.has(r)&&o.set(r,d),d}chartOptionScopes(){const{options:e,type:r}=this;return[e,ri[r]||{},ct.datasets[r]||{},{type:r},ct,af]}resolveNamedOptions(e,r,s,n=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=V0(this._resolverCache,e,n);let l=o;if(iD(o,r)){i.$shared=!1,s=gn(s)?s():s;const d=this.createResolver(e,s,a);l=ro(o,s,d)}for(const d of r)i[d]=l[d];return i}createResolver(e,r,s=[""],n){const{resolver:i}=V0(this._resolverCache,e,s);return Te(r)?ro(i,r,void 0,n):i}}function V0(t,e,r){let s=t.get(e);s||(s=new Map,t.set(e,s));const n=r.join();let i=s.get(n);return i||(i={resolver:Mm(e,r),subPrefixes:r.filter(a=>!a.toLowerCase().includes("hover"))},s.set(n,i)),i}const nD=t=>Te(t)&&Object.getOwnPropertyNames(t).some(e=>gn(t[e]));function iD(t,e){const{isScriptable:r,isIndexable:s}=Ub(t);for(const n of e){const i=r(n),o=s(n),a=(o||i)&&t[n];if(i&&(gn(a)||nD(a))||o&&dt(a))return!0}return!1}var oD="4.4.9";const aD=["top","bottom","left","right","chartArea"];function Y0(t,e){return t==="top"||t==="bottom"||aD.indexOf(t)===-1&&e==="x"}function G0(t,e){return function(r,s){return r[t]===s[t]?r[e]-s[e]:r[t]-s[t]}}function q0(t){const e=t.chart,r=e.options.animation;e.notifyPlugins("afterRender"),qe(r&&r.onComplete,[t],e)}function lD(t){const e=t.chart,r=e.options.animation;qe(r&&r.onProgress,[t],e)}function dw(t){return Dm()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const vc={},K0=t=>{const e=dw(t);return Object.values(vc).filter(r=>r.canvas===e).pop()};function cD(t,e,r){const s=Object.keys(t);for(const n of s){const i=+n;if(i>=e){const o=t[n];delete t[n],(r>0||i>e)&&(t[i+r]=o)}}}function uD(t,e,r,s){return!r||t.type==="mouseout"?null:s?e:t}var Bs;let ho=(Bs=class{static register(...e){Hr.add(...e),X0()}static unregister(...e){Hr.remove(...e),X0()}constructor(e,r){const s=this.config=new sD(r),n=dw(e),i=K0(n);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||EP(n)),this.platform.updateConfig(s);const a=this.platform.acquireContext(n,o.aspectRatio),l=a&&a.canvas,d=l&&l.height,h=l&&l.width;if(this.id=lT(),this.ctx=a,this.canvas=l,this.width=h,this.height=d,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new YP,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=CT(m=>this.update(m),o.resizeDelay||0),this._dataChanges=[],vc[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ds.listen(this,"complete",q0),ds.listen(this,"progress",lD),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:r},width:s,height:n,_aspectRatio:i}=this;return ze(e)?r&&i?i:n?s/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Hr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():x0(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return p0(this.canvas,this.ctx),this}stop(){return ds.stop(this),this}resize(e,r){ds.running(this)?this._resizeBeforeDraw={width:e,height:r}:this._resize(e,r)}_resize(e,r){const s=this.options,n=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(n,e,r,i),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,x0(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),qe(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};We(r,(s,n)=>{s.id=n})}buildOrUpdateScales(){const e=this.options,r=e.scales,s=this.scales,n=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let i=[];r&&(i=i.concat(Object.keys(r).map(o=>{const a=r[o],l=df(o,a),d=l==="r",h=l==="x";return{options:a,dposition:d?"chartArea":h?"bottom":"left",dtype:d?"radialLinear":h?"category":"linear"}}))),We(i,o=>{const a=o.options,l=a.id,d=df(l,a),h=Ne(a.type,o.dtype);(a.position===void 0||Y0(a.position,d)!==Y0(o.dposition))&&(a.position=o.dposition),n[l]=!0;let m=null;if(l in s&&s[l].type===h)m=s[l];else{const p=Hr.getScale(h);m=new p({id:l,type:h,ctx:this.ctx,chart:this}),s[m.id]=m}m.init(a,e)}),We(n,(o,a)=>{o||delete s[a]}),We(s,o=>{xr.configure(this,o,o.options),xr.addBox(this,o)})}_updateMetasets(){const e=this._metasets,r=this.data.datasets.length,s=e.length;if(e.sort((n,i)=>n.index-i.index),s>r){for(let n=r;n<s;++n)this._destroyDatasetMeta(n);e.splice(r,s-r)}this._sortedMetasets=e.slice(0).sort(G0("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:r}}=this;e.length>r.length&&delete this._stacks,e.forEach((s,n)=>{r.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],r=this.data.datasets;let s,n;for(this._removeUnreferencedMetasets(),s=0,n=r.length;s<n;s++){const i=r[s];let o=this.getDatasetMeta(s);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=i.indexAxis||uf(a,this.options),o.order=i.order||0,o.index=s,o.label=""+i.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=Hr.getController(a),{datasetElementType:d,dataElementType:h}=ct.datasets[a];Object.assign(l,{dataElementType:Hr.getElement(h),datasetElementType:d&&Hr.getElement(d)}),o.controller=new l(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){We(this.data.datasets,(e,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const r=this.config;r.update();const s=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let d=0,h=this.data.datasets.length;d<h;d++){const{controller:m}=this.getDatasetMeta(d),p=!n&&i.indexOf(m)===-1;m.buildOrUpdateElements(p),o=Math.max(+m.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),n||We(i,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(G0("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){We(this.scales,e=>{xr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,r=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!i0(r,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,r=this._getUniformDataChanges()||[];for(const{method:s,start:n,count:i}of r){const o=s==="_removeElements"?-i:i;cD(e,n,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const r=this.data.datasets.length,s=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),n=s(0);for(let i=1;i<r;i++)if(!i0(n,s(i)))return;return Array.from(n).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;xr.update(this,this.width,this.height,e);const r=this.chartArea,s=r.width<=0||r.height<=0;this._layers=[],We(this.boxes,n=>{s&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,i)=>{n._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let r=0,s=this.data.datasets.length;r<s;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,s=this.data.datasets.length;r<s;++r)this._updateDataset(r,gn(e)?e({datasetIndex:r}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,r){const s=this.getDatasetMeta(e),n={meta:s,index:e,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(s.controller._update(r),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ds.has(this)?this.attached&&!ds.running(this)&&ds.start(this):(this.draw(),q0({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(e=0;e<r.length&&r[e].z<=0;++e)r[e].draw(this.chartArea);for(this._drawDatasets();e<r.length;++e)r[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const r=this._sortedMetasets,s=[];let n,i;for(n=0,i=r.length;n<i;++n){const o=r[n];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let r=e.length-1;r>=0;--r)this._drawDataset(e[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const r=this.ctx,s={meta:e,index:e.index,cancelable:!0},n=Zb(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(n&&Du(r,n),e.controller.draw(),n&&Ou(r),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return $a(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,r,s,n){const i=aP.modes[r];return typeof i=="function"?i(this,e,s,n):[]}getDatasetMeta(e){const r=this.data.datasets[e],s=this._metasets;let n=s.filter(i=>i&&i._dataset===r).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:e,_dataset:r,_parsed:[],_sorted:!1},s.push(n)),n}getContext(){return this.$context||(this.$context=ci(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const r=this.data.datasets[e];if(!r)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!r.hidden}setDatasetVisibility(e,r){const s=this.getDatasetMeta(e);s.hidden=!r}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,r,s){const n=s?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,n);Ra(r)?(i.data[r].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(i,{visible:s}),this.update(a=>a.datasetIndex===e?n:void 0))}hide(e,r){this._updateVisibility(e,r,!1)}show(e,r){this._updateVisibility(e,r,!0)}_destroyDatasetMeta(e){const r=this._metasets[e];r&&r.controller&&r.controller._destroy(),delete this._metasets[e]}_stop(){let e,r;for(this.stop(),ds.remove(this),e=0,r=this.data.datasets.length;e<r;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:r}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),p0(e,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete vc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,r=this.platform,s=(i,o)=>{r.addEventListener(this,i,o),e[i]=o},n=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};We(this.options.events,i=>s(i,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,r=this.platform,s=(l,d)=>{r.addEventListener(this,l,d),e[l]=d},n=(l,d)=>{e[l]&&(r.removeEventListener(this,l,d),delete e[l])},i=(l,d)=>{this.canvas&&this.resize(l,d)};let o;const a=()=>{n("attach",a),this.attached=!0,this.resize(),s("resize",i),s("detach",o)};o=()=>{this.attached=!1,n("resize",i),this._stop(),this._resize(0,0),s("attach",a)},r.isAttached(this.canvas)?a():o()}unbindEvents(){We(this._listeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._listeners={},We(this._responsiveListeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,r,s){const n=s?"set":"remove";let i,o,a,l;for(r==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+n+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const d=o&&this.getDatasetMeta(o.datasetIndex).controller;d&&d[n+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const r=this._active||[],s=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!Kc(s,r)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,r))}notifyPlugins(e,r,s){return this._plugins.notify(this,e,r,s)}isPluginEnabled(e){return this._plugins._cache.filter(r=>r.plugin.id===e).length===1}_updateHoverStyles(e,r,s){const n=this.options.hover,i=(l,d)=>l.filter(h=>!d.some(m=>h.datasetIndex===m.datasetIndex&&h.index===m.index)),o=i(r,e),a=s?e:i(e,r);o.length&&this.updateHoverStyle(o,n.mode,!1),a.length&&n.mode&&this.updateHoverStyle(a,n.mode,!0)}_eventHandler(e,r){const s={event:e,replay:r,cancelable:!0,inChartArea:this.isPointInArea(e)},n=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,n)===!1)return;const i=this._handleEvent(e,r,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,n),(i||s.changed)&&this.render(),this}_handleEvent(e,r,s){const{_active:n=[],options:i}=this,o=r,a=this._getActiveElements(e,n,s,o),l=mT(e),d=uD(e,this._lastEvent,s,l);s&&(this._lastEvent=null,qe(i.onHover,[e,a,this],this),l&&qe(i.onClick,[e,a,this],this));const h=!Kc(a,n);return(h||r)&&(this._active=a,this._updateHoverStyles(a,n,r)),this._lastEvent=d,h}_getActiveElements(e,r,s,n){if(e.type==="mouseout")return[];if(!s)return r;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,n)}},ue(Bs,"defaults",ct),ue(Bs,"instances",vc),ue(Bs,"overrides",ri),ue(Bs,"registry",Hr),ue(Bs,"version",oD),ue(Bs,"getChart",K0),Bs);function X0(){return We(ho.instances,t=>t._plugins.invalidate())}function dD(t,e,r){const{startAngle:s,pixelMargin:n,x:i,y:o,outerRadius:a,innerRadius:l}=e;let d=n/a;t.beginPath(),t.arc(i,o,a,s-d,r+d),l>n?(d=n/l,t.arc(i,o,l,r+d,s-d,!0)):t.arc(i,o,n,r+yt,s-yt),t.closePath(),t.clip()}function hD(t){return Em(t,["outerStart","outerEnd","innerStart","innerEnd"])}function fD(t,e,r,s){const n=hD(t.options.borderRadius),i=(r-e)/2,o=Math.min(i,s*e/2),a=l=>{const d=(r-Math.min(i,l))*s/2;return Pt(l,0,Math.min(i,d))};return{outerStart:a(n.outerStart),outerEnd:a(n.outerEnd),innerStart:Pt(n.innerStart,0,o),innerEnd:Pt(n.innerEnd,0,o)}}function _i(t,e,r,s){return{x:r+t*Math.cos(e),y:s+t*Math.sin(e)}}function tu(t,e,r,s,n,i){const{x:o,y:a,startAngle:l,pixelMargin:d,innerRadius:h}=e,m=Math.max(e.outerRadius+s+r-d,0),p=h>0?h+s+r+d:0;let x=0;const b=n-l;if(s){const de=h>0?h-s:0,pe=m>0?m-s:0,_e=(de+pe)/2,X=_e!==0?b*_e/(_e+s):b;x=(b-X)/2}const k=Math.max(.001,b*m-r/ot)/m,w=(b-k)/2,v=l+w+x,_=n-w-x,{outerStart:S,outerEnd:C,innerStart:E,innerEnd:D}=fD(e,p,m,_-v),P=m-S,O=m-C,B=v+S/P,M=_-C/O,I=p+E,H=p+D,ce=v+E/I,we=_-D/H;if(t.beginPath(),i){const de=(B+M)/2;if(t.arc(o,a,m,B,de),t.arc(o,a,m,de,M),C>0){const re=_i(O,M,o,a);t.arc(re.x,re.y,C,M,_+yt)}const pe=_i(H,_,o,a);if(t.lineTo(pe.x,pe.y),D>0){const re=_i(H,we,o,a);t.arc(re.x,re.y,D,_+yt,we+Math.PI)}const _e=(_-D/p+(v+E/p))/2;if(t.arc(o,a,p,_-D/p,_e,!0),t.arc(o,a,p,_e,v+E/p,!0),E>0){const re=_i(I,ce,o,a);t.arc(re.x,re.y,E,ce+Math.PI,v-yt)}const X=_i(P,v,o,a);if(t.lineTo(X.x,X.y),S>0){const re=_i(P,B,o,a);t.arc(re.x,re.y,S,v-yt,B)}}else{t.moveTo(o,a);const de=Math.cos(B)*m+o,pe=Math.sin(B)*m+a;t.lineTo(de,pe);const _e=Math.cos(M)*m+o,X=Math.sin(M)*m+a;t.lineTo(_e,X)}t.closePath()}function mD(t,e,r,s,n){const{fullCircles:i,startAngle:o,circumference:a}=e;let l=e.endAngle;if(i){tu(t,e,r,s,l,n);for(let d=0;d<i;++d)t.fill();isNaN(a)||(l=o+(a%Ze||Ze))}return tu(t,e,r,s,l,n),t.fill(),l}function pD(t,e,r,s,n){const{fullCircles:i,startAngle:o,circumference:a,options:l}=e,{borderWidth:d,borderJoinStyle:h,borderDash:m,borderDashOffset:p}=l,x=l.borderAlign==="inner";if(!d)return;t.setLineDash(m||[]),t.lineDashOffset=p,x?(t.lineWidth=d*2,t.lineJoin=h||"round"):(t.lineWidth=d,t.lineJoin=h||"bevel");let b=e.endAngle;if(i){tu(t,e,r,s,b,n);for(let k=0;k<i;++k)t.stroke();isNaN(a)||(b=o+(a%Ze||Ze))}x&&dD(t,e,b),i||(tu(t,e,r,s,b,n),t.stroke())}class Vn extends Ar{constructor(r){super();ue(this,"circumference");ue(this,"endAngle");ue(this,"fullCircles");ue(this,"innerRadius");ue(this,"outerRadius");ue(this,"pixelMargin");ue(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,r&&Object.assign(this,r)}inRange(r,s,n){const i=this.getProps(["x","y"],n),{angle:o,distance:a}=Rb(i,{x:r,y:s}),{startAngle:l,endAngle:d,innerRadius:h,outerRadius:m,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),x=(this.options.spacing+this.options.borderWidth)/2,b=Ne(p,d-l),k=Ia(o,l,d)&&l!==d,w=b>=Ze||k,v=bs(a,h+x,m+x);return w&&v}getCenterPoint(r){const{x:s,y:n,startAngle:i,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],r),{offset:d,spacing:h}=this.options,m=(i+o)/2,p=(a+l+h+d)/2;return{x:s+Math.cos(m)*p,y:n+Math.sin(m)*p}}tooltipPosition(r){return this.getCenterPoint(r)}draw(r){const{options:s,circumference:n}=this,i=(s.offset||0)/4,o=(s.spacing||0)/2,a=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=n>Ze?Math.floor(n/Ze):0,n===0||this.innerRadius<0||this.outerRadius<0)return;r.save();const l=(this.startAngle+this.endAngle)/2;r.translate(Math.cos(l)*i,Math.sin(l)*i);const d=1-Math.sin(Math.min(ot,n||0)),h=i*d;r.fillStyle=s.backgroundColor,r.strokeStyle=s.borderColor,mD(r,this,h,o,a),pD(r,this,h,o,a),r.restore()}}ue(Vn,"id","arc"),ue(Vn,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),ue(Vn,"defaultRoutes",{backgroundColor:"backgroundColor"}),ue(Vn,"descriptors",{_scriptable:!0,_indexable:r=>r!=="borderDash"});function hw(t,e,r=e){t.lineCap=Ne(r.borderCapStyle,e.borderCapStyle),t.setLineDash(Ne(r.borderDash,e.borderDash)),t.lineDashOffset=Ne(r.borderDashOffset,e.borderDashOffset),t.lineJoin=Ne(r.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Ne(r.borderWidth,e.borderWidth),t.strokeStyle=Ne(r.borderColor,e.borderColor)}function gD(t,e,r){t.lineTo(r.x,r.y)}function yD(t){return t.stepped?WT:t.tension||t.cubicInterpolationMode==="monotone"?BT:gD}function fw(t,e,r={}){const s=t.length,{start:n=0,end:i=s-1}=r,{start:o,end:a}=e,l=Math.max(n,o),d=Math.min(i,a),h=n<o&&i<o||n>a&&i>a;return{count:s,start:l,loop:e.loop,ilen:d<l&&!h?s+d-l:d-l}}function xD(t,e,r,s){const{points:n,options:i}=e,{count:o,start:a,loop:l,ilen:d}=fw(n,r,s),h=yD(i);let{move:m=!0,reverse:p}=s||{},x,b,k;for(x=0;x<=d;++x)b=n[(a+(p?d-x:x))%o],!b.skip&&(m?(t.moveTo(b.x,b.y),m=!1):h(t,k,b,p,i.stepped),k=b);return l&&(b=n[(a+(p?d:0))%o],h(t,k,b,p,i.stepped)),!!l}function vD(t,e,r,s){const n=e.points,{count:i,start:o,ilen:a}=fw(n,r,s),{move:l=!0,reverse:d}=s||{};let h=0,m=0,p,x,b,k,w,v;const _=C=>(o+(d?a-C:C))%i,S=()=>{k!==w&&(t.lineTo(h,w),t.lineTo(h,k),t.lineTo(h,v))};for(l&&(x=n[_(0)],t.moveTo(x.x,x.y)),p=0;p<=a;++p){if(x=n[_(p)],x.skip)continue;const C=x.x,E=x.y,D=C|0;D===b?(E<k?k=E:E>w&&(w=E),h=(m*h+C)/++m):(S(),t.lineTo(C,E),b=D,m=0,k=w=E),v=E}S()}function hf(t){const e=t.options,r=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!r?vD:xD}function bD(t){return t.stepped?b4:t.tension||t.cubicInterpolationMode==="monotone"?w4:$n}function wD(t,e,r,s){let n=e._path;n||(n=e._path=new Path2D,e.path(n,r,s)&&n.closePath()),hw(t,e.options),t.stroke(n)}function _D(t,e,r,s){const{segments:n,options:i}=e,o=hf(e);for(const a of n)hw(t,i,a.style),t.beginPath(),o(t,e,a,{start:r,end:r+s-1})&&t.closePath(),t.stroke()}const kD=typeof Path2D=="function";function SD(t,e,r,s){kD&&!e.options.segment?wD(t,e,r,s):_D(t,e,r,s)}class ws extends Ar{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,r){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const n=s.spanGaps?this._loop:this._fullLoop;h4(this._points,s,e,n,r),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=C4(this,this.options.segment))}first(){const e=this.segments,r=this.points;return e.length&&r[e[0].start]}last(){const e=this.segments,r=this.points,s=e.length;return s&&r[e[s-1].end]}interpolate(e,r){const s=this.options,n=e[r],i=this.points,o=Qb(this,{property:r,start:n,end:n});if(!o.length)return;const a=[],l=bD(s);let d,h;for(d=0,h=o.length;d<h;++d){const{start:m,end:p}=o[d],x=i[m],b=i[p];if(x===b){a.push(x);continue}const k=Math.abs((n-x[r])/(b[r]-x[r])),w=l(x,b,k,s.stepped);w[r]=e[r],a.push(w)}return a.length===1?a[0]:a}pathSegment(e,r,s){return hf(this)(e,this,r,s)}path(e,r,s){const n=this.segments,i=hf(this);let o=this._loop;r=r||0,s=s||this.points.length-r;for(const a of n)o&=i(e,this,a,{start:r,end:r+s-1});return!!o}draw(e,r,s,n){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),SD(e,this,s,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ue(ws,"id","line"),ue(ws,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ue(ws,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ue(ws,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function J0(t,e,r,s){const n=t.options,{[r]:i}=t.getProps([r],s);return Math.abs(e-i)<n.radius+n.hitRadius}class da extends Ar{constructor(r){super();ue(this,"parsed");ue(this,"skip");ue(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,r&&Object.assign(this,r)}inRange(r,s,n){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],n);return Math.pow(r-o,2)+Math.pow(s-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(r,s){return J0(this,r,"x",s)}inYRange(r,s){return J0(this,r,"y",s)}getCenterPoint(r){const{x:s,y:n}=this.getProps(["x","y"],r);return{x:s,y:n}}size(r){r=r||this.options||{};let s=r.radius||0;s=Math.max(s,s&&r.hoverRadius||0);const n=s&&r.borderWidth||0;return(s+n)*2}draw(r,s){const n=this.options;this.skip||n.radius<.1||!$a(this,s,this.size(n)/2)||(r.strokeStyle=n.borderColor,r.lineWidth=n.borderWidth,r.fillStyle=n.backgroundColor,lf(r,n,this.x,this.y))}getRange(){const r=this.options||{};return r.radius+r.hitRadius}}ue(da,"id","point"),ue(da,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ue(da,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function mw(t,e){const{x:r,y:s,base:n,width:i,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,d,h,m;return t.horizontal?(m=o/2,a=Math.min(r,n),l=Math.max(r,n),d=s-m,h=s+m):(m=i/2,a=r-m,l=r+m,d=Math.min(s,n),h=Math.max(s,n)),{left:a,top:d,right:l,bottom:h}}function rn(t,e,r,s){return t?0:Pt(e,r,s)}function jD(t,e,r){const s=t.options.borderWidth,n=t.borderSkipped,i=Bb(s);return{t:rn(n.top,i.top,0,r),r:rn(n.right,i.right,0,e),b:rn(n.bottom,i.bottom,0,r),l:rn(n.left,i.left,0,e)}}function ND(t,e,r){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),n=t.options.borderRadius,i=Hi(n),o=Math.min(e,r),a=t.borderSkipped,l=s||Te(n);return{topLeft:rn(!l||a.top||a.left,i.topLeft,0,o),topRight:rn(!l||a.top||a.right,i.topRight,0,o),bottomLeft:rn(!l||a.bottom||a.left,i.bottomLeft,0,o),bottomRight:rn(!l||a.bottom||a.right,i.bottomRight,0,o)}}function CD(t){const e=mw(t),r=e.right-e.left,s=e.bottom-e.top,n=jD(t,r/2,s/2),i=ND(t,r/2,s/2);return{outer:{x:e.left,y:e.top,w:r,h:s,radius:i},inner:{x:e.left+n.l,y:e.top+n.t,w:r-n.l-n.r,h:s-n.t-n.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,i.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(n.b,n.r))}}}}function qd(t,e,r,s){const n=e===null,i=r===null,a=t&&!(n&&i)&&mw(t,s);return a&&(n||bs(e,a.left,a.right))&&(i||bs(r,a.top,a.bottom))}function ED(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function MD(t,e){t.rect(e.x,e.y,e.w,e.h)}function Kd(t,e,r={}){const s=t.x!==r.x?-e:0,n=t.y!==r.y?-e:0,i=(t.x+t.w!==r.x+r.w?e:0)-s,o=(t.y+t.h!==r.y+r.h?e:0)-n;return{x:t.x+s,y:t.y+n,w:t.w+i,h:t.h+o,radius:t.radius}}class ha extends Ar{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:r,options:{borderColor:s,backgroundColor:n}}=this,{inner:i,outer:o}=CD(this),a=ED(o.radius)?Qc:MD;e.save(),(o.w!==i.w||o.h!==i.h)&&(e.beginPath(),a(e,Kd(o,r,i)),e.clip(),a(e,Kd(i,-r,o)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),a(e,Kd(i,r)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,r,s){return qd(this,e,r,s)}inXRange(e,r){return qd(this,e,null,r)}inYRange(e,r){return qd(this,null,e,r)}getCenterPoint(e){const{x:r,y:s,base:n,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(r+n)/2:r,y:i?s:(s+n)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}ue(ha,"id","bar"),ue(ha,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ue(ha,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function TD(t,e,r){const s=t.segments,n=t.points,i=e.points,o=[];for(const a of s){let{start:l,end:d}=a;d=Rm(l,d,n);const h=ff(r,n[l],n[d],a.loop);if(!e.segments){o.push({source:a,target:h,start:n[l],end:n[d]});continue}const m=Qb(e,h);for(const p of m){const x=ff(r,i[p.start],i[p.end],p.loop),b=Jb(a,n,x);for(const k of b)o.push({source:k,target:p,start:{[r]:Q0(h,x,"start",Math.max)},end:{[r]:Q0(h,x,"end",Math.min)}})}}return o}function ff(t,e,r,s){if(s)return;let n=e[t],i=r[t];return t==="angle"&&(n=Vr(n),i=Vr(i)),{property:t,start:n,end:i}}function PD(t,e){const{x:r=null,y:s=null}=t||{},n=e.points,i=[];return e.segments.forEach(({start:o,end:a})=>{a=Rm(o,a,n);const l=n[o],d=n[a];s!==null?(i.push({x:l.x,y:s}),i.push({x:d.x,y:s})):r!==null&&(i.push({x:r,y:l.y}),i.push({x:r,y:d.y}))}),i}function Rm(t,e,r){for(;e>t;e--){const s=r[e];if(!isNaN(s.x)&&!isNaN(s.y))break}return e}function Q0(t,e,r,s){return t&&e?s(t[r],e[r]):t?t[r]:e?e[r]:0}function pw(t,e){let r=[],s=!1;return dt(t)?(s=!0,r=t):r=PD(t,e),r.length?new ws({points:r,options:{tension:0},_loop:s,_fullLoop:s}):null}function Z0(t){return t&&t.fill!==!1}function DD(t,e,r){let n=t[e].fill;const i=[e];let o;if(!r)return n;for(;n!==!1&&i.indexOf(n)===-1;){if(!Lt(n))return n;if(o=t[n],!o)return!1;if(o.visible)return n;i.push(n),n=o.fill}return!1}function OD(t,e,r){const s=ID(t);if(Te(s))return isNaN(s.value)?!1:s;let n=parseFloat(s);return Lt(n)&&Math.floor(n)===n?LD(s[0],e,n,r):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function LD(t,e,r,s){return(t==="-"||t==="+")&&(r=e+r),r===e||r<0||r>=s?!1:r}function RD(t,e){let r=null;return t==="start"?r=e.bottom:t==="end"?r=e.top:Te(t)?r=e.getPixelForValue(t.value):e.getBasePixel&&(r=e.getBasePixel()),r}function AD(t,e,r){let s;return t==="start"?s=r:t==="end"?s=e.options.reverse?e.min:e.max:Te(t)?s=t.value:s=e.getBaseValue(),s}function ID(t){const e=t.options,r=e.fill;let s=Ne(r&&r.target,r);return s===void 0&&(s=!!e.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function $D(t){const{scale:e,index:r,line:s}=t,n=[],i=s.segments,o=s.points,a=FD(e,r);a.push(pw({x:null,y:e.bottom},s));for(let l=0;l<i.length;l++){const d=i[l];for(let h=d.start;h<=d.end;h++)zD(n,o[h],a)}return new ws({points:n,options:{}})}function FD(t,e){const r=[],s=t.getMatchingVisibleMetas("line");for(let n=0;n<s.length;n++){const i=s[n];if(i.index===e)break;i.hidden||r.unshift(i.dataset)}return r}function zD(t,e,r){const s=[];for(let n=0;n<r.length;n++){const i=r[n],{first:o,last:a,point:l}=WD(i,e,"x");if(!(!l||o&&a)){if(o)s.unshift(l);else if(t.push(l),!a)break}}t.push(...s)}function WD(t,e,r){const s=t.interpolate(e,r);if(!s)return{};const n=s[r],i=t.segments,o=t.points;let a=!1,l=!1;for(let d=0;d<i.length;d++){const h=i[d],m=o[h.start][r],p=o[h.end][r];if(bs(n,m,p)){a=n===m,l=n===p;break}}return{first:a,last:l,point:s}}class gw{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,r,s){const{x:n,y:i,radius:o}=this;return r=r||{start:0,end:Ze},e.arc(n,i,o,r.end,r.start,!0),!s.bounds}interpolate(e){const{x:r,y:s,radius:n}=this,i=e.angle;return{x:r+Math.cos(i)*n,y:s+Math.sin(i)*n,angle:i}}}function BD(t){const{chart:e,fill:r,line:s}=t;if(Lt(r))return UD(e,r);if(r==="stack")return $D(t);if(r==="shape")return!0;const n=HD(t);return n instanceof gw?n:pw(n,s)}function UD(t,e){const r=t.getDatasetMeta(e);return r&&t.isDatasetVisible(e)?r.dataset:null}function HD(t){return(t.scale||{}).getPointPositionForValue?YD(t):VD(t)}function VD(t){const{scale:e={},fill:r}=t,s=RD(r,e);if(Lt(s)){const n=e.isHorizontal();return{x:n?s:null,y:n?null:s}}return null}function YD(t){const{scale:e,fill:r}=t,s=e.options,n=e.getLabels().length,i=s.reverse?e.max:e.min,o=AD(r,e,i),a=[];if(s.grid.circular){const l=e.getPointPositionForValue(0,i);return new gw({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<n;++l)a.push(e.getPointPositionForValue(l,o));return a}function Xd(t,e,r){const s=BD(e),{chart:n,index:i,line:o,scale:a,axis:l}=e,d=o.options,h=d.fill,m=d.backgroundColor,{above:p=m,below:x=m}=h||{},b=n.getDatasetMeta(i),k=Zb(n,b);s&&o.points.length&&(Du(t,r),GD(t,{line:o,target:s,above:p,below:x,area:r,scale:a,axis:l,clip:k}),Ou(t))}function GD(t,e){const{line:r,target:s,above:n,below:i,area:o,scale:a,clip:l}=e,d=r._loop?"angle":e.axis;t.save(),d==="x"&&i!==n&&(ey(t,s,o.top),ty(t,{line:r,target:s,color:n,scale:a,property:d,clip:l}),t.restore(),t.save(),ey(t,s,o.bottom)),ty(t,{line:r,target:s,color:i,scale:a,property:d,clip:l}),t.restore()}function ey(t,e,r){const{segments:s,points:n}=e;let i=!0,o=!1;t.beginPath();for(const a of s){const{start:l,end:d}=a,h=n[l],m=n[Rm(l,d,n)];i?(t.moveTo(h.x,h.y),i=!1):(t.lineTo(h.x,r),t.lineTo(h.x,h.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(m.x,r)}t.lineTo(e.first().x,r),t.closePath(),t.clip()}function ty(t,e){const{line:r,target:s,property:n,color:i,scale:o,clip:a}=e,l=TD(r,s,n);for(const{source:d,target:h,start:m,end:p}of l){const{style:{backgroundColor:x=i}={}}=d,b=s!==!0;t.save(),t.fillStyle=x,qD(t,o,a,b&&ff(n,m,p)),t.beginPath();const k=!!r.pathSegment(t,d);let w;if(b){k?t.closePath():ry(t,s,p,n);const v=!!s.pathSegment(t,h,{move:k,reverse:!0});w=k&&v,w||ry(t,s,m,n)}t.closePath(),t.fill(w?"evenodd":"nonzero"),t.restore()}}function qD(t,e,r,s){const n=e.chart.chartArea,{property:i,start:o,end:a}=s||{};if(i==="x"||i==="y"){let l,d,h,m;i==="x"?(l=o,d=n.top,h=a,m=n.bottom):(l=n.left,d=o,h=n.right,m=a),t.beginPath(),r&&(l=Math.max(l,r.left),h=Math.min(h,r.right),d=Math.max(d,r.top),m=Math.min(m,r.bottom)),t.rect(l,d,h-l,m-d),t.clip()}}function ry(t,e,r,s){const n=e.interpolate(r,s);n&&t.lineTo(n.x,n.y)}var yw={id:"filler",afterDatasetsUpdate(t,e,r){const s=(t.data.datasets||[]).length,n=[];let i,o,a,l;for(o=0;o<s;++o)i=t.getDatasetMeta(o),a=i.dataset,l=null,a&&a.options&&a instanceof ws&&(l={visible:t.isDatasetVisible(o),index:o,fill:OD(a,o,s),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:a}),i.$filler=l,n.push(l);for(o=0;o<s;++o)l=n[o],!(!l||l.fill===!1)&&(l.fill=DD(n,o,r.propagate))},beforeDraw(t,e,r){const s=r.drawTime==="beforeDraw",n=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let o=n.length-1;o>=0;--o){const a=n[o].$filler;a&&(a.line.updateControlPoints(i,a.axis),s&&a.fill&&Xd(t.ctx,a,i))}},beforeDatasetsDraw(t,e,r){if(r.drawTime!=="beforeDatasetsDraw")return;const s=t.getSortedVisibleDatasetMetas();for(let n=s.length-1;n>=0;--n){const i=s[n].$filler;Z0(i)&&Xd(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,r){const s=e.meta.$filler;!Z0(s)||r.drawTime!=="beforeDatasetDraw"||Xd(t.ctx,s,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const sy=(t,e)=>{let{boxHeight:r=e,boxWidth:s=e}=t;return t.usePointStyle&&(r=Math.min(r,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:r,itemHeight:Math.max(e,r)}},KD=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class ny extends Ar{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r,s){this.maxWidth=e,this.maxHeight=r,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let r=qe(e.generateLabels,[this.chart],this)||[];e.filter&&(r=r.filter(s=>e.filter(s,this.chart.data))),e.sort&&(r=r.sort((s,n)=>e.sort(s,n,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:e,ctx:r}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,n=Dt(s.font),i=n.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=sy(s,i);let d,h;r.font=n.string,this.isHorizontal()?(d=this.maxWidth,h=this._fitRows(o,i,a,l)+10):(h=this.maxHeight,d=this._fitCols(o,n,a,l)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,r,s,n){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],d=this.lineWidths=[0],h=n+a;let m=e;i.textAlign="left",i.textBaseline="middle";let p=-1,x=-h;return this.legendItems.forEach((b,k)=>{const w=s+r/2+i.measureText(b.text).width;(k===0||d[d.length-1]+w+2*a>o)&&(m+=h,d[d.length-(k>0?0:1)]=0,x+=h,p++),l[k]={left:0,top:x,row:p,width:w,height:n},d[d.length-1]+=w+a}),m}_fitCols(e,r,s,n){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],d=this.columnSizes=[],h=o-e;let m=a,p=0,x=0,b=0,k=0;return this.legendItems.forEach((w,v)=>{const{itemWidth:_,itemHeight:S}=XD(s,r,i,w,n);v>0&&x+S+2*a>h&&(m+=p+a,d.push({width:p,height:x}),b+=p+a,k++,p=x=0),l[v]={left:b,top:x,col:k,width:_,height:S},p=Math.max(p,_),x+=S+a}),m+=p,d.push({width:p,height:x}),m}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:s,labels:{padding:n},rtl:i}}=this,o=Vi(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=Mt(s,this.left+n,this.right-this.lineWidths[a]);for(const d of r)a!==d.row&&(a=d.row,l=Mt(s,this.left+n,this.right-this.lineWidths[a])),d.top+=this.top+e+n,d.left=o.leftForLtr(o.x(l),d.width),l+=d.width+n}else{let a=0,l=Mt(s,this.top+e+n,this.bottom-this.columnSizes[a].height);for(const d of r)d.col!==a&&(a=d.col,l=Mt(s,this.top+e+n,this.bottom-this.columnSizes[a].height)),d.top=l,d.left+=this.left+n,d.left=o.leftForLtr(o.x(d.left),d.width),l+=d.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Du(e,this),this._draw(),Ou(e)}}_draw(){const{options:e,columnSizes:r,lineWidths:s,ctx:n}=this,{align:i,labels:o}=e,a=ct.color,l=Vi(e.rtl,this.left,this.width),d=Dt(o.font),{padding:h}=o,m=d.size,p=m/2;let x;this.drawTitle(),n.textAlign=l.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=d.string;const{boxWidth:b,boxHeight:k,itemHeight:w}=sy(o,m),v=function(D,P,O){if(isNaN(b)||b<=0||isNaN(k)||k<0)return;n.save();const B=Ne(O.lineWidth,1);if(n.fillStyle=Ne(O.fillStyle,a),n.lineCap=Ne(O.lineCap,"butt"),n.lineDashOffset=Ne(O.lineDashOffset,0),n.lineJoin=Ne(O.lineJoin,"miter"),n.lineWidth=B,n.strokeStyle=Ne(O.strokeStyle,a),n.setLineDash(Ne(O.lineDash,[])),o.usePointStyle){const M={radius:k*Math.SQRT2/2,pointStyle:O.pointStyle,rotation:O.rotation,borderWidth:B},I=l.xPlus(D,b/2),H=P+p;Wb(n,M,I,H,o.pointStyleWidth&&b)}else{const M=P+Math.max((m-k)/2,0),I=l.leftForLtr(D,b),H=Hi(O.borderRadius);n.beginPath(),Object.values(H).some(ce=>ce!==0)?Qc(n,{x:I,y:M,w:b,h:k,radius:H}):n.rect(I,M,b,k),n.fill(),B!==0&&n.stroke()}n.restore()},_=function(D,P,O){Fa(n,O.text,D,P+w/2,d,{strikethrough:O.hidden,textAlign:l.textAlign(O.textAlign)})},S=this.isHorizontal(),C=this._computeTitleHeight();S?x={x:Mt(i,this.left+h,this.right-s[0]),y:this.top+h+C,line:0}:x={x:this.left+h,y:Mt(i,this.top+C+h,this.bottom-r[0].height),line:0},qb(this.ctx,e.textDirection);const E=w+h;this.legendItems.forEach((D,P)=>{n.strokeStyle=D.fontColor,n.fillStyle=D.fontColor;const O=n.measureText(D.text).width,B=l.textAlign(D.textAlign||(D.textAlign=o.textAlign)),M=b+p+O;let I=x.x,H=x.y;l.setWidth(this.width),S?P>0&&I+M+h>this.right&&(H=x.y+=E,x.line++,I=x.x=Mt(i,this.left+h,this.right-s[x.line])):P>0&&H+E>this.bottom&&(I=x.x=I+r[x.line].width+h,x.line++,H=x.y=Mt(i,this.top+C+h,this.bottom-r[x.line].height));const ce=l.x(I);if(v(ce,H,D),I=ET(B,I+b+p,S?I+M:this.right,e.rtl),_(l.x(I),H,D),S)x.x+=M+h;else if(typeof D.text!="string"){const we=d.lineHeight;x.y+=xw(D,we)+h}else x.y+=E}),Kb(this.ctx,e.textDirection)}drawTitle(){const e=this.options,r=e.title,s=Dt(r.font),n=_r(r.padding);if(!r.display)return;const i=Vi(e.rtl,this.left,this.width),o=this.ctx,a=r.position,l=s.size/2,d=n.top+l;let h,m=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),h=this.top+d,m=Mt(e.align,m,this.right-p);else{const b=this.columnSizes.reduce((k,w)=>Math.max(k,w.height),0);h=d+Mt(e.align,this.top,this.bottom-b-e.labels.padding-this._computeTitleHeight())}const x=Mt(a,m,m+p);o.textAlign=i.textAlign(jm(a)),o.textBaseline="middle",o.strokeStyle=r.color,o.fillStyle=r.color,o.font=s.string,Fa(o,r.text,x,h,s)}_computeTitleHeight(){const e=this.options.title,r=Dt(e.font),s=_r(e.padding);return e.display?r.lineHeight+s.height:0}_getLegendItemAt(e,r){let s,n,i;if(bs(e,this.left,this.right)&&bs(r,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(n=i[s],bs(e,n.left,n.left+n.width)&&bs(r,n.top,n.top+n.height))return this.legendItems[s]}return null}handleEvent(e){const r=this.options;if(!ZD(e.type,r))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const n=this._hoveredItem,i=KD(n,s);n&&!i&&qe(r.onLeave,[e,n,this],this),this._hoveredItem=s,s&&!i&&qe(r.onHover,[e,s,this],this)}else s&&qe(r.onClick,[e,s,this],this)}}function XD(t,e,r,s,n){const i=JD(s,t,e,r),o=QD(n,s,e.lineHeight);return{itemWidth:i,itemHeight:o}}function JD(t,e,r,s){let n=t.text;return n&&typeof n!="string"&&(n=n.reduce((i,o)=>i.length>o.length?i:o)),e+r.size/2+s.measureText(n).width}function QD(t,e,r){let s=t;return typeof e.text!="string"&&(s=xw(e,r)),s}function xw(t,e){const r=t.text?t.text.length:0;return e*r}function ZD(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Am={id:"legend",_element:ny,start(t,e,r){const s=t.legend=new ny({ctx:t.ctx,options:r,chart:t});xr.configure(t,s,r),xr.addBox(t,s)},stop(t){xr.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,r){const s=t.legend;xr.configure(t,s,r),s.options=r},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,r){const s=e.datasetIndex,n=r.chart;n.isDatasetVisible(s)?(n.hide(s),e.hidden=!0):(n.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:r,pointStyle:s,textAlign:n,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const d=l.controller.getStyle(r?0:void 0),h=_r(d.borderWidth);return{text:e[l.index].label,fillStyle:d.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:d.borderColor,pointStyle:s||d.pointStyle,rotation:d.rotation,textAlign:n||d.textAlign,borderRadius:o&&(a||d.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class vw extends Ar{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=r;const n=dt(s.text)?s.text.length:1;this._padding=_r(s.padding);const i=n*Dt(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:r,left:s,bottom:n,right:i,options:o}=this,a=o.align;let l=0,d,h,m;return this.isHorizontal()?(h=Mt(a,s,i),m=r+e,d=i-s):(o.position==="left"?(h=s+e,m=Mt(a,n,r),l=ot*-.5):(h=i-e,m=Mt(a,r,n),l=ot*.5),d=n-r),{titleX:h,titleY:m,maxWidth:d,rotation:l}}draw(){const e=this.ctx,r=this.options;if(!r.display)return;const s=Dt(r.font),i=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:d}=this._drawArgs(i);Fa(e,r.text,0,0,s,{color:r.color,maxWidth:l,rotation:d,textAlign:jm(r.align),textBaseline:"middle",translation:[o,a]})}}function eO(t,e){const r=new vw({ctx:t.ctx,options:e,chart:t});xr.configure(t,r,e),xr.addBox(t,r),t.titleBlock=r}var Im={id:"title",_element:vw,start(t,e,r){eO(t,r)},stop(t){const e=t.titleBlock;xr.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,r){const s=t.titleBlock;xr.configure(t,s,r),s.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Go={average(t){if(!t.length)return!1;let e,r,s=new Set,n=0,i=0;for(e=0,r=t.length;e<r;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),n+=l.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:n/i}},nearest(t,e){if(!t.length)return!1;let r=e.x,s=e.y,n=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const d=l.getCenterPoint(),h=of(e,d);h<n&&(n=h,a=l)}}if(a){const l=a.tooltipPosition();r=l.x,s=l.y}return{x:r,y:s}}};function Br(t,e){return e&&(dt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function hs(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function tO(t,e){const{element:r,datasetIndex:s,index:n}=e,i=t.getDatasetMeta(s).controller,{label:o,value:a}=i.getLabelAndValue(n);return{chart:t,label:o,parsed:i.getParsed(n),raw:t.data.datasets[s].data[n],formattedValue:a,dataset:i.getDataset(),dataIndex:n,datasetIndex:s,element:r}}function iy(t,e){const r=t.chart.ctx,{body:s,footer:n,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=Dt(e.bodyFont),d=Dt(e.titleFont),h=Dt(e.footerFont),m=i.length,p=n.length,x=s.length,b=_r(e.padding);let k=b.height,w=0,v=s.reduce((C,E)=>C+E.before.length+E.lines.length+E.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,m&&(k+=m*d.lineHeight+(m-1)*e.titleSpacing+e.titleMarginBottom),v){const C=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;k+=x*C+(v-x)*l.lineHeight+(v-1)*e.bodySpacing}p&&(k+=e.footerMarginTop+p*h.lineHeight+(p-1)*e.footerSpacing);let _=0;const S=function(C){w=Math.max(w,r.measureText(C).width+_)};return r.save(),r.font=d.string,We(t.title,S),r.font=l.string,We(t.beforeBody.concat(t.afterBody),S),_=e.displayColors?o+2+e.boxPadding:0,We(s,C=>{We(C.before,S),We(C.lines,S),We(C.after,S)}),_=0,r.font=h.string,We(t.footer,S),r.restore(),w+=b.width,{width:w,height:k}}function rO(t,e){const{y:r,height:s}=e;return r<s/2?"top":r>t.height-s/2?"bottom":"center"}function sO(t,e,r,s){const{x:n,width:i}=s,o=r.caretSize+r.caretPadding;if(t==="left"&&n+i+o>e.width||t==="right"&&n-i-o<0)return!0}function nO(t,e,r,s){const{x:n,width:i}=r,{width:o,chartArea:{left:a,right:l}}=t;let d="center";return s==="center"?d=n<=(a+l)/2?"left":"right":n<=i/2?d="left":n>=o-i/2&&(d="right"),sO(d,t,e,r)&&(d="center"),d}function oy(t,e,r){const s=r.yAlign||e.yAlign||rO(t,r);return{xAlign:r.xAlign||e.xAlign||nO(t,e,r,s),yAlign:s}}function iO(t,e){let{x:r,width:s}=t;return e==="right"?r-=s:e==="center"&&(r-=s/2),r}function oO(t,e,r){let{y:s,height:n}=t;return e==="top"?s+=r:e==="bottom"?s-=n+r:s-=n/2,s}function ay(t,e,r,s){const{caretSize:n,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=r,d=n+i,{topLeft:h,topRight:m,bottomLeft:p,bottomRight:x}=Hi(o);let b=iO(e,a);const k=oO(e,l,d);return l==="center"?a==="left"?b+=d:a==="right"&&(b-=d):a==="left"?b-=Math.max(h,p)+n:a==="right"&&(b+=Math.max(m,x)+n),{x:Pt(b,0,s.width-e.width),y:Pt(k,0,s.height-e.height)}}function ec(t,e,r){const s=_r(r.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function ly(t){return Br([],hs(t))}function aO(t,e,r){return ci(t,{tooltip:e,tooltipItems:r,type:"tooltip"})}function cy(t,e){const r=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return r?t.override(r):t}const bw={beforeTitle:us,title(t){if(t.length>0){const e=t[0],r=e.chart.data.labels,s=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return r[e.dataIndex]}return""},afterTitle:us,beforeBody:us,beforeLabel:us,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const r=t.formattedValue;return ze(r)||(e+=r),e},labelColor(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:us,afterBody:us,beforeFooter:us,footer:us,afterFooter:us};function Vt(t,e,r,s){const n=t[e].call(r,s);return typeof n>"u"?bw[e].call(r,s):n}class mf extends Ar{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const r=this.chart,s=this.options.setContext(this.getContext()),n=s.enabled&&r.options.animation&&s.animations,i=new ew(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=aO(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,r){const{callbacks:s}=r,n=Vt(s,"beforeTitle",this,e),i=Vt(s,"title",this,e),o=Vt(s,"afterTitle",this,e);let a=[];return a=Br(a,hs(n)),a=Br(a,hs(i)),a=Br(a,hs(o)),a}getBeforeBody(e,r){return ly(Vt(r.callbacks,"beforeBody",this,e))}getBody(e,r){const{callbacks:s}=r,n=[];return We(e,i=>{const o={before:[],lines:[],after:[]},a=cy(s,i);Br(o.before,hs(Vt(a,"beforeLabel",this,i))),Br(o.lines,Vt(a,"label",this,i)),Br(o.after,hs(Vt(a,"afterLabel",this,i))),n.push(o)}),n}getAfterBody(e,r){return ly(Vt(r.callbacks,"afterBody",this,e))}getFooter(e,r){const{callbacks:s}=r,n=Vt(s,"beforeFooter",this,e),i=Vt(s,"footer",this,e),o=Vt(s,"afterFooter",this,e);let a=[];return a=Br(a,hs(n)),a=Br(a,hs(i)),a=Br(a,hs(o)),a}_createItems(e){const r=this._active,s=this.chart.data,n=[],i=[],o=[];let a=[],l,d;for(l=0,d=r.length;l<d;++l)a.push(tO(this.chart,r[l]));return e.filter&&(a=a.filter((h,m,p)=>e.filter(h,m,p,s))),e.itemSort&&(a=a.sort((h,m)=>e.itemSort(h,m,s))),We(a,h=>{const m=cy(e.callbacks,h);n.push(Vt(m,"labelColor",this,h)),i.push(Vt(m,"labelPointStyle",this,h)),o.push(Vt(m,"labelTextColor",this,h))}),this.labelColors=n,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,r){const s=this.options.setContext(this.getContext()),n=this._active;let i,o=[];if(!n.length)this.opacity!==0&&(i={opacity:0});else{const a=Go[s.position].call(this,n,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=iy(this,s),d=Object.assign({},a,l),h=oy(this.chart,s,d),m=ay(s,d,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,i={opacity:1,x:m.x,y:m.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(e,r,s,n){const i=this.getCaretPosition(e,s,n);r.lineTo(i.x1,i.y1),r.lineTo(i.x2,i.y2),r.lineTo(i.x3,i.y3)}getCaretPosition(e,r,s){const{xAlign:n,yAlign:i}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:d,bottomLeft:h,bottomRight:m}=Hi(a),{x:p,y:x}=e,{width:b,height:k}=r;let w,v,_,S,C,E;return i==="center"?(C=x+k/2,n==="left"?(w=p,v=w-o,S=C+o,E=C-o):(w=p+b,v=w+o,S=C-o,E=C+o),_=w):(n==="left"?v=p+Math.max(l,h)+o:n==="right"?v=p+b-Math.max(d,m)-o:v=this.caretX,i==="top"?(S=x,C=S-o,w=v-o,_=v+o):(S=x+k,C=S+o,w=v+o,_=v-o),E=S),{x1:w,x2:v,x3:_,y1:S,y2:C,y3:E}}drawTitle(e,r,s){const n=this.title,i=n.length;let o,a,l;if(i){const d=Vi(s.rtl,this.x,this.width);for(e.x=ec(this,s.titleAlign,s),r.textAlign=d.textAlign(s.titleAlign),r.textBaseline="middle",o=Dt(s.titleFont),a=s.titleSpacing,r.fillStyle=s.titleColor,r.font=o.string,l=0;l<i;++l)r.fillText(n[l],d.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=s.titleMarginBottom-a)}}_drawColorBox(e,r,s,n,i){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:d}=i,h=Dt(i.bodyFont),m=ec(this,"left",i),p=n.x(m),x=l<h.lineHeight?(h.lineHeight-l)/2:0,b=r.y+x;if(i.usePointStyle){const k={radius:Math.min(d,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},w=n.leftForLtr(p,d)+d/2,v=b+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,lf(e,k,w,v),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,lf(e,k,w,v)}else{e.lineWidth=Te(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const k=n.leftForLtr(p,d),w=n.leftForLtr(n.xPlus(p,1),d-2),v=Hi(o.borderRadius);Object.values(v).some(_=>_!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Qc(e,{x:k,y:b,w:d,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Qc(e,{x:w,y:b+1,w:d-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(k,b,d,l),e.strokeRect(k,b,d,l),e.fillStyle=o.backgroundColor,e.fillRect(w,b+1,d-2,l-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,r,s){const{body:n}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:d,boxPadding:h}=s,m=Dt(s.bodyFont);let p=m.lineHeight,x=0;const b=Vi(s.rtl,this.x,this.width),k=function(O){r.fillText(O,b.x(e.x+x),e.y+p/2),e.y+=p+i},w=b.textAlign(o);let v,_,S,C,E,D,P;for(r.textAlign=o,r.textBaseline="middle",r.font=m.string,e.x=ec(this,w,s),r.fillStyle=s.bodyColor,We(this.beforeBody,k),x=a&&w!=="right"?o==="center"?d/2+h:d+2+h:0,C=0,D=n.length;C<D;++C){for(v=n[C],_=this.labelTextColors[C],r.fillStyle=_,We(v.before,k),S=v.lines,a&&S.length&&(this._drawColorBox(r,e,C,b,s),p=Math.max(m.lineHeight,l)),E=0,P=S.length;E<P;++E)k(S[E]),p=m.lineHeight;We(v.after,k)}x=0,p=m.lineHeight,We(this.afterBody,k),e.y-=i}drawFooter(e,r,s){const n=this.footer,i=n.length;let o,a;if(i){const l=Vi(s.rtl,this.x,this.width);for(e.x=ec(this,s.footerAlign,s),e.y+=s.footerMarginTop,r.textAlign=l.textAlign(s.footerAlign),r.textBaseline="middle",o=Dt(s.footerFont),r.fillStyle=s.footerColor,r.font=o.string,a=0;a<i;++a)r.fillText(n[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,r,s,n){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:d,height:h}=s,{topLeft:m,topRight:p,bottomLeft:x,bottomRight:b}=Hi(n.cornerRadius);r.fillStyle=n.backgroundColor,r.strokeStyle=n.borderColor,r.lineWidth=n.borderWidth,r.beginPath(),r.moveTo(a+m,l),o==="top"&&this.drawCaret(e,r,s,n),r.lineTo(a+d-p,l),r.quadraticCurveTo(a+d,l,a+d,l+p),o==="center"&&i==="right"&&this.drawCaret(e,r,s,n),r.lineTo(a+d,l+h-b),r.quadraticCurveTo(a+d,l+h,a+d-b,l+h),o==="bottom"&&this.drawCaret(e,r,s,n),r.lineTo(a+x,l+h),r.quadraticCurveTo(a,l+h,a,l+h-x),o==="center"&&i==="left"&&this.drawCaret(e,r,s,n),r.lineTo(a,l+m),r.quadraticCurveTo(a,l,a+m,l),r.closePath(),r.fill(),n.borderWidth>0&&r.stroke()}_updateAnimationTarget(e){const r=this.chart,s=this.$animations,n=s&&s.x,i=s&&s.y;if(n||i){const o=Go[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=iy(this,e),l=Object.assign({},o,this._size),d=oy(r,e,l),h=ay(e,l,d,r);(n._to!==h.x||i._to!==h.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const r=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(r);const n={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=_r(r.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&a&&(e.save(),e.globalAlpha=s,this.drawBackground(i,e,n,r),qb(e,r.textDirection),i.y+=o.top,this.drawTitle(i,e,r),this.drawBody(i,e,r),this.drawFooter(i,e,r),Kb(e,r.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,r){const s=this._active,n=e.map(({datasetIndex:a,index:l})=>{const d=this.chart.getDatasetMeta(a);if(!d)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:d.data[l],index:l}}),i=!Kc(s,n),o=this._positionChanged(n,r);(i||o)&&(this._active=n,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,r,s=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,i=this._active||[],o=this._getActiveElements(e,i,r,s),a=this._positionChanged(o,e),l=r||!Kc(o,i)||a;return l&&(this._active=o,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,r))),l}_getActiveElements(e,r,s,n){const i=this.options;if(e.type==="mouseout")return[];if(!n)return r.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,s);return i.reverse&&o.reverse(),o}_positionChanged(e,r){const{caretX:s,caretY:n,options:i}=this,o=Go[i.position].call(this,e,r);return o!==!1&&(s!==o.x||n!==o.y)}}ue(mf,"positioners",Go);var $m={id:"tooltip",_element:mf,positioners:Go,afterInit(t,e,r){r&&(t.tooltip=new mf({chart:t,options:r}))},beforeUpdate(t,e,r){t.tooltip&&t.tooltip.initialize(r)},reset(t,e,r){t.tooltip&&t.tooltip.initialize(r)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const r={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",r)}},afterEvent(t,e){if(t.tooltip){const r=e.replay;t.tooltip.handleEvent(e.event,r,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:bw},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const lO=(t,e,r,s)=>(typeof e=="string"?(r=t.push(e)-1,s.unshift({index:r,label:e})):isNaN(e)&&(r=null),r);function cO(t,e,r,s){const n=t.indexOf(e);if(n===-1)return lO(t,e,r,s);const i=t.lastIndexOf(e);return n!==i?r:n}const uO=(t,e)=>t===null?null:Pt(Math.round(t),0,e);function uy(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Wa extends uo{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const r=this._addedLabels;if(r.length){const s=this.getLabels();for(const{index:n,label:i}of r)s[n]===i&&s.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,r){if(ze(e))return null;const s=this.getLabels();return r=isFinite(r)&&s[r]===e?r:cO(s,e,Ne(r,e),this._addedLabels),uO(r,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let{min:s,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),r||(n=this.getLabels().length-1)),this.min=s,this.max=n}buildTicks(){const e=this.min,r=this.max,s=this.options.offset,n=[];let i=this.getLabels();i=e===0&&r===i.length-1?i:i.slice(e,r+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=r;o++)n.push({value:o});return n}getLabelForValue(e){return uy.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ue(Wa,"id","category"),ue(Wa,"defaults",{ticks:{callback:uy}});function dO(t,e){const r=[],{bounds:n,step:i,min:o,max:a,precision:l,count:d,maxTicks:h,maxDigits:m,includeBounds:p}=t,x=i||1,b=h-1,{min:k,max:w}=e,v=!ze(o),_=!ze(a),S=!ze(d),C=(w-k)/(m+1);let E=a0((w-k)/b/x)*x,D,P,O,B;if(E<1e-14&&!v&&!_)return[{value:k},{value:w}];B=Math.ceil(w/E)-Math.floor(k/E),B>b&&(E=a0(B*E/b/x)*x),ze(l)||(D=Math.pow(10,l),E=Math.ceil(E*D)/D),n==="ticks"?(P=Math.floor(k/E)*E,O=Math.ceil(w/E)*E):(P=k,O=w),v&&_&&i&&vT((a-o)/i,E/1e3)?(B=Math.round(Math.min((a-o)/E,h)),E=(a-o)/B,P=o,O=a):S?(P=v?o:P,O=_?a:O,B=d-1,E=(O-P)/B):(B=(O-P)/E,la(B,Math.round(B),E/1e3)?B=Math.round(B):B=Math.ceil(B));const M=Math.max(l0(E),l0(P));D=Math.pow(10,ze(l)?M:l),P=Math.round(P*D)/D,O=Math.round(O*D)/D;let I=0;for(v&&(p&&P!==o?(r.push({value:o}),P<o&&I++,la(Math.round((P+I*E)*D)/D,o,dy(o,C,t))&&I++):P<o&&I++);I<B;++I){const H=Math.round((P+I*E)*D)/D;if(_&&H>a)break;r.push({value:H})}return _&&p&&O!==a?r.length&&la(r[r.length-1].value,a,dy(a,C,t))?r[r.length-1].value=a:r.push({value:a}):(!_||O===a)&&r.push({value:O}),r}function dy(t,e,{horizontal:r,minRotation:s}){const n=vs(s),i=(r?Math.sin(n):Math.cos(n))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class hO extends uo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,r){return ze(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:r,maxDefined:s}=this.getUserBounds();let{min:n,max:i}=this;const o=l=>n=r?n:l,a=l=>i=s?i:l;if(e){const l=Kr(n),d=Kr(i);l<0&&d<0?a(0):l>0&&d>0&&o(0)}if(n===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(n-l)}this.min=n,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:r,stepSize:s}=e,n;return s?(n=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),r=r||11),r&&(n=Math.min(r,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,r=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const n={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},i=this._range||this,o=dO(n,i);return e.bounds==="ticks"&&bT(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let r=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const n=(s-r)/Math.max(e.length-1,1)/2;r-=n,s+=n}this._startValue=r,this._endValue=s,this._valueRange=s-r}getLabelForValue(e){return Cm(e,this.chart.options.locale,this.options.ticks.format)}}class Ba extends hO{determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=Lt(e)?e:0,this.max=Lt(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),r=e?this.width:this.height,s=vs(this.options.ticks.minRotation),n=(e?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,i.lineHeight/n))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ue(Ba,"id","linear"),ue(Ba,"defaults",{ticks:{callback:zb.formatters.numeric}});const Au={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},qt=Object.keys(Au);function hy(t,e){return t-e}function fy(t,e){if(ze(e))return null;const r=t._adapter,{parser:s,round:n,isoWeekday:i}=t._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),Lt(o)||(o=typeof s=="string"?r.parse(o,s):r.parse(o)),o===null?null:(n&&(o=n==="week"&&(Aa(i)||i===!0)?r.startOf(o,"isoWeek",i):r.startOf(o,n)),+o)}function my(t,e,r,s){const n=qt.length;for(let i=qt.indexOf(t);i<n-1;++i){const o=Au[qt[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((r-e)/(a*o.size))<=s)return qt[i]}return qt[n-1]}function fO(t,e,r,s,n){for(let i=qt.length-1;i>=qt.indexOf(r);i--){const o=qt[i];if(Au[o].common&&t._adapter.diff(n,s,o)>=e-1)return o}return qt[r?qt.indexOf(r):0]}function mO(t){for(let e=qt.indexOf(t)+1,r=qt.length;e<r;++e)if(Au[qt[e]].common)return qt[e]}function py(t,e,r){if(!r)t[e]=!0;else if(r.length){const{lo:s,hi:n}=Sm(r,e),i=r[s]>=e?r[s]:r[n];t[i]=!0}}function pO(t,e,r,s){const n=t._adapter,i=+n.startOf(e[0].value,s),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+n.add(a,1,s))l=r[a],l>=0&&(e[l].major=!0);return e}function gy(t,e,r){const s=[],n={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],n[a]=o,s.push({value:a,major:!1});return i===0||!r?s:pO(t,s,n,r)}class ru extends uo{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,r={}){const s=e.time||(e.time={}),n=this._adapter=new rP._date(e.adapters.date);n.init(r),aa(s.displayFormats,n.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=r.normalized}parse(e,r){return e===void 0?null:fy(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,r=this._adapter,s=e.time.unit||"day";let{min:n,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(d){!o&&!isNaN(d.min)&&(n=Math.min(n,d.min)),!a&&!isNaN(d.max)&&(i=Math.max(i,d.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),n=Lt(n)&&!isNaN(n)?n:+r.startOf(Date.now(),s),i=Lt(i)&&!isNaN(i)?i:+r.endOf(Date.now(),s)+1,this.min=Math.min(n,i-1),this.max=Math.max(n+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(r=e[0],s=e[e.length-1]),{min:r,max:s}}buildTicks(){const e=this.options,r=e.time,s=e.ticks,n=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const i=this.min,o=this.max,a=jT(n,i,o);return this._unit=r.unit||(s.autoSkip?my(r.minUnit,this.min,this.max,this._getLabelCapacity(i)):fO(this,a.length,r.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:mO(this._unit),this.initOffsets(n),e.reverse&&a.reverse(),gy(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let r=0,s=0,n,i;this.options.offset&&e.length&&(n=this.getDecimalForValue(e[0]),e.length===1?r=1-n:r=(this.getDecimalForValue(e[1])-n)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?s=i:s=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;r=Pt(r,0,o),s=Pt(s,0,o),this._offsets={start:r,end:s,factor:1/(r+1+s)}}_generate(){const e=this._adapter,r=this.min,s=this.max,n=this.options,i=n.time,o=i.unit||my(i.minUnit,r,s,this._getLabelCapacity(r)),a=Ne(n.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,d=Aa(l)||l===!0,h={};let m=r,p,x;if(d&&(m=+e.startOf(m,"isoWeek",l)),m=+e.startOf(m,d?"day":o),e.diff(s,r,o)>1e5*a)throw new Error(r+" and "+s+" are too far apart with stepSize of "+a+" "+o);const b=n.ticks.source==="data"&&this.getDataTimestamps();for(p=m,x=0;p<s;p=+e.add(p,a,o),x++)py(h,p,b);return(p===s||n.bounds==="ticks"||x===1)&&py(h,p,b),Object.keys(h).sort(hy).map(k=>+k)}getLabelForValue(e){const r=this._adapter,s=this.options.time;return s.tooltipFormat?r.format(e,s.tooltipFormat):r.format(e,s.displayFormats.datetime)}format(e,r){const n=this.options.time.displayFormats,i=this._unit,o=r||n[i];return this._adapter.format(e,o)}_tickFormatFunction(e,r,s,n){const i=this.options,o=i.ticks.callback;if(o)return qe(o,[e,r,s],this);const a=i.time.displayFormats,l=this._unit,d=this._majorUnit,h=l&&a[l],m=d&&a[d],p=s[r],x=d&&m&&p&&p.major;return this._adapter.format(e,n||(x?m:h))}generateTickLabels(e){let r,s,n;for(r=0,s=e.length;r<s;++r)n=e[r],n.label=this._tickFormatFunction(n.value,r,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const r=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((r.start+s)*r.factor)}getValueForPixel(e){const r=this._offsets,s=this.getDecimalForPixel(e)/r.factor-r.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const r=this.options.ticks,s=this.ctx.measureText(e).width,n=vs(this.isHorizontal()?r.maxRotation:r.minRotation),i=Math.cos(n),o=Math.sin(n),a=this._resolveTickFontOptions(0).size;return{w:s*i+a*o,h:s*o+a*i}}_getLabelCapacity(e){const r=this.options.time,s=r.displayFormats,n=s[r.unit]||s.millisecond,i=this._tickFormatFunction(e,0,gy(this,[e],this._majorUnit),n),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],r,s;if(e.length)return e;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(r=0,s=n.length;r<s;++r)e=e.concat(n[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let r,s;if(e.length)return e;const n=this.getLabels();for(r=0,s=n.length;r<s;++r)e.push(fy(this,n[r]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Ib(e.sort(hy))}}ue(ru,"id","time"),ue(ru,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function tc(t,e,r){let s=0,n=t.length-1,i,o,a,l;r?(e>=t[s].pos&&e<=t[n].pos&&({lo:s,hi:n}=Hn(t,"pos",e)),{pos:i,time:a}=t[s],{pos:o,time:l}=t[n]):(e>=t[s].time&&e<=t[n].time&&({lo:s,hi:n}=Hn(t,"time",e)),{time:i,pos:a}=t[s],{time:o,pos:l}=t[n]);const d=o-i;return d?a+(l-a)*(e-i)/d:a}class yy extends ru{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(e);this._minPos=tc(r,this.min),this._tableRange=tc(r,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:r,max:s}=this,n=[],i=[];let o,a,l,d,h;for(o=0,a=e.length;o<a;++o)d=e[o],d>=r&&d<=s&&n.push(d);if(n.length<2)return[{time:r,pos:0},{time:s,pos:1}];for(o=0,a=n.length;o<a;++o)h=n[o+1],l=n[o-1],d=n[o],Math.round((h+l)/2)!==d&&i.push({time:d,pos:o/(a-1)});return i}_generate(){const e=this.min,r=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(r)||s.length===1)&&s.push(r),s.sort((n,i)=>n-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const r=this.getDataTimestamps(),s=this.getLabelTimestamps();return r.length&&s.length?e=this.normalize(r.concat(s)):e=r.length?r:s,e=this._cache.all=e,e}getDecimalForValue(e){return(tc(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const r=this._offsets,s=this.getDecimalForPixel(e)/r.factor-r.end;return tc(this._table,s*this._tableRange+this._minPos,!0)}}ue(yy,"id","timeseries"),ue(yy,"defaults",ru.defaults);const gO="#FFFFFF",ww=({className:t="w-8 h-8",stroke:e=gO,strokeWidth:r=2})=>c.jsxs("svg",{className:t,viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:e,strokeWidth:r,strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M20 6C14 6 8 12 8 22C8 38 12 58 20 58C24 58 24 46 32 46C40 46 40 58 44 58C52 58 56 38 56 22C56 12 50 6 44 6C38 6 36 18 32 18C28 18 26 6 20 6Z"}),c.jsx("path",{d:"M46 14C48 16 50 18 50 20",strokeWidth:"1.5"})]});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ir=(t,e)=>{const r=N.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...d},h)=>N.createElement("svg",{ref:h,...yO,width:n,height:n,stroke:s,strokeWidth:o?Number(i)*24/Number(n):i,className:["lucide",`lucide-${xO(t)}`,a].join(" "),...d},[...e.map(([m,p])=>N.createElement(m,p)),...Array.isArray(l)?l:[l]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=Ir("BarChart4",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M13 17V9",key:"1fwyjl"}],["path",{d:"M18 17V5",key:"sfb6ij"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=Ir("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=Ir("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=Ir("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=Ir("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=Ir("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=Ir("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=Ir("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=Ir("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=Ir("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=Ir("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function kO(){const[t,e]=N.useState(""),[r,s]=N.useState(""),[n,i]=N.useState(!1),[o,a]=N.useState(!1),l=async d=>{d.preventDefault(),a(!0);try{const{error:h}=await ge.auth.signInWithPassword({email:t,password:r});if(h)throw h}catch(h){console.error("Error signing in:",h);const m=h instanceof Error&&h.message.includes("Invalid login credentials")?"Credenciales inválidas. Verifique su correo y contraseña.":"Error al iniciar sesión. Intente nuevamente.";ee.error(m)}finally{a(!1)}};return c.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-raspberry-50 via-white to-raspberry-50 p-4",children:[" ",c.jsxs("div",{className:"max-w-md w-full bg-white p-8 sm:p-10 rounded-2xl shadow-2xl border border-raspberry-100 transform transition-all duration-500 hover:scale-[1.01]",children:[" ",c.jsxs("div",{className:"flex flex-col items-center mb-8",children:[c.jsxs("div",{className:"p-3 bg-gradient-to-br from-raspberry-500 to-raspberry-700 rounded-full shadow-lg mb-4 transform transition-transform duration-300 hover:rotate-6",children:[" ",c.jsx(ww,{className:"h-16 w-16 text-white"})]}),c.jsxs("h1",{className:"text-3xl font-bold text-center text-raspberry-900",children:[" ","Andrew's Dental Group"]}),c.jsx("p",{className:"mt-2 text-center text-sm text-gray-500",children:"Sistema de gestión de la clínica dental"})]}),c.jsxs("form",{className:"space-y-6",onSubmit:l,children:[c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"email-address",className:"block text-sm font-medium text-raspberry-700 mb-1",children:[" ","Correo Electrónico"]}),c.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:d=>e(d.target.value),className:"appearance-none relative block w-full px-4 py-3 border border-raspberry-100 placeholder-gray-400 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-raspberry-200 focus:border-raspberry-700 sm:text-sm transition-all duration-200 shadow-sm hover:shadow-md",placeholder:"su.correo@ejemplo.com"})]}),c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"password",className:"block text-sm font-medium text-raspberry-700 mb-1",children:[" ","Contraseña"]}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{id:"password",name:"password",type:n?"text":"password",autoComplete:"current-password",required:!0,value:r,onChange:d=>s(d.target.value),className:"appearance-none relative block w-full px-4 py-3 border border-raspberry-100 placeholder-gray-400 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-raspberry-200 focus:border-raspberry-700 sm:text-sm transition-all duration-200 shadow-sm hover:shadow-md pr-12",placeholder:"••••••••"}),c.jsx("button",{type:"button",onClick:()=>i(!n),className:"absolute inset-y-0 right-3 flex items-center text-gray-500 hover:text-gray-700 focus:outline-none",children:n?c.jsx(vO,{size:20}):c.jsx(bO,{size:20})})]})]}),c.jsx("div",{className:"pt-2",children:c.jsx("button",{type:"submit",disabled:o,className:`w-full flex justify-center py-3 px-4 border border-transparent text-base font-medium rounded-lg text-white bg-gradient-to-r from-raspberry-500 to-raspberry-700 hover:from-raspberry-700 hover:to-raspberry-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-raspberry-700 transition-all duration-300 transform hover:scale-[1.03] shadow-lg hover:shadow-xl ${o?"opacity-70 cursor-not-allowed":""}`,children:o?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Iniciar Sesión"})})]})]}),c.jsxs("div",{className:"mt-6 text-sm text-gray-400",children:["Desarrollado por"," ",c.jsx("a",{href:"https://grupoarkham.com/",target:"_blank",rel:"noopener noreferrer",className:"text-raspberry-700 hover:underline font-semibold",children:"Arkham Tech"})]})]})}function SO({user:t,session:e}){const[r,s]=N.useState(new Date),[n,i]=N.useState(!1),o=_u(),a=oi();N.useEffect(()=>{const d=setInterval(()=>{s(new Date)},6e4);return()=>clearInterval(d)},[]),N.useEffect(()=>{e||o("/login",{replace:!0})},[e,o]);const l=async()=>{try{const{error:d}=await ge.auth.signOut();if(d)throw d;ee.success("Sesión cerrada exitosamente."),o("/login")}catch(d){console.error("Error signing out:",d),ee.error("Error al cerrar sesión.")}};return t?c.jsxs("div",{className:"min-h-screen flex flex-col bg-raspberry-50 font-sans antialiased",children:[c.jsxs("nav",{className:"bg-gradient-to-r from-raspberry-700 to-raspberry-900 shadow-2xl sticky top-0 z-40",children:[c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between h-16 items-center",children:[c.jsx("div",{className:"flex items-center flex-shrink-0",children:c.jsxs(rr,{to:"/caja",className:"flex items-center group",children:[c.jsx("div",{className:"p-1.5 bg-raspberry-600 rounded-full shadow-md transition-all duration-300 group-hover:scale-110 group-hover:ring-2 group-hover:ring-white group-hover:ring-opacity-50",children:c.jsx(ww,{className:"h-8 w-8 text-white"})}),c.jsx("span",{className:"ml-1 text-xl font-bold text-white tracking-wide hidden md:block",children:"Andrew's Dental Group"}),c.jsx("span",{className:"ml-1 text-xl font-bold text-white md:hidden",children:"Andrew's"})]})}),c.jsxs("div",{className:"hidden md:flex flex-1 justify-center items-center space-x-4 lg:space-x-6 mx-8",children:[c.jsxs(rr,{to:"/citas",className:({isActive:d})=>`px-4 py-2 rounded-full text-sm font-semibold transition-all duration-300 whitespace-nowrap
                                    flex items-center justify-center
                                    ${d?"bg-white text-raspberry-700 shadow-md font-bold":"text-white hover:bg-white hover:bg-opacity-20"}`,children:[c.jsx(vy,{className:"w-4 h-4 mr-2"})," Citas"]}),c.jsxs(rr,{to:"/pacientes",className:({isActive:d})=>`px-4 py-2 rounded-full text-sm font-semibold transition-all duration-300 whitespace-nowrap
                                    flex items-center justify-center
                                    ${d?"bg-white text-raspberry-700 shadow-md font-bold":"text-white hover:bg-white hover:bg-opacity-20"}`,children:[c.jsx(Sy,{className:"w-4 h-4 mr-2"})," Pacientes"]}),c.jsxs(rr,{to:"/historial-clinico",className:({isActive:d})=>`px-4 py-2 rounded-full text-sm font-semibold transition-all duration-300 whitespace-nowrap
                                        flex items-center justify-center
                                        ${a.pathname.startsWith("/historial-clinico")?"bg-white text-raspberry-700 shadow-md font-bold":"text-white hover:bg-white hover:bg-opacity-20"}`,children:[c.jsx(by,{className:"w-4 h-4 mr-2"})," Historial Clínico"]}),c.jsxs(rr,{to:"/doctores",className:({isActive:d})=>`px-4 py-2 rounded-full text-sm font-semibold transition-all duration-300 whitespace-nowrap
                                    flex items-center justify-center
                                    ${d?"bg-white text-raspberry-700 shadow-md font-bold":"text-white hover:bg-white hover:bg-opacity-20"}`,children:[c.jsx(ky,{className:"w-4 h-4 mr-2"})," Doctores"]}),c.jsxs(rr,{to:"/caja",className:({isActive:d})=>`px-4 py-2 rounded-full text-sm font-semibold transition-all duration-300 whitespace-nowrap
                                    flex items-center justify-center
                                    ${d||a.pathname==="/"?"bg-white text-raspberry-700 shadow-md font-bold":"text-white hover:bg-white hover:bg-opacity-20"}`,children:[c.jsx(wy,{className:"w-4 h-4 mr-2"})," Caja"]}),c.jsxs(rr,{to:"/reportes",className:({isActive:d})=>`px-4 py-2 rounded-full text-sm font-semibold transition-all duration-300 whitespace-nowrap
                                    flex items-center justify-center
                                    ${d?"bg-white text-raspberry-700 shadow-md font-bold":"text-white hover:bg-white hover:bg-opacity-20"}`,children:[c.jsx(xy,{className:"w-4 h-4 mr-2"})," Reportes"]})]}),c.jsxs("div",{className:"hidden md:flex items-center space-x-4 lg:space-x-6 text-white ml-auto flex-shrink-0",children:[c.jsxs("div",{className:"text-right flex flex-col items-end",children:[c.jsxs("p",{className:"text-sm font-medium whitespace-nowrap",children:["Bienvenido!! ",c.jsxs("span",{className:"font-semibold",children:[t==null?void 0:t.nombre," ",t==null?void 0:t.apellido]})]}),c.jsxs("p",{className:"text-xs text-raspberry-50 whitespace-nowrap",children:[new Date().toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"})," · ",r.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})]})]}),c.jsxs("button",{onClick:l,className:"flex items-center gap-1 px-4 py-2 text-sm font-bold text-raspberry-700 bg-white rounded-md hover:bg-raspberry-100 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-0 focus:ring-raspberry-700 transform hover:scale-105 shadow-md",children:[c.jsx(_y,{className:"w-4 h-4"}),"Cerrar Sesión"]})]}),c.jsx("div",{className:"flex md:hidden items-center flex-shrink-0",children:c.jsxs("button",{onClick:()=>i(!n),className:"inline-flex items-center justify-center p-2 rounded-md text-white hover:text-raspberry-50 hover:bg-raspberry-800 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white","aria-expanded":n?"true":"false","aria-label":"Abrir menú principal",children:[c.jsx("span",{className:"sr-only",children:"Abrir menú principal"}),n?c.jsx(_O,{className:"block h-6 w-6","aria-hidden":"true"}):c.jsx(wO,{className:"block h-6 w-6","aria-hidden":"true"})]})})]})}),c.jsx("div",{className:`md:hidden overflow-hidden transition-all duration-300 ease-in-out ${n?"max-h-screen":"max-h-0"} bg-raspberry-900 shadow-lg`,children:c.jsxs("div",{className:"pt-2 pb-4 space-y-2 px-4",children:[" ",c.jsxs("div",{className:"text-white text-sm py-2 border-b border-raspberry-800 mb-2",children:[c.jsxs("p",{className:"font-semibold",children:[t==null?void 0:t.nombre," ",t==null?void 0:t.apellido]}),c.jsx("p",{className:"text-xs text-raspberry-50",children:r.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})})]}),c.jsxs("nav",{className:"flex flex-col space-y-1",children:[c.jsxs(rr,{to:"/citas",onClick:()=>i(!1),className:({isActive:d})=>`w-full text-left text-sm px-4 py-3 rounded-md transition-colors duration-200 flex items-center font-medium
                                        ${d?"bg-raspberry-700 text-white shadow-inner":"text-white hover:bg-raspberry-800"}`,children:[c.jsx(vy,{className:"w-4 h-4 mr-2"})," Citas"]}),c.jsxs(rr,{to:"/pacientes",onClick:()=>i(!1),className:({isActive:d})=>`w-full text-left text-sm px-4 py-3 rounded-md transition-colors duration-200 flex items-center font-medium
                                        ${d?"bg-raspberry-700 text-white shadow-inner":"text-white hover:bg-raspberry-800"}`,children:[c.jsx(Sy,{className:"w-4 h-4 mr-2"})," Pacientes"]}),c.jsxs(rr,{to:"/historial-clinico",onClick:()=>i(!1),className:()=>`w-full text-left text-sm px-4 py-3 rounded-md transition-colors duration-200 flex items-center font-medium
                                            ${a.pathname.startsWith("/historial-clinico")?"bg-raspberry-700 text-white shadow-inner":"text-white hover:bg-raspberry-800"}`,children:[c.jsx(by,{className:"w-4 h-4 mr-2"})," Historial Clínico"]}),c.jsxs(rr,{to:"/doctores",onClick:()=>i(!1),className:({isActive:d})=>`w-full text-left text-sm px-4 py-3 rounded-md transition-colors duration-200 flex items-center font-medium
                                        ${d?"bg-raspberry-700 text-white shadow-inner":"text-white hover:bg-raspberry-800"}`,children:[c.jsx(ky,{className:"w-4 h-4 mr-2"})," Doctores"]}),c.jsxs(rr,{to:"/caja",onClick:()=>i(!1),className:({isActive:d})=>`w-full text-left text-sm px-4 py-3 rounded-md transition-colors duration-200 flex items-center font-medium
                                        ${d||a.pathname==="/"?"bg-raspberry-700 text-white shadow-inner":"text-white hover:bg-raspberry-800"}`,children:[c.jsx(wy,{className:"w-4 h-4 mr-2"})," Caja"]}),c.jsxs(rr,{to:"/reportes",onClick:()=>i(!1),className:({isActive:d})=>`w-full text-left text-sm px-4 py-3 rounded-md transition-colors duration-200 flex items-center font-medium
                                        ${d?"bg-raspberry-700 text-white shadow-inner":"text-white hover:bg-raspberry-800"}`,children:[c.jsx(xy,{className:"w-4 h-4 mr-2"})," Reportes"]})]}),c.jsxs("button",{onClick:l,className:"w-full mt-4 px-4 py-3 text-sm font-bold text-raspberry-700 rounded-md bg-white hover:bg-raspberry-100 transition-colors duration-300 shadow-md flex items-center justify-center",children:[c.jsx(_y,{className:"w-4 h-4 mr-2"})," Cerrar Sesión"]})]})})]}),c.jsx("main",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 flex-grow w-full",children:c.jsx(pN,{})}),c.jsxs("footer",{className:"bg-gray-100 text-gray-600 text-center p-4 text-xs mt-auto",children:["© ",new Date().getFullYear()," Arkham Tech. Todos los derechos reservados."]})]}):c.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-raspberry-50",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-raspberry-700"}),c.jsx("p",{className:"ml-4 text-lg font-semibold text-raspberry-700",children:"Cargando datos de usuario..."})]})}const jO=({activeTab:t})=>{const[e,r]=N.useState([]),[s,n]=N.useState([]),[i,o]=N.useState(!1),[a,l]=N.useState(!1),[d,h]=N.useState(null),[m,p]=N.useState(!0),[x,b]=N.useState(""),[k,w]=N.useState(!1),[v,_]=N.useState({nombre:"",especialidad:"",telefono:"",correo:"",fecha_ingreso:"",porcentaje_comision:"",activo:!0}),S=M=>{const{name:I,value:H,type:ce,checked:we}=M.target;_(de=>({...de,[I]:ce==="checkbox"?we:H}))},C=N.useCallback(async()=>{p(!0);try{const{data:M,error:I}=await ge.from("medicos").select("*").order("nombre",{ascending:!0});if(I)throw I;r(M||[])}catch(M){console.error("Error fetching doctors:",M),ee.error("Error al cargar los médicos"),r([])}finally{p(!1)}},[]);N.useEffect(()=>{C()},[C]),N.useEffect(()=>{let M=e;k||(M=M.filter(I=>I.activo)),x&&(M=M.filter(I=>{var H,ce,we;return I.nombre.toLowerCase().includes(x.toLowerCase())||((H=I.especialidad)==null?void 0:H.toLowerCase().includes(x.toLowerCase()))||((ce=I.telefono)==null?void 0:ce.toLowerCase().includes(x.toLowerCase()))||((we=I.correo)==null?void 0:we.toLowerCase().includes(x.toLowerCase()))})),n(M)},[x,e,k]);const E=()=>{h(null),_({nombre:"",especialidad:"",telefono:"",correo:"",fecha_ingreso:"",porcentaje_comision:"",activo:!0})},D=M=>{var I;h(M),_({nombre:M.nombre,especialidad:M.especialidad||"",telefono:M.telefono||"",correo:M.correo||"",fecha_ingreso:M.fecha_ingreso||"",porcentaje_comision:((I=M.porcentaje_comision)==null?void 0:I.toString())||"",activo:M.activo}),o(!0)},P=async()=>{const M=!!d,I=ee.loading(M?"Actualizando médico...":"Agregando médico...");try{const H={nombre:v.nombre,especialidad:v.especialidad||null,telefono:v.telefono||null,correo:v.correo||null,fecha_ingreso:v.fecha_ingreso||null,porcentaje_comision:v.porcentaje_comision?parseFloat(v.porcentaje_comision):null,activo:v.activo};let ce;if(d){const{error:we}=await ge.from("medicos").update(H).eq("id",d.id);ce=we}else{const{error:we}=await ge.from("medicos").insert([H]);ce=we}if(ce)throw ce;ee.success(d?"Médico actualizado exitosamente":"Médico agregado exitosamente",{id:I}),o(!1),E(),C()}catch(H){console.error("Error saving doctor:",H),ee.error(H.message||"Error al guardar el médico",{id:I})}},O=async M=>{if(!window.confirm("¿Está seguro de que desea eliminar este médico? Esta acción no se puede deshacer."))return;const I=ee.loading("Eliminando médico...");try{const{error:H}=await ge.from("medicos").delete().eq("id",M);if(H)throw H;ee.success("Médico eliminado exitosamente",{id:I}),C(),(d==null?void 0:d.id)===M&&(h(null),l(!1))}catch(H){console.error("Error deleting doctor:",H),ee.error(H.message||"Error al eliminar el médico",{id:I})}},B=M=>{h(M),l(!0)};return c.jsxs("div",{className:"bg-gray-50 rounded-lg shadow-md overflow-hidden transition-all duration-300",children:[c.jsxs("div",{className:"bg-gradient-to-r from-raspberry-700 to-raspberry-900 p-6 text-white flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[c.jsxs("div",{className:"flex items-center flex-wrap gap-x-4 gap-y-2",children:[c.jsx("h2",{className:"text-xl md:text-2xl font-bold",children:"Gestión de Doctores"}),c.jsxs("div",{className:"relative flex-grow min-w-[200px] sm:min-w-0",children:[" ",c.jsx("input",{type:"text",placeholder:"Buscar médicos...",value:x,onChange:M=>b(M.target.value),className:"w-full px-3 py-2 border border-white border-opacity-30 bg-white bg-opacity-10 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-raspberry-200 focus:border-raspberry-200 text-sm transition-colors duration-200 text-white placeholder-raspberry-100"}),x&&c.jsx("button",{onClick:()=>b(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-white text-opacity-70 hover:text-white","aria-label":"Limpiar búsqueda",children:c.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3 w-full sm:w-auto mt-4 sm:mt-0",children:[c.jsxs("button",{onClick:()=>w(!k),className:`px-4 py-2 text-sm font-medium rounded-md flex items-center justify-center transition-colors duration-200 shadow-sm
                            ${k?"bg-white text-raspberry-700 hover:bg-gray-100":"bg-raspberry-100 text-raspberry-700 hover:bg-raspberry-200"}`,"aria-pressed":k,children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"})}),k?"Activos":"Todos"]}),c.jsxs("button",{onClick:()=>{E(),o(!0)},className:"px-4 py-2 text-sm font-medium text-white rounded-md bg-raspberry-500 hover:bg-raspberry-700 transition-all duration-300 shadow-md flex items-center justify-center",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Nuevo Médico"]})]})]}),c.jsx("div",{className:"p-4 sm:p-6",children:c.jsx("div",{className:"overflow-x-auto bg-white rounded-lg shadow-md border border-gray-200",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-raspberry-50",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-semibold text-raspberry-700 uppercase tracking-wider",children:"Nombre"}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-semibold text-raspberry-700 uppercase tracking-wider hidden sm:table-cell",children:"Especialidad"}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-semibold text-raspberry-700 uppercase tracking-wider hidden md:table-cell",children:"Teléfono"}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-semibold text-raspberry-700 uppercase tracking-wider hidden lg:table-cell",children:"Correo"}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-semibold text-raspberry-700 uppercase tracking-wider hidden md:table-cell",children:"Comisión"}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-semibold text-raspberry-700 uppercase tracking-wider",children:"Estado"}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-semibold text-raspberry-700 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m?c.jsx("tr",{children:c.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-sm text-gray-500",children:c.jsxs("div",{className:"flex justify-center items-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-raspberry-700 mr-3"}),"Cargando médicos..."]})})}):s.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-sm text-gray-500",children:c.jsxs("div",{className:"flex flex-col items-center justify-center py-6",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-raspberry-400 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("p",{className:"text-raspberry-900 font-semibold",children:x?"No se encontraron médicos con ese criterio.":"No hay médicos registrados."}),!x&&c.jsx("button",{onClick:()=>{E(),o(!0)},className:"mt-3 text-sm text-raspberry-700 hover:text-raspberry-900 font-medium underline",children:"Agregar nuevo médico"})]})})}):s.map(M=>c.jsxs("tr",{onClick:()=>B(M),className:"hover:bg-raspberry-50 cursor-pointer transition-colors duration-150",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("div",{className:"text-sm font-medium text-gray-900",children:M.nombre})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap hidden sm:table-cell",children:c.jsx("div",{className:"text-sm text-gray-700",children:M.especialidad||"-"})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap hidden md:table-cell",children:c.jsx("div",{className:"text-sm text-gray-700",children:M.telefono||"-"})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap hidden lg:table-cell",children:c.jsx("div",{className:"text-sm text-gray-700",children:M.correo||"-"})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center hidden md:table-cell",children:c.jsx("div",{className:"text-sm text-gray-700",children:M.porcentaje_comision?`${M.porcentaje_comision}%`:"-"})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${M.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:M.activo?"Activo":"Inactivo"})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium",children:c.jsxs("div",{className:"flex justify-center space-x-2",children:[c.jsxs("button",{onClick:I=>{I.stopPropagation(),D(M)},className:"text-raspberry-700 hover:text-raspberry-900 transition-colors duration-200 p-1 rounded-md hover:bg-raspberry-100","aria-label":`Editar ${M.nombre}`,children:[c.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),c.jsx("span",{className:"hidden sm:inline ml-1",children:"Editar"})]}),c.jsxs("button",{onClick:I=>{I.stopPropagation(),O(M.id)},className:"text-red-600 hover:text-red-800 transition-colors duration-200 p-1 rounded-md hover:bg-red-50","aria-label":`Eliminar ${M.nombre}`,children:[c.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),c.jsx("span",{className:"hidden sm:inline ml-1",children:"Eliminar"})]})]})})]},M.id))})]})})}),i&&c.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-60 flex items-center justify-center p-4 z-50 backdrop-blur-sm animate-fade-in-down",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-raspberry-100",children:[c.jsx("div",{className:"sticky top-0 px-6 py-4 border-b border-raspberry-100 bg-gradient-to-r from-raspberry-700 to-raspberry-900 z-10",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-bold text-white",children:d?"Editar Médico":"Nuevo Médico"}),c.jsx("button",{onClick:()=>{o(!1),E()},className:"text-white hover:text-raspberry-100 transition-colors duration-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20","aria-label":"Cerrar modal",children:c.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),c.jsx("div",{className:"px-6 py-6",children:c.jsxs("form",{onSubmit:M=>{M.preventDefault(),P()},className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"text-md font-semibold text-raspberry-800 mb-2 border-b border-raspberry-100 pb-1",children:"Información Básica"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"nombre",className:"block text-sm font-medium text-gray-700 mb-1",children:["Nombre Completo ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"nombre",name:"nombre",value:v.nombre,onChange:S,required:!0,className:"w-full text-sm rounded-md border-gray-300 shadow-sm p-2 border focus:ring-raspberry-500 focus:border-raspberry-500"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"especialidad",className:"block text-sm font-medium text-gray-700 mb-1",children:"Especialidad"}),c.jsx("input",{type:"text",id:"especialidad",name:"especialidad",value:v.especialidad,onChange:S,className:"w-full text-sm rounded-md border-gray-300 shadow-sm p-2 border focus:ring-raspberry-500 focus:border-raspberry-500"})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"text-md font-semibold text-raspberry-800 mb-2 border-b border-raspberry-100 pb-1",children:"Contacto"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"telefono",className:"block text-sm font-medium text-gray-700 mb-1",children:"Teléfono"}),c.jsx("input",{type:"tel",id:"telefono",name:"telefono",value:v.telefono,onChange:S,className:"w-full text-sm rounded-md border-gray-300 shadow-sm p-2 border focus:ring-raspberry-500 focus:border-raspberry-500"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"correo",className:"block text-sm font-medium text-gray-700 mb-1",children:"Correo Electrónico"}),c.jsx("input",{type:"email",id:"correo",name:"correo",value:v.correo,onChange:S,className:"w-full text-sm rounded-md border-gray-300 shadow-sm p-2 border focus:ring-raspberry-500 focus:border-raspberry-500"})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"text-md font-semibold text-raspberry-800 mb-2 border-b border-raspberry-100 pb-1",children:"Información Clínica"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fecha_ingreso",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Ingreso"}),c.jsx("input",{type:"date",id:"fecha_ingreso",name:"fecha_ingreso",value:v.fecha_ingreso,onChange:S,className:"w-full text-sm rounded-md border-gray-300 shadow-sm p-2 border focus:ring-raspberry-500 focus:border-raspberry-500"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"porcentaje_comision",className:"block text-sm font-medium text-gray-700 mb-1",children:"% Comisión"}),c.jsx("input",{type:"number",step:"0.01",id:"porcentaje_comision",name:"porcentaje_comision",value:v.porcentaje_comision,onChange:S,className:"w-full text-sm rounded-md border-gray-300 shadow-sm p-2 border focus:ring-raspberry-500 focus:border-raspberry-500"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"activo",className:"block text-sm font-medium text-gray-700",children:"Estado"}),c.jsxs("div",{className:"mt-1 flex items-center",children:[c.jsx("input",{id:"activo",name:"activo",type:"checkbox",checked:v.activo,onChange:S,className:"h-4 w-4 text-raspberry-700 focus:ring-raspberry-500 border-gray-300 rounded"}),c.jsx("label",{htmlFor:"activo",className:"ml-2 block text-sm text-gray-900",children:"Activo"})]})]}),c.jsxs("div",{className:"pt-4 border-t border-raspberry-100 flex justify-end space-x-3",children:[c.jsx("button",{type:"button",onClick:()=>{o(!1),E()},className:"px-4 py-2 text-sm font-medium rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition-colors duration-200",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white rounded-md bg-raspberry-700 hover:bg-raspberry-900 transition-all duration-300 shadow-md",children:d?"Guardar Cambios":"Agregar Médico"})]})]})})]})}),a&&d&&c.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-60 flex items-center justify-center p-4 z-50 backdrop-blur-sm animate-fade-in-down",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto border border-raspberry-100",children:[c.jsx("div",{className:"sticky top-0 px-6 py-4 border-b border-raspberry-100 bg-gradient-to-r from-raspberry-700 to-raspberry-900 z-10",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-bold text-white",children:"Detalles del Médico"}),c.jsx("button",{onClick:()=>l(!1),className:"text-white hover:text-raspberry-100 transition-colors duration-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20","aria-label":"Cerrar detalles",children:c.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),c.jsx("div",{className:"px-6 py-6 space-y-4",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("p",{className:"text-sm font-medium text-gray-700",children:[c.jsx("strong",{children:"Nombre:"})," ",c.jsx("span",{className:"text-gray-900",children:d.nombre})]}),c.jsxs("p",{className:"text-sm font-medium text-gray-700",children:[c.jsx("strong",{children:"Especialidad:"})," ",c.jsx("span",{className:"text-gray-900",children:d.especialidad||"N/A"})]}),c.jsxs("p",{className:"text-sm font-medium text-gray-700",children:[c.jsx("strong",{children:"Teléfono:"})," ",c.jsx("span",{className:"text-gray-900",children:d.telefono||"N/A"})]}),c.jsxs("p",{className:"text-sm font-medium text-gray-700",children:[c.jsx("strong",{children:"Correo:"})," ",c.jsx("span",{className:"text-gray-900",children:d.correo||"N/A"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("p",{className:"text-sm font-medium text-gray-700",children:[c.jsx("strong",{children:"Fecha de Ingreso:"})," ",c.jsx("span",{className:"text-gray-900",children:d.fecha_ingreso?new Date(d.fecha_ingreso).toLocaleDateString():"N/A"})]}),c.jsxs("p",{className:"text-sm font-medium text-gray-700",children:[c.jsx("strong",{children:"Comisión:"})," ",c.jsx("span",{className:"text-gray-900",children:d.porcentaje_comision?`${d.porcentaje_comision}%`:"N/A"})]}),c.jsxs("p",{className:"text-sm font-medium text-gray-700",children:[c.jsx("strong",{children:"Estado:"})," ",c.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${d.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:d.activo?"Activo":"Inactivo"})]}),c.jsxs("p",{className:"text-sm font-medium text-gray-700",children:[c.jsx("strong",{children:"Registrado el:"})," ",c.jsx("span",{className:"text-gray-900",children:new Date(d.created_at).toLocaleString()})]})]})]})}),c.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-raspberry-100 flex justify-end space-x-3",children:[c.jsx("button",{type:"button",onClick:()=>{l(!1),D(d)},className:"px-4 py-2 text-sm font-medium text-white rounded-md bg-raspberry-700 hover:bg-raspberry-900 transition-all duration-300 shadow-md",children:"Editar Médico"}),c.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-2 text-sm font-medium rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition-colors duration-200",children:"Cerrar"})]})]})})]})},_w="label";function jy(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function NO(t,e){const r=t.options;r&&e&&Object.assign(r,e)}function kw(t,e){t.labels=e}function Sw(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_w;const s=[];t.datasets=e.map(n=>{const i=t.datasets.find(o=>o[r]===n[r]);return!i||!n.data||s.includes(i)?{...n}:(s.push(i),Object.assign(i,n),i)})}function CO(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_w;const r={labels:[],datasets:[]};return kw(r,t.labels),Sw(r,t.datasets,e),r}function EO(t,e){const{height:r=150,width:s=300,redraw:n=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:d=[],fallbackContent:h,updateMode:m,...p}=t,x=N.useRef(null),b=N.useRef(null),k=()=>{x.current&&(b.current=new ho(x.current,{type:o,data:CO(a,i),options:l&&{...l},plugins:d}),jy(e,b.current))},w=()=>{jy(e,null),b.current&&(b.current.destroy(),b.current=null)};return N.useEffect(()=>{!n&&b.current&&l&&NO(b.current,l)},[n,l]),N.useEffect(()=>{!n&&b.current&&kw(b.current.config.data,a.labels)},[n,a.labels]),N.useEffect(()=>{!n&&b.current&&a.datasets&&Sw(b.current.config.data,a.datasets,i)},[n,a.datasets]),N.useEffect(()=>{b.current&&(n?(w(),setTimeout(k)):b.current.update(m))},[n,l,a.labels,a.datasets,m]),N.useEffect(()=>{b.current&&(w(),setTimeout(k))},[o]),N.useEffect(()=>(k(),()=>w()),[]),nu.createElement("canvas",{ref:x,role:"img",height:r,width:s,...p},h)}const MO=N.forwardRef(EO);function Iu(t,e){return ho.register(e),N.forwardRef((r,s)=>nu.createElement(MO,{...r,ref:s,type:t}))}const TO=Iu("line",yc),Ny=Iu("bar",gc),Cy=Iu("doughnut",Ai),Jd=Iu("pie",cf);ho.register(Vn,$m,Am,Wa,Ba,ha,Im);const PO=({user:t})=>{const[e,r]=N.useState([]),[s,n]=N.useState(!0),[i,o]=N.useState(!1),[a,l]=N.useState(null),[d,h]=N.useState(""),[m,p]=N.useState(!1),[x,b]=N.useState(!1),[k,w]=N.useState([]),[v,_]=N.useState([]),S=N.useCallback(A=>{const L="/ArkhamDentalPro/";switch(A){case"F":return`${L}avatars/female.png`;case"M":return`${L}avatars/male.png`;default:return`${L}avatars/neutral.png`}},[]),[C,E]=N.useState({dni:"",nombres:"",apellido_paterno:"",apellido_materno:"",fecha_nacimiento:"",sexo:"M",celular:"",telefono_fijo:"",correo:"",direccion:"",distrito:"",ciudad:"",grupo_sanguineo:"",alergias:"",enfermedades_cronicas:"",medicamentos_actuales:"",seguro_medico:"",estado_civil:"",ocupacion:"",referencia:"",historial_dental:""}),D=A=>{if(!A)return"N/A";const L=new Date(A),F=new Date;let te=F.getFullYear()-L.getFullYear();const me=F.getMonth()-L.getMonth();return(me<0||me===0&&F.getDate()<L.getDate())&&te--,`${te} años`},P=N.useCallback(async()=>{try{n(!0);const{data:A,error:L}=await ge.from("pacientes").select("*").order("nombres",{ascending:!0});if(L)throw L;r(A||[])}catch(A){console.error("Error al cargar pacientes:",A),ee.error("Error al cargar lista de pacientes")}finally{n(!1)}},[]);N.useEffect(()=>{P()},[P]);const O=async()=>["Ancón","Ate","Barranco","Breña","Carabayllo","Chaclacayo","Chorrillos","Cieneguilla","Comas","El Agustino","Independencia","Jesús María","La Molina","La Victoria","Lima (Cercado)","Lince","Los Olivos","Lurigancho-Chosica","Lurín","Magdalena del Mar","Miraflores","Pachacámac","Pucusana","Pueblo Libre","Puente Piedra","Punta Hermosa","Punta Negra","Rímac","San Bartolo","San Borja","San Isidro","San Juan de Lurigancho","San Juan de Miraflores","San Luis","San Martín de Porres","San Miguel","Santa Anita","Santa María del Mar","Santa Rosa","Santiago de Surco","Surquillo","Villa El Salvador","Villa María del Triunfo","Surco","Otros"].sort((A,L)=>A.localeCompare(L)),B=async()=>["Abancay","Arequipa","Ayacucho","Cajamarca","Callao","Cerro de Pasco","Chachapoyas","Chiclayo","Cusco","Huacho","Huancavelica","Huancayo","Huaraz","Huánuco","Ica","Iquitos","Lima","Moquegua","Moyobamba","Piura","Puerto Maldonado","Pucallpa","Puno","Tacna","Trujillo","Tumbes","Otros"].sort((A,L)=>A.localeCompare(L));N.useEffect(()=>{(async()=>{const[L,F]=await Promise.all([O(),B()]);w(L),_(F)})()},[]);const M=A=>{l(A),b(!0)},I=A=>{const{name:L,value:F}=A.target;E(te=>({...te,[L]:F}))},H=A=>{A.preventDefault(),ce()},ce=async()=>{try{if(n(!0),!C.nombres||!C.apellido_paterno||!C.dni){ee.error("Nombres, Apellido Paterno y DNI son campos obligatorios."),n(!1);return}const A={...C,activo:!0};let L;if(a){const{data:F,error:te}=await ge.from("pacientes").update(A).eq("id",a.id).select();if(te)throw te;L=F,ee.success("Paciente actualizado correctamente")}else{const{data:F,error:te}=await ge.from("pacientes").insert([A]).select();if(te)throw te.code==="23505"?new Error("Ya existe un paciente con este DNI."):te;L=F,ee.success("Paciente guardado correctamente")}P(),pe(),o(!1)}catch(A){console.error("Error al guardar paciente:",A),ee.error(A.message||"Error al guardar paciente")}finally{n(!1)}},we=A=>{E({dni:A.dni||"",nombres:A.nombres,apellido_paterno:A.apellido_paterno,apellido_materno:A.apellido_materno||"",fecha_nacimiento:A.fecha_nacimiento||"",sexo:A.sexo||"M",celular:A.celular||"",telefono_fijo:A.telefono_fijo||"",correo:A.correo||"",direccion:A.direccion||"",ciudad:A.ciudad||"",distrito:A.distrito||"",grupo_sanguineo:A.grupo_sanguineo||"",alergias:A.alergias||"",enfermedades_cronicas:A.enfermedades_cronicas||"",medicamentos_actuales:A.medicamentos_actuales||"",seguro_medico:A.seguro_medico||"",estado_civil:A.estado_civil||"",ocupacion:A.ocupacion||"",referencia:A.referencia||"",historial_dental:A.historial_dental||""}),l(A),o(!0)},de=async A=>{if(window.confirm("¿Está seguro de eliminar este paciente? Esta acción no se puede deshacer."))try{const{error:L}=await ge.from("pacientes").delete().eq("id",A);if(L)throw L;ee.success("Paciente eliminado correctamente"),P(),(a==null?void 0:a.id)===A&&(l(null),b(!1))}catch(L){console.error("Error al eliminar paciente:",L),ee.error(L.message||"Error al eliminar paciente")}},pe=()=>{E({dni:"",nombres:"",apellido_paterno:"",apellido_materno:"",fecha_nacimiento:"",sexo:"M",celular:"",telefono_fijo:"",correo:"",direccion:"",ciudad:"",distrito:"",grupo_sanguineo:"",alergias:"",enfermedades_cronicas:"",medicamentos_actuales:"",seguro_medico:"",estado_civil:"",ocupacion:"",referencia:"",historial_dental:""}),l(null)},_e=N.useMemo(()=>e.filter(A=>{var te,me,Ae,Ie,ur,Nt;const L=d.toLowerCase();return`${A.nombres||""} ${A.apellido_paterno||""} ${A.apellido_materno||""}`.toLowerCase().includes(L)||((me=(te=A.dni)==null?void 0:te.toLowerCase())==null?void 0:me.includes(L))||!1||((Ie=(Ae=A.celular)==null?void 0:Ae.toLowerCase())==null?void 0:Ie.includes(L))||!1||((Nt=(ur=A.correo)==null?void 0:ur.toLowerCase())==null?void 0:Nt.includes(L))||!1}),[e,d]),re=m?_e:_e.slice(0,15),oe=()=>{p(!m)},xe=N.useCallback(()=>{const A=[{range:"0-18 años",min:0,max:18,count:0},{range:"19-30 años",min:19,max:30,count:0},{range:"31-45 años",min:31,max:45,count:0},{range:"46-60 años",min:46,max:60,count:0},{range:"60+ años",min:61,max:200,count:0}];return e.forEach(L=>{if(!L.fecha_nacimiento)return;const F=new Date(L.fecha_nacimiento);if(isNaN(F.getTime()))return;const te=new Date().getFullYear()-F.getFullYear(),me=A.find(Ae=>te>=Ae.min&&te<=Ae.max);me&&me.count++}),A.filter(L=>L.count>0)},[e]),ve=N.useCallback(()=>{const A={};return e.forEach(L=>{const F=L.distrito||"No especificado";A[F]=(A[F]||0)+1}),Object.entries(A).map(([L,F])=>({name:L,count:F})).sort((L,F)=>F.count-L.count).slice(0,10)},[e]),J=N.useCallback(()=>{const A={M:0,F:0,O:0};return e.forEach(L=>{const F=L.sexo==="M"||L.sexo==="F"?L.sexo:"O";A[F]++}),Object.entries(A).map(([L,F])=>({type:L,count:F})).filter(L=>L.count>0)},[e]),Q=N.useCallback(()=>{const A={};return e.forEach(L=>{const F=L.ciudad||"No especificado";A[F]=(A[F]||0)+1}),Object.entries(A).map(([L,F])=>({name:L,count:F})).sort((L,F)=>F.count-L.count).slice(0,10)},[e]),U=["rgb(118, 20, 92)","rgb(140, 24, 109)","rgb(78, 16, 73)","rgb(61, 10, 46)","rgb(244, 183, 214)","rgb(238, 144, 193)","rgb(248, 245, 247)","rgb(250, 221, 235)"],be=(A,L=.7)=>A.map(F=>F.replace("rgb(","rgba(").replace(")",`, ${L})`));return c.jsxs("div",{className:"bg-white rounded-lg shadow-xl overflow-hidden border border-raspberry-100 p-4 sm:p-6 mb-6",children:[c.jsx("div",{className:"bg-gradient-to-r from-raspberry-700 to-raspberry-900 p-6 text-white rounded-t-lg",children:c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("h2",{className:"text-2xl font-bold",children:"Gestión de Pacientes"}),c.jsxs("span",{className:"bg-white text-raspberry-900 px-3 py-1 rounded-full text-sm font-semibold",children:[e.filter(A=>A.activo).length," activos"]})]}),c.jsxs("button",{onClick:()=>{pe(),o(!0)},className:"px-5 py-2.5 text-sm font-medium text-white rounded-md bg-raspberry-500 hover:bg-raspberry-700 transition-all duration-300 shadow-md flex items-center justify-center",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Nuevo Paciente"]})]})}),c.jsxs("div",{className:"px-4 py-6 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[c.jsx("div",{className:"flex-1",children:c.jsx("input",{type:"text",placeholder:"Buscar pacientes por nombre, apellido o DNI...",value:d,onChange:A=>h(A.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-raspberry-500 focus:border-raspberry-500"})}),c.jsx("button",{onClick:oe,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 flex items-center justify-center transition-colors duration-200",children:m?"Mostrar Menos":"Mostrar Todos"})]}),s?c.jsxs("div",{className:"flex flex-col justify-center items-center h-48 bg-raspberry-50 rounded-lg",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-raspberry-500"}),c.jsx("p",{className:"ml-4 text-raspberry-700 mt-3",children:"Cargando pacientes..."})]}):e.length===0?c.jsxs("div",{className:"p-10 text-center text-gray-500 bg-raspberry-50 rounded-lg border border-raspberry-100",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12 text-raspberry-500 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),c.jsx("p",{className:"text-raspberry-900",children:"No se encontraron pacientes"}),c.jsx("button",{onClick:()=>{pe(),o(!0)},className:"mt-2 text-sm text-raspberry-700 hover:text-raspberry-900 font-medium underline",children:"Agregar nuevo paciente"})]}):c.jsx("div",{className:"overflow-x-auto bg-white rounded-b-lg shadow-md border border-gray-200",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-raspberry-50",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-raspberry-700 uppercase tracking-wider",children:"Paciente"}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-raspberry-700 uppercase tracking-wider hidden sm:table-cell",children:"DNI"}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-raspberry-700 uppercase tracking-wider hidden md:table-cell",children:"Edad"}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-raspberry-700 uppercase tracking-wider hidden lg:table-cell",children:"Teléfono"}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-raspberry-700 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:re.map(A=>c.jsxs("tr",{className:"hover:bg-raspberry-50 transition-colors duration-150 cursor-pointer",onClick:()=>M(A),children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("img",{src:S(A.sexo),alt:"Avatar del paciente",className:"w-10 h-10 rounded-full object-cover border-2 border-white shadow-md flex-shrink-0 mr-3"}),c.jsx("div",{children:c.jsx("p",{className:"text-sm font-medium text-gray-900",children:`${A.nombres} ${A.apellido_paterno} ${A.apellido_materno||""}`})})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 hidden sm:table-cell",children:A.dni||"-"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 hidden md:table-cell",children:A.fecha_nacimiento?D(A.fecha_nacimiento):"N/A"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 hidden lg:table-cell",children:A.celular||"-"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium",children:c.jsxs("div",{className:"flex justify-center space-x-2",children:[c.jsx("button",{onClick:L=>{L.stopPropagation(),we(A)},className:"text-raspberry-700 hover:text-raspberry-900 transition-colors duration-200 p-1 rounded-md hover:bg-raspberry-100",title:"Editar Paciente",children:c.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),c.jsx("button",{onClick:L=>{L.stopPropagation(),de(A.id)},className:"text-red-600 hover:text-red-800 transition-colors duration-200 p-1 rounded-md hover:bg-red-50",title:"Eliminar Paciente",children:c.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},A.id))})]})})]}),i&&c.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-60 flex items-center justify-center p-4 z-50 animate-fade-in-down",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto flex flex-col border border-raspberry-100",children:[c.jsxs("div",{className:"sticky top-0 px-6 py-4 border-b border-raspberry-100 bg-gradient-to-r from-raspberry-700 to-raspberry-900 z-10 flex justify-between items-center",children:[c.jsxs("h2",{className:"text-lg font-medium text-white flex items-center",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}),a?"Editar Paciente":"Nuevo Paciente"]}),c.jsx("button",{onClick:()=>{o(!1),pe()},className:"text-white hover:text-raspberry-100 transition-colors duration-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:c.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("form",{onSubmit:H,className:"p-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-raspberry-900 border-b border-raspberry-100 pb-2 mb-2",children:"Información Personal"}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"dni",className:"block text-sm font-medium text-raspberry-900",children:"DNI *"}),c.jsx("input",{id:"dni",type:"text",name:"dni",value:C.dni,onChange:I,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-700 focus:ring-raspberry-700 p-2 text-sm",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nombres",className:"block text-sm font-medium text-raspberry-900",children:"Nombres *"}),c.jsx("input",{id:"nombres",type:"text",name:"nombres",value:C.nombres,onChange:I,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-700 focus:ring-raspberry-700 p-2 text-sm",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"apellido_paterno",className:"block text-sm font-medium text-raspberry-900",children:"Apellido Paterno *"}),c.jsx("input",{id:"apellido_paterno",type:"text",name:"apellido_paterno",value:C.apellido_paterno,onChange:I,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-700 focus:ring-raspberry-700 p-2 text-sm",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"apellido_materno",className:"block text-sm font-medium text-raspberry-900",children:"Apellido Materno"}),c.jsx("input",{id:"apellido_materno",type:"text",name:"apellido_materno",value:C.apellido_materno||"",onChange:I,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-700 focus:ring-raspberry-700 p-2 text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fecha_nacimiento",className:"block text-sm font-medium text-raspberry-900",children:"Fecha de Nacimiento"}),c.jsx("input",{id:"fecha_nacimiento",type:"date",name:"fecha_nacimiento",value:C.fecha_nacimiento||"",onChange:I,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-700 focus:ring-raspberry-700 p-2 text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"sexo",className:"block text-sm font-medium text-raspberry-900",children:"Sexo *"}),c.jsxs("select",{id:"sexo",name:"sexo",value:C.sexo,onChange:I,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-700 focus:ring-raspberry-700 p-2 text-sm bg-white",required:!0,children:[c.jsx("option",{value:"M",children:"Masculino"}),c.jsx("option",{value:"F",children:"Femenino"}),c.jsx("option",{value:"O",children:"Otro"})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-raspberry-900 border-b border-raspberry-100 pb-2 mb-2",children:"Información de Contacto"}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"celular",className:"block text-sm font-medium text-raspberry-900",children:"Celular"}),c.jsx("input",{id:"celular",type:"tel",name:"celular",value:C.celular||"",onChange:I,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-700 focus:ring-raspberry-700 p-2 text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"telefono_fijo",className:"block text-sm font-medium text-raspberry-900",children:"Teléfono Fijo"}),c.jsx("input",{id:"telefono_fijo",type:"tel",name:"telefono_fijo",value:C.telefono_fijo||"",onChange:I,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-700 focus:ring-raspberry-700 p-2 text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"correo",className:"block text-sm font-medium text-raspberry-900",children:"Correo Electrónico"}),c.jsx("input",{id:"correo",type:"email",name:"correo",value:C.correo||"",onChange:I,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-700 focus:ring-raspberry-700 p-2 text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ciudad",className:"block text-sm font-medium text-raspberry-900",children:"Ciudad *"}),c.jsxs("select",{id:"ciudad",name:"ciudad",value:C.ciudad||"",onChange:I,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-700 focus:ring-raspberry-700 p-2 text-sm bg-white",required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una ciudad"}),v.map(A=>c.jsx("option",{value:A,children:A},A))]})]}),C.ciudad==="Lima"?c.jsxs("div",{children:[c.jsx("label",{htmlFor:"distrito",className:"block text-sm font-medium text-raspberry-900",children:"Distrito"}),c.jsxs("select",{id:"distrito",name:"distrito",value:C.distrito||"",onChange:I,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-700 focus:ring-raspberry-700 p-2 text-sm bg-white",children:[c.jsx("option",{value:"",children:"Seleccione un distrito"}),k.map(A=>c.jsx("option",{value:A,children:A},A))]})]}):c.jsxs("div",{children:[c.jsx("label",{htmlFor:"distrito",className:"block text-sm font-medium text-raspberry-900",children:C.ciudad?`Distrito de ${C.ciudad}`:"Distrito"}),c.jsx("input",{id:"distrito",type:"text",name:"distrito",value:C.distrito||"",onChange:I,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-700 focus:ring-raspberry-700 p-2 text-sm",disabled:!C.ciudad,placeholder:"Ingrese el distrito"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"direccion",className:"block text-sm font-medium text-raspberry-900",children:"Dirección"}),c.jsx("input",{id:"direccion",type:"text",name:"direccion",value:C.direccion||"",onChange:I,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-700 focus:ring-raspberry-700 p-2 text-sm"})]})]})]}),c.jsxs("div",{className:"mt-6 space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-raspberry-900 border-b border-raspberry-100 pb-2 mb-2",children:"Información Médica"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"grupo_sanguineo",className:"block text-sm font-medium text-raspberry-900",children:"Grupo Sanguíneo"}),c.jsx("input",{id:"grupo_sanguineo",type:"text",name:"grupo_sanguineo",value:C.grupo_sanguineo||"",onChange:I,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-700 focus:ring-raspberry-700 p-2 text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"alergias",className:"block text-sm font-medium text-raspberry-900",children:"Alergias"}),c.jsx("textarea",{id:"alergias",name:"alergias",value:C.alergias||"",onChange:I,rows:2,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-700 focus:ring-raspberry-700 p-2 text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"enfermedades_cronicas",className:"block text-sm font-medium text-raspberry-900",children:"Enfermedades Crónicas"}),c.jsx("textarea",{id:"enfermedades_cronicas",name:"enfermedades_cronicas",value:C.enfermedades_cronicas||"",onChange:I,rows:2,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-700 focus:ring-raspberry-700 p-2 text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"medicamentos_actuales",className:"block text-sm font-medium text-raspberry-900",children:"Medicamentos Actuales"}),c.jsx("textarea",{id:"medicamentos_actuales",name:"medicamentos_actuales",value:C.medicamentos_actuales||"",onChange:I,rows:2,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-700 focus:ring-raspberry-700 p-2 text-sm"})]})]})]}),c.jsxs("div",{className:"mt-6 space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-raspberry-900 border-b border-raspberry-100 pb-2 mb-2",children:"Información Adicional"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"seguro_medico",className:"block text-sm font-medium text-raspberry-900",children:"Seguro Médico"}),c.jsx("input",{id:"seguro_medico",type:"text",name:"seguro_medico",value:C.seguro_medico||"",onChange:I,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-700 focus:ring-raspberry-700 p-2 text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"estado_civil",className:"block text-sm font-medium text-raspberry-900",children:"Estado Civil"}),c.jsxs("select",{id:"estado_civil",name:"estado_civil",value:C.estado_civil||"",onChange:I,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-700 focus:ring-raspberry-700 p-2 text-sm bg-white",children:[c.jsx("option",{value:"",children:"Seleccionar..."}),c.jsx("option",{value:"Soltero",children:"Soltero(a)"}),c.jsx("option",{value:"Casado",children:"Casado(a)"}),c.jsx("option",{value:"Divorciado",children:"Divorciado(a)"}),c.jsx("option",{value:"Viudo",children:"Viudo(a)"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ocupacion",className:"block text-sm font-medium text-raspberry-900",children:"Ocupación"}),c.jsx("input",{id:"ocupacion",type:"text",name:"ocupacion",value:C.ocupacion||"",onChange:I,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-700 focus:ring-raspberry-700 p-2 text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"referencia",className:"block text-sm font-medium text-raspberry-900",children:"Referencia"}),c.jsx("input",{id:"referencia",type:"text",name:"referencia",value:C.referencia||"",onChange:I,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-700 focus:ring-raspberry-700 p-2 text-sm"})]}),c.jsxs("div",{className:"md:col-span-2",children:[" ",c.jsx("label",{htmlFor:"historial_dental",className:"block text-sm font-medium text-raspberry-900",children:"Historial Dental"}),c.jsx("textarea",{id:"historial_dental",name:"historial_dental",value:C.historial_dental||"",onChange:I,rows:3,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-700 focus:ring-raspberry-700 p-2 text-sm"})]})]})]}),c.jsxs("div",{className:"mt-6 flex justify-end space-x-3 border-t border-raspberry-100 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>{o(!1),pe()},className:"px-4 py-2 text-sm font-medium text-raspberry-900 bg-raspberry-50 rounded-md hover:bg-raspberry-100 transition-colors duration-200",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:s,className:"px-4 py-2 text-sm font-medium text-white rounded-md bg-raspberry-700 hover:bg-raspberry-900 transition-all duration-300 shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Guardando...":a?"Actualizar":"Guardar"})]})]})]})}),x&&a&&c.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-80 flex items-center justify-center p-4 z-50 animate-fade-in-down",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto border border-raspberry-100",children:[c.jsx("div",{className:"sticky top-0 px-6 py-4 border-b border-raspberry-100 bg-gradient-to-r from-raspberry-700 to-raspberry-900 z-10",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-lg font-medium text-white",children:"Detalles del Paciente"}),c.jsx("button",{onClick:()=>b(!1),className:"text-white hover:text-raspberry-100 transition-colors duration-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:c.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-raspberry-900 border-b border-raspberry-100 pb-2 mb-2",children:"Información Personal"}),c.jsxs("div",{className:"bg-raspberry-50 rounded-lg p-4 space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-raspberry-900",children:"DNI"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900 font-medium",children:a.dni||"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-raspberry-900",children:"Nombres Completos"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900 font-medium",children:`${a.nombres} ${a.apellido_paterno} ${a.apellido_materno||""}`})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-raspberry-900",children:"Fecha de Nacimiento"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:a.fecha_nacimiento?new Date(a.fecha_nacimiento).toLocaleDateString():"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-raspberry-900",children:"Edad"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:a.fecha_nacimiento?D(a.fecha_nacimiento):"N/A"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-raspberry-900",children:"Sexo"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:a.sexo==="M"?"Masculino":a.sexo==="F"?"Femenino":"Otro"})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-raspberry-900 border-b border-raspberry-100 pb-2 mb-2",children:"Información de Contacto"}),c.jsxs("div",{className:"bg-raspberry-50 rounded-lg p-4 space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-raspberry-900",children:"Celular"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:a.celular||"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-raspberry-900",children:"Teléfono Fijo"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:a.telefono_fijo||"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-raspberry-900",children:"Correo Electrónico"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:a.correo||"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-raspberry-900",children:"Dirección"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:a.direccion||"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-raspberry-900",children:"Ciudad"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:a.ciudad||"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-raspberry-900",children:"Distrito"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:a.distrito||"-"})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-raspberry-900 border-b border-raspberry-100 pb-2 mb-2",children:"Información Médica"}),c.jsxs("div",{className:"bg-raspberry-50 rounded-lg p-4 space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-raspberry-900",children:"Grupo Sanguíneo"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:a.grupo_sanguineo||"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-raspberry-900",children:"Alergias"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:a.alergias||"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-raspberry-900",children:"Enfermedades Crónicas"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:a.enfermedades_cronicas||"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-raspberry-900",children:"Medicamentos Actuales"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:a.medicamentos_actuales||"-"})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-raspberry-900 border-b border-raspberry-100 pb-2 mb-2",children:"Información Adicional"}),c.jsxs("div",{className:"bg-raspberry-50 rounded-lg p-4 space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-raspberry-900",children:"Seguro Médico"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:a.seguro_medico||"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-raspberry-900",children:"Estado Civil"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:a.estado_civil||"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-raspberry-900",children:"Ocupación"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:a.ocupacion||"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-raspberry-900",children:"Referencia"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:a.referencia||"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-raspberry-900",children:"Historial Dental"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:a.historial_dental||"-"})]})]})]})]}),c.jsxs("div",{className:"mt-6 flex justify-end space-x-3 border-t border-raspberry-100 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>b(!1),className:"px-4 py-2 text-sm font-medium text-raspberry-900 bg-raspberry-50 rounded-md hover:bg-raspberry-100 transition-colors duration-200",children:"Cerrar"}),c.jsx("button",{type:"button",onClick:()=>{we(a),b(!1)},className:"px-4 py-2 text-sm font-medium text-white rounded-md bg-raspberry-700 hover:bg-raspberry-900 transition-all duration-300 shadow-md",children:"Editar Paciente"})]})]})]})}),c.jsxs("div",{className:"px-4 py-6 sm:px-6 lg:px-8",children:[c.jsx("h3",{className:"text-xl font-bold text-raspberry-900 mb-6 border-b border-raspberry-100 pb-2",children:"Análisis de Pacientes"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border border-raspberry-100 flex flex-col items-stretch",children:[c.jsx("h4",{className:"text-md font-bold text-raspberry-700 mb-3 text-center",children:"Distribución por Edad"}),xe().length>0?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"h-48 flex-grow flex items-center justify-center",children:c.jsx(Ny,{data:{labels:xe().map(A=>A.range),datasets:[{label:"Pacientes",data:xe().map(A=>A.count),backgroundColor:be(U.slice(0,xe().length)),borderColor:U.slice(0,xe().length),borderWidth:1,borderRadius:8,barPercentage:.8,categoryPercentage:.8}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(A){const L=A.parsed.y||0,F=e.length,te=F>0?Math.round(L/F*100):0;return`${L} paciente${L!==1?"s":""} (${te}%)`}},displayColors:!0,backgroundColor:"rgba(0, 0, 0, 0.7)",titleFont:{size:12},bodyFont:{size:12}}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1,precision:0,color:"rgb(107, 114, 128)"},grid:{display:!0,color:"rgba(0, 0, 0, 0.05)"}},x:{ticks:{color:"rgb(107, 114, 128)"},grid:{display:!1}}}}})}),c.jsx("div",{className:"mt-4 grid grid-cols-2 gap-2 text-xs text-gray-700",children:xe().map(A=>c.jsxs("div",{className:"flex items-center",children:[c.jsx("span",{className:"inline-block w-3 h-3 mr-1 rounded-full",style:{backgroundColor:U[xe().indexOf(A)%U.length]}}),c.jsxs("span",{children:[A.range,": ",c.jsx("span",{className:"font-semibold",children:A.count})]})]},A.range))})]}):c.jsx("p",{className:"text-center text-sm text-gray-500 italic flex-grow flex items-center justify-center",children:"No hay datos de edad disponibles"})]}),c.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border border-raspberry-100 flex flex-col items-stretch",children:[c.jsx("h4",{className:"text-md font-bold text-raspberry-700 mb-3 text-center",children:"Distribución por Ciudad"}),Q().length>0?c.jsx("div",{className:"h-48 flex-grow flex items-center justify-center",children:c.jsx(Cy,{data:{labels:Q().map(A=>A.name),datasets:[{data:Q().map(A=>A.count),backgroundColor:U.slice(0,Q().length),borderColor:"#fff",borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,cutout:"65%",plugins:{legend:{position:"right",labels:{boxWidth:14,padding:16,color:"rgb(55, 65, 81)"}},tooltip:{callbacks:{label:function(A){const L=A.label||"",F=A.raw||0,te=Q().reduce((Ae,Ie)=>Ae+Ie.count,0),me=te>0?Math.round(Number(F)/te*100):0;return`${L}: ${F} (${me}%)`}},displayColors:!0,backgroundColor:"rgba(0, 0, 0, 0.7)",titleFont:{size:12},bodyFont:{size:12}}}}})}):c.jsx("p",{className:"text-center text-sm text-gray-500 italic flex-grow flex items-center justify-center",children:"No hay datos de ciudad disponibles"})]}),c.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border border-raspberry-100 flex flex-col items-stretch",children:[c.jsx("h4",{className:"text-md font-bold text-raspberry-700 mb-3 text-center",children:"Distribución por Distrito"}),ve().length>0?c.jsx("div",{className:"h-48 flex-grow flex items-center justify-center",children:c.jsx(Ny,{data:{labels:ve().map(A=>A.name),datasets:[{label:"Pacientes",data:ve().map(A=>A.count),backgroundColor:be(U.slice(0,ve().length)),borderColor:U.slice(0,ve().length),borderWidth:1,borderRadius:8,barPercentage:.8,categoryPercentage:.8}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(A){const L=A.label||"",F=A.parsed.y||0,te=ve().reduce((Ae,Ie)=>Ae+Ie.count,0),me=te>0?Math.round(Number(F)/te*100):0;return`${L}: ${F} paciente${F!==1?"s":""} (${me}%)`}},displayColors:!0,backgroundColor:"rgba(0, 0, 0, 0.7)",titleFont:{size:12},bodyFont:{size:12}}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1,precision:0,color:"rgb(107, 114, 128)"},grid:{display:!0,color:"rgba(0, 0, 0, 0.05)"}},x:{ticks:{autoSkip:!0,maxRotation:45,minRotation:45,font:{size:10},color:"rgb(107, 114, 128)"},grid:{display:!1}}}}})}):c.jsx("p",{className:"text-center text-sm text-gray-500 italic flex-grow flex items-center justify-center",children:"No hay datos de distrito disponibles"})]}),c.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border border-raspberry-100 flex flex-col items-stretch",children:[c.jsx("h4",{className:"text-md font-bold text-raspberry-700 mb-3 text-center",children:"Distribución por Sexo"}),J().length>0?c.jsx("div",{className:"h-48 flex-grow flex items-center justify-center",children:c.jsx(Cy,{data:{labels:J().map(A=>A.type==="M"?"Masculino":A.type==="F"?"Femenino":"Otro"),datasets:[{label:"Pacientes",data:J().map(A=>A.count),backgroundColor:U.slice(0,J().length),borderColor:"#fff",borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,cutout:"65%",plugins:{legend:{position:"bottom",labels:{font:{size:12},color:"rgb(55, 65, 81)"}},tooltip:{callbacks:{label:function(A){const L=J().reduce((me,Ae)=>me+Ae.count,0),F=A.raw,te=L>0?(Number(F)/L*100).toFixed(1):"0.0";return`${F} paciente${F!==1?"s":""} (${te}%)`}},displayColors:!0,backgroundColor:"rgba(0, 0, 0, 0.7)",titleFont:{size:12},bodyFont:{size:12}}}}})}):c.jsx("p",{className:"text-center text-sm text-gray-500 italic flex-grow flex items-center justify-center",children:"No hay datos de sexo disponibles"})]})]})," "]})," "]})};ho.register(Wa,Ba,da,ws,Vn,Im,$m,Am,yw);function DO({userId:t,userRole:e}){var sl,Nn,ft,dr,tr,st,Ut,hr,$r,nl,il,Ls,vo,ol,rs,Rs;const[r,s]=N.useState(null),[n,i]=N.useState(!0),[o,a]=N.useState([]),[l,d]=N.useState(new Date().toISOString().split("T")[0]),[h,m]=N.useState(""),[p,x]=N.useState(""),[b,k]=N.useState(""),[w,v]=N.useState(!1),[_,S]=N.useState(!1),[C,E]=N.useState(0),[D,P]=N.useState("Ingreso"),[O,B]=N.useState(null),[M,I]=N.useState([]),[H,ce]=N.useState(!1),[we,de]=N.useState({anos:[],balanceTotalPeriodo:0}),[pe,_e]=N.useState(null),[X,re]=N.useState("EFECTIVO"),[oe,xe]=N.useState([]),[ve,J]=N.useState(""),[Q,U]=N.useState(null),[be,A]=N.useState([]),[L,F]=N.useState("SOLES"),[te,me]=N.useState(0),[Ae,Ie]=N.useState(""),[ur,Nt]=N.useState(!1),[xt,kr]=N.useState(""),[er,Qr]=N.useState(""),[Ts,Rt]=N.useState(""),[Zr,el]=N.useState(""),[_n,fo]=N.useState(""),[ht,mo]=N.useState(""),[es,kn]=N.useState(""),[$e,po]=N.useState(""),[ui,Ps]=N.useState(""),[go,ts]=N.useState(!1),[Ue,Ds]=N.useState({ingresosPorCategoria:{labels:[],datasets:[]},egresosPorCategoria:{labels:[],datasets:[]},distribucionGeneral:{labels:[],datasets:[]},balanceEvolucion:{labels:[],datasets:[]}});N.useMemo(()=>e==="admin",[e]);const tl=3.7,At=(R,W="PEN")=>{const V={style:"currency",currency:W,minimumFractionDigits:2,maximumFractionDigits:2},Z=new Intl.NumberFormat(W==="PEN"?"es-PE":"en-US",V).format(R);return W==="PEN"?Z.replace("PEN","S/"):Z},rl=(R,W)=>W==="Ingreso"||W==="Ajuste"&&R>0?"text-green-600":W==="Egreso"||W==="Ajuste"&&R<0?"text-red-600":"text-gray-700",Sn=(R,W)=>{const V=Math.abs(R);return W==="Ingreso"?`+${At(V)}`:W==="Egreso"?`-${At(V)}`:W==="Ajuste"&&R>0?`+${At(R)}`:At(R)},Sr=R=>{if(!R)return{fecha:"-",hora:"-"};try{const W=new Date(R);if(isNaN(W.getTime()))throw new Error("Invalid Date");return{fecha:W.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}),hora:W.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})}}catch(W){return console.error("Error formatting date:",R,W),{fecha:"Inválida",hora:"Inválida"}}},yo=R=>new Date(2e3,R,1).toLocaleString("es-ES",{month:"long"});N.useEffect(()=>{(async()=>{i(!0);try{const{data:{session:W},error:V}=await ge.auth.getSession();if(V)throw V;W!=null&&W.user?s(W.user.id):(console.error("No active session found."),ee.error("No se encontró sesión activa. Por favor, inicie sesión."))}catch(W){console.error("Error fetching user session:",W),ee.error(`Error al obtener la sesión: ${W.message}`)}finally{i(!1)}})()},[]),N.useEffect(()=>{(async()=>{var W;try{const[V,Z,Y]=await Promise.all([ge.from("tipos_movimiento").select("*").eq("activo",!0),ge.from("pacientes").select("id, nombres, apellido_paterno, apellido_materno").eq("activo",!0),ge.from("medicos").select("id, nombre").eq("activo",!0).order("nombre",{ascending:!0})]);if(V.error)throw V.error;if(I(V.data||[]),((W=V.data)==null?void 0:W.length)>0&&!O){const z=V.data.find(le=>le.tipo===D)||V.data[0];B(z.id)}if(Z.error)throw Z.error;const K=(Z.data||[]).map(z=>({...z,nombre:`${z.nombres||""} ${z.apellido_paterno||""} ${z.apellido_materno||""}`.trim(),sexo:z.sexo||"O",activo:!0}));if(A(K),Y.error)throw Y.error;xe((Y.data||[]).map(z=>({...z,activo:!0})))}catch(V){console.error("Error al cargar datos esenciales:",V),ee.error("Error al cargar datos iniciales (categorías, pacientes, médicos).")}})()},[]),N.useEffect(()=>{(async()=>{var W;if(D)try{v(!0);const{data:V,error:Z}=await ge.from("tipos_movimiento").select("*").eq("activo",!0).eq("tipo",D);if(Z)throw Z;I(V||[]),B(((W=V==null?void 0:V[0])==null?void 0:W.id)||null)}catch(V){console.error(`Error al cargar categorías para ${D}:`,V),ee.error(`Error al cargar categorías de ${D}.`)}finally{v(!1)}})()},[D]);const Os=async R=>{if(R){v(!0);try{const W=`${R}T00:00:00`,V=`${R}T23:59:59`,{data:Z,error:Y}=await ge.from("registros_caja").select(`
                    *,
                    tipo_movimiento:tipos_movimiento(id, nombre, tipo),
                    usuario:users(id, nombre),
                    medico:medicos(id, nombre),
                    paciente:pacientes(id, nombres, apellido_paterno, apellido_materno)
                `).gte("fecha",W).lte("fecha",V).order("created_at",{ascending:!1});if(Y)throw Y;const K=(Z||[]).map(z=>({...z,tipo_movimiento:z.tipo_movimiento||void 0,usuario:z.usuario||void 0,medico:z.medico||void 0,paciente:z.paciente?{...z.paciente,nombreCompleto:`${z.paciente.nombres||""} ${z.paciente.apellido_paterno||""}`.trim()}:void 0}));a(K),se(K)}catch(W){console.error("Error cargando registros del día:",W),ee.error(`Error al cargar registros del día: ${W.message}`),a([]),E(0)}finally{v(!1)}}},se=R=>{const W=R.reduce((V,Z)=>V+(Z.valor||0),0);E(W)};N.useEffect(()=>{Os(l)},[l,t]),N.useEffect(()=>{const R=new Date,W=new Date(R.getFullYear(),R.getMonth(),1).toISOString().split("T")[0],V=new Date(R.getFullYear(),R.getMonth()+1,0).toISOString().split("T")[0];xt||kr(W),er||Qr(V)},[]);const di=async R=>{if(!R.fechaInicio||!R.fechaFin){ee.error("Se requieren fechas de inicio y fin para el historial.");return}S(!0);try{const W=`${R.fechaInicio}T00:00:00`,V=`${R.fechaFin}T23:59:59`;let Z=ge.from("registros_caja").select(`
                  id, fecha, descripcion, valor, numero_factura, forma_pago, moneda, created_at,
                  tipo_movimiento:tipos_movimiento(id, nombre, tipo),
                  usuario:users(id, nombre),
                  medico:medicos(id, nombre),
                  paciente:pacientes(id, nombres, apellido_paterno, apellido_materno)
              `).gte("fecha",W).lte("fecha",V).order("fecha",{ascending:!0});R.usuario&&(Z=Z.eq("user_id",t)),R.tipo&&(Z=Z.eq("tipo_movimiento.tipo",R.tipo)),R.categoria&&(Z=Z.eq("tipo_movimiento_id",R.categoria)),R.paciente&&(Z=Z.eq("paciente_id",R.paciente)),R.medico&&(Z=Z.eq("medico_id",R.medico)),R.formaPago&&(Z=Z.eq("forma_pago",R.formaPago));const{data:Y,error:K}=await Z;if(K)throw K;const z=(Y||[]).map(fe=>({...fe,tipo_movimiento:fe.tipo_movimiento||void 0,usuario:fe.usuario||void 0,medico:fe.medico||void 0,categoria:fe.categoria||void 0,paciente:fe.paciente?{...fe.paciente,nombreCompleto:`${fe.paciente.nombres||""} ${fe.paciente.apellido_paterno||""} ${fe.paciente.apellido_materno||""}`.trim()}:void 0})),le=zu(z);de(le);const ne=jr(z);Ds(ne)}catch(W){console.error("Error cargando historial:",W),ee.error(`Error al cargar historial: ${W.message}`),de({anos:[],balanceTotalPeriodo:0}),Ds({ingresosPorCategoria:{labels:[],datasets:[]},egresosPorCategoria:{labels:[],datasets:[]},distribucionGeneral:{labels:[],datasets:[]},balanceEvolucion:{labels:[],datasets:[]}})}finally{S(!1)}},zu=R=>{const W={};let V=0;return R.forEach(K=>{try{const z=new Date(K.fecha);if(isNaN(z.getTime()))throw new Error("Invalid date in record");const le=z.getFullYear(),ne=z.getMonth();W[le]||(W[le]={}),W[le][ne]||(W[le][ne]={registros:[],balanceMes:0}),W[le][ne].registros.push(K),W[le][ne].balanceMes+=K.valor||0,V+=K.valor||0}catch(z){console.error("Error processing record date:",K,z)}}),{anos:Object.keys(W).map(Number).sort((K,z)=>K-z).map(K=>{const z=Object.keys(W[K]).map(Number).sort((fe,he)=>fe-he);let le=0;const ne=z.map(fe=>{const he=W[K][fe];return le+=he.balanceMes,he.registros.sort((at,mt)=>new Date(mt.fecha).getTime()-new Date(at.fecha).getTime()),{mes:fe+1,nombreMes:yo(fe),registros:he.registros,balanceMes:he.balanceMes}});return{ano:K,meses:ne,balanceAnual:le}}),balanceTotalPeriodo:V}},jr=R=>{const W=R.filter(Le=>{var vt,Nr;return((vt=Le.tipo_movimiento)==null?void 0:vt.tipo)==="Ingreso"||((Nr=Le.tipo_movimiento)==null?void 0:Nr.tipo)==="Ajuste"&&Le.valor>=0}),V=R.filter(Le=>{var vt,Nr;return((vt=Le.tipo_movimiento)==null?void 0:vt.tipo)==="Egreso"||((Nr=Le.tipo_movimiento)==null?void 0:Nr.tipo)==="Ajuste"&&Le.valor<0}),Z=Le=>Le.reduce((vt,Nr)=>{var bo;const al=((bo=Nr.tipo_movimiento)==null?void 0:bo.nombre)||(Nr.valor>=0?"Otros Ingresos/Ajustes":"Otros Egresos/Ajustes");return vt[al]=(vt[al]||0)+Math.abs(Nr.valor||0),vt},{}),Y=Z(W),K=Z(V),z=Object.values(Y).reduce((Le,vt)=>Le+vt,0),le=Object.values(K).reduce((Le,vt)=>Le+vt,0);let ne=0;const he=R.map(Le=>(ne+=Le.valor||0,{fecha:Sr(Le.fecha).fecha,balance:ne})).reduce((Le,vt)=>(Le[vt.fecha]=vt.balance,Le),{}),at=Object.keys(he),mt=Object.values(he),As=["#b0005a","#ffc4e0","#8b0046","#ffe7f3","#4c0026"],Is=["#10B981","#34D399","#6EE7B7","#A7F3D0"],Cn=["#EF4444","#F87171","#FCA5A5","#FECACA"];return{ingresosPorCategoria:{labels:Object.keys(Y),datasets:[{data:Object.values(Y),backgroundColor:Is.slice(0,Object.keys(Y).length),borderColor:"#ffffff",borderWidth:1}]},egresosPorCategoria:{labels:Object.keys(K),datasets:[{data:Object.values(K),backgroundColor:Cn.slice(0,Object.keys(K).length),borderColor:"#ffffff",borderWidth:1}]},distribucionGeneral:{labels:["Ingresos","Egresos"],datasets:[{data:[z,le],backgroundColor:[Is[1],Cn[1]],borderColor:"#ffffff",borderWidth:1}]},balanceEvolucion:{labels:at,datasets:[{label:"Balance Acumulado",data:mt,borderColor:As[0],backgroundColor:"rgba(176, 0, 90, 0.1)",fill:!0,tension:.3,pointBackgroundColor:As[0],pointRadius:3,pointHoverRadius:5}]}}};N.useEffect(()=>{H&&xt&&er&&di({fechaInicio:xt,fechaFin:er,usuario:Ts,tipo:Zr,categoria:_n,paciente:ht,medico:es,formaPago:$e}),H||(de({anos:[],balanceTotalPeriodo:0}),Ds({ingresosPorCategoria:{labels:[],datasets:[]},egresosPorCategoria:{labels:[],datasets:[]},distribucionGeneral:{labels:[],datasets:[]},balanceEvolucion:{labels:[],datasets:[]}}))},[H,xt,er,Ts,Zr,_n,ht,es,$e]);const Bt=R=>{const W=R.target.value;x(W);try{const V=parseFloat(W);isNaN(V)?me(0):me(L==="USD"?V*tl:V)}catch{me(0)}},je=R=>{const W=R.target.value;F(W);try{const V=parseFloat(p);isNaN(V)||me(W==="USD"?V*tl:V)}catch{}},xo=async()=>{var Z,Y,K;if(!r){ee.error("Error: No se pudo identificar al usuario. Intente recargar la página.");return}if(!p||isNaN(parseFloat(p))){ee.error("El valor debe ser un número válido.");return}if(!O){ee.error("Debe seleccionar una categoría.");return}if(!l){ee.error("Debe seleccionar una fecha.");return}let R=te;const W=(Z=M.find(z=>z.id===O))==null?void 0:Z.tipo;if(W==="Ingreso"&&R<0){ee.error("Los ingresos deben ser valores positivos.");return}if(W==="Egreso"&&R>0&&(R=-Math.abs(R)),W==="Egreso"&&R===0){ee.error("Los egresos deben tener un valor.");return}const V=new Date(l+"T12:00:00");if(isNaN(V.getTime())){ee.error("Fecha no válida.");return}v(!0);try{const z={fecha:V.toISOString(),tipo_movimiento_id:O,descripcion:h.trim()||" ",valor:R,numero_factura:b.trim()||null,user_id:r,medico_id:pe||null,forma_pago:X,paciente_id:Q||null,moneda:L},{data:le,error:ne}=await ge.from("registros_caja").insert([z]).select("id").single();if(ne)throw ne;let fe=!1;if(W==="Ingreso"&&X==="TARJETA"&&R>0){const he=parseFloat((R*.05).toFixed(2)),at=116;if(he>0&&at){const{error:mt}=await ge.from("registros_caja").insert([{fecha:V.toISOString(),tipo_movimiento_id:at,descripcion:`Comisión tarjeta (${h?h.substring(0,30)+"...":"Ingreso"})`,valor:-he,user_id:r,medico_id:pe||null,forma_pago:"TARJETA",paciente_id:Q||null,moneda:"SOLES"}]);mt?(console.error("Error al insertar comisión:",mt),ee.error(`Ingreso registrado, pero falló la comisión: ${mt.message}`)):fe=!0}}fe?ee.success("Ingreso y comisión registrados."):ee.success("Registro agregado correctamente."),m(""),x(""),me(0),k(""),_e(null),Ps(""),U(null),J(""),F("SOLES"),re("EFECTIVO"),Os(l)}catch(z){console.error("Error agregando registro:",z),(Y=z.message)!=null&&Y.includes("violates not-null constraint")&&((K=z.message)!=null&&K.includes('"user_id"'))?ee.error("Error: Falta el ID de usuario al guardar. Intente recargar."):ee.error(`Error al agregar registro: ${z.message}`)}finally{v(!1)}},Fe=async R=>{if(!R){ee.error("ID inválido.");return}if(window.confirm("¿Estás seguro de eliminar este registro? Esta acción no se puede deshacer.")){v(!0);try{const{error:W}=await ge.from("registros_caja").delete().eq("id",R);if(W)throw W;ee.success("Registro eliminado."),Os(l),H&&di({fechaInicio:xt,fechaFin:er,usuario:Ts,tipo:Zr,categoria:_n,paciente:ht,medico:es,formaPago:$e})}catch(W){console.error("Error eliminando registro:",W),ee.error(`Error al eliminar: ${W.message}`)}finally{v(!1)}}},jn=()=>{const[R,W]=N.useState([]),[V,Z]=N.useState([]),[Y,K]=N.useState([]),[z,le]=N.useState([]);N.useEffect(()=>{(async()=>{try{const[at,mt,As,Is]=await Promise.all([ge.from("users").select("id, nombre, apellido"),ge.from("tipos_movimiento").select("id, nombre, tipo").eq("activo",!0),ge.from("medicos").select("id, nombre").eq("activo",!0),ge.from("pacientes").select("id, nombres, apellido_paterno").eq("activo",!0)]);if(at.error)throw at.error;if(W((at.data||[]).map(Le=>({...Le,apellido:Le.apellido||""}))),mt.error)throw mt.error;if(Z(mt.data||[]),As.error)throw As.error;if(K((As.data||[]).map(Le=>({...Le,activo:!0}))),Is.error)throw Is.error;const Cn=(Is.data||[]).map(Le=>({...Le,nombreCompleto:`${Le.nombres} ${Le.apellido_paterno}`.trim(),sexo:Le.sexo||"O",activo:!0}));le(Cn)}catch(at){console.error("Error fetching filter options:",at),ee.error(`Error al cargar opciones de filtro: ${at.message}`)}})()},[]);const ne=()=>{if(!xt||!er){ee.error("Se requieren fechas de inicio y fin.");return}di({fechaInicio:xt,fechaFin:er,usuario:Ts,tipo:Zr,categoria:_n,paciente:ht,medico:es,formaPago:$e})},fe=()=>{const he=new Date,at=new Date(he.getFullYear(),he.getMonth(),1).toISOString().split("T")[0],mt=new Date(he.getFullYear(),he.getMonth()+1,0).toISOString().split("T")[0];kr(at),Qr(mt),Rt(""),el(""),fo(""),mo(""),kn(""),po(""),di({fechaInicio:at,fechaFin:mt})};return c.jsx("div",{className:"p-4 bg-gray-50 rounded-lg shadow-sm border border-gray-200 mb-6",children:c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaInicioHist",className:"block text-xs font-medium text-gray-600 mb-1",children:"Inicio"}),c.jsx("input",{id:"fechaInicioHist",type:"date",value:xt,onChange:he=>kr(he.target.value),className:"w-full text-sm rounded-md border-gray-300 shadow-sm p-2 border focus:ring-raspberry-500 focus:border-raspberry-500"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaFinHist",className:"block text-xs font-medium text-gray-600 mb-1",children:"Fin"}),c.jsx("input",{id:"fechaFinHist",type:"date",value:er,onChange:he=>Qr(he.target.value),min:xt,className:"w-full text-sm rounded-md border-gray-300 shadow-sm p-2 border focus:ring-raspberry-500 focus:border-raspberry-500"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"usuarioFiltro",className:"block text-xs font-medium text-gray-600 mb-1",children:"Usuario"}),c.jsxs("select",{id:"usuarioFiltro",value:Ts,onChange:he=>Rt(he.target.value),className:"w-full text-sm rounded-md border-gray-300 shadow-sm p-2 border focus:ring-raspberry-500 focus:border-raspberry-500 bg-white",children:[c.jsx("option",{value:"",children:"Todos"}),R.map(he=>c.jsx("option",{value:he.id,children:he.nombre},he.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"tipoFiltro",className:"block text-xs font-medium text-gray-600 mb-1",children:"Tipo"}),c.jsxs("select",{id:"tipoFiltro",value:Zr,onChange:he=>el(he.target.value),className:"w-full text-sm rounded-md border-gray-300 shadow-sm p-2 border focus:ring-raspberry-500 focus:border-raspberry-500 bg-white",children:[c.jsx("option",{value:"",children:"Todos"}),c.jsx("option",{value:"Ingreso",children:"Ingreso"}),c.jsx("option",{value:"Egreso",children:"Egreso"}),c.jsx("option",{value:"Ajuste",children:"Ajuste"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"categoriaFiltro",className:"block text-xs font-medium text-gray-600 mb-1",children:"Categoría"}),c.jsxs("select",{id:"categoriaFiltro",value:_n,onChange:he=>fo(he.target.value),className:"w-full text-sm rounded-md border-gray-300 shadow-sm p-2 border focus:ring-raspberry-500 focus:border-raspberry-500 bg-white",children:[c.jsx("option",{value:"",children:"Todas"}),V.map(he=>c.jsx("option",{value:he.id,children:he.nombre},he.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"pacienteFiltro",className:"block text-xs font-medium text-gray-600 mb-1",children:"Paciente"}),c.jsxs("select",{id:"pacienteFiltro",value:ht,onChange:he=>mo(he.target.value),className:"w-full text-sm rounded-md border-gray-300 shadow-sm p-2 border focus:ring-raspberry-500 focus:border-raspberry-500 bg-white",children:[c.jsx("option",{value:"",children:"Todos"}),z.map(he=>c.jsxs("option",{value:he.id,children:[he.nombres," ",he.apellido_paterno," ",he.apellido_materno]},he.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"medicoFiltro",className:"block text-xs font-medium text-gray-600 mb-1",children:"Médico"}),c.jsxs("select",{id:"medicoFiltro",value:es,onChange:he=>kn(he.target.value),className:"w-full text-sm rounded-md border-gray-300 shadow-sm p-2 border focus:ring-raspberry-500 focus:border-raspberry-500 bg-white",children:[c.jsx("option",{value:"",children:"Todos"}),Y.map(he=>c.jsx("option",{value:he.id,children:he.nombre},he.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"formaPagoFiltro",className:"block text-xs font-medium text-gray-600 mb-1",children:"Forma Pago"}),c.jsxs("select",{id:"formaPagoFiltro",value:$e,onChange:he=>po(he.target.value),className:"w-full text-sm rounded-md border-gray-300 shadow-sm p-2 border focus:ring-raspberry-500 focus:border-raspberry-500 bg-white",children:[c.jsx("option",{value:"",children:"Todas"}),c.jsx("option",{value:"EFECTIVO",children:"Efectivo"}),c.jsx("option",{value:"TARJETA",children:"Tarjeta"}),c.jsx("option",{value:"TRANSFERENCIA",children:"Transferencia"}),c.jsx("option",{value:"YAPE",children:"Yape"}),c.jsx("option",{value:"PLIN",children:"Plin"}),c.jsx("option",{value:"OTROS",children:"Otros"})]})]}),c.jsxs("div",{className:"flex items-end gap-2 col-span-full sm:col-span-1 md:col-span-1 lg:col-span-1 xl:col-span-2",children:[c.jsx("button",{onClick:ne,disabled:_,className:"flex-1 px-4 py-2 bg-raspberry-700 text-white rounded-md hover:bg-raspberry-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-raspberry-500 disabled:opacity-50 text-sm font-medium transition-colors",children:_?"Buscando...":"Aplicar"}),c.jsx("button",{onClick:fe,disabled:_,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 disabled:opacity-50 text-sm font-medium transition-colors",children:"Limpiar"})]})]})})};return c.jsxs("div",{className:"bg-gray-50 rounded-lg shadow-md overflow-hidden transition-all duration-300",children:[c.jsxs("div",{className:"bg-gray-50 rounded-lg shadow-md overflow-hidden transition-all duration-300",children:[c.jsxs("div",{className:"bg-gradient-to-r from-[#801461] to-[#5A0D45] p-6 text-white",children:[c.jsx("h1",{className:"text-xl md:text-2xl font-bold",children:"Gestión Financiera"}),c.jsx("div",{className:"w-full flex justify-end mb-4",children:c.jsx("button",{onClick:()=>ce(!H),className:`px-4 py-2 text-sm font-medium rounded-md flex items-center transition-colors duration-200 ${H?"bg-white text-[#801461] hover:bg-gray-100":"bg-[#F0E6ED] text-[#801461] hover:bg-[#E0CDD9]"}`,children:H?c.jsxs(c.Fragment,{children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),"Ocultar Historial"]}):c.jsxs(c.Fragment,{children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Ver Historial y Gráficos"]})})})]}),c.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[c.jsxs("div",{className:"max-w-xs",children:[c.jsx("label",{htmlFor:"fechaDiaria",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Registro:"}),c.jsx("input",{id:"fechaDiaria",type:"date",value:l,onChange:R=>d(R.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-raspberry-500 focus:ring-raspberry-500 p-2 border text-sm"})]}),c.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200",children:[c.jsx("h2",{className:"text-lg font-semibold text-raspberry-900 mb-4",children:"Registro Diario"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"tipoMov",className:"block text-xs font-medium text-gray-600 mb-1",children:"Tipo*"}),c.jsxs("select",{id:"tipoMov",value:D,onChange:R=>P(R.target.value),className:"w-full text-sm rounded-md border-gray-300 shadow-sm p-2 border focus:ring-raspberry-500 focus:border-raspberry-500 bg-white",children:[c.jsx("option",{value:"Ingreso",children:"Ingreso"}),c.jsx("option",{value:"Egreso",children:"Egreso"}),c.jsx("option",{value:"Ajuste",children:"Ajuste"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"categoriaMov",className:"block text-xs font-medium text-gray-600 mb-1",children:"Categoría*"}),c.jsx("select",{id:"categoriaMov",value:O||"",onChange:R=>B(Number(R.target.value)||null),className:"w-full text-sm rounded-md border-gray-300 shadow-sm p-2 border focus:ring-raspberry-500 focus:border-raspberry-500 bg-white",disabled:w||M.length===0,children:w?c.jsx("option",{children:"Cargando..."}):M.length===0?c.jsx("option",{children:"No hay"}):c.jsxs(c.Fragment,{children:[c.jsx("option",{value:"",children:"Seleccione..."}),M.map(R=>c.jsx("option",{value:R.id,children:R.nombre},R.id))]})})]}),c.jsxs("div",{className:"relative",children:[c.jsx("label",{htmlFor:"medicoReg",className:"block text-xs font-medium text-gray-600 mb-1",children:"Médico"}),c.jsx("input",{id:"medicoReg",type:"text",placeholder:"Buscar...",value:ui,onChange:R=>{Ps(R.target.value),ts(!0),R.target.value||_e(null)},onFocus:()=>ts(!0),onBlur:()=>setTimeout(()=>ts(!1),150),className:"w-full text-sm rounded-md border-gray-300 shadow-sm p-2 border focus:ring-raspberry-500 focus:border-raspberry-500"}),go&&oe.filter(R=>R.nombre.toLowerCase().includes(ui.toLowerCase())).length>0&&c.jsx("ul",{className:"absolute z-20 w-full bg-white border border-gray-300 rounded-md shadow-lg mt-1 max-h-40 overflow-y-auto",children:oe.filter(R=>R.nombre.toLowerCase().includes(ui.toLowerCase())).slice(0,10).map(R=>c.jsx("li",{className:"px-3 py-1.5 text-sm hover:bg-raspberry-50 cursor-pointer",onMouseDown:()=>{_e(R.id),Ps(R.nombre),ts(!1)},children:R.nombre},R.id))}),pe&&c.jsx("span",{className:"text-xs text-green-600 block mt-0.5",children:"✓ Seleccionado"})]}),c.jsxs("div",{className:"relative",children:[c.jsx("label",{htmlFor:"pacienteReg",className:"block text-xs font-medium text-gray-600 mb-1",children:"Paciente"}),c.jsx("input",{id:"pacienteReg",type:"text",placeholder:"Buscar...",value:ve,onChange:R=>{J(R.target.value),Ie(R.target.value),Nt(!0),R.target.value||U(null)},onFocus:()=>Nt(!0),onBlur:()=>setTimeout(()=>Nt(!1),150),className:"w-full text-sm rounded-md border-gray-300 shadow-sm p-2 border focus:ring-raspberry-500 focus:border-raspberry-500"}),ur&&be.filter(R=>R.nombres.toLowerCase().includes(Ae.toLowerCase())).length>0&&c.jsx("ul",{className:"absolute z-20 w-full bg-white border border-gray-300 rounded-md shadow-lg mt-1 max-h-40 overflow-y-auto",children:be.filter(R=>R.nombres.toLowerCase().includes(Ae.toLowerCase())).slice(0,10).map(R=>c.jsxs("li",{className:"px-3 py-1.5 text-sm hover:bg-raspberry-50 cursor-pointer",onMouseDown:()=>{U(String(R.id)),J(R.nombres),Ie(R.nombres),Nt(!1)},children:[R.nombres," ",R.apellido_paterno," ",R.apellido_materno]},R.id))}),Q&&c.jsx("span",{className:"text-xs text-green-600 block mt-0.5",children:"✓ Seleccionado"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"formaPagoMov",className:"block text-xs font-medium text-gray-600 mb-1",children:"Forma Pago*"}),c.jsxs("select",{id:"formaPagoMov",value:X,onChange:R=>re(R.target.value),className:"w-full text-sm rounded-md border-gray-300 shadow-sm p-2 border focus:ring-raspberry-500 focus:border-raspberry-500 bg-white",children:[c.jsx("option",{value:"EFECTIVO",children:"Efectivo"}),c.jsx("option",{value:"TARJETA",children:"Tarjeta"}),c.jsx("option",{value:"TRANSFERENCIA",children:"Transferencia"}),c.jsx("option",{value:"YAPE",children:"Yape"}),c.jsx("option",{value:"PLIN",children:"Plin"}),c.jsx("option",{value:"OTROS",children:"Otros"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"descripcionMov",className:"block text-xs font-medium text-gray-600 mb-1",children:"Descripción"}),c.jsx("input",{id:"descripcionMov",type:"text",value:h,onChange:R=>m(R.target.value||"Sin descripción"),placeholder:"Detalles del movimiento",className:"w-full text-sm rounded-md border-gray-300 shadow-sm p-2 border focus:ring-raspberry-500 focus:border-raspberry-500"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"valorMov",className:"block text-xs font-medium text-gray-600 mb-1",children:"Valor*"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("select",{value:L,onChange:je,"aria-label":"Tipo de Moneda",className:"text-sm rounded-md border-gray-300 shadow-sm p-2 border focus:ring-raspberry-500 focus:border-raspberry-500 bg-white",children:[c.jsx("option",{value:"SOLES",children:"S/"}),c.jsx("option",{value:"USD",children:"$"})]}),c.jsx("input",{id:"valorMov",type:"number",step:"0.01",value:p,onChange:Bt,placeholder:"0.00",required:!0,className:"flex-grow text-sm rounded-md border-gray-300 shadow-sm p-2 border focus:ring-raspberry-500 focus:border-raspberry-500"})]}),L==="USD"&&te>0&&c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["≈ ",At(te,"PEN")]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"numFactura",className:"block text-xs font-medium text-gray-600 mb-1",children:"Nº Factura"}),c.jsx("input",{id:"numFactura",type:"text",value:b,onChange:R=>k(R.target.value),placeholder:"Ej: F001-123",className:"w-full text-sm rounded-md border-gray-300 shadow-sm p-2 border focus:ring-raspberry-500 focus:border-raspberry-500"})]})]}),c.jsx("div",{className:"pt-2 flex justify-center",children:c.jsx("button",{onClick:xo,disabled:w||!p||!O,className:"px-6 py-2 bg-raspberry-700 text-white rounded-md hover:bg-raspberry-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-raspberry-500 disabled:opacity-60 disabled:cursor-not-allowed transition-colors text-sm font-medium shadow-sm",children:w?c.jsxs("span",{className:"flex items-center justify-center",children:[c.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Agregando..."]}):"Agregar Registro"})})]})]}),c.jsxs("div",{className:"mt-6",children:[c.jsxs("h2",{className:"text-lg font-semibold text-raspberry-900 mb-3",children:["Registros del Día (",Sr(l).fecha,")"]}),c.jsx("div",{className:"overflow-x-auto shadow rounded-lg border border-gray-200 bg-white",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-3 py-2.5 text-right text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"User"}),c.jsx("th",{className:"px-3 py-2.5 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Hora"}),c.jsx("th",{className:"px-3 py-2.5 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Tipo"}),c.jsx("th",{className:"px-3 py-2.5 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Categoría"}),c.jsx("th",{className:"px-3 py-2.5 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Descripción"}),c.jsx("th",{className:"px-3 py-2.5 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Paciente"}),c.jsx("th",{className:"px-3 py-2.5 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Médico"}),c.jsx("th",{className:"px-3 py-2.5 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Forma Pago"}),c.jsx("th",{className:"px-3 py-2.5 text-right text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Valor"}),c.jsx("th",{className:"px-3 py-2.5 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Acción"})]})}),c.jsxs("tbody",{className:"divide-y divide-gray-200",children:[w&&c.jsx("tr",{children:c.jsx("td",{colSpan:9,className:"py-4 text-center text-sm text-gray-500 italic",children:"Cargando registros..."})}),!w&&o.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:9,className:"py-4 text-center text-sm text-gray-500 italic",children:"No hay registros para esta fecha."})}),!w&&o.map(R=>{var ne,fe,he,at,mt;const{hora:W}=Sr(R.created_at),V=(ne=R.tipo_movimiento)==null?void 0:ne.tipo,Z=rl(R.valor,V),Y=Sn(R.valor,V),K=((fe=R.paciente)==null?void 0:fe.nombres)||"N/A",z=((he=R.medico)==null?void 0:he.nombre)||"N/A";let le="bg-gray-100 text-gray-800";return V==="Ingreso"?le="bg-green-100 text-green-800":V==="Egreso"?le="bg-red-100 text-red-800":V==="Ajuste"&&(le="bg-yellow-100 text-yellow-800"),c.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-100",children:[c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600",children:((at=R.usuario)==null?void 0:at.nombre)||"N/A"}),c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-500",children:W}),c.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:c.jsx("span",{className:`px-2 py-0.5 inline-flex text-xs leading-5 font-semibold rounded-full ${le}`,children:V||"N/A"})}),c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-800",children:((mt=R.tipo_movimiento)==null?void 0:mt.nombre)||"N/A"}),c.jsx("td",{className:"px-3 py-2 text-sm text-gray-600 max-w-xs truncate",title:R.descripcion,children:R.descripcion||"-"}),c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600",children:K}),c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600",children:z}),c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600",children:R.forma_pago||"N/A"}),c.jsx("td",{className:`px-3 py-2 whitespace-nowrap text-sm text-right font-medium ${Z}`,children:Y}),c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-center text-sm font-medium",children:c.jsx("button",{onClick:()=>Fe(R.id),disabled:w,title:"Eliminar Registro",className:"text-red-500 hover:text-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},R.id)})]}),c.jsx("tfoot",{className:"bg-gray-150",children:c.jsxs("tr",{children:[c.jsx("td",{colSpan:8,className:"px-3 py-2 text-right text-sm font-semibold text-gray-700",children:"Total del Día:"}),c.jsx("td",{className:`px-3 py-2 text-right text-sm font-bold ${C>=0?"text-green-700":"text-red-700"}`,children:At(C)}),c.jsx("td",{className:"px-3 py-3"})]})})]})})]})]})]}),H&&c.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200 space-y-6",children:[c.jsx("h2",{className:"overflow-x-auto text-lg font-semibold text-raspberry-900 mb-3",children:"   Historial y Análisis"}),c.jsx(jn,{}),_&&c.jsx("div",{className:"text-center py-10",children:c.jsx("p",{className:"text-sm text-gray-500 italic",children:"Cargando historial..."})}),!_&&we.anos.length===0&&c.jsxs("div",{className:"text-center py-10 bg-white rounded-lg shadow border border-gray-200",children:[c.jsx("p",{className:"text-md text-gray-600",children:"No se encontraron registros para el período y filtros seleccionados."}),c.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Intente ajustar las fechas o los filtros."})]}),!_&&we.anos.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 items-stretch",children:[c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-md border border-gray-200 flex flex-col h-full",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 text-center mb-4",children:" Ingresos por Categoría"}),((dr=(ft=(Nn=(sl=Ue.ingresosPorCategoria)==null?void 0:sl.datasets)==null?void 0:Nn[0])==null?void 0:ft.data)==null?void 0:dr.length)>0?c.jsxs("div",{className:"space-y-6 flex flex-col flex-grow",children:[c.jsx("div",{className:"h-48 flex-shrink-0",children:c.jsx(Jd,{data:Ue.ingresosPorCategoria,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(R){const W=R.dataset.data.reduce((Y,K)=>Y+K,0),V=R.raw,Z=W>0?Math.round(V/W*100):0;return`${R.label}: S/.${V.toLocaleString()} (${Z}%)`}}}}}})}),c.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-100 flex-shrink-0",children:c.jsxs("table",{className:"min-w-full text-sm divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-600",children:"Categoría"}),c.jsx("th",{className:"px-4 py-2 text-right font-semibold text-gray-600",children:"Monto"}),c.jsx("th",{className:"px-4 py-2 text-right font-semibold text-gray-600",children:"% del Total"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-100",children:(()=>{const R=Ue.ingresosPorCategoria,W=R.labels||[],V=R.datasets[0].data||[],Z=V.reduce((K,z)=>K+z,0),Y=W.map((K,z)=>({label:K,value:V[z],percentage:Z>0?V[z]/Z*100:0})).sort((K,z)=>z.value-K.value);return c.jsxs(c.Fragment,{children:[Y.map((K,z)=>c.jsxs("tr",{className:z%2===0?"bg-white":"bg-gray-50",children:[c.jsx("td",{className:"px-4 py-2 font-medium text-gray-700",children:K.label}),c.jsxs("td",{className:"px-4 py-2 text-right",children:["S/.",K.value.toLocaleString()]}),c.jsxs("td",{className:"px-4 py-2 text-right",children:[K.percentage.toFixed(1),"%"]})]},z)),Z>0&&c.jsxs("tr",{className:"bg-green-50 font-semibold text-green-800",children:[c.jsx("td",{className:"px-4 py-2",children:"Total Ingresos"}),c.jsxs("td",{className:"px-4 py-2 text-right",children:["S/.",Z.toLocaleString()]}),c.jsx("td",{className:"px-4 py-2 text-right",children:"100%"})]})]})})()})]})}),c.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-xl mt-auto flex-shrink-0",children:[c.jsx("h4",{className:"text-green-900 font-bold mb-2",children:"💡 Insights de Ingresos:"}),c.jsx("ul",{className:"space-y-2 text-green-800 text-sm",children:(()=>{const R=Ue.ingresosPorCategoria,W=R.labels||[],V=R.datasets[0].data||[],Z=V.reduce((z,le)=>z+le,0);if(Z===0)return c.jsx("li",{children:"No hay datos para generar insights."});const Y=W.map((z,le)=>({label:z,value:V[le],percentage:Z>0?V[le]/Z*100:0})).sort((z,le)=>le.value-z.value),K=[];if(Y.length>0&&K.push(`✅ La categoría principal es **${Y[0].label}**, aportando el  ${Y[0].percentage.toFixed(1)}% del total (S/.${Y[0].value.toLocaleString()}).`),Y.length>=3){const z=Y.slice(0,3).reduce((le,ne)=>le+ne.percentage,0);z>80?K.push(`⚠️ Más del 80% de los ingresos (${z.toFixed(1)}%) proviene de solo **${Y.slice(0,3).map(le=>le.label).join(", ")}**. Considera diversificar.`):K.push(`📌 Buena diversificación: Las 3 categorías principales suman el ${z.toFixed(1)}% del total.`)}else Y.length>0&&K.push(`📌 Los ingresos se concentran en ${Y.length} categorí${Y.length>1?"as":"a"}.`);if(Y.length>=2){const z=Y[1].value>0?Y[0].value/Y[1].value:1/0;z>=2&&z!==1/0&&K.push(`📈 **${Y[0].label}** genera ${z.toFixed(1)} veces más ingresos que **${Y[1].label}**.`)}return K.push(`💰 **Total de ingresos:** S/.${Z.toLocaleString()}`),K.map((z,le)=>c.jsxs("li",{className:"flex items-start gap-1.5",children:[c.jsx("span",{className:"mt-0.5 text-base",children:"•"}),c.jsx("span",{dangerouslySetInnerHTML:{__html:z}})]},le))})()})]})]}):c.jsx("p",{className:"text-sm text-gray-500 text-center italic mt-8 flex-grow flex items-center justify-center",children:"No hay datos de ingresos por categoría disponibles"})]}),c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-md border border-gray-200 flex flex-col h-full",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 text-center mb-4",children:"Egresos por Categoría"}),((hr=(Ut=(st=(tr=Ue.egresosPorCategoria)==null?void 0:tr.datasets)==null?void 0:st[0])==null?void 0:Ut.data)==null?void 0:hr.length)>0?c.jsxs("div",{className:"space-y-6 flex flex-col flex-grow",children:[c.jsx("div",{className:"h-48 flex-shrink-0",children:c.jsx(Jd,{data:Ue.egresosPorCategoria,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(R){const W=R.dataset.data.reduce((Y,K)=>Y+K,0),V=R.raw,Z=W>0?Math.round(V/W*100):0;return`${R.label}: S/.${V.toLocaleString()} (${Z}%)`}}}}}})}),c.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-100 flex-shrink-0",children:c.jsxs("table",{className:"min-w-full text-sm divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-600",children:"Categoría"}),c.jsx("th",{className:"px-4 py-2 text-right font-semibold text-gray-600",children:"Monto"}),c.jsx("th",{className:"px-4 py-2 text-right font-semibold text-gray-600",children:"% del Total"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-100",children:(()=>{const R=Ue.egresosPorCategoria,W=R.labels||[],V=R.datasets[0].data||[],Z=V.reduce((K,z)=>K+z,0),Y=W.map((K,z)=>({label:K,value:V[z],percentage:Z>0?V[z]/Z*100:0})).sort((K,z)=>z.value-K.value);return c.jsxs(c.Fragment,{children:[Y.map((K,z)=>c.jsxs("tr",{className:z%2===0?"bg-white":"bg-gray-50",children:[c.jsx("td",{className:"px-4 py-2 font-medium text-gray-700",children:K.label}),c.jsxs("td",{className:"px-4 py-2 text-right",children:["S/.",K.value.toLocaleString()]}),c.jsxs("td",{className:"px-4 py-2 text-right",children:[K.percentage.toFixed(1),"%"]})]},z)),Z>0&&c.jsxs("tr",{className:"bg-red-50 font-semibold text-red-800",children:[c.jsx("td",{className:"px-4 py-2",children:"Total Egresos"}),c.jsxs("td",{className:"px-4 py-2 text-right",children:["S/.",Z.toLocaleString()]}),c.jsx("td",{className:"px-4 py-2 text-right",children:"100%"})]})]})})()})]})}),c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mt-auto flex-shrink-0",children:[c.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:"🔍 Análisis de Gastos"}),c.jsx("ul",{className:"space-y-2 text-sm text-red-800",children:(()=>{const R=Ue.egresosPorCategoria,W=R.labels||[],V=R.datasets[0].data||[],Z=V.reduce((z,le)=>z+le,0);if(Z===0)return c.jsx("li",{children:"No hay datos para generar insights."});const Y=W.map((z,le)=>({label:z,value:V[le],percentage:Z>0?V[le]/Z*100:0})).sort((z,le)=>le.value-z.value),K=[];if(Y.length>0&&K.push(`❗️ El mayor gasto es **${Y[0].label}**, representando el ${Y[0].percentage.toFixed(1)}% del total (S/.${Y[0].value.toLocaleString()}).`),Y.length>=3){const z=Y.slice(0,3).reduce((le,ne)=>le+ne.percentage,0);z>75?K.push(`⚠️ El ${z.toFixed(1)}% de los gastos se concentra en **${Y.slice(0,3).map(le=>le.label).join(", ")}**. Evalúa si es posible optimizar.`):K.push(`📊 Gastos diversificados: Las 3 categorías principales suman el ${z.toFixed(1)}%.`)}else Y.length>0&&K.push(`📊 Los gastos se distribuyen en ${Y.length} categorí${Y.length>1?"as":"a"}.`);if(Y.length>1){const z=Y[Y.length-1];z&&z.percentage<5&&K.push(`📉 **${z.label}** tiene un impacto bajo en los gastos (${z.percentage.toFixed(1)}%).`)}return K.push(`💸 **Total de egresos:** S/.${Z.toLocaleString()}`),K.map((z,le)=>c.jsxs("li",{className:"flex items-start gap-1.5",children:[c.jsx("span",{className:"mt-0.5 text-base",children:"•"}),c.jsx("span",{dangerouslySetInnerHTML:{__html:z}})]},le))})()})]})]}):c.jsx("p",{className:"text-sm text-gray-500 text-center italic mt-8 flex-grow flex items-center justify-center",children:"No hay datos de egresos por categoría disponibles"})]}),c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-md border border-gray-200 flex flex-col h-full md:col-span-2 xl:col-span-1",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 text-center mb-4",children:"Ingresos vs Egresos"}),(Ls=(il=(nl=($r=Ue.distribucionGeneral)==null?void 0:$r.datasets)==null?void 0:nl[0])==null?void 0:il.data)!=null&&Ls.some(R=>R>0)?c.jsxs("div",{className:"space-y-6 flex flex-col flex-grow",children:[c.jsx("div",{className:"h-48 flex-shrink-0",children:c.jsx(Jd,{data:Ue.distribucionGeneral,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:15,boxWidth:12}},tooltip:{callbacks:{label:function(R){const W=R.dataset.data.reduce((Y,K)=>Y+K,0),V=R.raw,Z=W>0?Math.round(V/W*100):0;return`${R.label}: S/.${V.toLocaleString()} (${Z}%)`}}}}}})}),c.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-100 flex-shrink-0",children:c.jsxs("table",{className:"min-w-full text-sm divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-600",children:"Concepto"}),c.jsx("th",{className:"px-4 py-2 text-right font-semibold text-gray-600",children:"Monto"}),c.jsx("th",{className:"px-4 py-2 text-right font-semibold text-gray-600",children:"% del Total"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-100",children:(()=>{var z,le;const R=Ue.distribucionGeneral,W=R.labels||[],V=R.datasets[0].data||[],Z=V.reduce((ne,fe)=>ne+fe,0),Y=W.map((ne,fe)=>({label:ne,value:V[fe],percentage:Z>0?V[fe]/Z*100:0,bgColor:/ingreso/i.test(ne)?"bg-green-50":/egreso/i.test(ne)?"bg-red-50":"bg-white",textColor:/ingreso/i.test(ne)?"text-green-800":/egreso/i.test(ne)?"text-red-800":"text-gray-700"})).sort((ne,fe)=>fe.value-ne.value),K=(((z=Y.find(ne=>/ingreso/i.test(ne.label)))==null?void 0:z.value)||0)-(((le=Y.find(ne=>/egreso/i.test(ne.label)))==null?void 0:le.value)||0);return c.jsxs(c.Fragment,{children:[Y.map((ne,fe)=>c.jsxs("tr",{className:`${ne.bgColor} hover:bg-gray-100`,children:[c.jsx("td",{className:`px-4 py-2 font-medium ${ne.textColor}`,children:ne.label}),c.jsxs("td",{className:`px-4 py-2 text-right ${ne.textColor}`,children:["S/.",ne.value.toLocaleString()]}),c.jsxs("td",{className:`px-4 py-2 text-right ${ne.textColor}`,children:[ne.percentage.toFixed(1),"%"]})]},fe)),c.jsxs("tr",{className:`font-semibold ${K>=0?"bg-green-100 text-green-900":"bg-red-100 text-red-900"}`,children:[c.jsx("td",{className:"px-4 py-2",children:"Balance (Ingresos - Egresos)"}),c.jsxs("td",{className:"px-4 py-2 text-right",colSpan:2,children:["S/.",K.toLocaleString()]})]})]})})()})]})}),c.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-4 mt-auto flex-shrink-0",children:[c.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"⚖️ Análisis de Balance"}),c.jsx("ul",{className:"space-y-2 text-sm text-gray-700",children:(()=>{const R=Ue.distribucionGeneral,W=R.labels||[],V=R.datasets[0].data||[],Z=V.reduce((ne,fe)=>ne+fe,0);if(Z===0)return c.jsx("li",{children:"No hay datos para generar insights."});const Y=W.map((ne,fe)=>({label:ne,value:V[fe],percentage:Z>0?V[fe]/Z*100:0})).sort((ne,fe)=>fe.value-ne.value),K=[],z=Y.find(ne=>/ingreso/i.test(ne.label)),le=Y.find(ne=>/egreso/i.test(ne.label));if(z&&le){const ne=z.value-le.value,fe=ne>=0?"+":"-",he=ne>=0?"text-green-700 font-semibold":"text-red-700 font-semibold";K.push(`📊 Comparativa: Ingresos (${z.percentage.toFixed(1)}%) vs Egresos (${le.percentage.toFixed(1)}%).`),K.push(ne>=0?`✅ ¡Superávit! El balance es <span class="${he}">${fe}S/.${Math.abs(ne).toLocaleString()}</span>.`:`⚠️ ¡Déficit! El balance es <span class="${he}">${fe}S/.${Math.abs(ne).toLocaleString()}</span>. Revisa tus gastos.`)}else z?K.push(`✅ Solo se registraron ingresos por $${z.value.toLocaleString()}.`):le&&K.push(`⚠️ Solo se registraron egresos por $${le.value.toLocaleString()}.`);return K.push(`💰 **Flujo total (Ingresos + Egresos):** S/.${Z.toLocaleString()}`),K.map((ne,fe)=>c.jsxs("li",{className:"flex items-start gap-1.5",children:[c.jsx("span",{className:"mt-0.5 text-base",children:"•"}),c.jsx("span",{dangerouslySetInnerHTML:{__html:ne}})]},fe))})()})]})]}):c.jsx("p",{className:"text-sm text-gray-500 text-center italic mt-8 flex-grow flex items-center justify-center",children:"Sin datos para comparar Ingresos vs Egresos"})]}),c.jsxs("div",{className:"md:col-span-2 xl:col-span-3 bg-white p-6 rounded-lg shadow border border-gray-200 space-y-6",children:[c.jsx("h3",{className:"text-md font-semibold text-gray-700 mb-3",children:"Evolución del Balance"}),((Rs=(rs=(ol=(vo=Ue.balanceEvolucion)==null?void 0:vo.datasets)==null?void 0:ol[0])==null?void 0:rs.data)==null?void 0:Rs.length)>0?c.jsx(c.Fragment,{children:c.jsx("div",{className:"h-60",children:c.jsx(TO,{data:{...Ue.balanceEvolucion,datasets:[...Ue.balanceEvolucion.datasets||[],Ue.ingresosAcumulado&&{label:"Ingresos Acumulados",data:Ue.ingresosAcumulado.datasets[0].data,borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.1)",fill:!1,tension:.3,yAxisID:"y"},Ue.egresosAcumulado&&{label:"Egresos Acumulados",data:Ue.egresosAcumulado.datasets[0].data,borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.1)",fill:!1,tension:.3,yAxisID:"y"}].filter(Boolean)},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{y:{beginAtZero:!0,position:"left",title:{display:!0,text:"Monto Acumulado"}},x:{title:{display:!0,text:"Fecha"}}},plugins:{legend:{display:!0,position:"bottom"},tooltip:{callbacks:{label:R=>`${R.dataset.label}: $${R.parsed.y.toLocaleString()}`}}}}})})}):c.jsx("p",{className:"text-sm text-gray-500 text-center italic mt-8",children:"Datos insuficientes para mostrar la evolución"})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-raspberry-900 mb-4",children:"Detalle del Historial"}),c.jsx("div",{className:"space-y-6",children:we.anos.map(R=>c.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border border-gray-200",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-3 flex justify-between items-center",children:[c.jsxs("span",{children:["Año ",R.ano]}),c.jsxs("span",{className:`text-sm font-bold ${R.balanceAnual>=0?"text-green-600":"text-red-600"}`,children:["Balance Anual: ",At(R.balanceAnual)]})]}),c.jsx("div",{className:"space-y-4",children:R.meses.map(W=>c.jsxs("details",{className:"border-b border-gray-100 last:border-b-0 pb-2 mb-2",children:[c.jsxs("summary",{className:"cursor-pointer text-md font-medium text-gray-700 hover:text-raspberry-800 flex justify-between items-center py-1",children:[c.jsx("span",{className:"capitalize",children:W.nombreMes}),c.jsxs("span",{className:`text-sm font-semibold ${W.balanceMes>=0?"text-green-600":"text-red-600"}`,children:["Balance Mes: ",At(W.balanceMes)]})]}),W.registros.length>0?c.jsx("div",{className:"overflow-x-auto mt-2 pl-4 pr-1",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-2 py-1.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),c.jsx("th",{className:"px-2 py-1.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),c.jsx("th",{className:"px-2 py-1.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cat."}),c.jsx("th",{className:"px-2 py-1.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Desc."}),c.jsx("th",{className:"px-2 py-1.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Paciente"}),c.jsx("th",{className:"px-2 py-1.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Médico"}),c.jsx("th",{className:"px-2 py-1.5 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:W.registros.map(V=>{var z,le,ne,fe;const{fecha:Z}=Sr(V.fecha),Y=(z=V.tipo_movimiento)==null?void 0:z.tipo,K=rl(V.valor,Y);return c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-2 py-1.5 whitespace-nowrap",children:Z}),c.jsx("td",{className:"px-2 py-1.5",children:c.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${Y==="Ingreso"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:Y})}),c.jsx("td",{className:"px-2 py-1.5",children:((le=V.tipo_movimiento)==null?void 0:le.nombre)||"-"}),c.jsx("td",{className:"px-2 py-1.5 truncate max-w-xs",title:V.descripcion,children:V.descripcion||"-"}),c.jsx("td",{className:"px-2 py-1.5",children:((ne=V.paciente)==null?void 0:ne.nombres)||"-"}),c.jsx("td",{className:"px-2 py-1.5",children:((fe=V.medico)==null?void 0:fe.nombre)||"-"}),c.jsx("td",{className:`px-2 py-1.5 text-right whitespace-nowrap font-medium ${K}`,children:At(V.valor)})]},V.id)})})]})}):c.jsx("p",{className:"text-xs text-gray-400 italic pl-4 mt-1",children:"No hay registros para este mes."})]},W.mes))})]},R.ano))})]})]})]})]})}function OO(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}OO(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Fm=t=>typeof t=="number"&&!isNaN(t),Ua=t=>typeof t=="string",jw=t=>typeof t=="function",LO=t=>Ua(t)||Fm(t),RO=t=>N.isValidElement(t)||Ua(t)||jw(t)||Fm(t),AO=1,Nw=()=>`${AO++}`,Xr=new Map,pf=[],Ey=new Set,Cw=()=>Xr.size>0,IO=(t,{containerId:e})=>{var r;return(r=Xr.get(e||1))==null?void 0:r.toasts.get(t)};function $O(t,e){var r;if(e)return!!((r=Xr.get(e))!=null&&r.isToastActive(t));let s=!1;return Xr.forEach(n=>{n.isToastActive(t)&&(s=!0)}),s}function FO(t){if(!Cw()){pf=pf.filter(e=>t!=null&&e.options.toastId!==t);return}if(t==null||LO(t))Xr.forEach(e=>{e.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let e=Xr.get(t.containerId);e?e.removeToast(t.id):Xr.forEach(r=>{r.removeToast(t.id)})}}var zO=(t={})=>{Xr.forEach(e=>{e.props.limit&&(!t.containerId||e.id===t.containerId)&&e.clearQueue()})};function WO(t,e){RO(t)&&(Cw()||pf.push({content:t,options:e}),Xr.forEach(r=>{r.buildToast(t,e)}))}function Ew(t,e){Xr.forEach(r=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===r.id)&&r.toggle(t,e==null?void 0:e.id)})}function BO(t){return Ey.add(t),()=>{Ey.delete(t)}}function UO(t){return t&&(Ua(t.toastId)||Fm(t.toastId))?t.toastId:Nw()}function Za(t,e){return WO(t,e),e.toastId}function $u(t,e){return{...e,type:e&&e.type||t,toastId:UO(e)}}function Fu(t){return(e,r)=>Za(e,$u(t,r))}function Se(t,e){return Za(t,$u("default",e))}Se.loading=(t,e)=>Za(t,$u("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function HO(t,{pending:e,error:r,success:s},n){let i;e&&(i=Ua(e)?Se.loading(e,n):Se.loading(e.render,{...n,...e}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},a=(d,h,m)=>{if(h==null){Se.dismiss(i);return}let p={type:d,...o,...n,data:m},x=Ua(h)?{render:h}:h;return i?Se.update(i,{...p,...x}):Se(x.render,{...p,...x}),m},l=jw(t)?t():t;return l.then(d=>a("success",s,d)).catch(d=>a("error",r,d)),l}Se.promise=HO;Se.success=Fu("success");Se.info=Fu("info");Se.error=Fu("error");Se.warning=Fu("warning");Se.warn=Se.warning;Se.dark=(t,e)=>Za(t,$u("default",{theme:"dark",...e}));function VO(t){FO(t)}Se.dismiss=VO;Se.clearWaitingQueue=zO;Se.isActive=$O;Se.update=(t,e={})=>{let r=IO(t,e);if(r){let{props:s,content:n}=r,i={delay:100,...s,...e,toastId:e.toastId||t,updateId:Nw()};i.toastId!==t&&(i.staleId=t);let o=i.render||n;delete i.render,Za(o,i)}};Se.done=t=>{Se.update(t,{progress:1})};Se.onChange=BO;Se.play=t=>Ew(!0,t);Se.pause=t=>Ew(!1,t);const My=async t=>{console.log("Attempting to send email with params:",t);const r={created:`Confirmación de Cita - Andrews Dental Group: ${t.patientName}`,updated:`Actualización de Cita - Andrews Dental Group: ${t.patientName}`,cancelled:`Cancelación de Cita - Andrews Dental Group: ${t.patientName}`}[t.action],s=`
    <p>Estimado(a) ${t.patientName},</p>
    <p>Le informamos que su cita con el Dr(a). <strong>${t.doctorName}</strong> en Andrews Dental Group ha sido <strong>${t.action==="created"?"confirmada":t.action==="updated"?"actualizada":"cancelada"}</strong>.</p>
    <p><strong>Detalles de la cita:</strong></p>
    <ul>
      <li><strong>Fecha:</strong> ${t.date}</li>
      <li><strong>Hora:</strong> ${t.time}</li>
      <li><strong>Motivo:</strong> ${t.action==="created"?"Nueva Cita":t.action==="updated"?"Cita Actualizada":"Cita Cancelada"}</li>
    </ul>
    <p>Le esperamos. ¡Gracias!</p>
    <p>Atentamente,</p>
    <p>El equipo de Andrews Dental Group</p>
  `;try{const{data:n,error:i}=await ge.functions.invoke("RESEND-EMAILS",{body:JSON.stringify({to:t.to,subject:r,html:s})});if(i)throw console.error("Supabase Function Invocation Error:",i),new Error(`Error al invocar la función de email: ${i.message}`);if(n&&typeof n=="object"&&"error"in n)throw console.error("Error from Edge Function (response body):",n.error),new Error(`Error de la función de email (detalles): ${n.details||n.error}`);console.log("Email function invoked successfully:",n)}catch(n){throw console.error("Error in sendAppointmentEmail:",n),n}},Mw="http://localhost:5173/AndrewsDentalGroup/",YO=["https://www.googleapis.com/auth/calendar"],zm="googleAccessToken",Wm="googleRefreshToken",Bm="googleTokenExpiry",Tw=N.createContext({isLoggedIn:!1,loading:!0,error:null,getAccessToken:async()=>null,handleLogout:()=>{}}),GO=()=>N.useContext(Tw),Pw=(t,e,r)=>{const s=Date.now()+r*1e3;localStorage.setItem(zm,t),localStorage.setItem(Wm,e),localStorage.setItem(Bm,s.toString())},qO=()=>{const t=localStorage.getItem(zm),e=localStorage.getItem(Wm),r=localStorage.getItem(Bm);return{accessToken:t,refreshToken:e,tokenExpiry:r?parseInt(r):null}},gf=()=>{localStorage.removeItem(zm),localStorage.removeItem(Wm),localStorage.removeItem(Bm)},KO=()=>{const t=new URL("https://accounts.google.com/o/oauth2/auth");t.searchParams.append("client_id",CLIENT_ID),t.searchParams.append("redirect_uri",Mw),t.searchParams.append("response_type","code"),t.searchParams.append("scope",YO.join(" ")),t.searchParams.append("access_type","offline"),t.searchParams.append("prompt","consent"),window.location.href=t.toString()},XO=async t=>{try{const r=await(await fetch("https://oauth2.googleapis.com/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:CLIENT_ID,client_secret:CLIENT_SECRET,redirect_uri:Mw,grant_type:"authorization_code",code:t})})).json();return r.access_token&&r.refresh_token?(Pw(r.access_token,r.refresh_token,r.expires_in),!0):(console.error("Error en la respuesta de token:",r),!1)}catch(e){return console.error("Error al intercambiar el código por tokens:",e),!1}},yf=async()=>{const{accessToken:t,refreshToken:e,tokenExpiry:r}=qO();if(!t||!e)return null;if(r&&Date.now()<r)return t;try{const n=await(await fetch("https://oauth2.googleapis.com/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:CLIENT_ID,client_secret:CLIENT_SECRET,grant_type:"refresh_token",refresh_token:e})})).json();return n.access_token?(Pw(n.access_token,e,n.expires_in),n.access_token):(gf(),null)}catch(s){return console.error("Error al renovar el token:",s),gf(),null}},JO=async()=>!!await yf(),QO=()=>new URLSearchParams(window.location.search).get("code"),ZO=()=>{gf(),window.location.href="/"},e5=async(t,e,r)=>{try{const s=new Date,n=new Date(s);n.setMonth(s.getMonth()+1);const i=new URLSearchParams({timeMin:e||s.toISOString(),timeMax:r||n.toISOString(),singleEvents:"true",orderBy:"startTime"}),a=await(await fetch(`https://www.googleapis.com/calendar/v3/calendars/primary/events?${i}`,{headers:{Authorization:`Bearer ${t}`}})).json();if(a.error)throw new Error(a.error.message);return a.items||[]}catch(s){throw console.error("Error al obtener eventos:",s),s}},t5=async(t,e)=>{try{const s=await(await fetch("https://www.googleapis.com/calendar/v3/calendars/primary/events",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(s.error)throw new Error(s.error.message);return s}catch(r){throw console.error("Error al crear evento:",r),r}},r5=async(t,e,r)=>{try{const n=await(await fetch(`https://www.googleapis.com/calendar/v3/calendars/primary/events/${e}`,{method:"PATCH",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(r)})).json();if(n.error)throw new Error(n.error.message);return n}catch(s){throw console.error("Error al actualizar evento:",s),s}},s5=async(t,e)=>{var r;try{const s=await fetch(`https://www.googleapis.com/calendar/v3/calendars/primary/events/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}});if(s.status!==204){const n=await s.json();throw new Error(((r=n.error)==null?void 0:r.message)||"Error al eliminar evento")}}catch(s){throw console.error("Error al eliminar evento:",s),s}},Ty=({className:t=""})=>{const{isLoggedIn:e,loading:r,handleLogout:s}=GO(),n=()=>{KO()};return r?c.jsxs("button",{disabled:!0,className:`flex items-center justify-center px-4 py-2 bg-raspberry-200 text-raspberry-700 rounded-lg shadow-md ${t}`,children:[c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-raspberry-700",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Cargando..."]}):e?c.jsxs("button",{onClick:s,className:`flex items-center justify-center px-4 py-2 bg-raspberry-100 text-raspberry-700 hover:bg-raspberry-200 rounded-lg shadow-md transition-colors ${t}`,children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Cerrar Sesión de Google"]}):c.jsxs("button",{onClick:n,className:`flex items-center justify-center px-4 py-2 bg-white hover:bg-gray-50 text-gray-700 border border-gray-300 rounded-lg shadow-md transition-colors ${t}`,children:[c.jsx("svg",{className:"h-5 w-5 mr-2",viewBox:"0 0 24 24",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",children:c.jsxs("g",{transform:"matrix(1, 0, 0, 1, 27.009001, -39.238998)",children:[c.jsx("path",{fill:"#4285F4",d:"M -3.264 51.509 C -3.264 50.719 -3.334 49.969 -3.454 49.239 L -14.754 49.239 L -14.754 53.749 L -8.284 53.749 C -8.574 55.229 -9.424 56.479 -10.684 57.329 L -10.684 60.329 L -6.824 60.329 C -4.564 58.239 -3.264 55.159 -3.264 51.509 Z"}),c.jsx("path",{fill:"#34A853",d:"M -14.754 63.239 C -11.514 63.239 -8.804 62.159 -6.824 60.329 L -10.684 57.329 C -11.764 58.049 -13.134 58.489 -14.754 58.489 C -17.884 58.489 -20.534 56.379 -21.484 53.529 L -25.464 53.529 L -25.464 56.619 C -23.494 60.539 -19.444 63.239 -14.754 63.239 Z"}),c.jsx("path",{fill:"#FBBC05",d:"M -21.484 53.529 C -21.734 52.809 -21.864 52.039 -21.864 51.239 C -21.864 50.439 -21.724 49.669 -21.484 48.949 L -21.484 45.859 L -25.464 45.859 C -26.284 47.479 -26.754 49.299 -26.754 51.239 C -26.754 53.179 -26.284 54.999 -25.464 56.619 L -21.484 53.529 Z"}),c.jsx("path",{fill:"#EA4335",d:"M -14.754 43.989 C -12.984 43.989 -11.404 44.599 -10.154 45.789 L -6.734 42.369 C -8.804 40.429 -11.514 39.239 -14.754 39.239 C -19.444 39.239 -23.494 41.939 -25.464 45.859 L -21.484 48.949 C -20.534 46.099 -17.884 43.989 -14.754 43.989 Z"})]})}),"Iniciar sesión con Google"]})},n5=({event:t,onSubmit:e,onCancel:r,pacientes:s,medicos:n})=>{var O,B;const[i,o]=N.useState((t==null?void 0:t.summary)||""),[a,l]=N.useState((t==null?void 0:t.description)||""),[d,h]=N.useState(t!=null&&t.start.dateTime?new Date(t.start.dateTime).toISOString().slice(0,16):new Date().toISOString().slice(0,16)),[m,p]=N.useState(t!=null&&t.end.dateTime?new Date(t.end.dateTime).toISOString().slice(0,16):new Date(Date.now()+60*60*1e3).toISOString().slice(0,16)),[x,b]=N.useState((t==null?void 0:t.colorId)||"1"),k=((O=t==null?void 0:t.paciente)==null?void 0:O.id)||"",w=((B=t==null?void 0:t.medico)==null?void 0:B.id)||"",[v,_]=N.useState(k),[S,C]=N.useState(w),E=s.find(M=>M.id===v),D=n.find(M=>M.id===S),P=M=>{M.preventDefault();const I={summary:i,description:a,start:{dateTime:new Date(d).toISOString(),timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},end:{dateTime:new Date(m).toISOString(),timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},colorId:x,...E&&{paciente:{id:E.id,nombre:`${E.nombres} ${E.apellido_paterno} ${E.apellido_materno}`,celular:E.celular,email:E.correo}},...D&&{medico:{id:D.id,nombre:D.nombre}}};e(I)};return c.jsxs("form",{onSubmit:P,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"summary",className:"block text-sm font-medium text-gray-700 mb-1",children:"Título *"}),c.jsx("input",{id:"summary",type:"text",value:i,onChange:M=>o(M.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-raspberry-500 focus:border-raspberry-500"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Inicio *"}),c.jsx("input",{id:"startDate",type:"datetime-local",value:d,onChange:M=>h(M.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-raspberry-500 focus:border-raspberry-500"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fin *"}),c.jsx("input",{id:"endDate",type:"datetime-local",value:m,onChange:M=>p(M.target.value),required:!0,min:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-raspberry-500 focus:border-raspberry-500"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"paciente",className:"block text-sm font-medium text-gray-700 mb-1",children:"Paciente *"}),c.jsxs("select",{id:"paciente",value:v,onChange:M=>_(M.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-raspberry-500 focus:border-raspberry-500",children:[c.jsx("option",{value:"",children:"Seleccione un paciente"}),s.map(M=>c.jsxs("option",{value:M.id,children:[M.nombres," ",M.apellido_paterno," ",M.apellido_materno]},M.id))]})]}),E&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"pacienteCelular",className:"block text-sm font-medium text-gray-700 mb-1",children:"Celular del Paciente"}),c.jsx("input",{id:"pacienteCelular",type:"text",value:E.celular||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"pacienteEmail",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email del Paciente"}),c.jsx("input",{id:"pacienteEmail",type:"email",value:E.correo||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"medico",className:"block text-sm font-medium text-gray-700 mb-1",children:"Médico *"}),c.jsxs("select",{id:"medico",value:S,onChange:M=>C(M.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-raspberry-500 focus:border-raspberry-500",children:[c.jsx("option",{value:"",children:"Seleccione un médico"}),n.map(M=>c.jsx("option",{value:M.id,children:M.nombre},M.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción (Adicional)"}),c.jsx("textarea",{id:"description",value:a,onChange:M=>l(M.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-raspberry-500 focus:border-raspberry-500"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"colorId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Color"}),c.jsxs("select",{id:"colorId",value:x,onChange:M=>b(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-raspberry-500 focus:border-raspberry-500",children:[c.jsx("option",{value:"1",children:"Azul"}),c.jsx("option",{value:"2",children:"Verde"}),c.jsx("option",{value:"3",children:"Morado"}),c.jsx("option",{value:"4",children:"Rojo"}),c.jsx("option",{value:"5",children:"Amarillo"}),c.jsx("option",{value:"6",children:"Naranja"}),c.jsx("option",{value:"7",children:"Turquesa"}),c.jsx("option",{value:"8",children:"Gris"}),c.jsx("option",{value:"9",children:"Azul oscuro"}),c.jsx("option",{value:"10",children:"Verde oscuro"}),c.jsx("option",{value:"11",children:"Rojo oscuro"})]})]}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[c.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-raspberry-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-raspberry-700 border border-transparent rounded-md shadow-sm hover:bg-raspberry-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-raspberry-500",children:t?"Actualizar":"Crear"})]})]})},i5=({event:t,onEdit:e,onDelete:r})=>{const s=new Date(t.start.dateTime),n=new Date(t.end.dateTime),i=d=>d.toLocaleDateString("es-ES",{weekday:"short",day:"numeric",month:"short"}),o=d=>d.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),a=s.toDateString()===n.toDateString(),l=d=>({1:"bg-blue-100 border-blue-300 text-blue-800",2:"bg-green-100 border-green-300 text-green-800",3:"bg-purple-100 border-purple-300 text-purple-800",4:"bg-red-100 border-red-300 text-red-800",5:"bg-yellow-100 border-yellow-300 text-yellow-800",6:"bg-orange-100 border-orange-300 text-orange-800",7:"bg-teal-100 border-teal-300 text-teal-800",8:"bg-gray-100 border-gray-300 text-gray-800",9:"bg-indigo-100 border-indigo-300 text-indigo-800",10:"bg-emerald-100 border-emerald-300 text-emerald-800",11:"bg-rose-100 border-rose-300 text-rose-800"})[d||"1"]||"bg-raspberry-100 border-raspberry-300 text-raspberry-800";return c.jsx("div",{className:`p-4 mb-3 rounded-lg border-l-4 shadow-sm ${l(t.colorId)}`,children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium",children:t.summary}),t.paciente&&c.jsxs("div",{className:"text-sm mt-1 flex items-center",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),t.paciente.nombre,t.paciente.celular&&c.jsxs("span",{className:"ml-3 flex items-center",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),t.paciente.celular]})]}),t.medico&&c.jsxs("div",{className:"text-sm mt-1 flex items-center",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"Dr. ",t.medico.nombre]}),c.jsx("div",{className:"text-sm mt-1",children:a?c.jsxs("span",{children:[i(s)," • ",o(s)," - ",o(n)]}):c.jsxs("span",{children:[i(s)," ",o(s)," - ",i(n)," ",o(n)]})}),t.description&&c.jsx("div",{className:"text-sm mt-2 line-clamp-2",children:t.description})]}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:e,className:"p-1 text-gray-500 hover:text-raspberry-700 rounded-full hover:bg-raspberry-50",title:"Editar",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),c.jsx("button",{onClick:r,className:"p-1 text-gray-500 hover:text-red-700 rounded-full hover:bg-red-50",title:"Eliminar",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})})},o5=({events:t,currentDate:e,onEventClick:r})=>{const s=new Date(e.getFullYear(),e.getMonth(),1),n=new Date(e.getFullYear(),e.getMonth()+1,0),i=new Date(s);i.setDate(s.getDate()-s.getDay());const o=new Date(n);o.setDate(n.getDate()+(6-n.getDay()));const a=[];let l=[],d=new Date(i);for(;d<=o;)l.push(new Date(d)),d.setDate(d.getDate()+1),l.length===7&&(a.push(l),l=[]);l.length>0&&a.push(l);const h=(x,b)=>x.getDate()===b.getDate()&&x.getMonth()===b.getMonth()&&x.getFullYear()===b.getFullYear(),m=x=>x.getMonth()===e.getMonth()&&x.getFullYear()===e.getFullYear(),p=x=>t.filter(b=>{const k=new Date(b.start.dateTime),w=new Date(b.end.dateTime);return k<=x&&w>=x||h(k,x)||h(w,x)}).sort((b,k)=>new Date(b.start.dateTime).getTime()-new Date(k.start.dateTime).getTime());return c.jsxs("div",{className:"mt-4",children:[c.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"].map(x=>c.jsx("div",{className:"text-center font-medium text-gray-500 text-sm py-2",children:x},x))}),c.jsxs("div",{className:"grid grid-cols-7 gap-1 auto-rows-fr",children:[" ",a.map((x,b)=>c.jsx(nu.Fragment,{children:x.map((k,w)=>{const v=p(k),_=h(k,new Date);return c.jsxs("div",{className:`min-h-24 border rounded p-1 flex flex-col ${m(k)?"bg-white":"bg-gray-50"} ${_?"border-raspberry-500 border-2":"border-gray-200"}`,children:[c.jsx("div",{className:`text-right text-sm ${m(k)?"text-gray-700":"text-gray-400"} ${_?"font-bold text-raspberry-700":""}`,children:k.getDate()}),c.jsxs("div",{className:"mt-1 space-y-1 overflow-y-auto flex-grow custom-scrollbar",children:[" ",v.map(S=>{var C;return c.jsxs("div",{onClick:()=>r(S),className:`text-xs p-1 rounded truncate cursor-pointer ${S.colorId==="1"?"bg-blue-100 text-blue-800":S.colorId==="2"?"bg-green-100 text-green-800":S.colorId==="3"?"bg-purple-100 text-purple-800":S.colorId==="4"?"bg-red-100 text-red-800":S.colorId==="5"?"bg-yellow-100 text-yellow-800":S.colorId==="6"?"bg-orange-100 text-orange-800":S.colorId==="7"?"bg-teal-100 text-teal-800":S.colorId==="8"?"bg-gray-100 text-gray-800":S.colorId==="9"?"bg-indigo-100 text-indigo-800":S.colorId==="10"?"bg-emerald-100 text-emerald-800":S.colorId==="11"?"bg-rose-100 text-rose-800":"bg-raspberry-100 text-raspberry-800"}`,children:[(C=S.paciente)!=null&&C.nombre?`${S.paciente.nombre} - `:"",S.summary]},S.id)})]})]},`day-${b}-${w}`)})},`week-${b}`))]})]})},a5=()=>{const[t,e]=N.useState(!1),[r,s]=N.useState(!0),[n,i]=N.useState(null),[o,a]=N.useState([]),[l,d]=N.useState(null),[h,m]=N.useState(!1),[p,x]=N.useState(!1),[b,k]=N.useState(null),[w,v]=N.useState("week"),[_,S]=N.useState(new Date),[C,E]=N.useState(!1),[D,P]=N.useState([]),[O,B]=N.useState([]),M=N.useCallback(async()=>{if(t){s(!0);try{const{data:J,error:Q}=await ge.from("pacientes").select("id, nombres, apellido_paterno, apellido_materno, celular, correo").eq("activo",!0).order("nombres",{ascending:!0});if(Q)throw Q;P(J||[])}catch(J){console.error("Error al cargar pacientes:",J),Se.error(`Error al cargar pacientes: ${J.message}`)}finally{s(!1)}}},[t]),I=N.useCallback(async()=>{if(t){s(!0);try{const{data:J,error:Q}=await ge.from("medicos").select("id, nombre").order("nombre",{ascending:!0});if(Q)throw Q;B(J||[])}catch(J){console.error("Error al cargar médicos:",J),Se.error(`Error al cargar médicos: ${J.message}`)}finally{s(!1)}}},[t]);N.useEffect(()=>{t&&(M(),I())},[t,M,I]);const H=J=>{d(J),m(!0)},ce=J=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(J),we=()=>{if(w==="month")return c.jsx(o5,{events:o,currentDate:_,onEventClick:H});{const J=new Date(_);J.setDate(_.getDate()-_.getDay());const Q=Array.from({length:7}).map((U,be)=>{const A=new Date(J);return A.setDate(J.getDate()+be),A});return c.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:C?c.jsx("div",{className:"flex justify-center items-center p-8",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-raspberry-700"})}):c.jsxs("div",{className:"space-y-6",children:[" ",Q.map(U=>{const be=o.filter(L=>{const F=new Date(L.start.dateTime);return F.getDate()===U.getDate()&&F.getMonth()===U.getMonth()&&F.getFullYear()===U.getFullYear()}).sort((L,F)=>new Date(L.start.dateTime).getTime()-new Date(F.start.dateTime).getTime()),A=U.toDateString()===new Date().toDateString();return c.jsxs("div",{className:`border rounded-lg p-3 ${A?"border-raspberry-500 bg-raspberry-50":"border-gray-200 bg-white"}`,children:[c.jsxs("h4",{className:`text-lg font-semibold mb-2 ${A?"text-raspberry-800":"text-gray-800"}`,children:[U.toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long"}),A&&c.jsx("span",{className:"ml-2 text-sm px-2 py-0.5 rounded-full bg-raspberry-200 text-raspberry-700",children:"Hoy"})]}),be.length===0?c.jsx("p",{className:"text-gray-500 text-sm",children:"No hay eventos para este día."}):c.jsx("div",{className:"space-y-2",children:be.map(L=>c.jsx(i5,{event:L,onEdit:()=>{d(L),m(!0)},onDelete:()=>{k(L.id),x(!0)}},L.id))})]},U.toISOString().split("T")[0])})]})})}};N.useEffect(()=>{(async()=>{try{const Q=QO();if(Q)await XO(Q)?(e(!0),window.history.replaceState({},document.title,window.location.pathname)):i("Error al procesar el código de autorización.");else{const U=await JO();e(U)}}catch(Q){console.error("Error al verificar la autenticación:",Q),i(`Error al verificar la autenticación: ${Q.message}`)}finally{s(!1)}})()},[]),N.useEffect(()=>{(async()=>{if(t){E(!0);try{const Q=await yf();if(!Q)throw new Error("No se pudo obtener un token de acceso válido. Por favor, inicia sesión de nuevo.");let U,be;if(w==="week"){const L=new Date(_);L.setDate(_.getDate()-_.getDay()),L.setHours(0,0,0,0);const F=new Date(L);F.setDate(L.getDate()+7),F.setHours(23,59,59,999),U=L.toISOString(),be=F.toISOString()}else{const L=new Date(_.getFullYear(),_.getMonth(),1);L.setHours(0,0,0,0);const F=new Date(_.getFullYear(),_.getMonth()+1,0);F.setHours(23,59,59,999);const te=new Date(L);te.setDate(L.getDate()-L.getDay());const me=new Date(F);me.setDate(F.getDate()+(6-F.getDay())),U=te.toISOString(),be=me.toISOString()}const A=await e5(Q,U,be);a(A)}catch(Q){console.error("Error al cargar eventos:",Q),i(`Error al cargar eventos: ${Q.message}`),Se.error(`Error al cargar eventos: ${Q.message}`)}finally{E(!1)}}})()},[t,w,_]);const de=async()=>{try{return await yf()}catch(J){return console.error("Error al obtener el token de acceso:",J),i(`Error al obtener el token de acceso: ${J.message}`),null}},pe=()=>{ZO(),e(!1),a([]),Se.info("Sesión cerrada.")},_e=async J=>{var Q,U,be;try{const A=await de();if(!A)throw new Error("No se pudo obtener un token de acceso válido");const L=await t5(A,J);if(a([...o,L]),m(!1),Se.success("Evento creado exitosamente."),(Q=J.paciente)!=null&&Q.email&&ce(J.paciente.email))try{await My({to:J.paciente.email,patientName:J.paciente.nombre,doctorName:((U=J.medico)==null?void 0:U.nombre)||"el médico",date:new Date(L.start.dateTime).toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),time:new Date(L.start.dateTime).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),action:"created"}),Se.success("Email de confirmación enviado al paciente.")}catch(F){console.error("Error al enviar el email de confirmación:",F),Se.warning("Evento creado pero no se pudo enviar el email de confirmación.")}else(be=J.paciente)!=null&&be.email&&Se.warning("Evento creado pero el email del paciente no es válido.")}catch(A){console.error("Error al crear evento:",A),i(`Error al crear evento: ${A.message}`),Se.error(`Error al crear evento: ${A.message}`)}},X=async J=>{var Q,U,be;if(!l){Se.error("No hay evento seleccionado para actualizar.");return}try{const A=await de();if(!A)throw new Error("No se pudo obtener un token de acceso válido");const L=await r5(A,l.id,J);if(a(o.map(F=>F.id===l.id?L:F)),d(null),m(!1),Se.success("Evento actualizado exitosamente."),(Q=J.paciente)!=null&&Q.email&&ce(J.paciente.email))try{await My({to:J.paciente.email,patientName:J.paciente.nombre,doctorName:((U=J.medico)==null?void 0:U.nombre)||"el médico",date:new Date(L.start.dateTime).toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),time:new Date(L.start.dateTime).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),action:"updated"}),Se.success("Email de actualización enviado al paciente.")}catch(F){console.error("Error al enviar el email de actualización:",F),Se.warning("Evento actualizado pero no se pudo enviar el email de confirmación.")}else(be=J.paciente)!=null&&be.email&&Se.warning("Evento actualizado pero el email del paciente no es válido.")}catch(A){console.error("Error al actualizar evento:",A),i(`Error al actualizar evento: ${A.message}`),Se.error(`Error al actualizar evento: ${A.message}`)}},re=async()=>{if(b)try{const J=await de();if(!J)throw new Error("No se pudo obtener un token de acceso válido");await s5(J,b),a(o.filter(Q=>Q.id!==b)),k(null),x(!1),Se.success("Evento eliminado exitosamente.")}catch(J){console.error("Error al eliminar evento:",J),i(`Error al eliminar evento: ${J.message}`),Se.error(`Error al eliminar evento: ${J.message}`)}},oe=J=>{const Q=new Date(_);w==="week"?Q.setDate(Q.getDate()+(J==="next"?7:-7)):Q.setMonth(Q.getMonth()+(J==="next"?1:-1)),S(Q)},xe=()=>{if(w==="week"){const J=new Date(_);J.setDate(_.getDate()-_.getDay());const Q=new Date(J);Q.setDate(J.getDate()+6);const U=J.toLocaleDateString("es-ES",{month:"short"}),be=Q.toLocaleDateString("es-ES",{month:"short"});return J.getFullYear()===Q.getFullYear()?U===be?`${J.getDate()} - ${Q.getDate()} ${U} ${J.getFullYear()}`:`${J.getDate()} ${U} - ${Q.getDate()} ${be} ${Q.getFullYear()}`:`${J.getDate()} ${U} ${J.getFullYear()} - ${Q.getDate()} ${be} ${Q.getFullYear()}`}else return _.toLocaleDateString("es-ES",{month:"long",year:"numeric"})},ve={isLoggedIn:t,loading:r,error:n,getAccessToken:de,handleLogout:pe};return c.jsx(Tw.Provider,{value:ve,children:c.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[c.jsx("div",{className:"bg-gradient-to-r from-raspberry-700 to-raspberry-800 p-4 sm:p-6 text-white",children:c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[c.jsxs("h1",{className:"text-xl font-bold flex items-center",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Agenda Médica"]}),c.jsx(Ty,{className:"w-full sm:w-auto"})]})}),r?c.jsx("div",{className:"flex justify-center items-center p-12",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-raspberry-700"})}):t?c.jsxs("div",{className:"p-4 sm:p-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 space-y-4 sm:space-y-0",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:()=>oe("prev"),className:"p-2 rounded-full hover:bg-gray-100",title:"Anterior",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),c.jsx("h2",{className:"text-lg font-medium text-gray-800",children:xe()}),c.jsx("button",{onClick:()=>oe("next"),className:"p-2 rounded-full hover:bg-gray-100",title:"Siguiente",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),c.jsx("button",{onClick:()=>S(new Date),className:"ml-2 px-3 py-1 text-sm text-raspberry-700 hover:bg-raspberry-50 rounded-md",title:"Hoy",children:"Hoy"})]}),c.jsxs("div",{className:"flex space-x-2 w-full sm:w-auto",children:[c.jsxs("div",{className:"flex border rounded-md overflow-hidden",children:[c.jsx("button",{onClick:()=>v("week"),className:`px-3 py-1 text-sm ${w==="week"?"bg-raspberry-100 text-raspberry-700":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Semana"}),c.jsx("button",{onClick:()=>v("month"),className:`px-3 py-1 text-sm ${w==="month"?"bg-raspberry-100 text-raspberry-700":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Mes"})]}),c.jsxs("button",{onClick:()=>{d(null),m(!0)},className:"flex items-center px-3 py-1 text-sm text-white bg-raspberry-700 rounded-md hover:bg-raspberry-800 transition-colors",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Nuevo Evento"]})]})]}),we()]}):c.jsxs("div",{className:"p-6 text-center",children:[c.jsx("div",{className:"mb-4",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-raspberry-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"})})}),c.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Acceso a la Agenda"}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Inicia sesión con tu cuenta de Google para gestionar la agenda médica."}),c.jsx(Ty,{className:"mx-auto"})]}),h&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[c.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-raspberry-50",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-medium text-raspberry-800",children:l?"Editar Evento":"Nuevo Evento"}),c.jsx("button",{onClick:()=>{m(!1),d(null)},className:"text-gray-400 hover:text-gray-500",children:c.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),c.jsx("div",{className:"px-6 py-4",children:c.jsx(n5,{event:l||void 0,onSubmit:l?X:_e,onCancel:()=>{m(!1),d(null)},pacientes:D,medicos:O})})]})}),p&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[c.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Confirmar eliminación"})}),c.jsx("div",{className:"px-6 py-4",children:c.jsx("p",{className:"text-gray-700",children:"¿Estás seguro de que deseas eliminar este evento? Esta acción no se puede deshacer."})}),c.jsxs("div",{className:"px-6 py-4 bg-gray-50 flex justify-end space-x-3",children:[c.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50",children:"Cancelar"}),c.jsx("button",{onClick:re,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md shadow-sm hover:bg-red-700",children:"Eliminar"})]})]})})]})})},l5=()=>{const[t,e]=N.useState([]),[r,s]=N.useState([]),[n,i]=N.useState(!0),[o,a]=N.useState(""),[l,d]=N.useState(null),[h,m]=N.useState(!0),p={raspberry50:"bg-raspberry-50",raspberry500:"bg-raspberry-500",raspberry700:"bg-raspberry-700",raspberry900:"bg-raspberry-900",textRaspberry700:"text-raspberry-700",textRaspberry500:"text-raspberry-500",borderRaspberry100:"border-raspberry-100",focusRaspberry500:"focus:border-raspberry-500 focus:ring-raspberry-500",textGray900:"text-gray-900",borderGray300:"border-gray-300"},x=w=>{if(!w)return null;const v=new Date(w),_=new Date;let S=_.getFullYear()-v.getFullYear();const C=_.getMonth()-v.getMonth();return(C<0||C===0&&_.getDate()<v.getDate())&&S--,S},b=N.useCallback(w=>{const v="/ArkhamDentalPro/";switch(w){case"F":return`${v}avatars/female.png`;case"M":return`${v}avatars/male.png`;default:return`${v}avatars/neutral.png`}},[]),k=N.useCallback(async()=>{i(!0),d(null);try{const{data:w,error:v}=await ge.from("pacientes").select("id, nombres, apellido_paterno, fecha_nacimiento, celular, correo, sexo").order("nombres",{ascending:!0});if(v)throw v;e(w||[])}catch(w){console.error("Error fetching patients:",w.message),d("Erro ao carregar lista de pacientes."),ee.error("Erro ao carregar lista de pacientes.")}finally{i(!1)}},[]);return N.useEffect(()=>{k()},[k]),N.useEffect(()=>{let w=t;o&&(w=w.filter(v=>{var _,S;return v.nombres.toLowerCase().includes(o.toLowerCase())||((_=v.celular)==null?void 0:_.includes(o))||((S=v.correo)==null?void 0:S.toLowerCase().includes(o.toLowerCase()))})),s(w)},[o,t]),c.jsxs("div",{className:`bg-white rounded-lg shadow-xl overflow-hidden border ${p.borderRaspberry100}`,children:[c.jsx("div",{className:`bg-gradient-to-r from-${p.raspberry700.replace("bg-","")} to-${p.raspberry900.replace("bg-","")} p-6 text-white`,children:c.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("h2",{className:"text-xl font-bold",children:"Historial Clínico de Pacientes"}),c.jsxs("div",{className:"ml-4 relative",children:[c.jsx("input",{type:"text",placeholder:"Buscar pacientes...",value:o,onChange:w=>a(w.target.value),className:`px-3 py-2 border ${p.borderGray300} rounded-md shadow-sm focus:outline-none ${p.focusRaspberry500} text-sm transition-colors duration-200 ${p.textGray900}`}),o&&c.jsx("button",{onClick:()=>a(""),className:"absolute right-2 top-2.5 text-gray-400 hover:text-gray-600","aria-label":"Limpar pesquisa",children:c.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})})}),c.jsx("div",{className:"p-6",children:n?c.jsxs("div",{className:"flex justify-center items-center p-10",children:[c.jsx("div",{className:`animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 ${p.raspberry500}`}),c.jsx("p",{className:`ml-4 ${p.textRaspberry700}`,children:"Cargando pacientes..."})]}):l?c.jsx("div",{className:`p-6 text-center text-red-600 ${p.raspberry50} rounded-lg shadow`,children:c.jsx("p",{children:l})}):t.length===0?c.jsxs("div",{className:`p-10 text-center text-gray-500 ${p.raspberry50} rounded-lg border ${p.borderRaspberry100}`,children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`mx-auto h-12 w-12 ${p.textRaspberry500} mb-2`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 4.354V4a1 1 0 00-1-1H3a1 1 0 00-1 1v16a1 1 0 001 1h16a1 1 0 001-1V8.646a1 1 0 00-.354-.707l-4.293-4.293a1 1 0 00-.707-.354z"})}),c.jsx("p",{children:"No se encontraron pacientes en el sistema."})]}):r.length===0?c.jsx("div",{className:`p-10 text-center text-gray-500 ${p.raspberry50} rounded-lg border ${p.borderRaspberry100}`,children:c.jsx("p",{children:"No hay pacientes que coincidan con su búsqueda."})}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(w=>c.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow duration-150",children:c.jsxs("div",{className:"p-4 flex items-center space-x-4",children:[" ",c.jsx("img",{src:b(w.sexo),alt:"Avatar del paciente",className:"h-10 w-10 rounded-full object-cover border border-gray-200"}),c.jsxs("div",{children:[c.jsxs("h3",{className:`text-lg font-semibold ${p.textRaspberry700}`,children:[w.nombres," ",w.apellido_paterno]}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:w.fecha_nacimiento&&c.jsxs(c.Fragment,{children:["Nacimiento: ",new Date(w.fecha_nacimiento).toLocaleDateString()," "," ","(Edad: ",x(w.fecha_nacimiento)," años)"]})}),w.celular&&c.jsxs("p",{className:"text-sm text-gray-600",children:["Teléfono: ",w.celular]}),w.correo&&c.jsxs("p",{className:"text-sm text-gray-600",children:["Email: ",w.correo]}),c.jsxs(Yc,{to:`/historial-clinico/${w.id}`,className:`mt-3 inline-flex items-center px-4 py-2 text-sm font-medium text-white ${p.raspberry500} rounded-md hover:${p.raspberry700} transition-colors shadow`,children:["Ver Historial",c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"ml-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})]})]})},w.id))})})]})},c5=({isOpen:t,position:e,targetElementId:r,onMarking:s,onClose:n,odontogramState:i})=>{if(!t||!r)return null;const o=N.useRef(null),a=r.includes("-surface-"),d=r.split("-")[1],h=a?r.split("-surface-")[1]:null;N.useEffect(()=>{if(o.current){const{innerWidth:p,innerHeight:x}=window,{offsetWidth:b,offsetHeight:k}=o.current;let w=e.x,v=e.y;w+b>p-20&&(w=p-b-20),v+k>x-20&&(v=x-k-20),o.current.style.left=`${Math.max(10,w)}px`,o.current.style.top=`${Math.max(10,v)}px`}},[e,t]);const m="px-3 py-2 text-xs font-medium rounded-md shadow-sm transition-all duration-200 hover:opacity-80 w-full text-center text-white";return c.jsxs("div",{ref:o,className:"fixed z-50 p-4 rounded-lg shadow-2xl transition-all duration-150 bg-background border border-raspberry-100",style:{left:e.x,top:e.y,minWidth:"220px",maxWidth:"300px"},children:[c.jsxs("div",{className:"flex justify-between items-center pb-2 mb-3 border-b border-gray-200",children:[c.jsxs("h4",{className:"text-md font-semibold text-raspberry-700",children:["Diente ",d," ",h?`(${h})`:""]}),c.jsx("button",{onClick:n,className:"text-gray-500 hover:text-raspberry-500",children:c.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"space-y-3",children:[!a&&c.jsxs("div",{children:[c.jsx("h5",{className:"text-sm font-bold text-raspberry-900 mb-2",children:"Estado General"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[" ",c.jsx("button",{onClick:()=>s("ausente"),className:`${m} bg-ausente`,children:"Ausente"}),c.jsx("button",{onClick:()=>s("implante"),className:`${m} bg-implante`,children:"Implante"}),c.jsx("button",{onClick:()=>s("coroa"),className:`${m} bg-coroa`,children:"Coroa"}),c.jsx("button",{onClick:()=>s("protese"),className:`${m} bg-default-stroke`,children:"Prótesis"}),c.jsx("button",{onClick:()=>s("endodontia"),className:`${m} bg-endodontia`,children:"Endodoncia"}),c.jsx("button",{onClick:()=>s("fractura"),className:`${m} bg-fratura`,children:"Fractura"})]})]}),c.jsxs("div",{children:[c.jsxs("h5",{className:"text-sm font-bold text-raspberry-900 mb-2",children:["Condición",a?"":" de Superficie"]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsx("button",{onClick:()=>s("carie"),className:`${m} bg-carie`,children:"Cárie"}),c.jsx("button",{onClick:()=>s("restauracao",{material:"resina"}),className:`${m} bg-restauracao-resina`,children:"Resina"}),c.jsx("button",{onClick:()=>s("restauracao",{material:"amalgama"}),className:`${m} bg-restauracao-amalgama`,children:"Amálgama"}),c.jsx("button",{onClick:()=>s("restauracao",{material:"ceramica"}),className:`${m} bg-restauracao-ceramica`,children:"Cerámica"}),c.jsx("button",{onClick:()=>s("selante"),className:`${m} bg-selante`,children:"Sellante"})]})]}),!a&&c.jsxs("div",{children:[c.jsx("h5",{className:"text-sm font-bold text-raspberry-900 mb-2",children:"Movilidad"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsx("button",{onClick:()=>s("mobilidade",{grado:"grado1"}),className:`${m} bg-mobilidade-grado1`,children:"Grado 1"}),c.jsx("button",{onClick:()=>s("mobilidade",{grado:"grado2"}),className:`${m} bg-mobilidade-grado2`,children:"Grado 2"}),c.jsx("button",{onClick:()=>s("mobilidade",{grado:"grado3"}),className:`${m} bg-mobilidade-grado3`,children:"Grado 3"}),c.jsx("button",{onClick:()=>s("mobilidade",{grado:"sano"}),className:`${m} bg-gray-200 text-gray-700`,children:"Sin Mov."})]})]}),c.jsx("div",{className:"pt-3 border-t border-gray-200",children:c.jsx("button",{onClick:()=>s("sano"),className:`${m} bg-default-fill border border-gray-300 text-raspberry-700`,children:"Marcar Sano / Limpiar"})})]})]})},u5=()=>c.jsxs("div",{className:"mt-6 p-4 rounded-lg shadow-inner bg-raspberry-50 border border-raspberry-100",children:[c.jsx("h4",{className:"text-lg font-semibold mb-3 text-raspberry-700",children:"Leyenda del Odontograma"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("h5",{className:"font-bold mb-1 text-raspberry-900",children:"Estados Generales"}),c.jsxs("ul",{className:"space-y-1",children:[c.jsxs("li",{className:"flex items-center",children:[c.jsx("span",{className:"w-4 h-4 rounded-sm mr-2 bg-carie"})," Cárie"]}),c.jsxs("li",{className:"flex items-center",children:[c.jsx("span",{className:"w-4 h-4 rounded-sm mr-2 bg-ausente"})," Ausente"]}),c.jsxs("li",{className:"flex items-center",children:[c.jsx("span",{className:"w-4 h-4 rounded-sm mr-2 bg-implante"})," Implante"]}),c.jsxs("li",{className:"flex items-center",children:[c.jsx("span",{className:"w-4 h-4 rounded-sm mr-2 bg-coroa"})," Coroa"]}),c.jsxs("li",{className:"flex items-center",children:[c.jsx("span",{className:"w-4 h-4 rounded-sm mr-2 border border-endodontia",style:{backgroundColor:"transparent"}})," Endodoncia (línea)"]}),c.jsxs("li",{className:"flex items-center",children:[c.jsx("span",{className:"w-4 h-4 rounded-sm mr-2 border border-fratura",style:{backgroundColor:"transparent"}})," Fratura (línea)"]}),c.jsxs("li",{className:"flex items-center",children:[c.jsx("span",{className:"w-4 h-4 rounded-sm mr-2 bg-mobilidade-grado1"})," Movilidad Grado 1"]}),c.jsxs("li",{className:"flex items-center",children:[c.jsx("span",{className:"w-4 h-4 rounded-sm mr-2 bg-mobilidade-grado2"})," Movilidad Grado 2"]}),c.jsxs("li",{className:"flex items-center",children:[c.jsx("span",{className:"w-4 h-4 rounded-sm mr-2 bg-mobilidade-grado3"})," Movilidad Grado 3"]})]})]}),c.jsxs("div",{children:[c.jsx("h5",{className:"font-bold mb-1 text-raspberry-900",children:"Restauraciones"}),c.jsxs("ul",{className:"space-y-1",children:[c.jsxs("li",{className:"flex items-center",children:[c.jsx("span",{className:"w-4 h-4 rounded-sm mr-2 bg-restauracao-resina"})," Resina"]}),c.jsxs("li",{className:"flex items-center",children:[c.jsx("span",{className:"w-4 h-4 rounded-sm mr-2 bg-restauracao-amalgama"})," Amálgama"]}),c.jsxs("li",{className:"flex items-center",children:[c.jsx("span",{className:"w-4 h-4 rounded-sm mr-2 bg-restauracao-ceramica"})," Cerámica"]})]})]}),c.jsxs("div",{children:[c.jsx("h5",{className:"font-bold mb-1 text-raspberry-900",children:"Otros"}),c.jsxs("ul",{className:"space-y-1",children:[c.jsxs("li",{className:"flex items-center",children:[c.jsx("span",{className:"w-4 h-4 rounded-sm mr-2 bg-selante"})," Sellante"]}),c.jsxs("li",{className:"flex items-center",children:[c.jsx("span",{className:"w-4 h-4 rounded-sm mr-2 bg-default-fill border border-gray-300"})," Sano / Limpiar"]})]})]})]})]}),nt={raspberry900:"#3D0A2E",carie:"#FF5C5C",restauracaoResina:"#66D7D7",restauracaoAmalgama:"#708090",restauracaoCeramica:"#FFDAB9",selante:"#A0DA8C",ausente:"#D3D3D3",implante:"#9370DB",coroa:"#FFD700",endodontia:"#FF8C00",fratura:"#FF6347",mobilidadeGrado1:"#FFA07A",mobilidadeGrado2:"#FF7F50",mobilidadeGrado3:"#FF4500",selectedBorder:"#2980b9",defaultStroke:"#616161",defaultFill:"#FFFFFF"},rc=[{num:18,pos:"superior-derecho",type:"molar"},{num:17,pos:"superior-derecho",type:"molar"},{num:16,pos:"superior-derecho",type:"molar"},{num:15,pos:"superior-derecho",type:"premolar"},{num:14,pos:"superior-derecho",type:"premolar"},{num:13,pos:"superior-derecho",type:"canino"},{num:12,pos:"superior-derecho",type:"incisivo-lateral"},{num:11,pos:"superior-derecho",type:"incisivo-central"},{num:21,pos:"superior-izquierdo",type:"incisivo-central"},{num:22,pos:"superior-izquierdo",type:"incisivo-lateral"},{num:23,pos:"superior-izquierdo",type:"canino"},{num:24,pos:"superior-izquierdo",type:"premolar"},{num:25,pos:"superior-izquierdo",type:"premolar"},{num:26,pos:"superior-izquierdo",type:"molar"},{num:27,pos:"superior-izquierdo",type:"molar"},{num:28,pos:"superior-izquierdo",type:"molar"},{num:38,pos:"inferior-izquierdo",type:"molar"},{num:37,pos:"inferior-izquierdo",type:"molar"},{num:36,pos:"inferior-izquierdo",type:"molar"},{num:35,pos:"inferior-izquierdo",type:"premolar"},{num:34,pos:"inferior-izquierdo",type:"premolar"},{num:33,pos:"inferior-izquierdo",type:"canino"},{num:32,pos:"inferior-izquierdo",type:"incisivo-lateral"},{num:31,pos:"inferior-izquierdo",type:"incisivo-central"},{num:41,pos:"inferior-derecho",type:"incisivo-central"},{num:42,pos:"inferior-derecho",type:"incisivo-lateral"},{num:43,pos:"inferior-derecho",type:"canino"},{num:44,pos:"inferior-derecho",type:"premolar"},{num:45,pos:"inferior-derecho",type:"premolar"},{num:46,pos:"inferior-derecho",type:"molar"},{num:47,pos:"inferior-derecho",type:"molar"},{num:48,pos:"inferior-derecho",type:"molar"}],d5={molar:["oclusal","mesial","distal","vestibular","lingual"],premolar:["oclusal","mesial","distal","vestibular","lingual"],canino:["incisal","mesial","distal","vestibular","lingual"],"incisivo-lateral":["incisal","mesial","distal","labial","palatina"],"incisivo-central":["incisal","mesial","distal","labial","palatina"]},h5=(t,e)=>{let o=0,a=0;t>=11&&t<=18?(o=(18-t)*45+8*45,a=0):t>=21&&t<=28?(o=(t-21)*45,a=0):t>=31&&t<=38?(o=(t-31)*45,a=45*2):t>=41&&t<=48&&(o=(48-t)*45+8*45,a=45*2);const l={};l[`tooth-${t}`]={path:`M${o},${a} h30 v30 h-30 Z`,surfaces:{}};const d=d5[e];if(d){const h=d.includes("oclusal")?"oclusal":"incisal";l[`tooth-${t}`].surfaces[h]=`M${o+10},${a+10} h10 v10 h-10 Z`,l[`tooth-${t}`].surfaces.mesial=`M${o},${a+10} h10 v10 h-10 Z`,l[`tooth-${t}`].surfaces.distal=`M${o+30-10},${a+10} h10 v10 h-10 Z`;const m=d.includes("labial")?"labial":"vestibular";l[`tooth-${t}`].surfaces[m]=`M${o+10},${a} h10 v10 h-10 Z`;const p=d.includes("palatina")?"palatina":"lingual";l[`tooth-${t}`].surfaces[p]=`M${o+10},${a+30-10} h10 v10 h-10 Z`}return l},Dw=({initialData:t,onChange:e,readOnly:r=!1})=>{const[s,n]=N.useState(t||{}),[i,o]=N.useState(null),[a,l]=N.useState(!1),[d,h]=N.useState({x:0,y:0}),m=N.useRef(null);N.useEffect(()=>{n(t||{})},[t]);const p=N.useCallback(E=>{const D={};for(const P in E)if(E.hasOwnProperty(P)){const O={...E[P]};O.superficies&&Object.keys(O.superficies).length===0&&delete O.superficies,Object.keys(O).length>0&&(D[P]=O)}n(D),e(D)},[e]),x=(E,D)=>{if(r)return;E.stopPropagation(),o(D),l(!0);const P=E.currentTarget.getBoundingClientRect();h({x:P.left+window.scrollX,y:P.top+window.scrollY+P.height})},b=(E,D)=>{var I;if(!i)return;const P=i.split("-surface-"),O=P[0].replace("tooth-",""),B=P.length>1?P[1]:null,M={...s};M[O]||(M[O]={superficies:{}}),M[O].superficies||(M[O].superficies={}),E==="sano"?B?delete M[O].superficies[B]:delete M[O]:E==="mobilidade"?isSurface||(M[O].mobilidade=D.grado):isSurface?(M[O].superficies[B]={estado:E,material:D==null?void 0:D.material},["ausente","implante","coroa","protese"].includes(((I=M[O])==null?void 0:I.estado_geral)||"")&&delete M[O].estado_geral):(M[O].estado_geral=E,["ausente","implante","coroa","protese"].includes(E)&&(M[O].superficies={},M[O].mobilidade=void 0)),p(M),l(!1),o(null)},k=(E,D)=>{var de;const P=s[E];let O,B,M=nt.defaultStroke,I=.5,H=nt.defaultFill,ce="block";switch(D&&((de=P==null?void 0:P.superficies)!=null&&de[D])?(O=P.superficies[D].estado,B=P.superficies[D].material):!D&&(P!=null&&P.estado_geral)&&(O=P.estado_geral),!D&&(P==null?void 0:P.estado_geral)==="ausente"?H=nt.ausente:D&&(P==null?void 0:P.estado_geral)==="ausente"&&(ce="none"),O){case"carie":H=nt.carie;break;case"restauracao":B==="resina"?H=nt.restauracaoResina:B==="amalgama"?H=nt.restauracaoAmalgama:B==="ceramica"&&(H=nt.restauracaoCeramica);break;case"selante":H=nt.selante;break;case"implante":H=nt.implante;break;case"coroa":H=nt.coroa;break;case"protese":H=nt.defaultStroke;break}if(!D&&(P!=null&&P.mobilidade))switch(P.mobilidade){case"grado1":M=nt.mobilidadeGrado1,I=1.5;break;case"grado2":M=nt.mobilidadeGrado2,I=2;break;case"grado3":M=nt.mobilidadeGrado3,I=2.5;break}const we=D?`tooth-${E}-surface-${D}`:`tooth-${E}`;return i===we&&!r&&(M=nt.selectedBorder,I=2),{fill:H,stroke:M,strokeWidth:I,display:ce}};N.useEffect(()=>{const E=D=>{m.current&&!m.current.contains(D.target)&&(l(!1),o(null))};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]);const w=rc.reduce((E,D)=>{const P=h5(D.num,D.type);return{...E,...P}},{}),v=rc.reduce((E,D)=>{const P=w[`tooth-${D.num}`];if(!P)return E;const O=P.path.split(" "),B=parseFloat(O[0].replace("M","")),M=parseFloat(O[1].replace("h",""));return Math.max(E,B+M)},0),_=rc.reduce((E,D)=>{const P=w[`tooth-${D.num}`];if(!P)return E;const O=P.path.split(" "),B=parseFloat(O[0].split(",")[1]),M=parseFloat(O[2].replace("v",""));return Math.max(E,B+M)},0),S=v+50,C=_+50;return c.jsxs("div",{ref:m,className:"odontograma-container relative border border-raspberry-100 p-4 rounded-md bg-background shadow-sm",children:[c.jsx("h4",{className:"text-xl font-semibold mb-4 text-raspberry-700",children:"Odontograma Dental"}),!r&&Object.keys(s).length>0&&c.jsx("button",{onClick:()=>p({}),className:"absolute top-4 right-4 px-3 py-1 text-sm rounded-md bg-raspberry-100 text-raspberry-700 hover:bg-raspberry-50 transition-colors duration-200",children:"Limpar Odontograma"}),c.jsx("div",{className:"svg-container overflow-auto w-full",style:{maxHeight:"600px"},children:c.jsx("svg",{viewBox:`0 0 ${S} ${C}`,className:"w-full h-auto",children:rc.map(E=>{const D=w[`tooth-${E.num}`];if(!D)return null;const P=s[E.num],O=(P==null?void 0:P.estado_geral)==="ausente",B=k(E.num),M=parseFloat(D.path.split(" ")[0].replace("M","")),I=parseFloat(D.path.split(" ")[0].split(",")[1]),H=30;return c.jsxs("g",{className:"tooth-group",children:[!O&&D.surfaces&&Object.entries(D.surfaces).map(([ce,we])=>{const de=k(E.num,ce);return de.display==="none"?null:c.jsx("path",{id:`tooth-${E.num}-surface-${ce}`,d:we,onClick:pe=>x(pe,`tooth-${E.num}-surface-${ce}`),fill:de.fill,stroke:de.stroke,strokeWidth:de.strokeWidth,className:`${r?"":"cursor-pointer hover:opacity-80"} transition-opacity duration-100`},`tooth-${E.num}-surface-${ce}`)}),c.jsx("path",{id:`tooth-${E.num}`,d:D.path,onClick:ce=>x(ce,`tooth-${E.num}`),fill:B.fill,stroke:B.stroke,strokeWidth:B.strokeWidth,className:`${r?"":"cursor-pointer hover:opacity-80"} transition-opacity duration-100`}),(P==null?void 0:P.estado_geral)==="ausente"&&c.jsxs(c.Fragment,{children:[c.jsx("line",{x1:M,y1:I,x2:M+H,y2:I+H,stroke:nt.carie,strokeWidth:"2"}),c.jsx("line",{x1:M+H,y1:I,x2:M,y2:I+H,stroke:nt.carie,strokeWidth:"2"})]}),(P==null?void 0:P.estado_geral)==="implante"&&c.jsx("circle",{cx:M+H/2,cy:I+H/2,r:"8",fill:nt.implante}),(P==null?void 0:P.estado_geral)==="endodontia"&&c.jsx("circle",{cx:M+H/2,cy:I+H/2,r:"6",fill:"none",stroke:nt.endodontia,strokeWidth:"2"}),(P==null?void 0:P.estado_geral)==="fractura"&&c.jsxs(c.Fragment,{children:[c.jsx("line",{x1:M+H/4,y1:I+H/4,x2:M+H*3/4,y2:I+H*3/4,stroke:nt.fratura,strokeWidth:"1.5"}),c.jsx("line",{x1:M+H*3/4,y1:I+H/4,x2:M+H/4,y2:I+H*3/4,stroke:nt.fratura,strokeWidth:"1.5"})]}),c.jsx("text",{x:M+H/2,y:I+H+15,fontSize:"12",textAnchor:"middle",fill:nt.raspberry900,children:E.num})]},`tooth-group-${E.num}`)})})}),c.jsx(c5,{isOpen:a,position:d,targetElementId:i,onMarking:b,onClose:()=>{l(!1),o(null)},odontogramState:s}),c.jsx(u5,{}),r&&c.jsx("div",{className:"absolute top-4 right-4 text-xs text-raspberry-900 bg-raspberry-50 px-2 py-1 rounded",children:"Modo Visualização"})]})},f5=({patientId:t,isOpen:e,onClose:r,onSaved:s,initialEntryData:n})=>{const i=!!n,[o,a]=N.useState({fecha_consulta:new Date().toISOString().split("T")[0],doctor_id:"",motivo_consulta:"",diagnostico:"",tratamiento_realizado:"",observaciones:"",examen_intrabucal:"",plan_tratamiento:"",proxima_cita_sugerida:"",recordatorios_especiales:"",categoria_servico:""}),[l,d]=N.useState({}),[h,m]=N.useState([]),[p,x]=N.useState([]),[b,k]=N.useState(!1);N.useEffect(()=>{e&&n?a({...n,fecha_consulta:n.fecha_consulta.split("T")[0],proxima_cita_sugerida:n.proxima_cita_sugerida||"",categoria_servico:n.categoria_servico||""}):e&&!n&&(a({fecha_consulta:new Date().toISOString().split("T")[0],doctor_id:"",motivo_consulta:"",diagnostico:"",tratamiento_realizado:"",observaciones:"",examen_intrabucal:"",plan_tratamiento:"",proxima_cita_sugerida:"",recordatorios_especiales:"",categoria_servico:""}),d({}))},[e,n]),N.useEffect(()=>{e&&(async()=>{try{const{data:C,error:E}=await ge.from("medicos").select("id, nombre").eq("activo",!0).order("nombre");if(E)throw E;m(C||[])}catch(C){console.error("Error fetching doctors:",C),ee.error("Erro ao carregar lista de médicos.")}})()},[e]),N.useEffect(()=>{e&&(async()=>{try{const{data:C,error:E}=await ge.from("servicios_dentales").select("id, nombre_categoria").order("nombre_categoria");if(E)throw E;x(C||[])}catch(C){console.error("Error fetching categories:",C),ee.error("Erro ao carregar categorias de servicio.")}})()},[e]);const w=S=>{const{name:C,value:E}=S.target;a(D=>({...D,[C]:E}))},v=N.useCallback(S=>{d(S)},[]),_=async S=>{S.preventDefault(),k(!0);try{const{medicos:C,...E}=o,D={...E,paciente_id:t,doctor_id:o.doctor_id||null,proxima_cita_sugerida:o.proxima_cita_sugerida===""?null:o.proxima_cita_sugerida,categoria_servico:o.categoria_servico===""?null:o.categoria_servico};let P=null;if(i&&(n!=null&&n.id)){const{error:O}=await ge.from("historial_clinico").update(D).eq("id",n.id);P=O,P||ee.success("Entrada de historial atualizada com sucesso!")}else{const{error:O}=await ge.from("historial_clinico").insert([D]);P=O,P||ee.success("Entrada de historial guardada com sucesso!")}if(P)throw P;i||a({fecha_consulta:new Date().toISOString().split("T")[0],doctor_id:"",motivo_consulta:"",diagnostico:"",tratamiento_realizado:"",observaciones:"",examen_intrabucal:"",plan_tratamiento:"",proxima_cita_sugerida:"",recordatorios_especiales:"",categoria_servico:""}),d({}),s()}catch(C){console.error("Error saving history entry:",C),ee.error(`Erro ao guardar entrada: ${C.message}`)}finally{k(!1)}};return e?c.jsx("div",{className:"fixed inset-0 bg-raspberry-700 bg-opacity-80 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[95vh] overflow-hidden flex flex-col transform transition-all duration-300 scale-100 border border-raspberry-100",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-raspberry-100 bg-gradient-to-r from-raspberry-700 to-raspberry-900 flex items-center justify-between flex-shrink-0",children:[c.jsxs("h3",{className:"text-lg font-medium text-white flex items-center",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),i?"Editar Entrada do Historial Clínico":"Adicionar Entrada ao Historial Clínico"]}),c.jsx("button",{onClick:r,disabled:b,className:"text-white hover:text-raspberry-100 transition-colors duration-200 disabled:opacity-50",children:c.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"px-6 py-4 overflow-y-auto flex-grow",children:c.jsxs("form",{onSubmit:_,className:"space-y-6",id:"history-entry-form",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fecha_consulta",className:"block text-sm font-medium text-raspberry-700",children:"Data da Consulta *"}),c.jsx("input",{type:"date",id:"fecha_consulta",name:"fecha_consulta",value:o.fecha_consulta,onChange:w,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-500 focus:ring-raspberry-500 sm:text-sm transition-colors duration-200 p-2",required:!0,disabled:b})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"doctor_id",className:"block text-sm font-medium text-raspberry-700",children:"Médico Responsável"}),c.jsxs("select",{id:"doctor_id",name:"doctor_id",value:o.doctor_id||"",onChange:w,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-500 focus:ring-raspberry-500 sm:text-sm transition-colors duration-200 p-2 bg-white",disabled:b,children:[c.jsx("option",{value:"",children:"Selecione um médico..."}),h.map(S=>c.jsx("option",{value:S.id,children:S.nombre},S.id))]})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"categoria_servico",className:"block text-sm font-medium text-raspberry-900",children:"Categoria de la consulta"}),c.jsxs("select",{id:"categoria_servico",name:"categoria_servico",value:o.categoria_servico,onChange:w,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-500 focus:ring-raspberry-500 sm:text-sm transition-colors duration-200 p-2 bg-white",disabled:b,children:[c.jsx("option",{value:"",children:"Selecione uma categoria..."}),p.map(S=>c.jsx("option",{value:S.id,children:S.nombre_categoria},S.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"motivo_consulta",className:"block text-sm font-medium text-raspberry-700",children:"Motivo da Consulta"}),c.jsx("textarea",{id:"motivo_consulta",name:"motivo_consulta",rows:2,value:o.motivo_consulta,onChange:w,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-500 focus:ring-raspberry-500 sm:text-sm transition-colors duration-200 p-2",disabled:b})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"diagnostico",className:"block text-sm font-medium text-raspberry-700",children:"Diagnóstico"}),c.jsx("textarea",{id:"diagnostico",name:"diagnostico",rows:3,value:o.diagnostico,onChange:w,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-500 focus:ring-raspberry-500 sm:text-sm transition-colors duration-200 p-2",disabled:b})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"tratamiento_realizado",className:"block text-sm font-medium text-raspberry-700",children:"Tratamento Realizado"}),c.jsx("textarea",{id:"tratamiento_realizado",name:"tratamiento_realizado",rows:3,value:o.tratamiento_realizado,onChange:w,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-500 focus:ring-raspberry-500 sm:text-sm transition-colors duration-200 p-2",disabled:b})]}),c.jsxs("div",{className:"space-y-4 pt-4 border-t border-raspberry-50",children:[c.jsx("h4",{className:"text-md font-semibold text-raspberry-700",children:"Detalhes da Consulta Odontológica"}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"examen_intrabucal",className:"block text-sm font-medium text-raspberry-700",children:"Exame Intrabucal (Tecidos, Higiene, Oclusão)"}),c.jsx("textarea",{id:"examen_intrabucal",name:"examen_intrabucal",rows:3,value:o.examen_intrabucal,onChange:w,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-500 focus:ring-raspberry-500 sm:text-sm transition-colors duration-200 p-2",disabled:b})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"plan_tratamiento",className:"block text-sm font-medium text-raspberry-700",children:"Plano de Tratamento Proposto"}),c.jsx("textarea",{id:"plan_tratamiento",name:"plan_tratamiento",rows:3,value:o.plan_tratamiento,onChange:w,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-500 focus:ring-raspberry-500 sm:text-sm transition-colors duration-200 p-2",disabled:b})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"proxima_cita_sugerida",className:"block text-sm font-medium text-raspberry-700",children:"Próxima Consulta Sugerida"}),c.jsx("input",{type:"date",id:"proxima_cita_sugerida",name:"proxima_cita_sugerida",value:o.proxima_cita_sugerida||"",onChange:w,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-500 focus:ring-raspberry-500 sm:text-sm transition-colors duration-200 p-2",disabled:b})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"recordatorios_especiales",className:"block text-sm font-medium text-raspberry-700",children:"Recordatórios Especiais"}),c.jsx("textarea",{id:"recordatorios_especiales",name:"recordatorios_especiales",rows:1,value:o.recordatorios_especiales,onChange:w,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-500 focus:ring-raspberry-500 sm:text-sm transition-colors duration-200 p-2",disabled:b})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-raspberry-700",children:"Observações Gerais"}),c.jsx("textarea",{id:"observaciones",name:"observaciones",rows:3,value:o.observaciones,onChange:w,className:"mt-1 block w-full rounded-md border-raspberry-100 shadow-sm focus:border-raspberry-500 focus:ring-raspberry-500 sm:text-sm transition-colors duration-200 p-2",disabled:b})]}),c.jsxs("div",{className:"pt-4 border-t border-raspberry-50",children:[c.jsx("h4",{className:"text-md font-semibold text-raspberry-700 mb-3",children:"Odontograma"}),c.jsx(Dw,{initialData:l,onChange:v,readOnly:b})]})]})}),c.jsxs("div",{className:"px-6 py-4 border-t border-raspberry-100 bg-gray-50 flex justify-end space-x-3 flex-shrink-0",children:[c.jsx("button",{type:"button",onClick:r,disabled:b,className:"px-4 py-2 text-sm font-medium text-raspberry-700 bg-raspberry-50 rounded-md hover:bg-raspberry-100 transition-colors duration-200 disabled:opacity-50",children:"Cancelar"}),c.jsxs("button",{type:"submit",form:"history-entry-form",disabled:b,className:"px-6 py-2 text-sm font-medium text-white rounded-md bg-raspberry-500 hover:bg-raspberry-700 transition-all duration-300 transform hover:scale-105 shadow-md disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[b&&c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),b?"A guardar...":i?"Guardar":"Guardar Entrada"]})]})]})}):null},Ee={raspberry50:"bg-raspberry-50",raspberry100:"bg-raspberry-100",raspberry500:"bg-raspberry-500",raspberry200:"bg-raspberry-200",textRaspberry700:"text-raspberry-700",textRaspberry500:"text-raspberry-500",textRaspberry900:"text-raspberry-900",borderRaspberry100:"border-raspberry-100",focusRaspberry500:"focus:border-raspberry-500 focus:ring-raspberry-500",bgRaspberryLight:"bg-[#F0E6ED]"},m5=t=>{const e="/ArkhamDentalPro/";switch(t){case"F":return`${e}avatars/female.png`;case"M":return`${e}avatars/male.png`;default:return`${e}avatars/neutral.png`}},p5=t=>{if(!t)return null;const e=new Date(t),r=new Date;let s=r.getFullYear()-e.getFullYear();const n=r.getMonth()-e.getMonth();return(n<0||n===0&&r.getDate()<e.getDate())&&s--,s},g5=()=>{const{patientId:t}=eN(),[e,r]=N.useState(null),[s,n]=N.useState([]),[i,o]=N.useState([]),[a,l]=N.useState([]),[d,h]=N.useState(!0),[m,p]=N.useState(null),[x,b]=N.useState(!1),[k,w]=N.useState(null),[v,_]=N.useState([]),[S,C]=N.useState({}),[E,D]=N.useState(!1),[P,O]=N.useState(!1),[B,M]=N.useState(null),[I,H]=N.useState(null),ce=_u(),we=()=>{ce("/historial-clinico")},de=N.useCallback(async()=>{var L;if(!t){p("ID do paciente não fornecido na URL."),h(!1);return}h(!0),p(null);try{const{data:F,error:te}=await ge.from("pacientes").select(`id, dni, nombres, apellido_paterno, apellido_materno, fecha_nacimiento, sexo,
                 grupo_sanguineo, alergias, enfermedades_cronicas, medicamentos_actuales,
                 celular, telefono_fijo, correo, direccion, ciudad, distrito, seguro_medico,
                 estado_civil, ocupacion, referencia, historial_dental, activo`).eq("id",t).single();if(te)throw te;r(F);const{data:me,error:Ae}=await ge.from("historial_clinico").select(`
          *,
          medicos ( nombre ),
          categoria_servico:servicios_dentales ( nombre_categoria )
        `).eq("paciente_id",t).order("fecha_consulta",{ascending:!1});if(Ae)throw Ae;n(me||[]);const{data:Ie,error:ur}=await ge.from("paciente_radiografias").select("*").eq("paciente_id",t).order("fecha_subida",{ascending:!1});if(ur){console.error("RLS Error fetching radiografias:",ur),ee.error(`Erro RLS ao carregar radiografias: ${ur.message}. Verifique as políticas de segurança.`);const{data:kr}=await ge.auth.getUser();console.log("Current authenticated user UID (for RLS context):",(L=kr.user)==null?void 0:L.id),console.log("Attempted patientId for fetch:",t),l([])}else l(Ie||[]),console.log("Radiografias fetched successfully:",Ie);const{data:Nt,error:xt}=await ge.from("pacientes_odontogramas").select("*").eq("patient_id",t).order("record_date",{ascending:!1});xt?(console.warn("Could not fetch separate odontogram records, table might not exist or be empty.",xt),o([])):o(Nt||[])}catch(F){console.error("Error general fetching data:",F),p(`Erro ao carregar dados: ${F.message}`),ee.error(`Erro ao carregar dados: ${F.message}`)}finally{h(!1)}},[t]);N.useEffect(()=>{de()},[de]);const pe=L=>{if(L.target.files){const F=Array.from(L.target.files);_(F);const te=F.reduce((me,Ae)=>(me[Ae.name]={fecha:new Date().toISOString().split("T")[0],observaciones:""},me),{});C(te)}},_e=(L,F,te)=>{C(me=>({...me,[L]:{...me[L],[F]:te}}))},X=L=>{_(F=>F.filter(te=>te.name!==L.name)),C(F=>{const te={...F};return delete te[L.name],te})},re=async L=>{var me,Ae;if(L.preventDefault(),v.length===0){ee.error("Nenhum arquivo selecionado para upload.");return}D(!0);let F=0,te=0;try{for(const Ie of v){const ur=Ie.name.split(".").pop(),Nt=`radiografias/${t}/${Date.now()}_${Math.random().toString(36).substring(2,8)}.${ur}`,{error:xt}=await ge.storage.from("archivos_pacientes").upload(Nt,Ie,{cacheControl:"3600",upsert:!1});if(xt){console.error(`Error uploading file ${Ie.name} to Storage:`,xt),ee.error(`Falha ao carregar ${Ie.name}: ${xt.message}`),te++;continue}const{data:kr}=ge.storage.from("archivos_pacientes").getPublicUrl(Nt),er=kr==null?void 0:kr.publicUrl;if(!er){console.error(`Could not get public URL for ${Nt}`),ee.error(`Erro ao obter URL pública para ${Ie.name}.`),te++;continue}const{error:Qr}=await ge.from("paciente_radiografias").insert({paciente_id:t,url:er,file_name:Ie.name,fecha_radiografia:((me=S[Ie.name])==null?void 0:me.fecha)||new Date().toISOString().split("T")[0],observaciones:((Ae=S[Ie.name])==null?void 0:Ae.observaciones)||""});Qr?(console.error(`Erro ao registrar radiografia ${Ie.name} na DB:`,Qr),ee.error(`Falha ao registrar ${Ie.name} na base de dados: ${Qr.message}`),await ge.storage.from("archivos_pacientes").remove([Nt]),te++):F++}F>0&&ee.success(`${F} radiografía(s) cargada(s) y registrada(s) con éxito.`),te>0&&ee.error(`${te} radiografia(s) falhou no upload/registro.`),_([]),C({}),O(!1),de()}catch(Ie){console.error("Error general en el proceso de carga de radiografías.",Ie),ee.error(`Error inesperado al cargar radiografías.: ${Ie.message}`)}finally{D(!1)}},oe=async(L,F)=>{if(window.confirm("¿Está seguro de que desea eliminar esta radiografía? Esta acción es irreversible.")){h(!0);try{const te=F.split("/public/"),me=te.length>1?te[1].substring(te[1].indexOf("/")+1):null;if(!me){console.error("Could not parse storage path from URL for deletion:",F),ee.error("No fue posible determinar la ruta del archivo en el almacenamiento para su eliminación."),h(!1);return}const{error:Ae}=await ge.storage.from("archivos_pacientes").remove([me]);Ae&&console.warn(`Erro ao excluir arquivo do Storage (${me}): ${Ae.message}. Prosseguindo com a exclusão da DB.`);const{error:Ie}=await ge.from("paciente_radiografias").delete().eq("id",L);if(Ie)throw Ie;ee.success("Radiografia excluída com sucesso!"),de()}catch(te){console.error("Error deleting radiografia:",te),ee.error(`Erro ao excluir radiografia: ${te.message}`)}finally{h(!1)}}},xe=()=>{w(null),b(!0)},ve=()=>{b(!1),w(null)},J=L=>{w(L),b(!0)},Q=async L=>{if(window.confirm("Tem certeza que deseja excluir esta entrada do histórico?"))try{h(!0);const{error:F}=await ge.from("historial_clinico").delete().eq("id",L);if(F)throw F;ee.success("Entrada do histórico excluída com sucesso!"),de()}catch(F){console.error("Error deleting history entry:",F),ee.error(`Erro ao excluir entrada do histórico: ${F.message}`)}finally{h(!1)}},U=()=>{ve(),de()};if(d)return c.jsxs("div",{className:"flex justify-center items-center h-64",children:[c.jsx("div",{className:`animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 ${Ee.raspberry500}`}),c.jsx("p",{className:`ml-4 ${Ee.textRaspberry700}`,children:"Carregando..."})]});if(m)return c.jsxs("div",{className:`p-6 text-center text-red-600 ${Ee.raspberry50} rounded-lg shadow`,children:[c.jsx("p",{children:m}),c.jsx(Yc,{to:"/historial-clinico",className:`text-sm ${Ee.textRaspberry700} hover:underline mt-2 inline-block`,children:"Voltar para a seleção de pacientes"})]});if(!e)return c.jsxs("div",{className:`p-6 text-center text-gray-600 ${Ee.raspberry50} rounded-lg shadow`,children:[c.jsx("p",{children:"Paciente não encontrado ou ID inválido."}),c.jsx(Yc,{to:"/historial-clinico",className:`text-sm ${Ee.textRaspberry700} hover:underline mt-2 inline-block`,children:"Voltar para a seleção de pacientes"})]});const be=L=>{var me;const F=(me=L.split(".").pop())==null?void 0:me.toLowerCase(),te="/ArkhamDentalPro/";switch(F){case"pdf":return`${te}icons/pdf-icon.png`;case"doc":case"docx":return`${te}icons/doc-icon.png`;default:return`${te}icons/file-icon.png`}},A=L=>{var te;const F=(te=L.split(".").pop())==null?void 0:te.toLowerCase();return["jpg","jpeg","png","gif","svg","webp"].includes(F||"")};return c.jsxs("div",{className:"container mx-auto p-0 sm:p-4 bg-raspberry-50 min-h-screen font-sans",children:[c.jsxs("div",{className:"sticky top-0 z-10 bg-gradient-to-br from-raspberry-700 to-raspberry-900 text-white shadow-xl rounded-b-xl overflow-hidden mb-6",children:[c.jsxs("div",{className:"p-4 sm:p-6 flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[c.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[c.jsx("img",{src:m5(e.sexo),alt:"Avatar del paciente",className:"w-16 h-16 rounded-full object-cover border-2 border-white shadow-md flex-shrink-0"}),c.jsxs("div",{children:[c.jsxs("h1",{className:"text-2xl sm:text-3xl font-extrabold leading-tight",children:[e.nombres," ",e.apellido_paterno," ",e.apellido_materno]}),c.jsxs("p",{className:"text-lg opacity-90 mt-1",children:["DNI: ",e.dni||"N/A"]}),e.fecha_nacimiento&&c.jsxs("p",{className:"text-md opacity-80",children:[p5(e.fecha_nacimiento)," años"]})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4 w-full sm:w-auto",children:[c.jsxs("button",{onClick:xe,className:`w-full sm:w-auto px-5 py-2.5 text-sm font-semibold ${Ee.textRaspberry700} rounded-lg bg-white hover:${Ee.bgRaspberryLight} transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-raspberry-700 focus:ring-white transform hover:scale-105 shadow-md flex items-center justify-center`,children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Adicionar Entrada"]}),c.jsxs("button",{onClick:we,className:"w-full sm:w-auto px-5 py-2.5 text-sm font-semibold text-white rounded-lg bg-raspberry-500 hover:bg-raspberry-700 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-raspberry-700 focus:ring-white transform hover:scale-105 shadow-md flex items-center justify-center",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Cerrar Paciente"]})]})]}),c.jsxs("div",{className:"bg-white/10 backdrop-blur-sm p-4 sm:p-6 border-t border-white/20 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm font-medium",children:[e.grupo_sanguineo&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("span",{className:"text-red-300 mr-2",children:"●"}),c.jsxs("span",{children:["**Tipo Sanguíneo:** ",e.grupo_sanguineo]})]}),e.alergias&&c.jsxs("div",{className:"flex items-center text-yellow-100",children:[c.jsx("span",{className:"text-yellow-300 mr-2",children:"●"}),c.jsxs("span",{children:["**Alergias:** ",e.alergias]})]}),e.enfermedades_cronicas&&c.jsxs("div",{className:"flex items-center text-blue-100",children:[c.jsx("span",{className:"text-blue-300 mr-2",children:"●"}),c.jsxs("span",{children:["**Enfermedades Crónicas:** ",e.enfermedades_cronicas]})]}),e.medicamentos_actuales&&c.jsxs("div",{className:"flex items-center text-green-100",children:[c.jsx("span",{className:"text-green-300 mr-2",children:"●"}),c.jsxs("span",{children:["**Medicamentos Actuales:** ",e.medicamentos_actuales]})]}),!e.grupo_sanguineo&&!e.alergias&&!e.enfermedades_cronicas&&!e.medicamentos_actuales&&c.jsx("div",{className:"col-span-full text-center text-white/70",children:"No hay información médica crítica registrada para este paciente."})]})]}),c.jsxs("div",{className:`bg-white shadow-xl rounded-lg border ${Ee.borderRaspberry100} p-4 mb-6`,children:[c.jsx("h2",{className:`text-2xl font-bold mb-5 ${Ee.textRaspberry700}`,children:"Historial de Consultas"}),s.length===0?c.jsxs("div",{className:`p-10 text-center text-gray-500 ${Ee.raspberry50} rounded-lg border ${Ee.borderRaspberry100}`,children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`mx-auto h-12 w-12 ${Ee.textRaspberry500} mb-2`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Nenhuma entrada no historial de consultas para este paciente."]}):c.jsx("ul",{className:"divide-y divide-gray-200",children:s.map(L=>{var F,te;return c.jsxs("li",{className:`transition-colors duration-150 hover:${Ee.raspberry50} p-4`,children:[c.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>M(B===L.id?null:L.id),children:[c.jsxs("p",{className:`text-sm font-medium ${Ee.textRaspberry700} truncate`,children:["Consulta: ",new Date(L.fecha_consulta).toLocaleDateString("es-ES")]}),c.jsxs("div",{className:"ml-2 flex-shrink-0 flex space-x-2",children:[c.jsx("p",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${Ee.raspberry100} ${Ee.textRaspberry900}`,children:((F=L.medicos)==null?void 0:F.nombre)||"Médico não especificado"}),c.jsx("p",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${Ee.raspberry200} ${Ee.textRaspberry900}`,children:((te=L.categoria_servico)==null?void 0:te.nombre_categoria)||"Categoria não especificada"}),c.jsx("button",{onClick:me=>{me.stopPropagation(),J(L)},className:"text-gray-500 hover:text-blue-600",title:"Editar Consulta",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),c.jsx("button",{onClick:me=>{me.stopPropagation(),Q(L.id)},className:"text-gray-500 hover:text-red-600",title:"Excluir Consulta",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),c.jsx("div",{className:"mt-2 text-sm text-gray-600",children:c.jsxs("p",{className:"truncate",children:["Motivo: ",L.motivo_consulta||"N/A"]})}),B===L.id&&c.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-md",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Diagnóstico:"})," ",L.diagnostico||"-"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Tratamento:"})," ",L.tratamiento_realizado||"-"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Observações Gerais:"})," ",L.observaciones||"-"]}),L.examen_intrabucal&&c.jsxs("p",{children:[c.jsx("strong",{children:"Exame Intrabucal:"})," ",L.examen_intrabucal]}),L.plan_tratamiento&&c.jsxs("p",{children:[c.jsx("strong",{children:"Plano de Tratamento:"})," ",L.plan_tratamiento]}),L.proxima_cita_sugerida&&c.jsxs("p",{children:[c.jsx("strong",{children:"Próxima Cita Sugerida:"})," ",new Date(L.proxima_cita_sugerida).toLocaleDateString("es-ES")]}),L.recordatorios_especiales&&c.jsxs("p",{children:[c.jsx("strong",{children:"Recordatórios Especiais:"})," ",L.recordatorios_especiales]})]})]},L.id)})})]}),c.jsxs("div",{className:`bg-white shadow-xl rounded-lg border ${Ee.borderRaspberry100} p-4 mb-6`,children:[c.jsxs("div",{className:"flex justify-between items-center mb-5",children:[c.jsx("h2",{className:`text-2xl font-bold ${Ee.textRaspberry700}`,children:"Historial de Radiografias/ Exámenes"}),c.jsxs("button",{onClick:()=>O(!P),className:`px-4 py-2 text-sm font-semibold text-white rounded-lg transition-all duration-300
              ${P?"bg-gray-500 hover:bg-gray-600":"bg-raspberry-500 hover:bg-raspberry-700"}
              focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-raspberry-700 shadow-md flex items-center`,children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),P?"Cerrar Subida":"Adicionar Radiografias"]})]}),c.jsx("div",{className:`overflow-hidden transition-all duration-500 ease-in-out ${P?"max-h-screen opacity-100 mb-6":"max-h-0 opacity-0 mb-0"}`,children:c.jsxs("form",{onSubmit:re,className:"space-y-6 p-6 border border-raspberry-200 rounded-lg bg-raspberry-50",children:[c.jsxs("h3",{className:"text-xl font-bold text-raspberry-700 flex items-center",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2 text-raspberry-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L20 20m-6-10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Subir Nuevas Radiografias"]}),c.jsxs("div",{className:"border-2 border-dashed border-raspberry-300 rounded-lg p-6 text-center hover:border-raspberry-500 transition-colors cursor-pointer relative group",children:[c.jsx("input",{type:"file",id:"radiografiaUpload",multiple:!0,onChange:pe,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:E||d,"aria-label":"Seleccionar archivo(s) de radiografía"}),c.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[c.jsxs("svg",{className:`h-10 w-10 ${Ee.textRaspberry500} group-hover:text-raspberry-700 transition-colors`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 0115.9 6L16 6a3 3 0 011 5.917m-7 0a4 4 0 01-8 0"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 13V9m0 0l3 3m-3-3l-3 3"})]}),c.jsxs("p",{className:`text-md font-semibold ${Ee.textRaspberry700}`,children:["Arrastra y suelta tus archivos aquí, o ",c.jsx("span",{className:"text-raspberry-500 underline group-hover:text-raspberry-700",children:"haz clic para seleccionar"})]}),c.jsx("p",{className:"text-sm text-gray-500",children:"JPG, PNG, SVG, PDF (Max. 5MB por archivo)"})]})]}),v.length>0&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("p",{className:"text-sm font-medium text-raspberry-700 border-b pb-2",children:["Detalles de los archivos a subir (",v.length,"):"]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.map((L,F)=>{var te,me;return c.jsxs("div",{className:"border p-4 rounded-md shadow-sm bg-white relative",children:[c.jsx("button",{type:"button",onClick:()=>X(L),className:"absolute top-2 right-2 text-gray-400 hover:text-red-600 transition-colors",disabled:E||d,title:"Remover archivo",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),c.jsx("p",{className:"font-semibold text-raspberry-800 text-base mb-2 pr-8 truncate",children:L.name}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:`new_rad_fecha_${F}`,className:"block text-xs font-medium text-gray-700 mb-1",children:"Fecha de la Radiografía"}),c.jsx("input",{type:"date",id:`new_rad_fecha_${F}`,value:((te=S[L.name])==null?void 0:te.fecha)||"",onChange:Ae=>_e(L.name,"fecha",Ae.target.value),className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm ${Ee.focusRaspberry500} text-sm p-2`,disabled:E||d})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:`new_rad_observaciones_${F}`,className:"block text-xs font-medium text-gray-700 mb-1",children:"Observaciones"}),c.jsx("textarea",{id:`new_rad_observaciones_${F}`,rows:2,value:((me=S[L.name])==null?void 0:me.observaciones)||"",onChange:Ae=>_e(L.name,"observaciones",Ae.target.value),className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm ${Ee.focusRaspberry500} text-sm p-2`,disabled:E||d})]})]})]},L.name)})})]}),c.jsxs("button",{type:"submit",className:"w-full px-5 py-3 text-base font-semibold text-white rounded-md bg-raspberry-500 hover:bg-raspberry-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center shadow-md",disabled:v.length===0||E||d,children:[E&&c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),E?"Subiendo Radiografía(s)...":`Subir ${v.length>0?v.length:""} Radiografía(s)`]})]})}),a.length===0?c.jsxs("div",{className:`p-10 text-center text-gray-500 ${Ee.raspberry50} rounded-lg border ${Ee.borderRaspberry100}`,children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`mx-auto h-12 w-12 ${Ee.textRaspberry500} mb-2`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L20 20m-6-10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Nenhuma radiografia registrada para este paciente."]}):c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:a.map(L=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white shadow-md flex flex-col group hover:shadow-lg transition-shadow duration-200",children:[c.jsxs("div",{className:"block w-full h-48 overflow-hidden rounded-md border border-gray-300 relative bg-gray-100 flex items-center justify-center",children:[A(L.url)?c.jsx("img",{src:L.url,alt:L.file_name||"Radiografía",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",onError:F=>{F.target.src="/ArkhamDentalPro/placeholders/image-placeholder.png"}}):c.jsx("img",{src:be(L.url),alt:"File Icon",className:"w-24 h-24 object-contain opacity-70"}),c.jsx("button",{onClick:()=>window.open(L.url,"_blank"),className:"absolute inset-0 bg-black bg-opacity-25 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 text-white text-lg font-bold",title:"Ver en nueva pestaña",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),c.jsxs("div",{className:"mt-3 text-sm text-gray-700 flex-grow space-y-1",children:[c.jsx("p",{className:"font-semibold text-raspberry-800 truncate",children:L.file_name}),c.jsxs("p",{children:[c.jsx("strong",{className:"text-gray-800",children:"Fecha Radiografía:"})," ",new Date(L.fecha_radiografia).toLocaleDateString("es-ES")]}),c.jsxs("p",{children:[c.jsx("strong",{className:"text-gray-800",children:"Subido en:"})," ",new Date(L.fecha_subida).toLocaleDateString("es-ES")]}),L.observaciones&&c.jsxs("p",{className:"line-clamp-2",children:[c.jsx("strong",{children:"Observaciones:"})," ",L.observaciones]})]}),c.jsx("div",{className:"flex justify-end mt-4 flex-shrink-0",children:c.jsx("button",{onClick:()=>oe(L.id,L.url),className:"text-gray-500 hover:text-red-600 p-2 rounded-full transition-colors ml-2",title:"Eliminar Radiografía",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},L.id))})]}),c.jsxs("div",{className:`bg-white shadow-xl rounded-lg border ${Ee.borderRaspberry100} p-4 mb-6`,children:[c.jsx("h2",{className:`text-2xl font-bold mb-5 ${Ee.textRaspberry700}`,children:"Historial de Odontogramas"}),i.length===0?c.jsxs("div",{className:`p-10 text-center text-gray-500 ${Ee.raspberry50} rounded-lg border ${Ee.borderRaspberry100}`,children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`mx-auto h-12 w-12 ${Ee.textRaspberry500} mb-2`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Nenhum odontograma registrado (independentemente) para este paciente."]}):c.jsx("ul",{className:"divide-y divide-gray-200",children:i.map(L=>c.jsxs("li",{className:`transition-colors duration-150 hover:${Ee.raspberry50} p-4`,children:[c.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>H(I===L.id?null:L.id),children:[c.jsxs("p",{className:`text-sm font-medium ${Ee.textRaspberry700} truncate`,children:["Odontograma: ",new Date(L.record_date).toLocaleDateString("es-ES")]}),c.jsx("div",{className:"ml-2 flex-shrink-0 flex space-x-2"})]}),c.jsx("div",{className:"mt-2 text-sm text-gray-600",children:c.jsxs("p",{className:"truncate",children:["Notas: ",L.notes||"N/A"]})}),I===L.id&&c.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-md",children:[c.jsx("h4",{className:`text-sm font-medium ${Ee.textRaspberry700} mb-2`,children:"Visualização Detalhada"}),c.jsx(Dw,{initialData:L.odontogram_data,onChange:()=>{},readOnly:!0})]})]},L.id))})]}),x&&t&&c.jsx(f5,{patientId:t,isOpen:x,onClose:ve,onSaved:U})]})};ho.register(Vn,$m,Am,Wa,Ba,ha,da,ws,Im,yw);function y5(){const[t,e]=N.useState(null),[r,s]=N.useState(!0),[n,i]=N.useState(null);return N.useEffect(()=>{(async()=>{const{data:{session:l}}=await ge.auth.getSession();e(l),s(!1)})();const{data:a}=ge.auth.onAuthStateChange((l,d)=>{e(d),s(!1)});return()=>{a==null||a.subscription.unsubscribe()}},[]),N.useEffect(()=>{(async()=>{var a;if((a=t==null?void 0:t.user)!=null&&a.id)try{const{data:l,error:d}=await ge.from("users").select("id, nombre, apellido, activo, role").eq("id",t.user.id).single();if(d)throw d;i(l)}catch(l){console.error("Error fetching user data:",l),$M.error("Error al cargar datos del usuario")}else i(null)})()},[t]),r?c.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-raspberry-50",children:[c.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-raspberry-500"}),c.jsx("p",{className:"ml-4 text-lg font-semibold text-raspberry-700",children:"Cargando..."})]}):c.jsxs(jN,{children:[c.jsx(IM,{position:"top-center",reverseOrder:!1}),c.jsxs(yN,{children:[c.jsx(mr,{path:"/login",element:t?c.jsx(Al,{to:"/",replace:!0}):c.jsx(kO,{})}),c.jsxs(mr,{path:"/*",element:t?c.jsx(SO,{user:n,session:t}):c.jsx(Al,{to:"/login",replace:!0}),children:[c.jsx(mr,{index:!0,element:c.jsx(Al,{to:"/citas",replace:!0})}),c.jsx(mr,{path:"citas",element:c.jsx(a5,{user:n})}),c.jsx(mr,{path:"pacientes",element:c.jsx(PO,{user:n})}),c.jsxs(mr,{path:"historial-clinico",children:[c.jsx(mr,{index:!0,element:c.jsx(l5,{})}),c.jsx(mr,{path:":patientId",element:c.jsx(g5,{})})]}),c.jsx(mr,{path:"doctores",element:c.jsx(jO,{user:n})}),c.jsx(mr,{path:"caja",element:c.jsx(DO,{user:n})}),c.jsx(mr,{path:"*",element:c.jsx(Al,{to:"/citas",replace:!0})})]})]})]})}Uv(document.getElementById("root")).render(c.jsx(N.StrictMode,{children:c.jsx(y5,{})}));export{Xk as g};
